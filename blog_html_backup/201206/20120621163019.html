<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL 使用 nlpbamboo chinesecfg 中文分词</h2>
	<h5 id="">2012-06-21 16:30:19&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201252141010693/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">环境 :&nbsp;<div><pre class="prettyprint"   ><p></p><div><font size="2"   >CentOS 5.x 64bit</font></div><div><font size="2"   >PostgreSQL 9.1.3</font></div><div><font size="2"   >nlpbamboo-1.1.2</font></div><div><font size="2"   >cmake-2.8.8</font></div><div><font size="2"   >CRF++-0.57</font></div><p></p></pre></div><div><div><br><wbr></div></div><div>安装 :&nbsp;</div><div><div>-- cmake</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >tar -zxvf cmake-2.8.8.tar.gz</font></div><div><font size="2"   >cd cmake-2.8.8</font></div><div><font size="2"   >./bootstrap --prefix=/opt/cmake2.8.8</font></div><div><font size="2"   >gmake</font></div><div><font size="2"   >gmake install</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >vi ~/.bash_profile</font></div><div><font size="2"   >export PATH=/opt/cmake2.8.8/bin:$PATH</font></div><div><font size="2"   >. ~/.bash_profile</font></div><p></p></pre></div><div><br></div><div>-- crf</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >tar -zxvf CRF++-0.57.tar.gz</font></div><div><font size="2"   >cd CRF++-0.57</font></div><div><font size="2"   >./configure</font></div><div><font size="2"   >gmake</font></div><div><font size="2"   >gmake install</font></div><p></p></pre></div><div><br></div><div>-- nlpbamboo</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >vi ~/.bash_profile</font></div><div><font size="2"   >export PGHOME=/opt/pgsql</font></div><div><font size="2"   >export PATH=$PGHOME/bin:/opt/bamboo/bin:/opt/cmake2.8.8/bin:$PATH:.</font></div><div><font size="2"   >export LD_LIBRARY_PATH=$PGHOME/lib:/lib64:/usr/lib64:/usr/local/lib64:/lib:/usr/lib:/usr/local/lib:.</font></div><div><font size="2"   >. ~/.bash_profile</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >tar -jxvf nlpbamboo-1.1.2.tar.bz2</font></div><div><font size="2"   >cd nlpbamboo-1.1.2</font></div><div><font size="2"   >mkdir build</font></div><div><font size="2"   >cd build</font></div><div><font size="2"   >cmake .. -DCMAKE_BUILD_TYPE=release</font></div><div><font size="2"   >gmake all</font></div><div><font size="2"   >gmake install</font></div><p></p></pre></div><div>-- 加入lib库链接.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >echo "/usr/lib" &gt;&gt;/etc/ld.so.conf (这个命令是bamboo对应的动态链接库)</font></div><div><font size="2"   >echo "/usr/local/lib" &gt;&gt;/etc/ld.so.conf (这个命令是CRF对应的动态链接库)</font></div><div><font size="2"   >ldconfig -f /etc/ld.so.conf</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >-- 测试是否加入正常</font></div><div><font size="2"   >ldconfig -p|grep bambo</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libbamboo.so.2 (libc6,x86-64) =&gt; /usr/lib/libbamboo.so.2</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libbamboo.so (libc6,x86-64) =&gt; /usr/lib/libbamboo.so</font></div><div><font size="2"   >ldconfig -p|grep crf</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libcrfpp.so.0 (libc6,x86-64) =&gt; /usr/local/lib/libcrfpp.so.0</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libcrfpp.so (libc6,x86-64) =&gt; /usr/local/lib/libcrfpp.so</font></div><p></p></pre></div><div>-- 加入索引</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >cd /opt/bamboo</font></div><div><font size="2"   >wget http://nlpbamboo.googlecode.com/files/index.tar.bz2</font></div><div><font size="2"   >tar -jxvf index.tar.bz2</font></div><p></p></pre></div><div><br></div><div>-- 编译PostgreSQL支持模块.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >cd /opt/bamboo/exts/postgres/chinese_parser</font></div><div><font size="2"   >make</font></div><div><font size="2"   >make install</font></div><div><font size="2"   >touch $PGHOME/share/tsearch_data/chinese_utf8.stop</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >cd /opt/bamboo/exts/postgres/pg_tokenize</font></div><div><font size="2"   >make</font></div><div><font size="2"   >make install</font></div><p></p></pre></div><div><br></div><div>-- 安装PostgreSQL支持模块</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >su - postgres</font></div><div><font size="2"   >cd $PGHOME/share/contrib/</font></div><div><font size="2"   >psql -h 127.0.0.1 postgres postgres -f chinese_parser.sql</font></div><div><font size="2"   >psql -h 127.0.0.1 postgres postgres -f pg_tokenize.sql</font></div><p></p></pre></div><div>-- 查看全文检索配置中加入了chinesecfg的配置.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# select * from pg_ts_config;</font></div><div><font size="2"   >&nbsp; cfgname &nbsp; | cfgnamespace | cfgowner | cfgparser&nbsp;</font></div><div><font size="2"   >------------+--------------+----------+-----------</font></div><div><font size="2"   >&nbsp;simple &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;danish &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;dutch &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;english &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;finnish &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;french &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;german &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;hungarian &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;italian &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;norwegian &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;portuguese | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;romanian &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;russian &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;spanish &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;swedish &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;turkish &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; &nbsp;3722</font></div><div><font size="2"   >&nbsp;chinesecfg | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11 | &nbsp; &nbsp; &nbsp; 10 | &nbsp; &nbsp; 33463</font></div><div><font size="2"   >(17 rows)</font></div><p></p></pre></div><div><br></div><div>-- 测试tokenize分词函数</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# select * from tokenize('你好我是中国人');</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; tokenize &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >---------------------</font></div><div><font size="2"   >&nbsp;你好 我 是 中国 人&nbsp;</font></div><div><font size="2"   >(1 row)</font></div><div><font size="2"   >postgres=# select * from tokenize('中华人民共和国');</font></div><div><font size="2"   >&nbsp; &nbsp; tokenize &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >-----------------</font></div><div><font size="2"   >&nbsp;中华人民共和国&nbsp;</font></div><div><font size="2"   >(1 row)</font></div><div><font size="2"   >postgres=# select * from tokenize('百度');</font></div><div><font size="2"   >&nbsp;tokenize&nbsp;</font></div><div><font size="2"   >----------</font></div><div><font size="2"   >&nbsp;百度&nbsp;</font></div><div><font size="2"   >(1 row)</font></div><div><font size="2"   >postgres=# select * from tokenize('谷歌');</font></div><div><font size="2"   >&nbsp;tokenize&nbsp;</font></div><div><font size="2"   >----------</font></div><div><font size="2"   >&nbsp;谷歌&nbsp;</font></div><div><font size="2"   >(1 row)</font></div><div><font size="2"   >postgres=# select * from tokenize('今年是龙年');</font></div><div><font size="2"   >&nbsp; &nbsp;tokenize &nbsp; &nbsp;</font></div><div><font size="2"   >---------------</font></div><div><font size="2"   >&nbsp;今年 是 龙年&nbsp;</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div><br></div><div>-- 测试全文检索类型转换函数</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# select * from to_tsvector('chinesecfg','你好,我是中国人.目前在杭州斯凯做数据库相关的工作.');</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; to_tsvector &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >------------------------------------------------------------------------------------------------------------------------------------</font></div><div><font size="2"   >-------</font></div><div><font size="2"   >&nbsp;',':2 '.':7,17 '中国':5 '人':6 '你好':1 '做':12 '在':9 '工作':16 '我':3 '数据库':13 '斯凯':11 '是':4 '杭州':10 '的':15 '目前':8 '相</font></div><div><font size="2"   >关':14</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div></div><div><br></div><div>全文检索类型适合场景, 大内容的模糊查询, 非精确的模糊匹配 :&nbsp;</div><div>例如, title和content分别保存标题和正文的原始内容, ts_title和ts_content用来保存分词后的全文检索内容.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# create table blog (id serial primary key, user_id int8, title text, content text, ts_title tsvector, ts_content tsvector);</font></div><div><font size="2"   >NOTICE: &nbsp;CREATE TABLE will create implicit sequence "blog_id_seq" for serial column "blog.id"</font></div><div><font size="2"   >NOTICE: &nbsp;CREATE TABLE / PRIMARY KEY will create implicit index "blog_pkey" for table "blog"</font></div><div><font size="2"   >CREATE TABLE</font></div><p></p></pre></div><div><br></div><div>在tsvector的字段上可以使用gist索引, 或者gin索引, 加速检索.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# create index idx_blog_ts1 on blog using gist(ts_title);</font></div><div><font size="2"   >CREATE INDEX</font></div><div><font size="2"   >postgres=# create index idx_blog_ts2 on blog using gist(ts_content);</font></div><div><font size="2"   >CREATE INDEX</font></div><p></p></pre></div><div><br></div><div>插入测试内容 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# insert into blog (user_id,title,content,ts_title,ts_content) values (1,'PostgreSQL QQ群 FAQ贴 - 1','QQ群里一些网友问到的 问题，收集如下 :&nbsp;</font></div><div><font size="2"   >目录 :&nbsp;</font></div><div><font size="2"   >1. PostgreSQL存储过程中自定义异常怎么弄?</font></div><div><font size="2"   >2. PostgreSQL9.1的同步事务在某些情况下用户主动cancel等待sync replication standby 的acknowledge,实际本地已提交.</font></div><div><font size="2"   >3. PostgreSQL如何满足已经存在则更新, 不存在则插入的需求.</font></div><div><font size="2"   >4. copy和insert哪个效率高?</font></div><div><font size="2"   >5. PostgreSQL能不能限制数据库的大小?</font></div><div><font size="2"   >6. 怎样给一个用户授予只读角色?</font></div><div><font size="2"   >7. 不想让数据插入到某个表应该怎么做?</font></div><div><font size="2"   >8. PostgreSQL 中有没有rownum这样的，显示结果集的序号?</font></div><div><font size="2"   >9. PostgreSQL 函数中如何使用savepoint?</font></div><div><font size="2"   >10.请问, pg脚本有宏替换, 计算字符串公式的能力? 类似 a=2 ; evaluate(5-a) ; 如果将这个值赋值给这个变量呢? zresult = evaluate(5-a) ;</font></div><div><font size="2"   >11.UPDATE A表 FROM B表 ?</font></div><div><font size="2"   >12. hex转decimal</font></div><div><font size="2"   >13. PostgreSQL 时区.',to_tsvector('chinesecfg','PostgreSQL QQ群 FAQ贴 - 1'),to_tsvector('chinesecfg','QQ群里一些网友问到的问题，收集如下 :&nbsp;</font></div><div><font size="2"   >目录 :&nbsp;</font></div><div><font size="2"   >1. PostgreSQL存储过程中自定义异常怎么弄?</font></div><div><font size="2"   >2. PostgreSQL9.1的同步事务在某些情况下用户主动cancel等待sync replication standby 的acknowledge,实际本地已提交.</font></div><div><font size="2"   >3. PostgreSQL如何满足已经存在则更新, 不存在则插入的需求.</font></div><div><font size="2"   >4. copy和insert哪个效率高?</font></div><div><font size="2"   >5. PostgreSQL能不能限制数据库的大小?</font></div><div><font size="2"   >6. 怎样给一个用户授予只读角色?</font></div><div><font size="2"   >7. 不想让数据插入到某个表应该怎么做?</font></div><div><font size="2"   >8. PostgreSQL 中有没有rownum这样的，显示结果集的序号?</font></div><div><font size="2"   >9. PostgreSQL 函数中如何使用savepoint?</font></div><div><font size="2"   >10.请问, pg脚本有宏替换, 计算字符串公式的能力? 类似 a=2 ; evaluate(5-a) ; 如果将这个值赋值给这个变量呢? zresult = evaluate(5-a) ;</font></div><div><font size="2"   >11.UPDATE A表 FROM B表 ?</font></div><div><font size="2"   >12. hex转decimal</font></div><div><font size="2"   >13. PostgreSQL 时区.'));</font></div><p></p></pre></div><div><br></div><div>分词查询测试 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# select ts_content from blog;</font></div><div><div><font size="2"   >'(':155,171 ')':157,173 ',':46,60,135,142 '.':28,51,67,189 '1':29 '1.':15 '10.':133 '11.update':175 '12.':182 '13.':186 '2':152 '2.</font></div><div><font size="2"   >':26 '3.':52 '4.':68 '5-a':156,172 '5.':76 '6.':86 '7.':96 '8.':109 '9.':125 ':':12,14 ';':153,158,174 '=':151,169 '?':25,75,85,95,1</font></div><div><font size="2"   >08,124,132,148,167,181 'a':150,176 'acknowledge':45 'b':179 'cancel':39 'copy':69 'decimal':185 'evaluate':154,170 'from':178 'hex':</font></div><div><font size="2"   >183 'insert':71 'pg':136 'postgresql':16,53,77,110,126,187 'postgresql9':27 'qq':1 'replication':42 'rownum':115 'savepoint':131 'st</font></div><div><font size="2"   >andby':43 'sync':41 'zresult':168 '一个':89 '一些':3 '下':36 '不':61,79,97 '中':19,111,128 '主动':38 '事务':32 '使用':130 '值赋值':1</font></div><div><font size="2"   >62 '做':107 '公式':145 '函数':127 '则':58,63 '到':6,102 '变量':165 '只':92 '同步':31 '呢':166 '和':70 '哪个':72 '在':33 '大小':84 '</font></div><div><font size="2"   >下':11 '如何':54,129 '如果':159 '字符串':144 '存储':17 '存在':57,62 '宏替':140 '定义':21 '实际':47 '将':160 '已':49 '已经':56 '序号'</font></div><div><font size="2"   >:123 '应该':105 '异常':22 '弄':24 '怎么':23,106 '怎样':87 '情况':35 '想':98 '换':141 '授予':91 '提交':50 '插入':64,101 '收集':10 '效</font></div><div><font size="2"   >率':73 '数据':100 '数据库':82 '时区':188 '显示':119 '更新':59 '有':112,114,139 '本':138 '本地':48 '某个':103 '某些':34 '没':113 '满</font></div><div><font size="2"   >':55 '用户':37,90 '的':7,30,44,65,83,117,122,146 '目录':13 '等待':40 '类似':149 '结果':120 '给':88,163 '网友':4 '群里':2 '能':78,80&nbsp;</font></div><div><font size="2"   >'能力':147 '脚':137 '自':20 '表':104,177,180 '角色':94 '计算':143 '让':99 '请问':134 '读':93 '转':184 '过程':18 '这个':161,164 '这样</font></div><div><font size="2"   >':116 '问':5 '问题':8 '限制':81 '集':121 '需求':66 '高':74 '，':9,118</font></div></div><p></p></pre></div><div><br></div><div>从上面的全文检索类型字段ts_content可以看出, 函数 和 表 在这分词里面, 使用 函数 和 表 作为匹配条件查询时将返回结果, 换个不存在的查询则没有结果 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >postgres=# select user_id,title from blog where ts_content @@ to_tsquery('函数 &amp; 中国');</font></div><div><font size="2"   >&nbsp;user_id | title&nbsp;</font></div><div><font size="2"   >---------+-------</font></div><div><font size="2"   >(0 rows)</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >postgres=# select user_id,title from blog where ts_content @@ to_tsquery('函数 &amp; 表');</font></div><div><font size="2"   >&nbsp;user_id | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; title &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >---------+---------------------------</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;1 | PostgreSQL QQ群 FAQ贴 - 1</font></div></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div>查看执行计划 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# explain select user_id,title from blog where ts_content @@ to_tsquery('函数 &amp; 中国');</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; QUERY PLAN &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >--------------------------------------------------------------------------</font></div><div><font size="2"   >&nbsp;Index Scan using idx_blog_ts2 on blog &nbsp;(cost=0.00..4.27 rows=1 width=40)</font></div><div><font size="2"   >&nbsp; &nbsp;Index Cond: (ts_content @@ to_tsquery('函数 &amp; 中国'::text))</font></div><div><font size="2"   >(2 rows)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres=# explain select user_id,title from blog where ts_content @@ to_tsquery('函数 &amp; 表');</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; QUERY PLAN &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >--------------------------------------------------------------------------</font></div><div><font size="2"   >&nbsp;Index Scan using idx_blog_ts2 on blog &nbsp;(cost=0.00..4.27 rows=1 width=40)</font></div><div><font size="2"   >&nbsp; &nbsp;Index Cond: (ts_content @@ to_tsquery('函数 &amp; 表'::text))</font></div><div><font size="2"   >(2 rows)</font></div><p></p></pre></div><br><div>【参考】</div><div><a rel="nofollow" href="http://code.google.com/p/nlpbamboo/"   >http://code.google.com/p/nlpbamboo/</a> </div><div><a rel="nofollow" href="http://crfpp.googlecode.com/svn/trunk/doc/index.html#download"   >http://crfpp.googlecode.com/svn/trunk/doc/index.html#download</a> </div><div><a rel="nofollow" href="http://www.cmake.org/"   >http://www.cmake.org/</a> </div><a rel="nofollow" href="http://www.postgresql.org/docs/9.2/static/datatype-textsearch.html"   >http://www.postgresql.org/docs/9.2/static/datatype-textsearch.html</a> <div><a rel="nofollow" href="http://www.postgresql.org/docs/9.2/static/functions-textsearch.html"   >http://www.postgresql.org/docs/9.2/static/functions-textsearch.html</a> </div><br><div>[其他分词工具]</div><div>1.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="http://bbs.pgsqldb.com/client/post_show.php?zt_auto_bh=57211"   >http://bbs.pgsqldb.com/client/post_show.php?zt_auto_bh=57211</a></div><div>2.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="http://amutu.com/blog/zhparser/"   >http://amutu.com/blog/zhparser/</a></div><div>3.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="https://github.com/amutu/zhparser"   >https://github.com/amutu/zhparser</a></div></div>
	</div>
	<h3>评论</h3>
	<div class="" id="" style="padding:0 20px;">
			<div id="">
				<h5 id="">heibao326 - 2015-04-14 15:15:34</h5>
				<div>德哥 &nbsp;这个<span style=""  >nlpbamboo现在下载不了了，能不能分享个安装包哈，嘿嘿</span><img src="http://b.bst.126.net/common/portrait/face/preview/face1.gif"  ></div>
			</div>
			<div style="padding-left:40px;">
				<h5 id="">德哥@Digoal 回复 heibao326 - 2015-04-14 15:15:34</h5>
				<div style="width:600px;">那就用这个吧,&nbsp;http://blog.163.com/digoal@126/blog/static/163877040201422410175698/</div>
			</div>
			<div id="">
				<h5 id="">showdy1984 - 2012-06-21 17:00:07</h5>
				<div>效率好吗？</div>
			</div>
			<div style="padding-left:40px;">
				<h5 id="">德哥@Digoal 回复 showdy1984 - 2012-06-21 17:00:07</h5>
				<div style="width:600px;">不错<br><br></div>
			</div>
			<div id="">
				<h5 id="">francs - 2012-06-21 17:52:09</h5>
				<div>好东西。</div>
			</div>
			<div id="">
				<h5 id="">francs - 2012-06-21 16:38:45</h5>
				<div>德哥V5</div>
			</div>
	</div>
</div>
</body>
</html>