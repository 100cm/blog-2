<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">在PostgreSQL中用线性回归分析linear regression做预测</h2>
	<h5 id="">2015-03-03 15:14:06&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201523112651593/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><span style="line-height: 28px;"   >首选来个线性回归分析linear regression, 最小二乘法least-squares-fit的小故事(取自百度) :&nbsp;</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >1801年，意大利天文学家朱赛普・皮亚齐发现了第一<span style="line-height: 28px;"   >颗小行星谷神星。经过40天的跟踪观测后，由于谷神星运行至太阳背后，使得皮亚齐失去了谷神星的位置。随后全世界的科学家利用皮亚齐的观测数据开始寻找谷神星，但是根据大多数人计算的结果来寻找谷神星都没有结果。时年24岁的高斯也计算了谷神星的轨道。奥地利天文学家海因里希・奥尔伯斯根据高斯计算出来的轨道重新发现了谷神星。</span></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >高斯使用的最小二乘法的方法发表于1809年他的著作《天体运动论》中。</font></div><div><font size="2"   >法国科学家勒让德于1806年独立发现“最小二乘法”，但因不为世人所知而默默无闻。</font></div><div><font size="2"   >勒让德曾与高斯为谁最早创立最小二乘法原理发生争执。</font></div><div><font size="2"   >1829年，高斯提供了最小二乘法的优化效果强于其他方法的证明，因此被称为高斯-马尔可夫定理.</font></div><p></p></pre></div><div>&nbsp; &nbsp; &nbsp; 上面的故事说明通过已有数据可以对未来的数据进行预测. 但是预测结果是否准确有不确定因素, 所以需要不断的调整和校验.</div><div>如何做回归分析呢? (取自百度)</div><div><div>研究一个或多个随机变量Y1 ，Y2 ，…，Yi与另一些变量X1、X2，…，Xk之间的关系的统计方法，又称多重回归分析。通常称Y1，Y2，…，Yi为因变量，X1、X2，…，Xk为自变量。回归分析是一类数学模型，特别当因变量和自变量为线性关系时，它是一种特殊的线性模型。最简单的情形是一个自变量和一个因变量，且它们大体上有线性关系，这叫一元线性回归，即模型为Y=a+bX+ε，这里X是自变量，Y是因变量，ε是随机误差，通常假定随机误差的均值为0，方差为σ^2（σ^2大于0）σ^2与X的值无关。若进一步假定随机误差遵从正态分布，就叫做正态线性模型。一般的情形，它有k个自变量和一个因变量，因变量的值可以分解为两部分：一部分是由于自变量的影响，即表示为自变量的函数，其中函数形式已知，但含一些未知参数；另一部分是由于其他未被考虑的因素和随机性的影响，即随机误差。当函数形式为未知参数的线性函数时，称线性回归分析模型；当函数形式为未知参数的非线性函数时，称为非线性回归分析模型。当自变量的个数大于1时称为多元回归，当因变量个数大于1时称为多重回归。</div><div>回归分析的主要内容为：</div><div>①从一组数据出发，确定某些变量之间的定量关系式，即建立数学模型并估计其中的未知参数。估计参数的常用方法是最小二乘法。</div><div>②对这些关系式的可信程度进行检验。</div><div>③在许多自变量共同影响着一个因变量的关系中，判断哪个（或哪些）自变量的影响是显著的，哪些自变量的影响是不显著的，将影响显著的自变量入模型中，而剔除影响不显著的变量，通常用逐步回归、向前回归和向后回归等方法。</div><div>④利用所求的关系式对某一生产过程进行预测或控制。回归分析的应用是非常广泛的，统计软件包使各种回归方法计算十分方便。</div><div>在回归分析中，把变量分为两类。一类是因变量，它们通常是实际问题中所关心的一类指标，通常用Y表示；而影响因变量取值的的另一类变量称为自变量，用X来表示。</div><div>回归分析研究的主要问题是：</div><div>（1）确定Y与X间的定量关系表达式，这种表达式称为回归方程；</div><div>（2）对求得的回归方程的可信度进行检验；</div><div>（3）判断自变量X对因变量Y有无影响；</div><div>（4）利用所求得的回归方程进行预测和控制。</div></div><div><br></div><div>一个例子 :&nbsp;</div><div><div>例如，如果要研究质量和用户满意度之间的因果关系，从实践意义上讲，产品质量会影响用户的满意情况，因此设用户满意度为因变量，记为Y；质量为自变量，记为X。根据图8－3的散点图，可以建立下面的线性关系： Y=A+BX+§</div><div>式中：A和B为待定参数，A为回归直线的截距；B为回归直线的斜率，表示X变化一个单位时，Y的平均变化情况；§为依赖于用户满意度的随机误差项。</div><div>对于经验回归方程： y=0.857+0.836x</div><div>回归直线在y轴上的截距为0.857、斜率0.836，即质量每提高一分，用户满意度平均上升0.836分；或者说质量每提高1分对用户满意度的贡献是0.836分。</div></div><div><br></div><div>&nbsp; &nbsp; &nbsp; 在PostgreSQL中提供了回归分析的一些聚合函数,&nbsp;</div><div><table border="1"   style="margin: 2ex 0px 2ex 2ex; -webkit-box-shadow: rgb(223, 223, 223) 3px 3px 5px; box-shadow: rgb(223, 223, 223) 3px 3px 5px; border-spacing: 0px; border-collapse: collapse; border: 2px solid rgb(167, 198, 223); color: rgb(0, 0, 0); font-family: verdana, sans-serif; font-size: 12.1599998474121px; line-height: normal; background-color: rgb(224, 236, 239);"   ><tbody><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_avgx(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >average of the independent variable (<tt>sum(<tt style="font-style: italic; font-size: 1em;"   >X</tt>)/<tt style="font-style: italic; font-size: 1em;"   >N</tt></tt>)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_avgy(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >average of the dependent variable (<tt>sum(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>)/<tt style="font-style: italic; font-size: 1em;"   >N</tt></tt>)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_count(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>bigint</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >number of input rows in which both expressions are nonnull</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_intercept(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >y-intercept of the least-squares-fit linear equation determined by the (<tt style="font-style: italic;"   >X</tt>,&nbsp;<tt style="font-style: italic;"   >Y</tt>) pairs</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_r2(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >square of the correlation coefficient</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_slope(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >slope of the least-squares-fit linear equation determined by the (<tt style="font-style: italic;"   >X</tt>,&nbsp;<tt style="font-style: italic;"   >Y</tt>) pairs</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(239, 239, 239);"   ><code>regr_sxx(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(239, 239, 239);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(239, 239, 239);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(239, 239, 239);"   ><tt>sum(<tt style="font-style: italic; font-size: 1em;"   >X</tt>^2) - sum(<tt style="font-style: italic; font-size: 1em;"   >X</tt>)^2/<tt style="font-style: italic; font-size: 1em;"   >N</tt></tt>&nbsp;(<span>"sum of squares"</span>&nbsp;of the independent variable)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_sxy(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>sum(<tt style="font-style: italic; font-size: 1em;"   >X</tt>*<tt style="font-style: italic; font-size: 1em;"   >Y</tt>) - sum(<tt style="font-style: italic; font-size: 1em;"   >X</tt>) * sum(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>)/<tt style="font-style: italic; font-size: 1em;"   >N</tt></tt>&nbsp;(<span>"sum of products"</span>&nbsp;of independent times dependent variable)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_syy(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>sum(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>^2) - sum(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>)^2/<tt style="font-style: italic; font-size: 1em;"   >N</tt></tt>&nbsp;(<span>"sum of squares"</span>&nbsp;of the dependent variable)</td></tr></table></div><div>本文会用到如下几个 :&nbsp;</div><div>regr_intercept, 计算截距.</div><div>regr_slope, 计算斜率.</div><div>regr_r2, 计算相关性, 相关性越高, 说明这组数据用于预估的准确度越高.</div><div>下面来举个例子 :&nbsp;</div><div>将最近一年的某个业务的日访问量数据统计放到一张测试表.</div><div>利用这一年的数据进行一元回归分析, 要预测的是因变量, 用作预测的是自变量. 因为要预测的数据未发生, 所以我们可以把时间交错一下, 就可以作为自变量来使用.</div><div>例如下面这组数据, 自变量就是数据下移一行产生的. :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >因变量 | 自变量&nbsp;</font></div><div><div><font size="2"   >&nbsp;48000 | 54624</font></div><div><font size="2"   >&nbsp;47454 | 48000</font></div><div><font size="2"   >&nbsp;56766 | 47454</font></div><div><font size="2"   >&nbsp;60488 | 56766</font></div><div><font size="2"   >&nbsp;58191 | 60488</font></div><div><font size="2"   >&nbsp;57443 | 58191</font></div><div><font size="2"   >&nbsp;54277 | 57443</font></div><div><font size="2"   >&nbsp;55508 | 54277</font></div><div><font size="2"   >&nbsp;52716 | 55508</font></div><div><font size="2"   >&nbsp;63748 | 52716</font></div><div><font size="2"   >&nbsp;43462 | 63748</font></div><div><font size="2"   >&nbsp;44248 | 43462</font></div><div><font size="2"   >&nbsp;40145 | 44248</font></div></div><p></p></pre></div><div>如果影响的因素较多, 需要做多元回归, 你可以选择PostgreSQL R语言插件来分析.</div><div>本文做的是一元回归的例子, 接下来进入测试 :&nbsp;</div><div>创建一张过去365天的某业务的日下载量数据表.</div><div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=&gt; create table test as select row_number() over(order by dt) as rn,cnt from&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(select date(createtime) as dt, count(*) as cnt from tbl_app_download where createtime&gt;=( date(now())-366 ) and createtime&lt;( date(now())-1 ) group by date(createtime)) as t;</font></div><div><font size="2"   >SELECT 365</font></div><p></p></pre></div><div>数据大概是这样的</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >digoal=&gt; select * from test;</font></div></div><div><font size="2"   >....</font></div><div><div><font size="2"   >&nbsp;329 | &nbsp; 36293</font></div><div><font size="2"   >&nbsp;330 | &nbsp; 40886</font></div><div><font size="2"   >&nbsp;331 | &nbsp; 34465</font></div><div><font size="2"   >&nbsp;332 | &nbsp; 30785</font></div><div><font size="2"   >&nbsp;333 | &nbsp; 33318</font></div><div><font size="2"   >&nbsp;334 | &nbsp; 34480</font></div></div><div><font size="2"   >....</font></div><p></p></pre></div></div><div>接下来我们要来测试在不同数据范围内的回归的线性相关性,&nbsp;</div><div>例如最近362天的数据交错后的回归线性相关性.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=&gt; select count(*),regr_r2(t.cnt,test.cnt) from&nbsp;</font></div><div><font size="2"   >(select rn-1 as rn,cnt from test) as t,test where t.rn=test.rn and test.rn&gt;2;</font></div><div><font size="2"   >&nbsp;count | &nbsp; &nbsp; &nbsp;regr_r2 &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >-------+-------------------</font></div><div><font size="2"   >&nbsp; &nbsp;362 | 0.835282212765017</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div>但是如果时间放大到<span style="line-height: 28px;"   >最近363天, 相关性就降低到</span><span style="line-height: 28px;"   >0.32915622582628了</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=&gt; select count(*),regr_r2(t.cnt,test.cnt) from&nbsp;</font></div><div><font size="2"   >(select rn-1 as rn,cnt from test) as t,test where t.rn=test.rn and test.rn&gt;1;</font></div><div><font size="2"   >&nbsp;count | &nbsp; &nbsp; regr_r2 &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >-------+------------------</font></div><div><font size="2"   >&nbsp; &nbsp;363 | 0.32915622582628</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div>我们要不断的尝试来得到更好的相关性, 当获得最高的相关性(接近1)时, 预测数据最准确.</div><div>接下来我们看看以上两个时间段产生的截距和斜率的预测准确度.</div><div>截距</div><div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=&gt; select count(*),regr_intercept(t.cnt,test.cnt) from&nbsp;</font></div><div><font size="2"   >(select rn-1 as rn,cnt from test) as t,test where t.rn=test.rn and test.rn&gt;2;</font></div><div><font size="2"   >&nbsp;count | &nbsp;regr_intercept &nbsp;</font></div><div><font size="2"   >-------+------------------</font></div><div><font size="2"   >&nbsp; &nbsp;362 | 6274.25023499543</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div>斜率</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=&gt; select count(*),regr_slope(t.cnt,test.cnt) from &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >(select rn-1 as rn,cnt from test) as t,test where t.rn=test.rn and test.rn&gt;2;</font></div><div><font size="2"   >&nbsp;count | &nbsp; &nbsp;regr_slope &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >-------+-------------------</font></div><div><font size="2"   >&nbsp; &nbsp;362 | 0.906861594725424</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div></div><div>使用自变量<span style="line-height: 28px;"   >44248</span><span style="line-height: 28px;"   >推测因变量40145.</span></div><div>使用公式推测的结果为46401.062078405991152</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=&gt; select 44248*0.906861594725424+6274.25023499543;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;?column? &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >-----------------------</font></div><div><font size="2"   >&nbsp;46401.062078405991152</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div>准确度 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=&gt; select 40145/46401.062078405991152;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; ?column? &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >------------------------</font></div><div><font size="2"   >&nbsp;0.86517416200873079820</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div>当我们使用另一组截距和斜率时, 准确度最低是<span style="line-height: 28px;"   >0.32915622582628. 所以得到的预测结果可能不及以上的.</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >截距</font></div><div><font size="2"   >digoal=&gt; select count(*),regr_intercept(t.cnt,test.cnt) from&nbsp;</font></div><div><font size="2"   >(select rn-1 as rn,cnt from test) as t,test where t.rn=test.rn and test.rn&gt;1;</font></div><div><font size="2"   >&nbsp;count | &nbsp;regr_intercept &nbsp;</font></div><div><font size="2"   >-------+------------------</font></div><div><font size="2"   >&nbsp; &nbsp;363 | 49279.0342891155</font></div><div><font size="2"   >(1 row)</font></div><div><font size="2"   >斜率</font></div><div><font size="2"   >digoal=&gt; select count(*),regr_slope(t.cnt,test.cnt) from &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >(select rn-1 as rn,cnt from test) as t,test where t.rn=test.rn and test.rn&gt;1;</font></div><div><font size="2"   >&nbsp;count | &nbsp; &nbsp;regr_slope &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >-------+-------------------</font></div><div><font size="2"   >&nbsp; &nbsp;363 | 0.292250474909646</font></div><div><font size="2"   >(1 row)</font></div><div><font size="2"   >预测结果</font></div><div><font size="2"   >digoal=&gt; select 44248*0.292250474909646+49279.0342891155;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;?column? &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >-----------------------</font></div><div><font size="2"   >&nbsp;62210.533302917516208</font></div><div><font size="2"   >(1 row)</font></div><div><font size="2"   ><span style="line-height: 21px;"   >准确度</span></font></div><div><font size="2"   >digoal=&gt; select 40145/62210.533302917516208;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; ?column? &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >------------------------</font></div><div><font size="2"   >&nbsp;0.64530872616900233730</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div>最后再提一下另外几个和回归相关的函数 :&nbsp;</div><div><table border="1"   style="margin: 2ex 0px 2ex 2ex; -webkit-box-shadow: rgb(223, 223, 223) 3px 3px 5px; box-shadow: rgb(223, 223, 223) 3px 3px 5px; border-spacing: 0px; border-collapse: collapse; border: 2px solid rgb(167, 198, 223); color: rgb(0, 0, 0); font-family: verdana, sans-serif; font-size: 12.1599998474121px; line-height: normal; background-color: rgb(224, 236, 239);"   ><tbody><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_avgx(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >average of the independent variable (<tt>sum(<tt style="font-style: italic; font-size: 1em;"   >X</tt>)/<tt style="font-style: italic; font-size: 1em;"   >N</tt></tt>)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_avgy(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >average of the dependent variable (<tt>sum(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>)/<tt style="font-style: italic; font-size: 1em;"   >N</tt></tt>)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_count(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>bigint</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >number of input rows in which both expressions are nonnull</td></tr></table></div><div><table border="1"   style="margin: 2ex 0px 2ex 2ex; -webkit-box-shadow: rgb(223, 223, 223) 3px 3px 5px; box-shadow: rgb(223, 223, 223) 3px 3px 5px; border-spacing: 0px; border-collapse: collapse; border: 2px solid rgb(167, 198, 223); color: rgb(0, 0, 0); font-family: verdana, sans-serif; font-size: 12.1599998474121px; line-height: normal; background-color: rgb(224, 236, 239);"   ><tbody><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_sxx(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>sum(<tt style="font-style: italic; font-size: 1em;"   >X</tt>^2) - sum(<tt style="font-style: italic; font-size: 1em;"   >X</tt>)^2/<tt style="font-style: italic; font-size: 1em;"   >N</tt></tt>&nbsp;(<span>"sum of squares"</span>&nbsp;of the independent variable)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><code>regr_sxy(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>sum(<tt style="font-style: italic; font-size: 1em;"   >X</tt>*<tt style="font-style: italic; font-size: 1em;"   >Y</tt>) - sum(<tt style="font-style: italic; font-size: 1em;"   >X</tt>) * sum(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>)/<tt style="font-style: italic; font-size: 1em;"   >N</tt></tt>&nbsp;(<span>"sum of products"</span>&nbsp;of independent times dependent variable)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(239, 239, 239);"   ><code>regr_syy(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>,&nbsp;<tt style="font-style: italic; font-size: 1em;"   >X</tt>)</code></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(239, 239, 239);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(239, 239, 239);"   ><tt>double precision</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(239, 239, 239);"   ><tt>sum(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>^2) - sum(<tt style="font-style: italic; font-size: 1em;"   >Y</tt>)^2/<tt style="font-style: italic; font-size: 1em;"   >N</tt></tt>&nbsp;(<span>"sum of squares"</span>&nbsp;of the dependent variable)</td></tr></table></div><div>regr_avgx(y, x)其实就是算x的平均值(数学期望), y在这里没有任何作用.</div><div><span style="line-height: 28px;"   >regr_avgy(y, x)其实就是算y的平均值(数学期望)</span><span style="line-height: 28px;"   >, x在这里没有任何作用.</span></div><div><span style="line-height: 28px;"   >regr_count(y, x) 计算x和y都不是空的记录数.</span></div><div><span style="line-height: 28px;"   >另外三个是辅助函数, 计算诊断统计信息(总方差, 总协方差).</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >regr_sxx<span style="line-height: 28px;"   >(y, x) &nbsp;: &nbsp;</span>sum(X^2) - sum(X)^2/N&nbsp;</font></div><div><font size="2"   ><span style="line-height: 28px;"   >regr_sxy</span><span style="line-height: 28px;"   >(y, x) &nbsp;: &nbsp;</span>sum(X*Y) - sum(X) * sum(Y)/N</font></div><div><font size="2"   ><span style="line-height: 28px;"   >regr_syy</span><span style="line-height: 28px;"   >(y, x) &nbsp;: &nbsp;</span>sum(Y^2) - sum(Y)^2/N&nbsp;</font></div><div><div><font size="2"   >REGR_SXY, REGR_SXX, REGR_SYY are auxiliary functions that are used to compute various diagnostic statistics.</font></div><div><font size="2"   >REGR_SXX makes the following computation after the elimination of null (expr1, expr2) pairs:</font></div><div><font size="2"   >REGR_COUNT(expr1, expr2) * VAR_POP(expr2)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >REGR_SYY makes the following computation after the elimination of null (expr1, expr2) pairs:</font></div><div><font size="2"   >REGR_COUNT(expr1, expr2) * VAR_POP(expr1)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >REGR_SXY makes the following computation after the elimination of null (expr1, expr2) pairs:</font></div><div><font size="2"   >REGR_COUNT(expr1, expr2) * COVAR_POP(expr1, expr2)</font></div></div><p></p></pre></div><div>验证regr_sxx, sxy, syy.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# select regr_sxx(y,x), REGR_COUNT(y,x)*VAR_POP(x) from (values(2,400),(6,401),(7,400),(3,400),(1000,488)) as t(x,y);</font></div><div><font size="2"   >&nbsp;regr_sxx | &nbsp; &nbsp; &nbsp;?column? &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >----------+---------------------</font></div><div><font size="2"   >&nbsp;792833.2 | 792833.200000000000</font></div><div><font size="2"   >(1 row)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres=# select regr_sxy(y,x), REGR_COUNT(y,x)*COVAR_POP(x,y) from (values(2,400),(6,401),(7,400),(3,400),(1000,488)) as t(x,y);</font></div><div><font size="2"   >&nbsp;regr_sxy | ?column?&nbsp;</font></div><div><font size="2"   >----------+----------</font></div><div><font size="2"   >&nbsp; 69885.6 | &nbsp;69885.6</font></div><div><font size="2"   >(1 row)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres=# select regr_syy(y,x), REGR_COUNT(y,x)*VAR_POP(y) from (values(2,400),(6,401),(7,400),(3,400),(1000,488)) as t(x,y);</font></div><div><font size="2"   >&nbsp;regr_syy | &nbsp; &nbsp; &nbsp; ?column? &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >----------+-----------------------</font></div><div><font size="2"   >&nbsp; &nbsp;6160.8 | 6160.8000000000000000</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div><br></div><div>好了, 先写到这里, 你还可以尝试更多的折腾玩法.</div><div>自动选择最优相关的例子如下 .</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >=&gt; select * from test order by to_char desc limit 10;<br>  to_char   | count  <br>------------+--------<br> 2015030123 | 149496<br> 2015030122 | 165320<br> 2015030121 | 167663<br> 2015030120 | 161071<br> 2015030119 | 145570<br> 2015030118 | 133155<br> 2015030117 | 133962<br> 2015030116 | 130484<br> 2015030115 | 126182<br> 2015030114 | 122998<br>(10 rows)<br><br>=&gt; do language plpgsql $$                         <br>declare <br>  r2_1 numeric := 0; <br>  r2_2 numeric := 0; <br>  var int;<br>  inter numeric;<br>  slope numeric;<br>  inter_2 numeric;<br>  slope_2 numeric;<br>  realv numeric;<br>  predicv numeric;<br>  offset_var int := 0; -- 最后一个值的预测值<br>begin<br>  for i in 1..450 loop<br>    with t1 as (select row_number() over(order by to_char) as rn,count from test order by to_char desc offset offset_var), <br>         t2 as (select row_number() over(order by to_char)-1 as rn,count from test order by to_char desc offset offset_var)  <br>      select regr_intercept(t2.count,t1.count),regr_slope(t2.count,t1.count),regr_r2(t1.count,t2.count) into inter,slope,r2_1 from t1,t2 where t1.rn=t2.rn and t1.rn&gt;i; <br>    if r2_1&gt;r2_2 then <br>      inter_2:=inter;<br>      slope_2:=slope;<br>      r2_2:=r2_1; <br>      var:=i;<br>    end if; <br>  end loop; <br><br>  raise notice '%, %, %, %', var, inter_2,slope_2,r2_2;<br>  select slope_2*count+inter_2 into predicv from test order by to_char desc offset offset_var+1 limit 1;<br>  select count into realv from test order by to_char desc offset offset_var limit 1;<br>  raise notice '%, %', realv, predicv;<br>end;<br>$$;<br>NOTICE:  436, 16599.0041292694, 0.896184690654355, 0.925125327496365<br>NOTICE:  149496, 164756.257188247368600<br>DO<br><br>=&gt; select 149496/164756.2;<br>        ?column?        <br>------------------------<br> 0.90737708201572990880<br>(1 row)<br><br>=&gt; do language plpgsql $$                         <br>declare <br>  r2_1 numeric := 0; -- 相关性<br>  r2_2 numeric := 0; -- 最大相关性<br>  var int;  --  样本数量<br>  inter_1 numeric;  --  截距<br>  slope_1 numeric;  --  斜率<br>  inter_2 numeric;  --  最大相关性截距<br>  slope_2 numeric;  --  最大相关性斜率<br>  realv numeric;    --  真实数据<br>  predicv numeric;  --  预测数据<br>  offset_var int := 1;   -- 倒数第二个值的预测值, 不停迭代, 最后计算所有的实际值和预测值的corr, 看看相似度如何?<br>begin<br>  for i in 1..450 loop<br>    with t1 as (select row_number() over(order by to_char) as rn,count from test order by to_char desc offset offset_var), <br>         t2 as (select row_number() over(order by to_char)-1 as rn,count from test order by to_char desc offset offset_var) <br>      select regr_intercept(t2.count,t1.count),regr_slope(t2.count,t1.count),regr_r2(t1.count,t2.count) into inter_1,slope_1,r2_1 from t1,t2 where t1.rn=t2.rn and t1.rn&gt;i;<br>    if r2_1&gt;r2_2 then <br>      inter_2 := inter_1;<br>      slope_2 := slope_1;<br>      r2_2 := r2_1;<br>      var := i;<br>    end if;<br>  end loop;<br><br>  raise notice '样本数量%, 截距%, 斜率%, 相关性%', var, round(inter_2,4), round(slope_2,4), round(r2_2,4);<br>  select slope_2*count+inter_2 into predicv from test order by to_char desc offset offset_var+1 limit 1;<br>  select count into realv from test order by to_char desc offset offset_var limit 1;<br>  raise notice '真实数据%, 预测数据%, 本次预测偏差,%%%', realv, round(predicv), abs(1-round(predicv/realv,4))*100;<br>end;<br>$$;<br>NOTICE:  样本数量436, 截距10109.8500, 斜率0.9573, 相关性0.9476<br>NOTICE:  真实数据165320, 预测数据170611, 本次预测偏差,%3.2000<br>DO</font></div><p></p></pre></div><div>校验函数</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >=&gt; create or replace function check_predict(IN ov int, OUT rv numeric, OUT pv numeric, OUT dev numeric) returns record as $$</font></div><div><font size="2"   >declare&nbsp;</font></div><div><font size="2"   >&nbsp; r2_1 numeric := 0; -- 相关性</font></div><div><font size="2"   >&nbsp; r2_2 numeric := 0; -- 最大相关性</font></div><div><font size="2"   >&nbsp; var int; &nbsp;-- &nbsp;样本数量</font></div><div><font size="2"   >&nbsp; inter_1 numeric; &nbsp;-- &nbsp;截距</font></div><div><font size="2"   >&nbsp; slope_1 numeric; &nbsp;-- &nbsp;斜率</font></div><div><font size="2"   >&nbsp; inter_2 numeric; &nbsp;-- &nbsp;最大相关性截距</font></div><div><font size="2"   >&nbsp; slope_2 numeric; &nbsp;-- &nbsp;最大相关性斜率</font></div><div><font size="2"   >&nbsp; realv numeric; &nbsp; &nbsp;-- &nbsp;真实数据</font></div><div><font size="2"   >&nbsp; predicv numeric; &nbsp;-- &nbsp;预测数据</font></div><div><font size="2"   >&nbsp; offset_var int := ov; &nbsp; -- 倒数第二个值的预测值, 不停迭代, 最后计算所有的实际值和预测值的corr, 看看相似度如何?</font></div><div><font size="2"   >&nbsp; lps int := 0;</font></div><div><font size="2"   >begin</font></div><div><font size="2"   >&nbsp; select count(*)-offset_var-4 into lps from test; &nbsp;-- &nbsp;循环不要超过总样本数, 同时至少给2个样本.</font></div><div><font size="2"   >&nbsp; for i in 1..lps loop&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; with t1 as (select row_number() over(order by to_char) as rn,to_char,count from test order by to_char desc offset offset_var),&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;t2 as (select row_number() over(order by to_char)-1 as rn,to_char,count from test order by to_char desc offset offset_var)&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; select regr_intercept(t2.count,t1.count),regr_slope(t2.count,t1.count),regr_r2(t1.count,t2.count) into inter_1,slope_1,r2_1 from t1,t2 where t1.rn=t2.rn and t1.rn&gt;i;</font></div><div><font size="2"   >&nbsp; &nbsp; if r2_1&gt;r2_2 then&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; inter_2 := inter_1;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; slope_2 := slope_1;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; r2_2 := r2_1;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; var := i;</font></div><div><font size="2"   >&nbsp; &nbsp; end if;</font></div><div><font size="2"   >&nbsp; end loop;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; raise notice '样本数量%, 截距%, 斜率%, 相关性%', var, round(inter_2,4), round(slope_2,4), round(r2_2,4);</font></div><div><font size="2"   >&nbsp; select slope_2*count+inter_2 into predicv from test order by to_char desc offset offset_var+1 limit 1;</font></div><div><font size="2"   >&nbsp; select count into realv from test order by to_char desc offset offset_var limit 1;</font></div><div><font size="2"   >&nbsp; raise notice '真实数据%, 预测数据%, 本次预测偏差%%%', realv, round(predicv), abs(1-round(predicv/realv,4))*100;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; rv := realv;</font></div><div><font size="2"   >&nbsp; pv := round(predicv);</font></div><div><font size="2"   >&nbsp; dev := abs(1-round(predicv/realv,4));</font></div><div><font size="2"   >&nbsp; return;</font></div><div><font size="2"   >end;</font></div><div><font size="2"   >$$ language plpgsql;</font></div><p></p></pre></div><div>校验测试 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >=&gt; select check_predict(i) from generate_series(1,100) t(i);</font></div><div><div><font size="2"   >NOTICE: &nbsp;样本数量436, 截距10109.8500, 斜率0.9573, 相关性0.9476</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据165320, 预测数据170611, 本次预测偏差%3.2000</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量436, 截距6909.3635, 斜率0.9872, 相关性0.9419</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据167663, 预测数据165922, 本次预测偏差%1.0400</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量436, 截距8151.8730, 斜率0.9754, 相关性0.9249</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据161071, 预测数据150145, 本次预测偏差%6.7800</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量436, 截距14388.5296, 斜率0.9135, 相关性0.9275</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据145570, 预测数据136026, 本次预测偏差%6.5600</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量437, 截距30451.0167, 斜率0.7726, 相关性0.9570</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据133155, 预测数据133953, 本次预测偏差%0.6000</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量446, 截距343.4262, 斜率1.0262, 相关性0.9785</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据133962, 预测数据134241, 本次预测偏差%0.2100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量437, 截距31491.5019, 斜率0.7616, 相关性0.9494</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据130484, 预测数据127596, 本次预测偏差%2.2100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量438, 截距48512.9273, 斜率0.6126, 相关性0.9484</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据126182, 预测数据123864, 本次预测偏差%1.8400</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量438, 截距50299.8161, 斜率0.5940, 相关性0.9526</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据122998, 预测数据124578, 本次预测偏差%1.2800</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量442, 截距33561.3690, 斜率0.7444, 相关性0.9983</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据125052, 预测数据125119, 本次预测偏差%0.0500</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量438, 截距50126.2968, 斜率0.5954, 相关性0.9475</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据123000, 预测数据121572, 本次预测偏差%1.1600</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量438, 截距52640.6564, 斜率0.5687, 相关性0.9400</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据119991, 预测数据118710, 本次预测偏差%1.0700</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量438, 截距55198.2911, 斜率0.5404, 相关性0.9301</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据116182, 预测数据118363, 本次预测偏差%1.8800</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量438, 截距43721.8498, 斜率0.6665, 相关性0.9845</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据116887, 预测数据116082, 本次预测偏差%0.6900</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距4661.3951, 斜率0.9464, 相关性0.8978</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据108562, 预测数据98517, 本次预测偏差%9.2500</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距4675.5276, 斜率0.9460, 相关性0.8979</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据99168, 预测数据82725, 本次预测偏差%16.5800</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量432, 截距39520.3078, 斜率0.4823, 相关性0.9201</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据82505, 预测数据74942, 本次预测偏差%9.1700</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量432, 截距31502.3387, 斜率0.5457, 相关性0.9985</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据73450, 预测数据72804, 本次预测偏差%0.8800</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量432, 截距30417.7790, 斜率0.5542, 相关性0.9989</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据75681, 预测数据76143, 本次预测偏差%0.6100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量432, 截距31775.6232, 斜率0.5440, 相关性0.9992</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据82509, 预测数据82187, 本次预测偏差%0.3900</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距4622.2503, 斜率0.9465, 相关性0.8993</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据92670, 预测数据111447, 本次预测偏差%20.2600</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距4531.6850, 斜率0.9481, 相关性0.9003</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据112865, 预测数据145539, 本次预测偏差%28.9500</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量412, 截距19211.5611, 斜率0.8778, 相关性0.9590</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据148731, 预测数据150848, 本次预测偏差%1.4200</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量412, 截距18806.5399, 斜率0.8820, 相关性0.9580</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据149961, 预测数据156169, 本次预测偏差%4.1400</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量412, 截距17050.6057, 斜率0.8991, 相关性0.9603</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据155748, 预测数据161289, 本次预测偏差%3.5600</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量412, 截距14830.5241, 斜率0.9202, 相关性0.9607</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据160430, 预测数据155939, 本次预测偏差%2.8000</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量412, 截距16540.9704, 斜率0.9034, 相关性0.9574</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据153344, 预测数据150240, 本次预测偏差%2.0200</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量412, 截距17692.1060, 斜率0.8917, 相关性0.9532</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据147997, 预测数据140772, 本次预测偏差%4.8800</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量414, 截距41717.5731, 斜率0.6980, 相关性0.9736</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据138023, 预测数据137013, 本次预测偏差%0.7300</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量414, 截距42191.4454, 斜率0.6933, 相关性0.9722</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据136535, 预测数据135075, 本次预测偏差%1.0700</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量414, 截距42836.5141, 斜率0.6866, 相关性0.9716</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据133978, 预测数据133909, 本次预测偏差%0.0500</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量414, 截距42868.4919, 斜率0.6863, 相关性0.9698</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据132634, 预测数据136891, 本次预测偏差%3.2100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量414, 截距39356.6117, 斜率0.7213, 相关性0.9849</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据136998, 预测数据137674, 本次预测偏差%0.4900</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量418, 截距-98886.5041, 斜率1.7965, 相关性0.9925</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据136303, 预测数据136431, 本次预测偏差%0.0900</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量414, 截距41274.0892, 斜率0.7011, 相关性0.9848</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据130987, 预测数据130817, 本次预测偏差%0.1300</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量414, 截距41537.1100, 斜率0.6983, 相关性0.9803</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据127722, 预测数据129731, 本次预测偏差%1.5700</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量414, 截距35567.9284, 斜率0.7625, 相关性0.9901</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据126303, 预测数据124949, 本次预测偏差%1.0700</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量414, 截距41599.7365, 斜率0.6944, 相关性0.9993</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据117218, 预测数据117405, 本次预测偏差%0.1600</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量413, 截距1686.3033, 斜率1.1262, 相关性0.8957</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据109160, 预测数据110726, 本次预测偏差%1.4300</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量412, 截距-126088.7154, 斜率2.7998, 相关性0.9671</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据96823, 预测数据97097, 本次预测偏差%0.2800</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量408, 截距36426.6219, 斜率0.5003, 相关性0.9205</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据79716, 预测数据72776, 本次预测偏差%8.7100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量408, 截距29915.3284, 斜率0.5522, 相关性0.9813</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据72658, 预测数据69530, 本次预测偏差%4.3100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量409, 截距30542.2158, 斜率0.5286, 相关性0.9970</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据71739, 预测数据71377, 本次预测偏差%0.5100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量408, 截距21294.1724, 斜率0.6206, 相关性0.9985</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据77243, 预测数据76786, 本次预测偏差%0.5900</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距4921.7169, 斜率0.9414, 相关性0.8898</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据89412, 预测数据109386, 本次预测偏差%22.3400</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量406, 截距-771730.9711, 斜率6.1383, 相关性0.9650</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据110972, 预测数据112269, 本次预测偏差%1.1700</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量388, 截距15580.3852, 斜率0.9001, 相关性0.9520</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据144014, 预测数据149237, 本次预测偏差%3.6300</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量388, 截距14377.9729, 斜率0.9129, 相关性0.9524</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据148483, 预测数据151688, 本次预测偏差%2.1600</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量388, 截距13455.2553, 斜率0.9226, 相关性0.9497</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据150405, 预测数据156324, 本次预测偏差%3.9400</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量402, 截距71505.3386, 斜率0.5561, 相关性0.9759</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据154850, 预测数据155607, 本次预测偏差%0.4900</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量388, 截距11270.4334, 斜率0.9451, 相关性0.9387</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据151244, 预测数据144638, 本次预测偏差%4.3700</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量388, 截距14060.3682, 斜率0.9147, 相关性0.9332</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据141118, 预测数据129415, 本次预测偏差%8.2900</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量390, 截距36957.1231, 斜率0.7099, 相关性0.9656</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据126106, 预测数据125617, 本次预测偏差%0.3900</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量390, 截距37150.1505, 斜率0.7077, 相关性0.9636</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据124896, 预测数据128489, 本次预测偏差%2.8800</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量390, 截距34760.7660, 斜率0.7330, 相关性0.9714</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据129061, 预测数据128477, 本次预测偏差%0.4500</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量390, 截距35229.1317, 斜率0.7280, 相关性0.9667</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据127849, 预测数据128208, 本次预测偏差%0.2800</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量392, 截距4342.9938, 斜率1.0018, 相关性0.9702</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据127715, 预测数据129117, 本次预测偏差%1.1000</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量393, 截距-32076.9878, 斜率1.3312, 相关性0.9964</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据124554, 预测数据124206, 本次预测偏差%0.2800</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量393, 截距-19541.0766, 斜率1.2152, 相关性1.0000</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据117397, 预测数据117404, 本次预测偏差%0.0100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量390, 截距47549.0400, 斜率0.5872, 相关性0.9902</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据112693, 预测数据111435, 本次预测偏差%1.1200</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量390, 截距50098.4943, 斜率0.5560, 相关性0.9977</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据108804, 预测数据108821, 本次预测偏差%0.0200</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量390, 截距50042.2813, 斜率0.5567, 相关性0.9964</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据105623, 预测数据105973, 本次预测偏差%0.3300</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距5273.1579, 斜率0.9358, 相关性0.8782</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据100474, 预测数据89115, 本次预测偏差%11.3100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距5280.4763, 斜率0.9354, 相关性0.8785</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据89591, 预测数据72087, 本次预测偏差%19.5400</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量384, 截距30325.0273, 斜率0.5354, 相关性0.9387</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据71422, 预测数据64918, 本次预测偏差%9.1100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量386, 截距37631.4820, 斜率0.4029, 相关性0.9941</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据64616, 预测数据64377, 本次预测偏差%0.3700</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量384, 截距20707.7226, 斜率0.6191, 相关性0.9961</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据66389, 预测数据65428, 本次预测偏差%1.4500</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量384, 截距17341.5766, 斜率0.6472, 相关性0.9978</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据72238, 预测数据72772, 本次预测偏差%0.7400</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距5202.6036, 斜率0.9363, 相关性0.8805</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据85644, 预测数据102774, 本次预测偏差%20.0000</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量382, 截距-211937.8855, 斜率2.3700, 相关性0.9232</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据104207, 预测数据107341, 本次预测偏差%3.0100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量363, 截距10473.2297, 斜率0.9328, 相关性0.9381</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据134716, 预测数据144319, 本次预测偏差%7.1300</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量363, 截距8082.7467, 斜率0.9608, 相关性0.9426</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据143484, 预测数据153571, 本次预测偏差%7.0300</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量379, 截距90033.9242, 斜率0.4106, 相关性0.9539</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据151426, 预测数据150648, 本次预测偏差%0.5100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量363, 截距3555.4288, 斜率1.0121, 相关性0.9344</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据147628, 预测数据148068, 本次预测偏差%0.3000</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量377, 截距-22855.0642, 斜率1.3040, 相关性0.9608</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据142781, 预测数据143858, 本次预测偏差%0.7500</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量363, 截距8135.3139, 斜率0.9564, 相关性0.9081</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据127852, 预测数据116232, 本次预测偏差%9.0900</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量363, 截距11650.2051, 斜率0.9095, 相关性0.9209</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据113022, 预测数据107993, 本次预测偏差%4.4500</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量366, 截距43850.9025, 斜率0.5911, 相关性0.9231</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据105932, 预测数据109352, 本次预测偏差%3.2300</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量366, 截距41459.4112, 斜率0.6193, 相关性0.9421</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据110807, 预测数据111147, 本次预测偏差%0.3100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量366, 截距41099.7207, 斜率0.6234, 相关性0.9330</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据112531, 预测数据107192, 本次预测偏差%4.7400</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量366, 截距45144.8340, 斜率0.5733, 相关性0.9910</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据106011, 预测数据105444, 本次预测偏差%0.5400</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量366, 截距45652.0542, 斜率0.5670, 相关性0.9907</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据105170, 预测数据104365, 本次预测偏差%0.7600</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量368, 截距57233.9599, 斜率0.4495, 相关性0.9969</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据103554, 预测数据103401, 本次预测偏差%0.1500</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量368, 截距58816.4609, 斜率0.4327, 相关性0.9999</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据102706, 预测数据102719, 本次预测偏差%0.0100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量366, 截距45837.1316, 斜率0.5648, 相关性0.9874</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据101460, 预测数据101473, 本次预测偏差%0.0100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量366, 截距45788.3201, 斜率0.5655, 相关性0.9787</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据98505, 预测数据97660, 本次预测偏差%0.8600</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距5430.0126, 斜率0.9322, 相关性0.8723</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据91734, 预测数据83227, 本次预测偏差%9.2700</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距5423.3347, 斜率0.9320, 相关性0.8726</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据83453, 预测数据66847, 本次预测偏差%19.9000</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量360, 截距30435.2931, 斜率0.4928, 相关性0.9223</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据65904, 预测数据59957, 本次预测偏差%9.0200</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量360, 截距25313.6494, 斜率0.5394, 相关性0.9738</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据59911, 预测数据58046, 本次预测偏差%3.1100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量360, 截距22789.5261, 斜率0.5623, 相关性0.9761</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据60677, 预测数据57848, 本次预测偏差%4.6600</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量360, 截距14289.6380, 斜率0.6383, 相关性1.0000</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据62350, 预测数据62309, 本次预测偏差%0.0700</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距5349.6991, 斜率0.9328, 相关性0.8743</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据75224, 预测数据94495, 本次预测偏差%25.6200</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量1, 截距5276.8974, 斜率0.9345, 相关性0.8761</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据95563, 预测数据124211, 本次预测偏差%29.9800</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量339, 截距10611.8990, 斜率0.9248, 相关性0.9273</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据127277, 预测数据132503, 本次预测偏差%4.1100</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量339, 截距9346.7583, 斜率0.9398, 相关性0.9270</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据131802, 预测数据141158, 本次预测偏差%7.1000</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量354, 截距45602.8301, 斜率0.6964, 相关性0.9378</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据140259, 预测数据142531, 本次预测偏差%1.6200</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量354, 截距22118.2940, 斜率0.8984, 相关性0.9995</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据139179, 预测数据139044, 本次预测偏差%0.1000</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量339, 截距7066.6202, 斜率0.9646, 相关性0.9085</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据130151, 预测数据123330, 本次预测偏差%5.2400</font></div><div><font size="2"   >NOTICE: &nbsp;样本数量352, 截距788258.5127, 斜率-6.1054, 相关性0.9259</font></div><div><font size="2"   >NOTICE: &nbsp;真实数据120531, 预测数据120243, 本次预测偏差%0.2400</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;check_predict &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >------------------------</font></div><div><font size="2"   >&nbsp;(165320,170611,0.0320)</font></div><div><font size="2"   >&nbsp;(167663,165922,0.0104)</font></div><div><font size="2"   >&nbsp;(161071,150145,0.0678)</font></div><div><font size="2"   >&nbsp;(145570,136026,0.0656)</font></div><div><font size="2"   >&nbsp;(133155,133953,0.0060)</font></div><div><font size="2"   >&nbsp;(133962,134241,0.0021)</font></div><div><font size="2"   >&nbsp;(130484,127596,0.0221)</font></div><div><font size="2"   >&nbsp;(126182,123864,0.0184)</font></div><div><font size="2"   >&nbsp;(122998,124578,0.0128)</font></div><div><font size="2"   >&nbsp;(125052,125119,0.0005)</font></div><div><font size="2"   >&nbsp;(123000,121572,0.0116)</font></div><div><font size="2"   >&nbsp;(119991,118710,0.0107)</font></div><div><font size="2"   >&nbsp;(116182,118363,0.0188)</font></div><div><font size="2"   >&nbsp;(116887,116082,0.0069)</font></div><div><font size="2"   >&nbsp;(108562,98517,0.0925)</font></div><div><font size="2"   >&nbsp;(99168,82725,0.1658)</font></div><div><font size="2"   >&nbsp;(82505,74942,0.0917)</font></div><div><font size="2"   >&nbsp;(73450,72804,0.0088)</font></div><div><font size="2"   >&nbsp;(75681,76143,0.0061)</font></div><div><font size="2"   >&nbsp;(82509,82187,0.0039)</font></div><div><font size="2"   >&nbsp;(92670,111447,0.2026)</font></div><div><font size="2"   >&nbsp;(112865,145539,0.2895)</font></div><div><font size="2"   >&nbsp;(148731,150848,0.0142)</font></div><div><font size="2"   >&nbsp;(149961,156169,0.0414)</font></div><div><font size="2"   >&nbsp;(155748,161289,0.0356)</font></div><div><font size="2"   >&nbsp;(160430,155939,0.0280)</font></div><div><font size="2"   >&nbsp;(153344,150240,0.0202)</font></div><div><font size="2"   >&nbsp;(147997,140772,0.0488)</font></div><div><font size="2"   >&nbsp;(138023,137013,0.0073)</font></div><div><font size="2"   >&nbsp;(136535,135075,0.0107)</font></div><div><font size="2"   >&nbsp;(133978,133909,0.0005)</font></div><div><font size="2"   >&nbsp;(132634,136891,0.0321)</font></div><div><font size="2"   >&nbsp;(136998,137674,0.0049)</font></div><div><font size="2"   >&nbsp;(136303,136431,0.0009)</font></div><div><font size="2"   >&nbsp;(130987,130817,0.0013)</font></div><div><font size="2"   >&nbsp;(127722,129731,0.0157)</font></div><div><font size="2"   >&nbsp;(126303,124949,0.0107)</font></div><div><font size="2"   >&nbsp;(117218,117405,0.0016)</font></div><div><font size="2"   >&nbsp;(109160,110726,0.0143)</font></div><div><font size="2"   >&nbsp;(96823,97097,0.0028)</font></div><div><font size="2"   >&nbsp;(79716,72776,0.0871)</font></div><div><font size="2"   >&nbsp;(72658,69530,0.0431)</font></div><div><font size="2"   >&nbsp;(71739,71377,0.0051)</font></div><div><font size="2"   >&nbsp;(77243,76786,0.0059)</font></div><div><font size="2"   >&nbsp;(89412,109386,0.2234)</font></div><div><font size="2"   >&nbsp;(110972,112269,0.0117)</font></div><div><font size="2"   >&nbsp;(144014,149237,0.0363)</font></div><div><font size="2"   >&nbsp;(148483,151688,0.0216)</font></div><div><font size="2"   >&nbsp;(150405,156324,0.0394)</font></div><div><font size="2"   >&nbsp;(154850,155607,0.0049)</font></div><div><font size="2"   >&nbsp;(151244,144638,0.0437)</font></div><div><font size="2"   >&nbsp;(141118,129415,0.0829)</font></div><div><font size="2"   >&nbsp;(126106,125617,0.0039)</font></div><div><font size="2"   >&nbsp;(124896,128489,0.0288)</font></div><div><font size="2"   >&nbsp;(129061,128477,0.0045)</font></div><div><font size="2"   >&nbsp;(127849,128208,0.0028)</font></div><div><font size="2"   >&nbsp;(127715,129117,0.0110)</font></div><div><font size="2"   >&nbsp;(124554,124206,0.0028)</font></div><div><font size="2"   >&nbsp;(117397,117404,0.0001)</font></div><div><font size="2"   >&nbsp;(112693,111435,0.0112)</font></div><div><font size="2"   >&nbsp;(108804,108821,0.0002)</font></div><div><font size="2"   >&nbsp;(105623,105973,0.0033)</font></div><div><font size="2"   >&nbsp;(100474,89115,0.1131)</font></div><div><font size="2"   >&nbsp;(89591,72087,0.1954)</font></div><div><font size="2"   >&nbsp;(71422,64918,0.0911)</font></div><div><font size="2"   >&nbsp;(64616,64377,0.0037)</font></div><div><font size="2"   >&nbsp;(66389,65428,0.0145)</font></div><div><font size="2"   >&nbsp;(72238,72772,0.0074)</font></div><div><font size="2"   >&nbsp;(85644,102774,0.2000)</font></div><div><font size="2"   >&nbsp;(104207,107341,0.0301)</font></div><div><font size="2"   >&nbsp;(134716,144319,0.0713)</font></div><div><font size="2"   >&nbsp;(143484,153571,0.0703)</font></div><div><font size="2"   >&nbsp;(151426,150648,0.0051)</font></div><div><font size="2"   >&nbsp;(147628,148068,0.0030)</font></div><div><font size="2"   >&nbsp;(142781,143858,0.0075)</font></div><div><font size="2"   >&nbsp;(127852,116232,0.0909)</font></div><div><font size="2"   >&nbsp;(113022,107993,0.0445)</font></div><div><font size="2"   >&nbsp;(105932,109352,0.0323)</font></div><div><font size="2"   >&nbsp;(110807,111147,0.0031)</font></div><div><font size="2"   >&nbsp;(112531,107192,0.0474)</font></div><div><font size="2"   >&nbsp;(106011,105444,0.0054)</font></div><div><font size="2"   >&nbsp;(105170,104365,0.0076)</font></div><div><font size="2"   >&nbsp;(103554,103401,0.0015)</font></div><div><font size="2"   >&nbsp;(102706,102719,0.0001)</font></div><div><font size="2"   >&nbsp;(101460,101473,0.0001)</font></div><div><font size="2"   >&nbsp;(98505,97660,0.0086)</font></div><div><font size="2"   >&nbsp;(91734,83227,0.0927)</font></div><div><font size="2"   >&nbsp;(83453,66847,0.1990)</font></div><div><font size="2"   >&nbsp;(65904,59957,0.0902)</font></div><div><font size="2"   >&nbsp;(59911,58046,0.0311)</font></div><div><font size="2"   >&nbsp;(60677,57848,0.0466)</font></div><div><font size="2"   >&nbsp;(62350,62309,0.0007)</font></div><div><font size="2"   >&nbsp;(75224,94495,0.2562)</font></div><div><font size="2"   >&nbsp;(95563,124211,0.2998)</font></div><div><font size="2"   >&nbsp;(127277,132503,0.0411)</font></div><div><font size="2"   >&nbsp;(131802,141158,0.0710)</font></div><div><font size="2"   >&nbsp;(140259,142531,0.0162)</font></div><div><font size="2"   >&nbsp;(139179,139044,0.0010)</font></div><div><font size="2"   >&nbsp;(130151,123330,0.0524)</font></div><div><font size="2"   >&nbsp;(120531,120243,0.0024)</font></div><div><font size="2"   >(100 rows)</font></div></div><p></p></pre></div><div>预测曲线 :&nbsp;</div><div><div><img title="在PostgreSQL中用线性回归分析linear regression做预测 - 德哥@Digoal - PostgreSQL research"   alt="在PostgreSQL中用线性回归分析linear regression做预测 - 德哥@Digoal - PostgreSQL research"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/4bifKoJnVxCwtdPKVtJE0w==/1112952057931859237.png"   ></div><div>预测误差 :&nbsp;<span style="line-height: 28px;"   >&nbsp;</span></div><div><img title="在PostgreSQL中用线性回归分析linear regression做预测 - 德哥@Digoal - PostgreSQL research"   alt="在PostgreSQL中用线性回归分析linear regression做预测 - 德哥@Digoal - PostgreSQL research"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/9fxbgBxp1O9EdpanTdQZeQ==/6619571272119474124.png"   ></div></div><div><br></div><div>以下是拿贵州茅台的日收盘价格做的第二天收盘价格一元回归预测以及校验图,&nbsp;</div><div><div><img title="在PostgreSQL中用线性回归分析linear regression做预测 - 德哥@Digoal - PostgreSQL research"   alt="在PostgreSQL中用线性回归分析linear regression做预测 - 德哥@Digoal - PostgreSQL research"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/UQfUHmRvtf_ObdoDS1HIuw==/6630744509280199800.png"   ></div></div><div><br></div><wbr><div>[参考]</div>1.&nbsp;<a target="_blank" rel="nofollow" href="http://www.math.zju.edu.cn/ligangliu/Courses/MathematicalModeling_2005-2006/Syllabus/chapter_10.pdf"   >http://www.math.zju.edu.cn/ligangliu/Courses/MathematicalModeling_2005-2006/Syllabus/chapter_10.pdf</a><br><wbr><div>2.&nbsp;<a target="_blank" rel="nofollow" href="http://210.28.216.200/cai/tongji/html/main.htm"   >http://210.28.216.200/cai/tongji/html/main.htm</a></div><div>3.&nbsp;<a target="_blank" rel="nofollow" href="http://zh.wikipedia.org/wiki/%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E6%B3%95"   >http://zh.wikipedia.org/wiki/%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E6%B3%95</a></div><div>4.&nbsp;<a target="_blank" rel="nofollow" href="http://baike.baidu.com/view/145440.htm"   >http://baike.baidu.com/view/145440.htm</a></div><div>5.&nbsp;<a target="_blank" rel="nofollow" href="http://baike.baidu.com/view/139822.htm"   >http://baike.baidu.com/view/139822.htm</a></div><div>6.&nbsp;<a target="_blank" rel="nofollow" href="http://en.wikipedia.org/wiki/Simple_linear_regression"   >http://en.wikipedia.org/wiki/Simple_linear_regression</a></div><div>7.&nbsp;<a target="_blank" rel="nofollow" href="http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions139.htm"   >http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions139.htm</a></div><div>8.&nbsp;<a target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/9.4/static/functions-aggregate.html"   >http://www.postgresql.org/docs/9.4/static/functions-aggregate.html</a></div>9.&nbsp;<a target="_blank" rel="nofollow" href="http://v.ku6.com/playlist/index_6598382.html"   >http://v.ku6.com/playlist/index_6598382.html</a><br><div>10.&nbsp;<a target="_blank" rel="nofollow" href="http://cos.name/tag/%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90/"   >http://cos.name/tag/%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90/</a></div><div>11.&nbsp;<a target="_blank" rel="nofollow" href="http://my.oschina.net/u/1047640/blog/198956"   >http://my.oschina.net/u/1047640/blog/198956</a></div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="在PostgreSQL中用线性回归分析linear regression做预测 - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>