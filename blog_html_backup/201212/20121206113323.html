<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6</h2>
	<h5 id="">2012-12-06 11:33:23&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201211533939515/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>本文介绍P570(POWER6 4.2GHZ 16核) 如何安装SUSE LINUX操作系统.</div><div>1. 下载ISO</div><div><a target="_blank" rel="nofollow" href="https://www.suse.com/products/server/eval.html"   >https://www.suse.com/products/server/eval.html</a></div><div>2. 选择IBM POWER下载</div><div>3. 刻录成光盘(当然网络安装也是可以的,本例使用光盘安装)</div><div>4. 将光盘插入P570光驱中.</div><div>5. 登陆HMC</div><wbr><div>以P570(CPU POWER6)为例</div><div>6. 创建逻辑分区, 将资源全部分配给逻辑分区.</div><div>7. 选中逻辑分区, 选择激活分区并打开终端.</div><div>8. 选择光盘引导</div><div>9. 进入SUSE安装界面</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img7.ph.126.net/byz91E4XVb8lIVwVSKLdFA==/6597822932121699197.jpg"   ></div></div><div>在boot:后面输入install, 准备安装.</div><div><br></div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img3.ph.126.net/rEnSlAJmy-jCvXBi3FRqAw==/42221246524595443.jpg"   ></div></div><div><br></div><div>10. 在这个界面按下F9 Abort 安装. 使用TAB键选中Abort Installation. 将退到配置界面.</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img4.ph.126.net/u__2BIzDFEDswHFrW8P2tw==/6597535959586839484.jpg"   ></div>&nbsp;</div><div>11. 在配置界面配置语言, VNC和SSH.</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img6.ph.126.net/k-TpCbpNZSpzqettceDgNA==/6597911992563545556.jpg"   ></div></div><div>如果选择错误可以使用Ctrl+D退回上一层.</div><div>配置使用VNC安装</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img5.ph.126.net/lLSMr3TlcBZnlzgz67Lgyw==/6598153885121483365.jpg"   ></div>配置语言选择ENGLISH.</div><div>Ctrl+D退回顶层, 选择1开始安装</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img9.ph.126.net/dBkkuzFGIxoVmE1A5uF_7Q==/2549881814039733959.jpg"   ></div></div><div>输入VNC密码等</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img6.ph.126.net/IxvgTsOFT-Afsw_O-u8UdQ==/1275644594470606466.jpg"   ></div>配置网络信息, 注意网卡不要选择错误.</div><div><div style="line-height: 22px;"   >配置网关</div><div style="line-height: 22px;"   >配置域名</div><div style="line-height: 22px;"   >配置DNS</div></div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/0Oyy5YErubJcl8tu4jYVKw==/611926599386768560.jpg"   ></div></div><div>安装, 终端将停留在这个界面, 这时你应该使用VNC客户端连接到P570进行安装</div><div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img7.ph.126.net/0IKHrXcJx_0qV5omOQGRlQ==/1326028615301825857.jpg"   ></div></div>启动VNC, 连接IP:1, 输入配置的VNCPASSWORD, 图形化安装 :&nbsp;</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/gPGKwAtx4KhFx45_moXnDg==/3102135718345941850.jpg"   ></div>VNC界面 :&nbsp;</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img8.ph.126.net/YRyCDLr-H_L3b2PiYPs8Og==/672725194356266958.jpg"   ></div><br></div><div>不要激活multipathd, 原因本文见末尾.</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img5.ph.126.net/onXcKf_X11oP4sbqzQv3Ag==/6597264380216085645.jpg"   ></div></div><div>进入专家模式, 配置分区</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img9.ph.126.net/yZDHkdqepk1Shemaz67FeQ==/6597637114656596429.jpg"   ></div>选择正确的本地硬盘, /dev/sda不一定是本地硬盘, 这里一定要注意.</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img7.ph.126.net/REYdpdiO2ytSCbGnGZJmVQ==/2744662497923409567.jpg"   ></div>定制分区配置, 注意/boot和PPC所在磁盘的分区表一定是MSDOS的, 如果是GPT将无法引导使用.</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/anxE7BdlfQW6CTGOsvsI5A==/1022035640454303181.jpg"   ></div>&nbsp;</div><div>配置1GB PPC分区和4GB boot 分区 :&nbsp;</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img5.ph.126.net/92VY29NrIlAcT8ioW7RqxA==/2542844939622066155.jpg"   ></div><br></div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img8.ph.126.net/K1i1oQa09qTcMiowf2xk-g==/2593791910406608528.jpg"   ></div></div><div>根分区可放在RAID下面 :&nbsp;</div><div>把/dev/sdi和/dev/sdj配置时不格式, 选择为RAID分区类型 :&nbsp;</div><div>在RAID中配置RAID1 :&nbsp;</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img6.ph.126.net/WrFvwWCcnpZU-nDC5nFPnA==/6598278129935423856.jpg"   ></div></div><div>配置软件包, 选择合适的软件, 编译环境请勾上.</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img7.ph.126.net/ScyVmJUxgb5W7U0MDMflVA==/1322650915581300117.jpg"   ></div>&nbsp;</div><div>配置启动级别(如果希望使用VNC, 请使用5级别)</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/ECcrI60FEDXrR6K9uBcj1w==/1554023346437444442.jpg"   ></div></div><div>开始安装, 安装完后自动重启再次进入VNC进行安装后的配置 :&nbsp;</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img5.ph.126.net/hdhmCabftZGla5FyxMYp4A==/3093128519091316195.jpg"   ></div>其他配置略.</div><div>配置结束后再次自动重启, 进入shell安装其他软件包 :&nbsp;</div><div>例如: sysstat</div><div><div><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   alt="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img6.ph.126.net/nIqU2wxxYvHYoB34Dk6Ppg==/6597443600610031556.jpg"   ></div><br></div><div>使用案例 :&nbsp;</div><div>查看CPU信息和内存信息 :&nbsp;</div><div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >linux-8tov:~ # cat /proc/cpuinfo&nbsp;</font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 0</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 1</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 2</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 3</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 4</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 5</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 6</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 7</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 8</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 9</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 10</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 11</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 12</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 13</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 14</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 15</font></div><div><font size="2"   >cpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : POWER6 (architected), altivec supported</font></div><div><font size="2"   >clock &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 4208.000000MHz</font></div><div><font size="2"   >revision &nbsp; &nbsp; &nbsp; &nbsp;: 4.0 (pvr 003e 0400)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >timebase &nbsp; &nbsp; &nbsp; &nbsp;: 512000000</font></div><div><font size="2"   >platform &nbsp; &nbsp; &nbsp; &nbsp;: pSeries</font></div><div><font size="2"   >model &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : IBM,9117-MMA</font></div><div><font size="2"   >machine &nbsp; &nbsp; &nbsp; &nbsp; : CHRP IBM,9117-MMA</font></div></div><div></div><p></p></pre></div></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >linux-8tov:~ # cat /proc/meminfo&nbsp;</font></div><div><font size="2"   >MemTotal: &nbsp; &nbsp; &nbsp; 130020096 kB</font></div><div><font size="2"   >MemFree: &nbsp; &nbsp; &nbsp; &nbsp;108628416 kB</font></div><div><font size="2"   >Buffers: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6848 kB</font></div><div><font size="2"   >Cached: &nbsp; &nbsp; &nbsp; &nbsp; 20251840 kB</font></div><div><font size="2"   >SwapCached: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB</font></div><div><font size="2"   >Active: &nbsp; &nbsp; &nbsp; &nbsp; 14395264 kB</font></div><div><font size="2"   >Inactive: &nbsp; &nbsp; &nbsp; &nbsp;5962432 kB</font></div><div><font size="2"   >Active(anon): &nbsp; 13323776 kB</font></div><div><font size="2"   >Inactive(anon): &nbsp;4529472 kB</font></div><div><font size="2"   >Active(file): &nbsp; &nbsp;1071488 kB</font></div><div><font size="2"   >Inactive(file): &nbsp;1432960 kB</font></div><div><font size="2"   >Unevictable: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB</font></div><div><font size="2"   >Mlocked: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB</font></div><div><font size="2"   >SwapTotal: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB</font></div><div><font size="2"   >SwapFree: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB</font></div><div><font size="2"   >Dirty: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 448 kB</font></div><div><font size="2"   >Writeback: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB</font></div><div><font size="2"   >AnonPages: &nbsp; &nbsp; &nbsp; &nbsp;100800 kB</font></div><div><font size="2"   >Mapped: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4343104 kB</font></div><div><font size="2"   >Shmem: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;17754240 kB</font></div><div><font size="2"   >Slab: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 228096 kB</font></div><div><font size="2"   >SReclaimable: &nbsp; &nbsp; 118720 kB</font></div><div><font size="2"   >SUnreclaim: &nbsp; &nbsp; &nbsp; 109376 kB</font></div><div><font size="2"   >KernelStack: &nbsp; &nbsp; &nbsp; &nbsp;4224 kB</font></div><div><font size="2"   >PageTables: &nbsp; &nbsp; &nbsp; &nbsp;12800 kB</font></div><div><font size="2"   >NFS_Unstable: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB</font></div><div><font size="2"   >Bounce: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB</font></div><div><font size="2"   >WritebackTmp: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB</font></div><div><font size="2"   >CommitLimit: &nbsp; &nbsp;65010048 kB</font></div><div><font size="2"   >Committed_AS: &nbsp; 17960704 kB</font></div><div><font size="2"   >VmallocTotal: &nbsp; 8589934592 kB</font></div><div><font size="2"   >VmallocUsed: &nbsp; &nbsp; &nbsp;230528 kB</font></div><div><font size="2"   >VmallocChunk: &nbsp; 8589615424 kB</font></div><div><font size="2"   >HugePages_Total: &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"   >HugePages_Free: &nbsp; &nbsp; &nbsp; &nbsp;0</font></div><div><font size="2"   >HugePages_Rsvd: &nbsp; &nbsp; &nbsp; &nbsp;0</font></div><div><font size="2"   >HugePages_Surp: &nbsp; &nbsp; &nbsp; &nbsp;0</font></div><div><font size="2"   >Hugepagesize: &nbsp; &nbsp; &nbsp;16384 kB</font></div><p></p></pre></div><div><div style="line-height: 22px;"   >简单性能测试 :&nbsp;</div><div style="line-height: 22px;"   >将$PGDATA数据目录放到/dev/shm中, 规避IO问题, 测试一下POWER6在SUSE下发挥如何?</div><div style="line-height: 22px;"   >使用测试模型如下 :&nbsp;</div><div style="line-height: 22px;"   ><a style="line-height: 22px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201210279569426/"   >http://blog.163.com/digoal@126/blog/static/163877040201210279569426/</a></div></div><div>安装PostgreSQL :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >mkdir /home/postgres</font></div><div><font size="2"   >groupadd postgres</font></div><div><font size="2"   >useradd -g postgres postgres</font></div><div><font size="2"   >passwd postgres</font></div><div><font size="2"   >mkdir -p&nbsp;<span style="line-height: 22px;"   >/data01/postgres/pg_root</span></font></div><div><font size="2"   ><span style="line-height: 22px;"   >chown -R postgres:postgres&nbsp;</span><span style="line-height: 22px;"   >/data01/postgres</span></font></div><div><font size="2"   ><span style="line-height: 22px;"   >chmod 700</span><span style="line-height: 22px;"   >&nbsp;</span><span style="line-height: 22px;"   >/data01/postgres/pg_root</span></font></div><p></p></pre></div><div><span style="line-height: 22px;"   >检查flex版本</span></div><div><span style="line-height: 22px;"   ><div><pre class="prettyprint"   ><p></p><div><font size="2"   >linux-8tov:/opt/soft_bak # flex -V</font></div><div><font size="2"   >flex 2.5.35</font></div><p></p></pre></div><div>下载postgresql-9.2.1.tar.bz2</div><div><pre class="prettyprint"   ><p></p><div><span style="line-height: 22px;"   ><div><font size="2"   >tar -jxvf&nbsp;postgresql-9.2.1.tar.bz2</font></div><div><font size="2"   >chown -R postgres:postgres&nbsp;postgresql-9.2.1</font></div></span></div><div><font size="2"   >su - postgres</font></div><div><font size="2"   >vi .bash_profile</font></div><div><div><font size="2"   >export PS1="$USER@`/bin/hostname -s`-&gt; "</font></div><div><font size="2"   >export PGPORT=1921</font></div><div><font size="2"   >export PGUSER=postgres</font></div><div><font size="2"   >export PGDATA=/data01/postgres/pg_root</font></div><div><font size="2"   >export LANG=en_US.utf8</font></div><div><font size="2"   >export PGHOME=/opt/pgsql9.2.1</font></div><div><font size="2"   >export PGHOST=$PGDATA</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >export LD_LIBRARY_PATH=$PGHOME/lib:/lib64:/usr/lib64:/usr/local/lib64:/lib:/usr/lib:/usr/local/lib</font></div><div><font size="2"   >export DATE=`date +"%Y%m%d%H%M"`</font></div><div><font size="2"   >export PATH=$PGHOME/bin:$PATH:.</font></div><div><font size="2"   >export MANPATH=$PGHOME/share/man:$MANPATH</font></div><div><font size="2"   >alias rm='rm -i'</font></div><div><font size="2"   >alias ll='ls -lh'</font></div></div><div></div><p></p></pre></div></span></div><div>su - root</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >. /home/postgres/.bash_profile</font></div><div><font size="2"   >cd postgresql-9.2.1/</font></div><div><div><font size="2"   >./configure --prefix=/opt/pgsql9.2.1 --with-pgport=1921 --without-perl --without-python --without-tcl --without-openssl --without-pa</font></div><div><font size="2"   >m --without-ldap --without-libxml --without-libxslt --enable-thread-safety --with-wal-blocksize=16 --without-readline --enable-debug</font></div><div><font size="2"   >&nbsp;--without-zlib &amp;&amp; gmake world</font></div></div><div><font size="2"   >gmake install-world</font></div><p></p></pre></div><div><br></div><div>配置内核参数 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >vi /etc/sysctl.conf</font></div><div><div><font size="2"   ># Controls the maximum shared segment size, in bytes</font></div><div><font size="2"   >kernel.shmmax = 68719476736</font></div><div><font size="2"   ># Controls the maximum number of shared memory segments, in pages</font></div><div><font size="2"   >kernel.shmall = 4294967296</font></div><div><font size="2"   >kernel.shmmni = 4096</font></div><div><font size="2"   >kernel.sem = 50100 64128000 50100 1280</font></div><div><font size="2"   >fs.file-max = 7672460</font></div><div><font size="2"   >net.ipv4.ip_local_port_range = 9000 65000</font></div><div><font size="2"   >net.core.rmem_default = 1048576</font></div><div><font size="2"   >net.core.rmem_max = 4194304</font></div><div><font size="2"   >net.core.wmem_default = 262144</font></div><div><font size="2"   >net.core.wmem_max = 1048576</font></div><div><font size="2"   >net.ipv4.tcp_tw_recycle = 1</font></div><div><font size="2"   >net.ipv4.tcp_max_syn_backlog = 4096</font></div><div><font size="2"   >net.core.netdev_max_backlog = 10000</font></div><div><font size="2"   >net.ipv4.ip_conntrack_max = 655360</font></div><div><font size="2"   >fs.aio-max-nr = 1048576</font></div><div><font size="2"   >net.ipv4.tcp_timestamps = 0</font></div><div><font size="2"   >vm.overcommit_memory = 0</font></div></div><div><font size="2"   ><br></font></div><div><font size="2"   >sysctl -p</font></div><p></p></pre></div><div><br></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >vi /etc/security/limits.conf&nbsp;</font></div><div><div><font size="2"   >* soft &nbsp; &nbsp;nofile &nbsp;131072</font></div><div><font size="2"   >* hard &nbsp; &nbsp;nofile &nbsp;131072</font></div><div><font size="2"   >* soft &nbsp; &nbsp;nproc &nbsp; 131072</font></div><div><font size="2"   >* hard &nbsp; &nbsp;nproc &nbsp; 131072</font></div><div><font size="2"   >* soft &nbsp; &nbsp;core &nbsp; &nbsp;unlimited</font></div><div><font size="2"   >* hard &nbsp; &nbsp;core &nbsp; &nbsp;unlimited</font></div><div><font size="2"   >* soft &nbsp; &nbsp;memlock 50000000</font></div><div><font size="2"   >* hard &nbsp; &nbsp;memlock 50000000</font></div></div><p></p></pre></div><div><br></div><div>初始化数据库</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >su - postgres</font></div><div><font size="2"   >initdb -D $PGDATA -E UTF8 --locale=C -W</font></div><p></p></pre></div><div><br></div><div>修改参数 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@linux-8tov-&gt; cat postgresql.conf |grep "^[a-Z]"</font></div><div><font size="2"   >listen_addresses = '0.0.0.0' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# what IP address(es) to listen on;</font></div><div><font size="2"   >port = 1921 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # (change requires restart)</font></div><div><font size="2"   >max_connections = 100 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # (change requires restart)</font></div><div><font size="2"   >unix_socket_directory = '.' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # (change requires restart)</font></div><div><font size="2"   >unix_socket_permissions = 0777 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# begin with 0 to use octal notation</font></div><div><font size="2"   >shared_buffers = 4096MB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # min 128kB</font></div><div><font size="2"   >maintenance_work_mem = 1024MB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # min 1MB</font></div><div><font size="2"   >max_stack_depth = 6MB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # min 100kB</font></div><div><font size="2"   >fsync = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# turns forced synchronization on or off</font></div><div><font size="2"   >synchronous_commit = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# synchronization level;</font></div><div><font size="2"   >wal_sync_method = fsync &nbsp; &nbsp; &nbsp; &nbsp; # the default is the first option</font></div><div><font size="2"   >full_page_writes = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # recover from partial page writes</font></div><div><font size="2"   >wal_buffers = -1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# min 32kB, -1 sets based on shared_buffers</font></div><div><font size="2"   >checkpoint_segments = 128 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # in logfile segments, min 1, 16MB each</font></div><div><font size="2"   >random_page_cost = 1.0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# same scale as above</font></div><div><font size="2"   >effective_cache_size = 128000MB</font></div><div><font size="2"   >log_destination = 'csvlog' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Valid values are combinations of</font></div><div><font size="2"   >logging_collector = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Enable capturing of stderr and csvlog</font></div><div><font size="2"   >log_directory = 'pg_log' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# directory where log files are written,</font></div><div><font size="2"   >log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log' # log file name pattern,</font></div><div><font size="2"   >log_file_mode = 0600 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# creation mode for log files,</font></div><div><font size="2"   >log_truncate_on_rotation = on &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # If on, an existing log file with the</font></div><div><font size="2"   >log_rotation_age = 1d &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # Automatic rotation of logfiles will</font></div><div><font size="2"   >log_rotation_size = 10MB &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# Automatic rotation of logfiles will</font></div><div><font size="2"   >log_checkpoints = on</font></div><div><font size="2"   >log_error_verbosity = verbose &nbsp; &nbsp;# terse, default, or verbose messages</font></div><div><font size="2"   >log_timezone = 'PRC'</font></div><div><font size="2"   >datestyle = 'iso, mdy'</font></div><div><font size="2"   >timezone = 'PRC'</font></div><div><font size="2"   >lc_messages = 'C' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # locale for system error message</font></div><div><font size="2"   >lc_monetary = 'C' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # locale for monetary formatting</font></div><div><font size="2"   >lc_numeric = 'C' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# locale for number formatting</font></div><div><font size="2"   >lc_time = 'C' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # locale for time formatting</font></div><div><font size="2"   >default_text_search_config = 'pg_catalog.english'</font></div><p></p></pre></div><div>启动数据库</div><div><pre class="prettyprint"   ><p><font size="2"   >pg_ctl start</font></p></pre></div><div>测试P570: pgbench -M prepared -n -f ./ocz_test.sql -r -c 8 -j 8 -T 60 -U digoal digoal</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@linux-8tov-&gt; pgbench -M prepared -n -f ./ocz_test.sql -r -c 8 -j 8 -T 60 -U digoal digoal</font></div><div><font size="2"   >transaction type: Custom query</font></div><div><font size="2"   >scaling factor: 1</font></div><div><font size="2"   >query mode: prepared</font></div><div><font size="2"   >number of clients: 8</font></div><div><font size="2"   >number of threads: 8</font></div><div><font size="2"   >duration: 60 s</font></div><div><font size="2"   >number of transactions actually processed: 2044453</font></div><div><font size="2"   >tps = 34073.725437 (including connections establishing)</font></div><div><font size="2"   >tps = 34076.355739 (excluding connections establishing)</font></div><div><font size="2"   >statement latencies in milliseconds:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 0.002345 &nbsp; &nbsp; &nbsp; &nbsp;\setrandom id 1 100000000</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 0.230169 &nbsp; &nbsp; &nbsp; &nbsp;select f_ocz_test(:id);</font></div><p></p></pre></div><div><span style="line-height: 22px;"   >测试DELL R610 (</span>Intel(R) Xeon(R) CPU &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; E5504 &nbsp;@ 2.00GHz<span style="line-height: 22px;"   >):&nbsp;</span></div><div><pre class="prettyprint"   ><p></p><div><span style="line-height: 22px;"   ><font size="2"   >pgbench -M prepared -n -f ./ocz_test.sql -r -c 8 -j 8 -T 60 -U digoal digoal</font></span></div><div><span style="line-height: 22px;"   ><font size="2"   ><div>ocz@db-172-16-3-150-&gt; pgbench -M prepared -n -f ./ocz_test.sql -r -c 8 -j 8 -T 60 -U digoal digoal</div><div>transaction type: Custom query</div><div>scaling factor: 1</div><div>query mode: prepared</div><div>number of clients: 8</div><div>number of threads: 8</div><div>duration: 60 s</div><div>number of transactions actually processed: 872040</div><div>tps = 14531.464744 (including connections establishing)</div><div>tps = 14532.889839 (excluding connections establishing)</div><div>statement latencies in milliseconds:</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 0.002503 &nbsp; &nbsp; &nbsp; &nbsp;\setrandom id 1 200000000</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 0.545474 &nbsp; &nbsp; &nbsp; &nbsp;select f_ocz_test(:id);</div></font></span></div><p></p></pre></div><div><span style="line-height: 22px;"   >从测试结果来看, 4.2GHZ的CPU比INTEL的至强2.0GB(降频到1.6GHZ)强悍1倍多.</span></div><div><span style="line-height: 22px;"   >但是至强CPU显然没有完全发挥, 从以往经验来看16个(CPU核数*2)连接的时候才是它的最大发挥.&nbsp;</span></div><div><span style="line-height: 22px;"   >16个连接的测试如下, 现在就相差无几了.</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >ocz@db-172-16-3-150-&gt; pgbench -M prepared -n -f ./ocz_test.sql -r -c 16 -j 4 -T 60 -U digoal digoal</font></div><div><font size="2"   >transaction type: Custom query</font></div><div><font size="2"   >scaling factor: 1</font></div><div><font size="2"   >query mode: prepared</font></div><div><font size="2"   >number of clients: 16</font></div><div><font size="2"   >number of threads: 4</font></div><div><font size="2"   >duration: 60 s</font></div><div><font size="2"   >number of transactions actually processed: 1977694</font></div><div><font size="2"   >tps = 32950.854344 (including connections establishing)</font></div><div><font size="2"   >tps = 32960.524839 (excluding connections establishing)</font></div><div><font size="2"   >statement latencies in milliseconds:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 0.002050 &nbsp; &nbsp; &nbsp; &nbsp;\setrandom id 1 100000000</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 0.481313 &nbsp; &nbsp; &nbsp; &nbsp;select f_ocz_test(:id);</font></div><p></p></pre></div><div><span style="line-height: 22px;"   >在P570上使用同样的连接进行测试, 结果如下, 反而比不过X86的1.6GHZ至强了 :&nbsp;</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@linux-8tov-&gt; pgbench -M prepared -n -f ./ocz_test.sql -r -c 16 -j 4 -T 60 -U digoal digoal</font></div><div><font size="2"   >transaction type: Custom query</font></div><div><font size="2"   >scaling factor: 1</font></div><div><font size="2"   >query mode: prepared</font></div><div><font size="2"   >number of clients: 16</font></div><div><font size="2"   >number of threads: 4</font></div><div><font size="2"   >duration: 60 s</font></div><div><font size="2"   >number of transactions actually processed: 1896552</font></div><div><font size="2"   >tps = 31589.410287 (including connections establishing)</font></div><div><font size="2"   >tps = 31595.576777 (excluding connections establishing)</font></div><div><font size="2"   >statement latencies in milliseconds:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 0.002599 &nbsp; &nbsp; &nbsp; &nbsp;\setrandom id 1 100000000</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 0.501256 &nbsp; &nbsp; &nbsp; &nbsp;select f_ocz_test(:id);</font></div><p></p></pre></div><div><br></div><div>测试P570 pg_test_fsync :&nbsp;</div><div>普通硬盘中测试 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@linux-8tov-&gt; pg_test_fsync&nbsp;</font></div><div><font size="2"   >2 seconds per test</font></div><div><font size="2"   >O_DIRECT supported on this platform for open_datasync and open_sync.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare file sync methods using one 16kB write:</font></div><div><font size="2"   >(in wal_sync_method preference order, except fdatasync</font></div><div><font size="2"   >is Linux's default)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_datasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fdatasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 134.321 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;81.323 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync_writethrough &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_sync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 134.287 ops/sec</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare file sync methods using two 16kB writes:</font></div><div><font size="2"   >(in wal_sync_method preference order, except fdatasync</font></div><div><font size="2"   >is Linux's default)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_datasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fdatasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 144.923 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;87.392 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync_writethrough &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_sync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;52.988 ops/sec</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare open_sync with different write sizes:</font></div><div><font size="2"   >(This is designed to compare the cost of writing 16kB</font></div><div><font size="2"   >in different write open_sync sizes.)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 * 16kB open_sync write &nbsp; &nbsp; &nbsp; &nbsp; 147.943 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2 * &nbsp;8kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; 64.352 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4 * &nbsp;4kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; 33.420 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8 * &nbsp;2kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; 13.343 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 16 * &nbsp;1kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8.251 ops/sec</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Test if fsync on non-write file descriptor is honored:</font></div><div><font size="2"   >(If the times are similar, fsync() can sync data written</font></div><div><font size="2"   >on a different descriptor.)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write, fsync, close &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 116.095 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write, close, fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 109.310 ops/sec</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Non-Sync'ed 16kB writes:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 132190.476 ops/sec</font></div><p></p></pre></div><div>P570 /dev/shm中测试 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@linux-8tov-&gt; pg_test_fsync&nbsp;</font></div><div><font size="2"   >2 seconds per test</font></div><div><font size="2"   >O_DIRECT supported on this platform for open_datasync and open_sync.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare file sync methods using one 16kB write:</font></div><div><font size="2"   >(in wal_sync_method preference order, except fdatasync</font></div><div><font size="2"   >is Linux's default)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_datasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fdatasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 325731.238 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 327595.203 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync_writethrough &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_sync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a*</font></div><div><font size="2"   >* This file system and its mount options do not support direct</font></div><div><font size="2"   >I/O, e.g. ext4 in journaled mode.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare file sync methods using two 16kB writes:</font></div><div><font size="2"   >(in wal_sync_method preference order, except fdatasync</font></div><div><font size="2"   >is Linux's default)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_datasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fdatasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 190201.193 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 191306.352 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync_writethrough &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_sync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a*</font></div><div><font size="2"   >* This file system and its mount options do not support direct</font></div><div><font size="2"   >I/O, e.g. ext4 in journaled mode.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare open_sync with different write sizes:</font></div><div><font size="2"   >(This is designed to compare the cost of writing 16kB</font></div><div><font size="2"   >in different write open_sync sizes.)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 * 16kB open_sync write &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a*</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2 * &nbsp;8kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a*</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4 * &nbsp;4kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a*</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8 * &nbsp;2kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a*</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 16 * &nbsp;1kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a*</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Test if fsync on non-write file descriptor is honored:</font></div><div><font size="2"   >(If the times are similar, fsync() can sync data written</font></div><div><font size="2"   >on a different descriptor.)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write, fsync, close &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 111022.447 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write, close, fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 110380.913 ops/sec</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Non-Sync'ed 16kB writes:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 182141.988 ops/sec</font></div><p></p></pre></div><div><br></div><div>DELL R610 (Intel(R) Xeon(R) CPU &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; E5504 &nbsp;@ 2.00GHz) /dev/shm中的测试 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >ocz@db-172-16-3-150-&gt; pg_test_fsync&nbsp;</font></div><div><font size="2"   >2 seconds per test</font></div><div><font size="2"   >O_DIRECT supported on this platform for open_datasync and open_sync.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare file sync methods using one 16kB write:</font></div><div><font size="2"   >(in wal_sync_method preference order, except fdatasync</font></div><div><font size="2"   >is Linux's default)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_datasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fdatasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 271407.153 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 272099.550 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync_writethrough &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_sync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a*</font></div><div><font size="2"   >* This file system and its mount options do not support direct</font></div><div><font size="2"   >I/O, e.g. ext4 in journaled mode.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare file sync methods using two 16kB writes:</font></div><div><font size="2"   >(in wal_sync_method preference order, except fdatasync</font></div><div><font size="2"   >is Linux's default)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_datasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fdatasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 150862.830 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 149515.375 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync_writethrough &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_sync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a*</font></div><div><font size="2"   >* This file system and its mount options do not support direct</font></div><div><font size="2"   >I/O, e.g. ext4 in journaled mode.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare open_sync with different write sizes:</font></div><div><font size="2"   >(This is designed to compare the cost of writing 16kB</font></div><div><font size="2"   >in different write open_sync sizes.)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 * 16kB open_sync write &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a*</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2 * &nbsp;8kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a*</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4 * &nbsp;4kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a*</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8 * &nbsp;2kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a*</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 16 * &nbsp;1kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a*</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Test if fsync on non-write file descriptor is honored:</font></div><div><font size="2"   >(If the times are similar, fsync() can sync data written</font></div><div><font size="2"   >on a different descriptor.)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write, fsync, close &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 140258.073 ops/sec</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write, close, fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 140829.814 ops/sec</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Non-Sync'ed 16kB writes:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 203436.554 ops/sec</font></div><p></p></pre></div><div>测试P570的 pg_test_timing</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >linux-8tov:~ # cat /sys/devices/system/clocksource/clocksource0/current_clocksource&nbsp;</font></div><div><font size="2"   >timebase</font></div><div><font size="2"   >linux-8tov:~ # cat /sys/devices/system/clocksource/clocksource0/available_clocksource&nbsp;</font></div><div><font size="2"   >timebase&nbsp;</font></div></div><div><div><font size="2"   >postgres@linux-8tov-&gt; pg_test_timing&nbsp;</font></div><div><font size="2"   >Testing timing overhead for 3 seconds.</font></div><div><font size="2"   >Per loop time including overhead: 118.81 nsec</font></div><div><font size="2"   >Histogram of timing durations:</font></div><div><font size="2"   >&nbsp; &nbsp;&lt; usec: &nbsp; &nbsp; &nbsp;count &nbsp; percent</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; 256: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp;0.00000%</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; 128: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;0.00000%</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;64: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;0.00000%</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;32: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4 &nbsp;0.00002%</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;16: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6 &nbsp;0.00002%</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 8: &nbsp; &nbsp; &nbsp; &nbsp;122 &nbsp;0.00048%</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 4: &nbsp; &nbsp; &nbsp; &nbsp;248 &nbsp;0.00098%</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 2: &nbsp; &nbsp;2998424 11.87444%</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 1: &nbsp; 22252273 88.12405%</font></div></div><p></p></pre></div><div><span style="line-height: 22px;"   >DELL R610 (Intel(R) Xeon(R) CPU &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; E5504 &nbsp;@ 2.00GHz) 测试的pg_test_timing</span></div><div><pre class="prettyprint"   ><p></p><div><span style="line-height: 22px;"   ><font size="2"   ><div>[root@db-172-16-3-150 data05]# cat /sys/devices/system/clocksource/clocksource0/current_clocksource</div><div>jiffies&nbsp;</div><div>[root@db-172-16-3-150 data05]# cat /sys/devices/system/clocksource/clocksource0/available_clocksource&nbsp;</div><div>jiffies&nbsp;</div></font></span></div><div><span style="line-height: 22px;"   ><font size="2"   ><div>ocz@db-172-16-3-150-&gt; pg_test_timing&nbsp;</div><div>Testing timing overhead for 3 seconds.</div><div>Per loop time including overhead: 80.17 nsec</div><div>Histogram of timing durations:</div><div>&nbsp; &nbsp;&lt; usec: &nbsp; &nbsp; &nbsp;count &nbsp; percent</div><div>&nbsp; &nbsp; &nbsp; 128: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3 &nbsp;0.00001%</div><div>&nbsp; &nbsp; &nbsp; &nbsp;64: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp;0.00000%</div><div>&nbsp; &nbsp; &nbsp; &nbsp;32: &nbsp; &nbsp; &nbsp; &nbsp; 14 &nbsp;0.00004%</div><div>&nbsp; &nbsp; &nbsp; &nbsp;16: &nbsp; &nbsp; &nbsp; 3004 &nbsp;0.00803%</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 8: &nbsp; &nbsp; &nbsp; &nbsp;294 &nbsp;0.00079%</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 4: &nbsp; &nbsp; &nbsp; &nbsp;220 &nbsp;0.00059%</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 2: &nbsp; &nbsp;2971082 &nbsp;7.93924%</div><div>&nbsp; &nbsp; &nbsp; &nbsp; 1: &nbsp; 34448131 92.05131%</div></font></span></div><p></p></pre></div><div>从测试结果来看, P570取时间的损耗要大一点.</div><div><br></div><div>【注意】</div><div>1. 本例中P570连接了存储, 所以在安装SUSE时会提示检测到多路径设备, 是否需要激活.</div><div>安装时不要激活, 因为多路径设备激活后没有配置multipathd.conf的情况下, 会把所有盘都加到多路径中.</div><div>而操作系统不能安装在多路径设备中, 因为系统还没有加载时根本认不到多路径设备.</div><div>所以安装时请选择不激活多路径设备.</div><div>将操作系统安装到本地硬盘中.</div><div>2. 必须有PPC分区 和 boot分区. boot分区不要使用lvm或者RAID, 否则无法引导.</div><div>3. 其他分区可以使用RAID或者LVM.</div><div>4.&nbsp;<a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402012315112954240/"   >http://blog.163.com/digoal@126/blog/static/1638770402012315112954240/</a></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="SUSE SLES-11-SP2-DVD-ppc64-GM-DVD1 installed on IBM PowerPC P570 POWER6 - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>