<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">share volumns between docker containers & local host</h2>
	<h5 id="">2014-10-29 8:57:20&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201492852528197/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>某些时候我们可能要在container之间共享数据, 或者在宿主机和container之间共享数据.</div><div>docker提供了这样的功能(-v 以及 -<span style="line-height: 28px;"   >-volumes-from</span><span style="line-height: 28px;"   >).</span></div><div>下面举几个例子.</div><div>1. 在创建container时创建卷</div><div><span style="line-height: 28px;"   >2. 在创建container时创建卷对应本地主机目录</span></div><div><span style="line-height: 28px;"   >3. 多个container挂载共享的本地主机目录</span></div><div>4. 创建数据卷container, 其他container挂载数据卷container的卷, 共享数据</div><div><span style="line-height: 28px;"   >5. 其他container级联挂载数据卷container的卷, 共享数据</span></div><div><span style="line-height: 28px;"   >6. 备份container共享卷的方法</span></div><div><br></div><div><div style="line-height: 28px;"   >1. 在创建container时创建卷</div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 ~]# docker run --rm -i -t -v /test postgres:9.3.5 /bin/bash</font></div><div style="line-height: 28px;"   ><font size="2"   >root@21490fa4b316:/# df -h /test</font></div><div style="line-height: 28px;"   ><font size="2"   >Filesystem &nbsp; &nbsp; &nbsp;Size &nbsp;Used Avail Use% Mounted on</font></div><div style="line-height: 28px;"   ><font size="2"   >/dev/sdd1 &nbsp; &nbsp; &nbsp; 916G &nbsp;227G &nbsp;643G &nbsp;27% /test</font></div><p></p></pre></div><div style="line-height: 28px;"   ><br></div><div style="line-height: 28px;"   >-v /test 指创建一个卷, &nbsp; 挂载点/test.</div><div style="line-height: 28px;"   >你也可以使用多个-v参数创建多个卷, 例如 :&nbsp;</div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 ~]# docker run --rm -i -t -v /test -v /test1 -v /test2 postgres:9.3.5 /bin/bash</font></div><div style="line-height: 28px;"   ><font size="2"   >root@00e87adfe3ea:/# df -h /test*</font></div><div style="line-height: 28px;"   ><font size="2"   >Filesystem &nbsp; &nbsp; &nbsp;Size &nbsp;Used Avail Use% Mounted on</font></div><div style="line-height: 28px;"   ><font size="2"   >/dev/sdd1 &nbsp; &nbsp; &nbsp; 916G &nbsp;227G &nbsp;643G &nbsp;27% /test</font></div><div style="line-height: 28px;"   ><font size="2"   >/dev/sdd1 &nbsp; &nbsp; &nbsp; 916G &nbsp;227G &nbsp;643G &nbsp;27% /test1</font></div><div style="line-height: 28px;"   ><font size="2"   >/dev/sdd1 &nbsp; &nbsp; &nbsp; 916G &nbsp;227G &nbsp;643G &nbsp;27% /test2</font></div><p></p></pre></div></div><div style="line-height: 28px;"   ><br></div></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   >2. 在创建container时创建卷对应本地主机目录</span></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   >我们可以在container和宿主机之间共享数据, 只要在创建卷时指定本地目录即可.</span></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   >例如 :&nbsp;</span></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 data01]# cd /data01/</font></div><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 data01]# mkdir test</font></div><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 data01]# docker run --rm -i -t -v /data01/test:/hello:rw postgres:9.3.5 /bin/bash</font></div><div style="line-height: 28px;"   ><font size="2"   >root@8238bc46c1da:/# df -h /hello</font></div><div style="line-height: 28px;"   ><font size="2"   >Filesystem &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size &nbsp;Used Avail Use% Mounted on</font></div><div style="line-height: 28px;"   ><font size="2"   >/dev/mapper/vgdata01-lv01 &nbsp;2.7T &nbsp;339G &nbsp;2.3T &nbsp;13% /hello</font></div><div style="line-height: 28px;"   ><font size="2"   >root@8238bc46c1da:/# cd /hello</font></div><div style="line-height: 28px;"   ><font size="2"   >root@8238bc46c1da:/hello# echo "hello world" &gt;./hello</font></div><div style="line-height: 28px;"   ><font size="2"   >root@8238bc46c1da:/hello# ll</font></div><div style="line-height: 28px;"   ><font size="2"   >bash: ll: command not found</font></div><div style="line-height: 28px;"   ><font size="2"   >root@8238bc46c1da:/hello# ls -la</font></div><div style="line-height: 28px;"   ><font size="2"   >total 8</font></div><div style="line-height: 28px;"   ><font size="2"   >drwxr-xr-x &nbsp;2 root root &nbsp; 18 Oct 28 09:35 .</font></div><div style="line-height: 28px;"   ><font size="2"   >drwxr-xr-x 23 root root 4096 Oct 28 09:34 ..</font></div><div style="line-height: 28px;"   ><font size="2"   >-rw-r--r-- &nbsp;1 root root &nbsp; 12 Oct 28 09:35 hello</font></div><p></p></pre></div><div style="line-height: 28px;"   >这个文件在宿主机的/data01/test下可以看到.</div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 docker]# cd /data01/test/</font></div><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 test]# ll</font></div><div style="line-height: 28px;"   ><font size="2"   >total 4</font></div><div style="line-height: 28px;"   ><font size="2"   >-rw-r--r-- 1 root root 12 Oct 28 17:35 hello</font></div><p></p></pre></div><div style="line-height: 28px;"   ><br></div><div style="line-height: 28px;"   >但是, 使用第一种方法创建的卷, 在宿主机怎么能看到呢? 后面会提到如何利用"数据卷container"将那种卷的数据拷贝到宿主机.</div></div></span></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   ><br></span></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   >3. 多个container挂载共享的本地主机目录</span></div><div style="line-height: 28px;"   >不要关闭第一个container, 我们再启动一个container. 挂载同一个本地目录.</div><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 ~]# docker run --rm -i -t -v /data01/test:/hello:rw postgres:9.3.5 /bin/bash</font></div><div style="line-height: 28px;"   ><font size="2"   >root@7c99c4f4a01f:/# cd /hello/</font></div><div style="line-height: 28px;"   ><font size="2"   >root@7c99c4f4a01f:/hello# ls -la</font></div><div style="line-height: 28px;"   ><font size="2"   >total 8</font></div><div style="line-height: 28px;"   ><font size="2"   >drwxr-xr-x &nbsp;2 root root &nbsp; 18 Oct 28 09:35 .</font></div><div style="line-height: 28px;"   ><font size="2"   >drwxr-xr-x 23 root root 4096 Oct 28 09:36 ..</font></div><div style="line-height: 28px;"   ><font size="2"   >-rw-r--r-- &nbsp;1 root root &nbsp; 12 Oct 28 09:35 hello</font></div><div style="line-height: 28px;"   ><font size="2"   >root@7c99c4f4a01f:/hello# echo "hello world too" &gt;&gt;./hello&nbsp;</font></div><div style="line-height: 28px;"   ><font size="2"   >root@7c99c4f4a01f:/hello# cat hello&nbsp;</font></div><div style="line-height: 28px;"   ><font size="2"   >hello world</font></div><div style="line-height: 28px;"   ><font size="2"   >hello world too</font></div><div style="line-height: 28px;"   ><font size="2"   ><br></font></div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 ~]# docker ps</font></div><div style="line-height: 28px;"   ><font size="2"   >CONTAINER ID &nbsp; &nbsp; &nbsp; &nbsp;IMAGE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; COMMAND &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CREATED &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; STATUS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PORTS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NAMES</font></div><div style="line-height: 28px;"   ><font size="2"   >7c99c4f4a01f &nbsp; &nbsp; &nbsp; &nbsp;postgres:9 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/docker-entrypoint.s &nbsp; 31 seconds ago &nbsp; &nbsp; &nbsp;Up 30 seconds &nbsp; &nbsp; &nbsp; 5432/tcp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pensive_hoover &nbsp; &nbsp; &nbsp;</font></div><div style="line-height: 28px;"   ><font size="2"   >8238bc46c1da &nbsp; &nbsp; &nbsp; &nbsp;postgres:9 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/docker-entrypoint.s &nbsp; 2 minutes ago &nbsp; &nbsp; &nbsp; Up 2 minutes &nbsp; &nbsp; &nbsp; &nbsp;5432/tcp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;grave_thompson &nbsp; </font></div></div><p></p></pre><div style="line-height: 28px;"   ><span style="line-height: 28px;"   >&nbsp; &nbsp;</span></div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   >可以看到, 现在这两个container是共享挂载了本地的同一个目录的, 宿主机, container都看到了同一份数据.</div><div style="line-height: 28px;"   >有兴趣的朋友可以很方便的利用这一点来做基于共享存储的类似RHCS HA的实验.</div></div></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   ><br></span></div><div style="line-height: 28px;"   >4. 创建数据卷container, 其他container挂载"数据卷container"的卷, 共享数据.</div><div style="line-height: 28px;"   >现在有2个container, 接下来我再开启一个container, 同时第三个container要挂载前面实验了-v的container的卷.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-172-16-3-221 ~]# docker run --rm -i -t --volumes-from=pensive_hoover:rw postgres:9.3.5 /bin/bash</font></div><div><div><font size="2"   >root@edae35acc741:/# df -h /hello</font></div><div><font size="2"   >Filesystem &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size &nbsp;Used Avail Use% Mounted on</font></div><div><font size="2"   >/dev/mapper/vgdata01-lv01 &nbsp;2.7T &nbsp;339G &nbsp;2.3T &nbsp;13% /hello</font></div></div><p></p></pre></div><div style="line-height: 28px;"   ><br></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   >5. 其他container级联挂载"数据卷container"的卷, 共享数据.</span></div><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 ~]# docker ps</font></div><div style="line-height: 28px;"   ><font size="2"   >CONTAINER ID &nbsp; &nbsp; &nbsp; &nbsp;IMAGE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; COMMAND &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CREATED &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; STATUS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;PORTS &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NAMES</font></div><div style="line-height: 28px;"   ><font size="2"   >edae35acc741 &nbsp; &nbsp; &nbsp; &nbsp;postgres:9 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/docker-entrypoint.s &nbsp; 2 minutes ago &nbsp; &nbsp; &nbsp; Up 2 minutes &nbsp; &nbsp; &nbsp; &nbsp;5432/tcp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lonely_mcclintock &nbsp;&nbsp;</font></div><div style="line-height: 28px;"   ><font size="2"   >7c99c4f4a01f &nbsp; &nbsp; &nbsp; &nbsp;postgres:9 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/docker-entrypoint.s &nbsp; 9 minutes ago &nbsp; &nbsp; &nbsp; Up 9 minutes &nbsp; &nbsp; &nbsp; &nbsp;5432/tcp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pensive_hoover &nbsp; &nbsp; &nbsp;</font></div><div style="line-height: 28px;"   ><font size="2"   >8238bc46c1da &nbsp; &nbsp; &nbsp; &nbsp;postgres:9 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/docker-entrypoint.s &nbsp; 11 minutes ago &nbsp; &nbsp; &nbsp;Up 11 minutes &nbsp; &nbsp; &nbsp; 5432/tcp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;grave_thompson</font></div></pre><span style="line-height: 28px;"   ><div style="line-height: 28px;"   >启动一个新的container , 并级联从<span style="line-height: 28px;"   >lonely_mcclintock挂载volume.</span></div></span><span style="line-height: 28px;"   ><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 ~]# docker run --rm -i -t --volumes-from=lonely_mcclintock:rw postgres:9.3.5 /bin/bash</font></div><div style="line-height: 28px;"   ><font size="2"   >root@aab6a732ddbc:/# df -h /hello</font></div><div style="line-height: 28px;"   ><font size="2"   >Filesystem &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size &nbsp;Used Avail Use% Mounted on</font></div><div style="line-height: 28px;"   ><font size="2"   >/dev/mapper/vgdata01-lv01 &nbsp;2.7T &nbsp;339G &nbsp;2.3T &nbsp;13% /hello</font></div><p></p></pre></div></div><div style="line-height: 28px;"   ><br></div></span></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   >6. 备份container共享卷的方法</span></div></div><div style="line-height: 28px;"   >我们在第一个例子中启动container时创建了一个卷,&nbsp;<span style="line-height: 28px;"   >因为不是挂载的宿主机目录, 所以</span><span style="line-height: 28px;"   >宿主机看不到这个卷的内容.</span></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   >使用第四个例子的方法, 启动一个新的container(同时挂载本地卷以及共享卷)可以读取到它的内容, 并备份.</span></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   >首先启动一个container, 并创建一个卷</span></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   ><font size="2"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   >[root@db-172-16-3-221 ~]# docker run --rm -t -i --name="digoal" -v /test_v postgres:9.3.5 /bin/bash</div><div style="line-height: 28px;"   >root@041e843a1408:/# cd /test_v</div><div style="line-height: 28px;"   >root@041e843a1408:/test_v# ls -la</div><div style="line-height: 28px;"   >total 8</div><div style="line-height: 28px;"   >drwxr-xr-x &nbsp;2 root root 4096 Oct 29 00:51 .</div><div style="line-height: 28px;"   >drwxr-xr-x 23 root root 4096 Oct 29 00:51 ..</div><div style="line-height: 28px;"   >root@041e843a1408:/test_v# echo "hello world, i am digoal." &gt;&gt;./hello</div><p></p></pre></div></font></span></div><div style="line-height: 28px;"   >为了备份前面那个container的卷到本地, 首先在宿主机创建本地目录</div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 ~]# cd /data01/</font></div><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 data01]# mkdir backup_test</font></div><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 data01]# cd backup_test/</font></div><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 backup_test]# pwd</font></div><div style="line-height: 28px;"   ><font size="2"   >/data01/backup_test</font></div><p></p></pre></div></div><div style="line-height: 28px;"   >再启动一个container, 同时挂载本地卷以及要备份的container的卷</div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 backup_test]# docker run --rm -t -i --name="digoal001" --volumes-from=digoal -v /data01/backup_test:/backup:rw postgres:9.3.5 /bin/bash</font></div><div style="line-height: 28px;"   ><font size="2"   >root@e5e8971c46cd:/# cd /test_v</font></div><div style="line-height: 28px;"   ><font size="2"   >root@e5e8971c46cd:/test_v# ls -la</font></div><div style="line-height: 28px;"   ><font size="2"   >total 12</font></div><div style="line-height: 28px;"   ><font size="2"   >drwxr-xr-x &nbsp;2 root root 4096 Oct 29 00:52 .</font></div><div style="line-height: 28px;"   ><font size="2"   >drwxr-xr-x 24 root root 4096 Oct 29 00:54 ..</font></div><div style="line-height: 28px;"   ><font size="2"   >-rw-r--r-- &nbsp;1 root root &nbsp; 26 Oct 29 00:52 hello</font></div><div style="line-height: 28px;"   ><font size="2"   >root@e5e8971c46cd:/test_v# tar -jcvf /backup/test_v.tar.bz2 /test_v</font></div><div style="line-height: 28px;"   ><font size="2"   >tar: Removing leading `/' from member names</font></div><div style="line-height: 28px;"   ><font size="2"   >/test_v/</font></div><div style="line-height: 28px;"   ><font size="2"   >/test_v/hello</font></div><div style="line-height: 28px;"   ><font size="2"   >tar (child): bzip2: Cannot exec: No such file or directory</font></div><div style="line-height: 28px;"   ><font size="2"   >tar (child): Error is not recoverable: exiting now</font></div><div style="line-height: 28px;"   ><font size="2"   >tar: Child returned status 2</font></div><div style="line-height: 28px;"   ><font size="2"   >tar: Error is not recoverable: exiting now</font></div><div style="line-height: 28px;"   ><font size="2"   >root@e5e8971c46cd:/test_v# tar -cvf /backup/test_v.tar /test_v &nbsp; &nbsp;&nbsp;</font></div><div style="line-height: 28px;"   ><font size="2"   >tar: Removing leading `/' from member names</font></div><div style="line-height: 28px;"   ><font size="2"   >/test_v/</font></div><div style="line-height: 28px;"   ><font size="2"   >/test_v/hello</font></div><div style="line-height: 28px;"   ><font size="2"   >root@e5e8971c46cd:/test_v# cd /backup/</font></div><div style="line-height: 28px;"   ><font size="2"   >root@e5e8971c46cd:/backup# ls -la</font></div><div style="line-height: 28px;"   ><font size="2"   >total 16</font></div><div style="line-height: 28px;"   ><font size="2"   >drwxr-xr-x &nbsp;2 root root &nbsp; &nbsp;44 Oct 29 00:55 .</font></div><div style="line-height: 28px;"   ><font size="2"   >drwxr-xr-x 24 root root &nbsp;4096 Oct 29 00:54 ..</font></div><div style="line-height: 28px;"   ><font size="2"   >-rw-r--r-- &nbsp;1 root root 10240 Oct 29 00:55 test_v.tar</font></div><div style="line-height: 28px;"   ><font size="2"   >-rw-r--r-- &nbsp;1 root root &nbsp; &nbsp; 0 Oct 29 00:54 test_v.tar.bz2</font></div><div style="line-height: 28px;"   ><font size="2"   >root@e5e8971c46cd:/backup# rm -rf test_v.tar.bz2&nbsp;</font></div><p></p></pre></div><div style="line-height: 28px;"   >此时在宿主机可以看到这个备份文件</div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 ~]# cd /data01/backup_test/</font></div><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-221 backup_test]# ll</font></div><div style="line-height: 28px;"   ><font size="2"   >total 12</font></div><div style="line-height: 28px;"   ><font size="2"   >-rw-r--r-- 1 root root 10240 Oct 29 08:55 test_v.tar</font></div></div></div><div><div><font size="2"   >[root@db-172-16-3-221 backup_test]# tar -xvf &nbsp;test_v.tar&nbsp;</font></div><div><font size="2"   >test_v/</font></div><div><font size="2"   >test_v/hello</font></div><div><font size="2"   >[root@db-172-16-3-221 backup_test]# ll</font></div><div><font size="2"   >total 12</font></div><div><font size="2"   >drwxr-xr-x 2 root root &nbsp; &nbsp;18 Oct 29 08:52 test_v</font></div><div><font size="2"   >-rw-r--r-- 1 root root 10240 Oct 29 08:55 test_v.tar</font></div><div><font size="2"   >[root@db-172-16-3-221 backup_test]# cat test_v/hello&nbsp;</font></div><div><font size="2"   >hello world, i am digoal.</font></div></div><p></p></pre></div></div></div><div><br></div><div>[参考]</div><div>1. man docker-run</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;-v, -volume=volume[:ro|:rw] Bind mount a volume to the container.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;The -v option can be used one or more times to add one or more mounts to a container. &nbsp;These mounts can then be</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;used in other containers using the --volumes-from option.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;The &nbsp;volume &nbsp;may &nbsp;be &nbsp;optionally suffixed with :ro or :rw to mount the volumes in read-only or read-write mode,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;respectively. &nbsp;By default, the volumes are mounted read-write. &nbsp;See examples.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;--volumes-from=container-id[:ro|:rw] Will mount volumes from the specified container identified &nbsp;by &nbsp;container-</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;id. &nbsp; Once &nbsp;a &nbsp;volume is mounted in a one container it can be shared with other containers using the --volumes-</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;from option when running those other containers. &nbsp;The volumes can be shared even if the original container with</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;the mount is not running.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;The &nbsp;container &nbsp;ID &nbsp;may &nbsp;be optionally suffixed with :ro or :rw to mount the volumes in read-only or read-write</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;mode, respectively. &nbsp;By default, the volumes are mounted in the same mode (read write or read only) as the ref-</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;erence container.</font></div><p></p></pre></div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="share volumns between docker containers  local host - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>