<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">zpool raidz vdev how many under block dev choose for optimal performance (Best Practices and Caveats)</h2>
	<h5 id="">2014-06-17 14:52:18&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201451725147753/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>在创建raidz的vdev时, 到底多少个设备合适呢?下面是zfs best practices给出的答案.</div><div>推荐使用2^n+z的个数.</div><div>z指校验数据的份数, 即允许坏多少块盘.</div><div>例如</div><div>raidz1, 那么使用的底层块设备个数3, 5, 9, 17等. 建议基数不超过16(除非你的CPU特别强悍).</div><div><span style="line-height: 28px;"   >raidz2, 那么使用的底层块设备个数4, 6, 10, 18等. 建议基数不超过16(除非你的CPU特别强悍).</span></div><div><span style="line-height: 28px;"   >raidz3, 那么使用的底层块设备个数5, 7, 11, 19等. 建议基数不超过16(除非你的CPU特别强悍).</span></div><div><br></div><div><font size="2"   color="#99cc00"   >For the number of disks in the storage pool, use the "power of two plus parity" recommendation. This is for storage space efficiency and hitting the "sweet spot" in performance. So, for a RAIDZ-1 VDEV, use three (2+1), five (4+1), or nine (8+1) disks. For a RAIDZ-2 VDEV, use four (2+2), six (4+2), ten (8+2), or eighteen (16+2) disks. For a RAIDZ-3 VDEV, use five (2+3), seven (4+3), eleven (8+3), or nineteen (16+3) disks. For pools larger than this, consider striping across mirrored VDEVs.</font></div><div><br></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="https://pthree.org/2012/12/13/zfs-administration-part-viii-zpool-best-practices-and-caveats/"   >https://pthree.org/2012/12/13/zfs-administration-part-viii-zpool-best-practices-and-caveats/</a></div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="zpool raidz vdev under block dev choose for optimal performance (Best Practices and Caveats) - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>