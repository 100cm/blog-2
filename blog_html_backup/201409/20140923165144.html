<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">pg_rman@NTT & Barman@2ndQuadrant</h2>
	<h5 id="">2014-09-23 16:51:44&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201482343912660/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><span style="line-height: 28px;"   >pg_rman是NTT开源的一个postgresql备份和</span><span style="line-height: 28px;"   >还原管理工具, 使用比较简便, 增量备份是基于文件的更新时间戳来实现的, 文件级的增量, 无法实现基于数据块变更的增量备份.</span></div><div><a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://sourceforge.net/projects/pg-rman/"   >http://sourceforge.net/projects/pg-rman/</a></div><div><span style="line-height: 28px;"   ><br></span></div><div>Barman是2ndQuadrant开源的备份管理软件, 同样<span style="line-height: 28px;"   >无法实现基于数据块变更的增量备份.</span></div><div><a target="_blank" rel="nofollow" href="http://www.pgbarman.org/"   >http://www.pgbarman.org/</a></div><div><br></div><div><span style="line-height: 28px;"   >如果需要基于块的增量备份, 可以参考 :&nbsp;</span></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201451894734122/"   >http://blog.163.com/digoal@126/blog/static/163877040201451894734122/</a></div><div>使用zfs来实现基于块的增量备份, 同时支持存储压缩.&nbsp;</div><div><div><img title="pg_rman@NTT  Barman@2ndQuadrant - 德哥@Digoal - PostgreSQL research"   alt="pg_rman@NTT  Barman@2ndQuadrant - 德哥@Digoal - PostgreSQL research"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/5rt_XEElHuaJdp8U2u-kAw==/6608895014212923824.png"   ></div></div><div><br></div><div><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >pg_rman -- manages backup and recovery of PostgreSQL.</p><h1 style="font-size: x-large; margin-top: 0px; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Synopsis" rel="nofollow"   ></a>Synopsis</h1><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>pg_rman </span><span style="color: rgb(102, 102, 0);"   >[</span><span> OPTIONS </span><span style="color: rgb(102, 102, 0);"   >]</span><span> </span><span style="color: rgb(102, 102, 0);"   >{</span><span> init </span><span style="color: rgb(102, 102, 0);"   >|</span><span> backup </span><span style="color: rgb(102, 102, 0);"   >|</span><span> restore </span><span style="color: rgb(102, 102, 0);"   >|</span><span> show </span><span style="color: rgb(102, 102, 0);"   >[</span><span> DATE </span><span style="color: rgb(102, 102, 0);"   >|</span><span> timeline </span><span style="color: rgb(102, 102, 0);"   >]</span><span> </span><span style="color: rgb(102, 102, 0);"   >|</span><span> validate </span><span style="color: rgb(102, 102, 0);"   >[</span><span> DATE </span><span style="color: rgb(102, 102, 0);"   >]</span><span> </span><span style="color: rgb(102, 102, 0);"   >|</span><span> </span><span style="color: rgb(0, 0, 136);"   >delete</span><span> DATE </span><span style="color: rgb(102, 102, 0);"   >}</span></pre><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >pg_rman has the features below:</p><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >Takes a backup while database including tablespaces with just one command.</li><li style="margin-bottom: 0.3em;"   >Can recovery from backup with just one command.</li><li style="margin-bottom: 0.3em;"   >Supports incremental backup and compression of backup files so that it takes less disk spaces.</li><li style="margin-bottom: 0.3em;"   >Manages backup generations and shows a catalog of the backups.</li><li style="margin-bottom: 0.3em;"   >Supports storage snapshot.</li></ul><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >DATE is the start time of the target backup in ISO-format (YYYY-MM-DD HH:MI:SS). Prefix match is used to compare DATE and backup files.</p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ pg_rman show </span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >12</span><span> </span><span style="color: rgb(136, 0, 0);"   ># show backups in a month of December 2009</span><span><br>$ pg_rman validate &nbsp; &nbsp; </span><span style="color: rgb(136, 0, 0);"   ># validate all unvalidated backups</span></pre><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >pg_rman supports the following commands. See also Options for details of OPTIONS.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >init</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Initialize a backup catalog.</blockquote><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >backup</span><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Take an online backup.</blockquote><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >restore</span><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Do restore.</blockquote><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >show</span><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Show backup history.<br><br>The timeline option shows timeline of the backup and the parent's timeline for each backup.</blockquote><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >validate</span><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Validate backup files.</blockquote><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >delete</span><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Delete backup files.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><h1 style="font-size: x-large; margin-top: 0px; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Description" rel="nofollow"   ></a>Description</h1><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >pg_rman is a utility program to backup and restore PostgreSQL database. It takes a physical online backup of whole database cluster, archive WALs, and server logs.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >pg_rman supports getting backup from standby-site with PostgreSQL 9.0 later.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >And pg_rman supports storage snapshot backup.</p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Initialize_a_backup_catalog" rel="nofollow"   ></a>Initialize a backup catalog</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >First, you need to create "a backup catalog" to store backup files and their metadata.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >It is recommended to setup archive_mode and archive_command in postgresql.conf before initialize the backup catalog. If the variables are initialized, pg_rman can adjust the config file to the setting. In this case, you have to specify the database cluster path for PostgreSQL. Please specify it in PGDATA environmental variable or -D/--pgdata option.</p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ pg_rman init </span><span style="color: rgb(102, 102, 0);"   >-</span><span>B </span><span style="color: rgb(102, 102, 0);"   >&lt;</span><span>a backup catalog path</span><span style="color: rgb(102, 102, 0);"   >&gt;</span></pre><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Backup" rel="nofollow"   ></a>Backup</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Backup target can be one of the following types. Also serverlogs can be added.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Full backup</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Backup a whole database cluster.</blockquote><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Incremental backup</span><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Backup only files or pages modified after the last verified backup.</blockquote><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Archive WAL backup</span><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Backup only archive WAL files.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >It is recommended to verify backup files as soon as possible after backup. Unverified backup cannot be used in restore nor in incremental backup.</p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Restore" rel="nofollow"   ></a>Restore</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >PostgreSQL server should be stopped before restore. If database cluster still exists, restore command will save unarchived transaction log and delete all database files. You can retry recovery until a new backup is taken. After restoring files, pg_rman create recovery.conf in $PGDATA. The conf file contains parameters to recovery, and you can also modify the file if needed.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >It is recommended to take a full backup as soon as possible after recovery is succeeded.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >If "--recovery-target-timeline" is not specifed, the last checkpoint's TimeLineID in control file ($PGDATA/global/pg_control) will be a restore target. If pg_control is not present, TimeLineID in the full backup used by the restore will be a restore target.</p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Standby-site_Backup" rel="nofollow"   ></a>Standby-site Backup</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >If you use replication feature on PostgreSQL 9.0 later, you can get backup from standby-site.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >You should specify different options from usual use for getting backup from standby-site. In detail, you should specify the database cluster on standby-site by -D/--pgdata option. And you should specify information on master-site by connection options (-d/--dbname, -h/--host, -p/--port). In addition, you should specify information to connect standby-site by standby connection options (--standby-host, --standby-port).</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Please see Examples on Standby-site for more detail information.</p><h1 style="font-size: x-large; margin-top: 0px; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Examples" rel="nofollow"   ></a>Examples</h1><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >To reduce the number of command line arguments, you can set BACKUP_PATH, an environment variablle, to the absolute path of the backup catalog and write default configuration into ${BACKUP_PATH}/pg_rman.ini.</p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ cat $BACKUP_PATH</span><span style="color: rgb(102, 102, 0);"   >/</span><span>pg_rman</span><span style="color: rgb(102, 102, 0);"   >.</span><span>ini<br>ARCLOG_PATH </span><span style="color: rgb(102, 102, 0);"   >=</span><span> </span><span style="color: rgb(0, 136, 0);"   >/home/</span><span>postgres</span><span style="color: rgb(102, 102, 0);"   >/</span><span>arclog<br>SRVLOG_PATH </span><span style="color: rgb(102, 102, 0);"   >=</span><span> </span><span style="color: rgb(0, 136, 0);"   >/home/</span><span>postgres</span><span style="color: rgb(102, 102, 0);"   >/</span><span>pgdata</span><span style="color: rgb(102, 102, 0);"   >/</span><span>pg_log<br><br>BACKUP_MODE </span><span style="color: rgb(102, 102, 0);"   >=</span><span> F<br>COMPRESS_DATA </span><span style="color: rgb(102, 102, 0);"   >=</span><span> YES<br>KEEP_ARCLOG_FILES </span><span style="color: rgb(102, 102, 0);"   >=</span><span> </span><span style="color: rgb(0, 102, 102);"   >10</span><span><br>KEEP_ARCLOG_DAYS </span><span style="color: rgb(102, 102, 0);"   >=</span><span> </span><span style="color: rgb(0, 102, 102);"   >10</span><span><br>KEEP_DATA_GENERATIONS </span><span style="color: rgb(102, 102, 0);"   >=</span><span> </span><span style="color: rgb(0, 102, 102);"   >3</span><span><br>KEEP_DATA_DAYS </span><span style="color: rgb(102, 102, 0);"   >=</span><span> </span><span style="color: rgb(0, 102, 102);"   >120</span><span><br>KEEP_SRVLOG_FILES </span><span style="color: rgb(102, 102, 0);"   >=</span><span> </span><span style="color: rgb(0, 102, 102);"   >10</span><span><br>KEEP_SRVLOG_DAYS </span><span style="color: rgb(102, 102, 0);"   >=</span><span> </span><span style="color: rgb(0, 102, 102);"   >10</span></pre><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Take a backup. This example takes a full backup of the whole database with serverlogs. Then, it validates all unvalidated backups.</p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ pg_rman backup </span><span style="color: rgb(102, 102, 0);"   >--</span><span>backup</span><span style="color: rgb(102, 102, 0);"   >-</span><span>mode</span><span style="color: rgb(102, 102, 0);"   >=</span><span>full </span><span style="color: rgb(102, 102, 0);"   >--</span><span style="color: rgb(0, 0, 136);"   >with</span><span style="color: rgb(102, 102, 0);"   >-</span><span>serverlog<br>$ pg_rman validate</span></pre><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Discatd the all database and restore from a backup.</p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ pg_ctl stop </span><span style="color: rgb(102, 102, 0);"   >-</span><span>m immediate<br>$ pg_rman restore<br>$ pg_ctl start </span></pre><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >You can retrieve a backup catalog with show command.</p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ pg_rman show<br></span><span style="color: rgb(102, 102, 0);"   >============================================================================</span><span><br></span><span style="color: rgb(102, 0, 102);"   >Start</span><span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Time</span><span> &nbsp; </span><span style="color: rgb(102, 0, 102);"   >Total</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Data</span><span> &nbsp; &nbsp; WAL &nbsp; &nbsp; </span><span style="color: rgb(102, 0, 102);"   >Log</span><span> &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Backup</span><span> &nbsp; </span><span style="color: rgb(102, 0, 102);"   >Status</span><span> &nbsp;<br></span><span style="color: rgb(102, 102, 0);"   >============================================================================</span><span><br></span><span style="color: rgb(0, 102, 102);"   >2011</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >27</span><span> </span><span style="color: rgb(0, 102, 102);"   >19</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >16</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >37</span><span> &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; RUNNING<br></span><span style="color: rgb(0, 102, 102);"   >2011</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >27</span><span> </span><span style="color: rgb(0, 102, 102);"   >19</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >16</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >20</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >3m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp;</span><span style="color: rgb(0, 102, 102);"   >9223kB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >16MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >17MB</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2011</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >27</span><span> </span><span style="color: rgb(0, 102, 102);"   >19</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >15</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >45</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >3m</span><span> &nbsp;</span><span style="color: rgb(0, 102, 102);"   >1242MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >32MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; </span><span style="color: rgb(0, 102, 102);"   >242MB</span><span> &nbsp; OK</span></pre><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >The fields are:</p><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >Start : start time of backup</li><li style="margin-bottom: 0.3em;"   >Time : total time of backup</li><li style="margin-bottom: 0.3em;"   >Total : size of whole database cluster</li><li style="margin-bottom: 0.3em;"   >Data : size of read data files</li><li style="margin-bottom: 0.3em;"   >WAL : size of read WAL archive files</li><li style="margin-bottom: 0.3em;"   >Log : size of read serverlog files</li><li style="margin-bottom: 0.3em;"   >Backup: size of backup (= written size)</li><li style="margin-bottom: 0.3em;"   >Status: status of backup. Possible values are:</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >OK : backup is done and validated.</li><li style="margin-bottom: 0.3em;"   >DONE : backup is done, but not validated yet.</li><li style="margin-bottom: 0.3em;"   >RUNNING : backup is running now.</li><li style="margin-bottom: 0.3em;"   >DELETING : backup is being deleted now.</li><li style="margin-bottom: 0.3em;"   >DELETED : backup has been deleted.</li><li style="margin-bottom: 0.3em;"   >ERROR : backup is unavailable because some errors occur during backup.</li><li style="margin-bottom: 0.3em;"   >CORRUPT : backup is unavailable because it is broken.</li></ul></ul><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >with "timeline", you can see the timeline with the backup catalog.</span><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ pg_rman show timeline<br></span><span style="color: rgb(102, 102, 0);"   >============================================================</span><span><br></span><span style="color: rgb(102, 0, 102);"   >Start</span><span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Mode</span><span> &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Current</span><span> TLI &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Parent</span><span> TLI &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Status</span><span> &nbsp;<br></span><span style="color: rgb(102, 102, 0);"   >============================================================</span><span><br></span><span style="color: rgb(0, 102, 102);"   >2011</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >27</span><span> </span><span style="color: rgb(0, 102, 102);"   >19</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >16</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >37</span><span> &nbsp;INCR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >1</span><span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(0, 102, 102);"   >0</span><span> &nbsp;RUNNING<br></span><span style="color: rgb(0, 102, 102);"   >2011</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >27</span><span> </span><span style="color: rgb(0, 102, 102);"   >19</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >16</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >20</span><span> &nbsp;INCR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >1</span><span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(0, 102, 102);"   >0</span><span> &nbsp;OK<br></span><span style="color: rgb(0, 102, 102);"   >2011</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >27</span><span> </span><span style="color: rgb(0, 102, 102);"   >19</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >15</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >45</span><span> &nbsp;FULL &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >1</span><span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style="color: rgb(0, 102, 102);"   >0</span><span> &nbsp;OK</span></pre><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >And more, when you specify the date in "Start" field, you can see the detail information of the backup.</p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ pg_rman show </span><span style="color: rgb(0, 136, 0);"   >'2011-11-27 19:15:45'</span><span><br></span><span style="color: rgb(136, 0, 0);"   ># configuration</span><span><br>BACKUP_MODE</span><span style="color: rgb(102, 102, 0);"   >=</span><span>FULL<br>WITH_SERVERLOG</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 0, 136);"   >false</span><span><br>COMPRESS_DATA</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 0, 136);"   >false</span><span><br></span><span style="color: rgb(136, 0, 0);"   ># result</span><span><br>TIMELINEID</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >1</span><span><br>START_LSN</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >0</span><span style="color: rgb(102, 102, 0);"   >/</span><span style="color: rgb(0, 102, 102);"   >08000020</span><span><br>STOP_LSN</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >0</span><span style="color: rgb(102, 102, 0);"   >/</span><span style="color: rgb(0, 102, 102);"   >080000a0</span><span><br>START_TIME</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 136, 0);"   >'2011-11-27 19:15:45'</span><span><br>END_TIME</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 136, 0);"   >'2011-11-27 19:19:02'</span><span><br>RECOVERY_XID</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >1759</span><span><br>RECOVERY_TIME</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 136, 0);"   >'2011-11-27 19:15:53'</span><span><br>TOTAL_DATA_BYTES</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >1242420184</span><span><br>READ_DATA_BYTES</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >25420184</span><span><br>READ_ARCLOG_BYTES</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >32218912</span><span><br>WRITE_BYTES</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >242919520</span><span><br>BLOCK_SIZE</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >8192</span><span><br>XLOG_BLOCK_SIZE</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >8192</span><span><br>STATUS</span><span style="color: rgb(102, 102, 0);"   >=</span><span>OK</span></pre><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >You can check the "RECOVERY_XID" and "RECOVERY_TIME" which are used for restore option "--recovery-target-xid", "--recovery-target-time".</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >The delete command deletes backup files not required by recovery after the specified date. The following example deletes unneeded backup files to recovery at 12:00 11, September 2009.</p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ pg_rman show<br></span><span style="color: rgb(102, 102, 0);"   >============================================================================</span><span><br></span><span style="color: rgb(102, 0, 102);"   >Start</span><span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Time</span><span> &nbsp; </span><span style="color: rgb(102, 0, 102);"   >Total</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Data</span><span> &nbsp; &nbsp; WAL &nbsp; &nbsp; </span><span style="color: rgb(102, 0, 102);"   >Log</span><span> &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Backup</span><span> &nbsp; </span><span style="color: rgb(102, 0, 102);"   >Status</span><span><br></span><span style="color: rgb(102, 102, 0);"   >============================================================================</span><span><br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span> </span><span style="color: rgb(0, 102, 102);"   >20</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >01</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0B</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0B</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span> </span><span style="color: rgb(0, 102, 102);"   >15</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >53</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; </span><span style="color: rgb(0, 102, 102);"   >8363B</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >16MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp;</span><span style="color: rgb(0, 102, 102);"   >2346kB</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span> </span><span style="color: rgb(0, 102, 102);"   >10</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >48</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0B</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0B</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span> </span><span style="color: rgb(0, 102, 102);"   >05</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >06</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >40MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >16MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp;</span><span style="color: rgb(0, 102, 102);"   >5277kB</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span> </span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >02</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; </span><span style="color: rgb(0, 102, 102);"   >8363B</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >16MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; </span><span style="color: rgb(0, 102, 102);"   >464kB</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >10</span><span> </span><span style="color: rgb(0, 102, 102);"   >20</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >30</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >12</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0B</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0B</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >10</span><span> </span><span style="color: rgb(0, 102, 102);"   >15</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >06</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >16MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >16kB</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >10</span><span> </span><span style="color: rgb(0, 102, 102);"   >10</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >02</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; </span><span style="color: rgb(0, 102, 102);"   >8363B</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >16MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >16kB</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >10</span><span> </span><span style="color: rgb(0, 102, 102);"   >05</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >08</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >40MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; </span><span style="color: rgb(0, 102, 102);"   >150MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >13MB</span><span> &nbsp; OK<br>$ pg_rman </span><span style="color: rgb(0, 0, 136);"   >delete</span><span> </span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span> </span><span style="color: rgb(0, 102, 102);"   >12</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span><br>$ pg_rman show<br></span><span style="color: rgb(102, 102, 0);"   >============================================================================</span><span><br></span><span style="color: rgb(102, 0, 102);"   >Start</span><span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Time</span><span> &nbsp; </span><span style="color: rgb(102, 0, 102);"   >Total</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Data</span><span> &nbsp; &nbsp; WAL &nbsp; &nbsp; </span><span style="color: rgb(102, 0, 102);"   >Log</span><span> &nbsp;</span><span style="color: rgb(102, 0, 102);"   >Backup</span><span> &nbsp; </span><span style="color: rgb(102, 0, 102);"   >Status</span><span><br></span><span style="color: rgb(102, 102, 0);"   >============================================================================</span><span><br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span> </span><span style="color: rgb(0, 102, 102);"   >20</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >01</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0B</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0B</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span> </span><span style="color: rgb(0, 102, 102);"   >15</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >53</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; </span><span style="color: rgb(0, 102, 102);"   >8363B</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >16MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp;</span><span style="color: rgb(0, 102, 102);"   >2346kB</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span> </span><span style="color: rgb(0, 102, 102);"   >10</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >48</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0B</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0B</span><span> &nbsp; OK<br></span><span style="color: rgb(0, 102, 102);"   >2009</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >09</span><span style="color: rgb(102, 102, 0);"   >-</span><span style="color: rgb(0, 102, 102);"   >11</span><span> </span><span style="color: rgb(0, 102, 102);"   >05</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >00</span><span style="color: rgb(102, 102, 0);"   >:</span><span style="color: rgb(0, 102, 102);"   >06</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >0m</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >40MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp; &nbsp;</span><span style="color: rgb(0, 102, 102);"   >16MB</span><span> &nbsp; &nbsp;</span><span style="color: rgb(102, 102, 0);"   >----</span><span> &nbsp;</span><span style="color: rgb(0, 102, 102);"   >5277kB</span><span> &nbsp; OK</span></pre><h1 style="font-size: x-large; margin-top: 0px; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Examples_on_Standby-site" rel="nofollow"   ></a>Examples on Standby-site</h1><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >This is examples to get backup with pg_rman from standby-site. Basical use is same with how to use on master-site, so the difference points are shown on bellow.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >At first, about initializing backup catalog. You should specify the database cluster path on standby-site with -D/--pgdata.</p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ pg_rman init </span><span style="color: rgb(102, 102, 0);"   >-</span><span>B </span><span style="color: rgb(102, 102, 0);"   >&lt;</span><span>a backup catalog path</span><span style="color: rgb(102, 102, 0);"   >&gt;</span><span> </span><span style="color: rgb(102, 102, 0);"   >-</span><span>D </span><span style="color: rgb(102, 102, 0);"   >&lt;(</span><span>the database cluster path</span><span style="color: rgb(102, 102, 0);"   >(</span><span>on standby</span><span style="color: rgb(102, 102, 0);"   >-</span><span>site</span><span style="color: rgb(102, 102, 0);"   >)&gt;</span></pre><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >When you get backup from standby-site, you should specify the database cluster on standby-site by -D/--pgdata option. And you should specify information on master-site by connection options (-d/--dbname, -h/--host, -p/--port etc.). In addition, you should specify information to connect standby-site by standby connection options (--standby-host, --standby-port). Both --standby-host and --standby-port need to specify.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >This is an example on the following condition.</p><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >the hostname of master-site: master</li><li style="margin-bottom: 0.3em;"   >the hostname of standby-site: localhost</li><li style="margin-bottom: 0.3em;"   >the port number of standby-site: 5432</li><li style="margin-bottom: 0.3em;"   >the database cluster path of standby-site: /home/postgres/pgdata_sby</li><p style="line-height: 1.25em; max-width: 64em;"   ></p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; background-color: rgb(238, 238, 238);"   ><span>$ pg_rman backup </span><span style="color: rgb(102, 102, 0);"   >--</span><span>pgdata</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 136, 0);"   >/home/</span><span>postgres</span><span style="color: rgb(102, 102, 0);"   >/</span><span>pgdata_sby </span><span style="color: rgb(102, 102, 0);"   >--</span><span>backup</span><span style="color: rgb(102, 102, 0);"   >-</span><span>mode</span><span style="color: rgb(102, 102, 0);"   >=</span><span>full </span><span style="color: rgb(102, 102, 0);"   >--</span><span>host</span><span style="color: rgb(102, 102, 0);"   >=</span><span>master </span><span style="color: rgb(102, 102, 0);"   >--</span><span>standby</span><span style="color: rgb(102, 102, 0);"   >-</span><span>host</span><span style="color: rgb(102, 102, 0);"   >=</span><span>localhost </span><span style="color: rgb(102, 102, 0);"   >--</span><span>standby</span><span style="color: rgb(102, 102, 0);"   >-</span><span>port</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >5432</span></pre></ul><h1 style="font-size: x-large; margin-top: 0px; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Options" rel="nofollow"   ></a>Options</h1><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >pg_rman accepts the following command line parameters. Some of them can be also sepcified as environment variables. See also Parameters for the details.</p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Common_options" rel="nofollow"   ></a>Common options</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >As a general rule, paths for data location need to be specified as absolute paths; relative paths are not allowed. -D PATH / --pgdata=PATH</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >The absolute path of database cluster. Required on backup and restore.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-A PATH / --arclog-path=PATH</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >The absolute path of archive WAL directory. Required on backup and restore.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-S PATH / --srvlog-path=PATH</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >The absolute path of server log directory. Required on backup with server logs and restore.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-B PATH / --backup-path=PATH</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >The absolute path of backup catalog. Always required.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-c / --check</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >If specifed, pg_rman doesn't perform actual jobs but only checks parameters and required resources. The option is typically used with --verbose option to verify the operation.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-v / --verbose</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >If specified, pg_rman works in verbose mode.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Backup_options" rel="nofollow"   ></a>Backup options</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-b { full | incremental | archive } / --backup-mode={ full | incremental | archive }</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Specify backup target files. Available options are: "full" backup, "incremental" backup, and "archive" backup. Abbreviated forms (prefix match) are also available. For example, -b f means "full" backup.</blockquote><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >full : Whole database backup and archive backup</li><li style="margin-bottom: 0.3em;"   >incremental : Incremental backup and archive backup</li><li style="margin-bottom: 0.3em;"   >archive : Only archive backup</li></ul><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-s / --with-serverlog</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Backup server log files if specified.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-Z / --compress-data</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Comress backup files with zlib if specified.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-C / --smooth-checkpoint</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Checkpoint is performed on every backups. If the option is specified, do smooth checkpoint then. See also the second argument for<a style="color: rgb(0, 0, 204);" rel="nofollow" href="http://developer.postgresql.org/pgdocs/postgres/functions-admin.html"   >pg_start_backup()</a>.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >--keep-data-generations / --keep-data-days</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Specify how long backuped data files will be kept. --keep-data-generations means number of backup generations. --keep-data-days means days to be kept. Only files exceeded both settings are deleted.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >--keep-arclog-files / --keep-arclog-days</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Specify how long backuped archive WAL files will be kept. --keep-arclog-files means number of backup files. --keep-arclog-days means days to be kept. When you do backup, only files exceeded both settings are deleted from archive storage. If you want to do with these options, you have to specify both options --keep-arclog-files and --keep-arclog-days.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >--keep-srvlog-files / --keep-srvlog-days</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Specify how long backuped serverlog files will be kept. --keep-srvlog-files means number of backup files. --keep-srvlog-days means days to be kept. When you do backup, only files exceeded both settings are deleted from server log directory (log_directory). This option works when you specify --with-serverlog and --srvlog-path options in backup command. And If you want to do with these options, you have to specify both options --keep-srvlog-files and --keep-srvlog-days.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Restore_options" rel="nofollow"   ></a>Restore options</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >The parameters which are started with --recovery are same as parameters in recovery.conf. See also "<a style="color: rgb(0, 0, 204);" rel="nofollow" href="http://developer.postgresql.org/pgdocs/postgres/continuous-archiving.html#RECOVERY-CONFIG-SETTINGS"   >Continuous Archiving and Point-In-Time Recovery (PITR)#Recovery Settings</a>" for details.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >--recovery-target-timeline TIMELINE</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Specifies recovering into a particular timeline.</blockquote><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >If not specified, the current timeline Use ($PGDATA/global/pg_control) is used.</span><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >--recovery-target-time TIMESTAMP</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >This parameter specifies the time stamp up to which recovery will proceed.</blockquote><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >If not specified, continue recovery to the latest time.</span><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >--recovery-target-xid XID</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >This parameter specifies the transaction ID up to which recovery will proceed.</blockquote><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >If not specified, continue recovery to the latest xid.</span><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >--recovery-target-inclusive</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Specifies whether we stop just after the specified recovery target (true), or just before the recovery target (false). Default is true.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >The following parameter determines the behavior of restore.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >--hard-copy</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >The archive WAL are copied to archive WAL storage area. If you do not specify --hard-copy, pg_rman makes symlink to archive WAL where are in the backup catalog directory.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Catalog_options" rel="nofollow"   ></a>Catalog options</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-a / --show-all</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Show also deleted backups.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Connection_options" rel="nofollow"   ></a>Connection options</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Parameters to connect PostgreSQL server.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-d DBNAME / --dbname=DBNAME</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >The database name to execute pg_start_backup() and pg_stop_backup().</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-h HOSTNAME / --host=HOSTNAME</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Specifies the host name of the machine on which the server is running. If the value begins with a slash, it is used as the directory for the Unix domain socket.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-p PORT / --port=PORT</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Specifies the TCP port or local Unix domain socket file extension on which the server is listening for connections.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-U USERNAME / --username=USERNAME</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >User name to connect as.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-w / --no-password</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Never issue a password prompt. If the server requires password authentication and a password is not available by other means such as a .pgpass file, the connection attempt will fail. This option can be useful in batch jobs and scripts where no user is present to enter a password.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-W / --password</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Force pg_rman to prompt for a password before connecting to a database.</blockquote><span style="font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >This option is never essential, since pg_rman will automatically prompt for a password if the server demands password authentication. However, pg_rman will waste a connection attempt finding out that the server wants a password. In some cases it is worth typing -W to avoid the extra connection attempt.</span><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Standby_connection_options" rel="nofollow"   ></a>Standby connection options</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Parameters to connect standby server. They are used only when you get backup from the standby site.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >--standby-host</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Specifies the host name of the machine on which the standby server is running. If the value begins with a slash, it is used as the directory for the Unix domain socket.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >--standby-port</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Specifies the TCP port or local Unix domain socket file extension on which the server is listening for connections.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Generic_options" rel="nofollow"   ></a>Generic options</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >--help</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Print help, then exit.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-V / --version</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Print version information, then exit.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >-! / --debug</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >Show debug information.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><h1 style="font-size: x-large; margin-top: 0px; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Parameters" rel="nofollow"   ></a>Parameters</h1><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Some of parameters can be specified in commandline arguments, environment variables or configuration file as follows:</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><table style="border-spacing: 0px; border: 1px solid rgb(204, 204, 204); color: rgb(0, 0, 0); font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ><strong>Short</strong></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ><strong>Long</strong></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ><strong>Environment variable</strong></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ><strong>Conf file</strong></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ><strong>Description</strong></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ><strong>Remarks</strong></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-h</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--host</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >PGHOST</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >database server host or socket directory</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-p</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--port</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >PGPORT</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >database server port</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-d</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--dbname</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >PGDATABASE</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >database to connect</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-U</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--username</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >PGUSER</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >user name to connect as</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >PGPASSWORD</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >password used to connect</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-w</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--password</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >force password prompt</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-W</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--no-password</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >never prompt for password</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-D</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--pgdata</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >PGDATA</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >location of the database storage area</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-B</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--backup-path</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >BACKUP_PATH</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >location of the backup storage area</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-A</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--arclog-path</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ARCLOG_PATH</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >location of archive WAL storage area</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-S</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--srvlog-path</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >SRVLOG_PATH</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >location of server log storage area</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-b</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--backup-mode</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >BACKUP_MODE</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >backup mode (full, incremental, or archive)</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-s</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--with-serverlog</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >WITH_SERVERLOG</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >also backup server log files</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >specify boolean type in environmental variable or configuration file</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-Z</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--compress-data</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >COMPRESS_DATA</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >compress data backup with zlib</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >specify boolean type in environmental variable or configuration file</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >-C</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--smooth-checkpoint</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >SMOOTH_CHECKPOINT</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >do smooth checkpoint before backup</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >specify boolean type in environmental variable or configuration file</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--standby-host</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >STANDBY_HOST</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >standby server host or socket directory</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--standby-port</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >STANDBY_PORT</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >standby server port</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--keep-data-generations</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >KEEP_DATA_GENERATIONS</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >keep GENERATION of full data backup</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--keep-data-days</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >KEEP_DATA_DAYS</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >keep enough data backup to recover to DAY days age</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--keep-srvlog-files</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >KEEP_SRVLOG_FILES</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >keep NUM of serverlogs</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--keep-srvlog-days</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >KEEP_SRVLOG_DAYS</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >keep serverlog modified in DAY days</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--keep-arclog-files</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >KEEP_ARCLOG_FILES</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >keep NUM of archived WAL</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--keep-arclog-days</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >KEEP_ARCLOG_DAYS</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >keep archived WAL modified in DAY days</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--recovery-target-timeline</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >RECOVERY_TARGET_TIMELINE</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >recovering into a particular timeline</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--recovery-target-xid</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >RECOVERY_TARGET_XID</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >transaction ID up to which recovery will proceed</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--recovery-target-time</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >RECOVERY_TARGET_TIME</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >time stamp up to which recovery will proceed</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--recovery-target-inclusive</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >RECOVERY_TARGET_INCLUSIVE</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >whether we stop just after the recovery target</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >--hard-copy</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >HARD_COPY</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Yes</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >how to restore archive WAL</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >specify boolean type in environmental variable or configuration file</td></tr></table><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >The names of variable in configuration file are the same as long names or names of environment variables.</li><li style="margin-bottom: 0.3em;"   >The password can not be specified in command line and configuration file for security reason.</li></ul><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >This utility, like most other PostgreSQL utilities, also uses the environment variables supported by libpq (see&nbsp;<a style="color: rgb(0, 0, 204);" rel="nofollow" href="http://developer.postgresql.org/pgdocs/postgres/libpq-envars.html"   >Environment Variables</a>)</p><h1 style="font-size: x-large; margin-top: 0px; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Restrictions" rel="nofollow"   ></a>Restrictions</h1><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >pg_rman has the following restrictions.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Requires to read database cluster directory and write backup catalog directory.</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >For example, you need to mount the disk where backup catalog is placed with NFS from database server.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Major versions of pg_rman and server should be matched.</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >pg_rman cannot backup servers with different major versions.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Block sizes of pg_rman and server should be matched.</p><blockquote style="margin: 20px; max-width: 60em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   >BLCKSZ and XLOG_BLCKSZ also should be matched.</blockquote><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >If there are some unreadable files/directories in database cluster directory, WAL directory or archived WAL directory, the backup or restore would be failed.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >After creating database, it could not be taken necessary files with incremental backup. So after creating database, please take FULL backup.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Getting backup from standby-site, pg_rman has the follow restrictions too.</p><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >The environment of replication should be built right, or the backup will not finish.</li><li style="margin-bottom: 0.3em;"   >You can't get backups on master and standby at the same time.</li><li style="margin-bottom: 0.3em;"   >You can't get backups on multi standbys at the same time too.</li><li style="margin-bottom: 0.3em;"   >Basically, the backup from standby-site is used for restoring on MASTER. pg_rman doesn't treat the backup as restoring on standby automatically.</li><li style="margin-bottom: 0.3em;"   >If you want to restore the backup on STANDBY, you have to manage archive logs with your self.</li></ul><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >When using storage snapshot, pg_rman has the following restrictions too.</p><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >If your snapshot does not have any file update time, incremental backup is same with full backup.</li><li style="margin-bottom: 0.3em;"   >Because pg_rman judges performing full backup or incremental backup by update time for files. If files don't have update time because of storage snapshot specification, pg_rman performs full backup every time.</li><li style="margin-bottom: 0.3em;"   >You can't backup for one side works storage with split mirror snapshot.</li><li style="margin-bottom: 0.3em;"   >Before you execute pg_rman, you should perform storage "RESYNC".</li><li style="margin-bottom: 0.3em;"   >After pg_rman performs backup with split mirror snapshot, storeage will be "SPLITTED"(works on one side).</li><li style="margin-bottom: 0.3em;"   >pg_rman perform SPLIT command for getting snapshot, but doesn't perform RESYNC command.</li><li style="margin-bottom: 0.3em;"   >You cant't get snapshot from different vendor storages in a time.</li><li style="margin-bottom: 0.3em;"   >You cant't use some vendor storages which have different commands for getting snapshot.</li><li style="margin-bottom: 0.3em;"   >The script and commands for getting storage snapshot should be executable.</li><li style="margin-bottom: 0.3em;"   >It's expected to have authority of root for getting snapshot or mounting volumes. So a user, performs pg_rman, is granted to execute any commands in the script.</li><li style="margin-bottom: 0.3em;"   >If you use LVM(Logical Volume Manager), it's needed root authority for mount, umount, lvcreate, lvremove, lvscan commands. You should granted to these commands with sudo command to non-password executable.</li></ul><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><h1 style="font-size: x-large; margin-top: 0px; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Details" rel="nofollow"   ></a>Details</h1><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Recovery_to_Point-in-Time" rel="nofollow"   ></a>Recovery to Point-in-Time</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >pg_rman can recover to point-in-time if timeline, transaction ID, or timestamp are specified in recovery.&nbsp;<a style="color: rgb(0, 0, 204);" rel="nofollow" href="http://pgfoundry.org/projects/xlogviewer/"   >xlogdump</a>&nbsp;is an useful tool to check the contents of WAL files and determine when to recover. See&nbsp;<a style="color: rgb(0, 0, 204);" rel="nofollow" href="http://developer.postgresql.org/pgdocs/postgres/continuous-archiving.html"   >Continuous Archiving and Point-In-Time Recovery (PITR)</a>&nbsp;for the details.</p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Configuration_file" rel="nofollow"   ></a>Configuration file</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >Setting parameters can be specified with form of "name=value" in the configuration file. Quotes are required if the value contains whitespaces. Comments starts with "#". Whitespaces and tabs are ignored excluding values.</p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Exit_codes" rel="nofollow"   ></a>Exit codes</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >pg_rman returns exit codes for each error status.</p><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><table style="border-spacing: 0px; border: 1px solid rgb(204, 204, 204); color: rgb(0, 0, 0); font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ><strong>Code</strong></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ><strong>Name</strong></td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   ><strong>Description</strong></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >0</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >SUCCESS</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Succeeded.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >1</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >HELP</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Print a help, then exit.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >2</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Generic error.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >3</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >FATAL</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Exit because of repeated errors</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >4</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >PANIC</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Unknown critical condition.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >10</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_SYSTEM</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >I/O or system error.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >11</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_NOMEM</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Out of memory.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >12</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_ARGS</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Invalid input parameters.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >13</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_INTERRUPTED</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Interrupted by user. (Ctrl+C etc.)</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >14</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_PG_COMMAND</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >SQL error.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >15</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_PG_CONNECT</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Cannot connect to PostgreSQL server.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >20</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_ARCHIVE_FAILED</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Cannot archive WAL files.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >21</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_NO_BACKUP</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Backup file not found.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >22</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_CORRUPTED</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Backup file is broken.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >23</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_ALREADY_RUNNING</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Cannot start because another pg_rman is running.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >24</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_PG_INCOMPATIBLE</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Version conflicted with PostgreSQL server.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >25</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_PG_RUNNING</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >Cannot restore because PostgreSQL server is running.</td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >26</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >ERROR_PID_BROKEN</td><td style="border: 1px solid rgb(204, 204, 204); padding: 5px;"   >postmaster.pid file is broken.</td></tr></table><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   ></p><h1 style="font-size: x-large; margin-top: 0px; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Outer_Script" rel="nofollow"   ></a>Outer Script</h1><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >This is the script to getting snapshot and mounting file systems.</li><li style="margin-bottom: 0.3em;"   >If you want to add outer scripts, you should make your script corresponding outer script interface according to referring manuals of the storage.</li><li style="margin-bottom: 0.3em;"   >Please refer "Interface Specification" about what you should make.</li><li style="margin-bottom: 0.3em;"   >Outer script performs some operation for getting several snapshots in a time execution.</li><li style="margin-bottom: 0.3em;"   >If you want to use outer script, you should set the script in backup catalog directory and rename it to "snapshot_script".</li><li style="margin-bottom: 0.3em;"   >A sample outer script is released for LVM(Logical Volume Manager).</li></ul><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Commands_Specification" rel="nofollow"   ></a>Commands Specification</h2><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ $</span><span style="color: rgb(102, 102, 0);"   >{</span><span>BACKUP_PATH</span><span style="color: rgb(102, 102, 0);"   >}/</span><span>snapshot_script </span><span style="color: rgb(102, 102, 0);"   >{</span><span> split </span><span style="color: rgb(102, 102, 0);"   >|</span><span> resync </span><span style="color: rgb(102, 102, 0);"   >|</span><span> mount </span><span style="color: rgb(102, 102, 0);"   >|</span><span> umount </span><span style="color: rgb(102, 102, 0);"   >|</span><span> freeze </span><span style="color: rgb(102, 102, 0);"   >|</span><span> unfreeze </span><span style="color: rgb(102, 102, 0);"   >}</span><span> </span><span style="color: rgb(102, 102, 0);"   >[</span><span>cleanup</span><span style="color: rgb(102, 102, 0);"   >]</span></pre><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >Input</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >first argument { split | resync | mount | umount | freeze | unfreeze }</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >identifier for performing</li></ul><li style="margin-bottom: 0.3em;"   >second argument&nbsp;<tt style="font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; font-size: 12px; max-width: 66em;"   >[cleanup]</tt></li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >If you specified "cleanup", error occuring doesn't stop the process. just output warning messages.</li><li style="margin-bottom: 0.3em;"   >this argument is for resync, umount, unfreeze only.</li></ul></ul></ul><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >Output</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >Making snapshot volume by performing "split" operation.</li><li style="margin-bottom: 0.3em;"   >Freezing filesystem I/O by performing "freeze" operation.</li><li style="margin-bottom: 0.3em;"   >Mounting to snapshot volume by performing "mount" operation.</li><li style="margin-bottom: 0.3em;"   >standard output</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >output tablespace name in the snapshot by performing "split" operation.</li><li style="margin-bottom: 0.3em;"   >output tablespace name and its directory by performing "mount" operation. The template is &amp;lt;tablespace name&amp;gt;=&amp;lt;path to directory for the tablespace&amp;gt;</li><li style="margin-bottom: 0.3em;"   >The command performs without any errors, output "SUCCESS", otherwise output nothing. If the command is "split" or "mount", output in last line.</li></ul><li style="margin-bottom: 0.3em;"   >standard error output</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >output log messages.</li></ul><li style="margin-bottom: 0.3em;"   >return value</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >Not Specified.</li></ul></ul></ul><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Interface_Specification" rel="nofollow"   ></a>Interface Specification</h2><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >split</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >Making procedure for getting snapshots.</li><li style="margin-bottom: 0.3em;"   >Output tablespace name in the snapshots to standard output.</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >If database cluster is included in a snapshot, the tablespace name should be "PG-DATA".</li><li style="margin-bottom: 0.3em;"   >If some tablespaces are included in a snapshot, output them with multi lines.</li></ul></ul></ul><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >resync&nbsp;<tt style="font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; font-size: 12px; max-width: 66em;"   >[cleanup]</tt></li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >Making procedure for removing snapshot made by split operation.</li><li style="margin-bottom: 0.3em;"   >If you don't need to remove snapshot, like split mirror snapshot, you don't make any procedure.</li><li style="margin-bottom: 0.3em;"   >If cleanup is specified and occuring errors, output warning messages and continue to get rest snapshots.</li></ul></ul><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >mount</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >Making procedure for mounting the snapshot made by split operation to the filesystem.</li><li style="margin-bottom: 0.3em;"   >output tablespace name and its direcotry(absolute path) to standard output. The template is [&lt;tablespace name&gt;=&lt;directory path&gt;].</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >If database cluster is included in a snapshot, the tablespace name should be "PG-DATA".</li><li style="margin-bottom: 0.3em;"   >If some tablespaces are included in a snapshot, output them with multi lines.</li></ul></ul></ul><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >umount&nbsp;<tt style="font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; font-size: 12px; max-width: 66em;"   >[cleanup]</tt></li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >Making procedure for unmounting the snapshot made by mount operation.</li><li style="margin-bottom: 0.3em;"   >If cleanup is specified and occuring errors, output warning messages and continue to unmount rest snapshots.</li></ul></ul><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >freeze</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >Making procedure for freezing filesystem IO.</li><li style="margin-bottom: 0.3em;"   >If your storage doesn't need to freeze filesystem IO, you don't make any procedure.</li></ul></ul><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >unfreeze&nbsp;<tt style="font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; font-size: 12px; max-width: 66em;"   >[cleanup]</tt></li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >Making procedure for unfreezing filesystem IO by performing freeze operation.</li><li style="margin-bottom: 0.3em;"   >If your storage doesn't need to freeze filesystem IO, you don't make any procedure.</li><li style="margin-bottom: 0.3em;"   >If cleanup is specified and occuring errors, output warning messages and continue to unfreeze rest filesystems.</li></ul></ul><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Explanation_for_sample_script_for_LVM(Logical_Volume_Manager)" rel="nofollow"   ></a>Explanation for sample script for LVM(Logical Volume Manager)</h2><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >split</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >perform lvcreate command as root authority against a volume for getting snapshot.</li><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; background-color: rgb(238, 238, 238);"   ><span>$ sudo </span><span style="color: rgb(102, 102, 0);"   >/</span><span>usr</span><span style="color: rgb(102, 102, 0);"   >/</span><span>sbin</span><span style="color: rgb(102, 102, 0);"   >/</span><span>lvcreate </span><span style="color: rgb(102, 102, 0);"   >--</span><span>snapshot </span><span style="color: rgb(102, 102, 0);"   >--</span><span>size</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >2G</span><span> </span><span style="color: rgb(102, 102, 0);"   >--</span><span>name snap00 </span><span style="color: rgb(102, 102, 0);"   >/</span><span>dev</span><span style="color: rgb(102, 102, 0);"   >/</span><span style="color: rgb(102, 0, 102);"   >VolGroup00</span><span style="color: rgb(102, 102, 0);"   >/</span><span style="color: rgb(102, 0, 102);"   >LogVolume00</span></pre><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >Above example is getting snapshot for logical volume "LogVolume00".</li><li style="margin-bottom: 0.3em;"   >Snapshot name, snapshot size and logical volume for getting snapshot are parameterable.</li></ul><li style="margin-bottom: 0.3em;"   >Output tablespace names for backup to standard output.</li></ul></ul><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >resync</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >perform lvremove command as root authority against a volume for getting snapshot.</li><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; background-color: rgb(238, 238, 238);"   ><span>$ sudo </span><span style="color: rgb(102, 102, 0);"   >/</span><span>usr</span><span style="color: rgb(102, 102, 0);"   >/</span><span>sbin</span><span style="color: rgb(102, 102, 0);"   >/</span><span>lvremove </span><span style="color: rgb(102, 102, 0);"   >-</span><span>f </span><span style="color: rgb(102, 102, 0);"   >/</span><span>dev</span><span style="color: rgb(102, 102, 0);"   >/</span><span style="color: rgb(102, 0, 102);"   >VolGroup00</span><span style="color: rgb(102, 102, 0);"   >/</span><span>snap00</span></pre></ul></ul><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >mount</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >perform mount command as root authority against a volume for getting snapshot.</li><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; background-color: rgb(238, 238, 238);"   ><span>$ sudo </span><span style="color: rgb(102, 102, 0);"   >/</span><span>bin</span><span style="color: rgb(102, 102, 0);"   >/</span><span>mount </span><span style="color: rgb(102, 102, 0);"   >/</span><span>dev</span><span style="color: rgb(102, 102, 0);"   >/</span><span style="color: rgb(102, 0, 102);"   >VolGroup00</span><span style="color: rgb(102, 102, 0);"   >/</span><span>snap00 </span><span style="color: rgb(102, 102, 0);"   >/</span><span>mnt</span><span style="color: rgb(102, 102, 0);"   >/</span><span>snapshot_lvm</span><span style="color: rgb(102, 102, 0);"   >/</span><span>pgdata</span></pre><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >Above example is mounting snapshot volume made by split operation to "/mnt/snapshot_lvm/pgdata".</li><li style="margin-bottom: 0.3em;"   >Mounting directory name is parametarable.</li></ul><li style="margin-bottom: 0.3em;"   >Output tablespace names and corresponding mounting direcotry name to standard output.</li></ul></ul><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >umount</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >perform umount command as root authority against a volume for getting snapshot.</li><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; background-color: rgb(238, 238, 238);"   ><span>$ sudo </span><span style="color: rgb(102, 102, 0);"   >/</span><span>bin</span><span style="color: rgb(102, 102, 0);"   >/</span><span>umount </span><span style="color: rgb(102, 102, 0);"   >/</span><span>mnt</span><span style="color: rgb(102, 102, 0);"   >/</span><span>snapshot_lvm</span><span style="color: rgb(102, 102, 0);"   >/</span><span>pgdata</span></pre></ul></ul><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >freeze</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >noting to do. (not need file system freeze)</li></ul></ul><ul style="padding-left: 25px; max-width: 62em; font-family: arial, sans-serif; font-size: 13px; line-height: normal;"   ><li style="margin-bottom: 0.3em;"   >unfreeze</li><ul style="padding-left: 25px; max-width: 62em;"   ><li style="margin-bottom: 0.3em;"   >noting to do. (not need file system freeze)</li></ul></ul><h1 style="font-size: x-large; margin-top: 0px; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Installations" rel="nofollow"   ></a>Installations</h1><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >pg_rman can be installed as same as standard contrib modules.</p><h2 style="font-size: large; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Build_from_source" rel="nofollow"   ></a>Build from source</h2><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >The module can be built with pgxs.</p><pre class="prettyprint"   style="font-size: 12px; padding: 0.5em; overflow: auto; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace; max-width: 70em; line-height: normal; background-color: rgb(238, 238, 238);"   ><span>$ cd pg_rman<br>$ make USE_PGXS</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >1</span><span><br>$ make USE_PGXS</span><span style="color: rgb(102, 102, 0);"   >=</span><span style="color: rgb(0, 102, 102);"   >1</span><span> install</span></pre><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >No need to register to databases.</p><h1 style="font-size: x-large; margin-top: 0px; border: 0px; padding-left: 0px; max-width: 700px; font-family: arial, sans-serif; line-height: normal; background: none;"   ><a name="Requirements" rel="nofollow"   ></a>Requirements</h1><p style="line-height: 1.25em; max-width: 64em; font-family: arial, sans-serif; font-size: 13px;"   >See&nbsp;<a style="color: rgb(0, 0, 204);" rel="nofollow" href="https://code.google.com/p/pg-rman/wiki/Platforms"   >Platforms</a>.</p></div><div><br></div><wbr><div><br></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://sourceforge.net/projects/pg-rman/"   >http://sourceforge.net/projects/pg-rman/</a></div><div>2.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201451894734122/"   >http://blog.163.com/digoal@126/blog/static/163877040201451894734122/</a></div><div>3.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="https://code.google.com/p/pg-rman/wiki/readme"   >https://code.google.com/p/pg-rman/wiki/readme</a></div><div>4.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://docs.pgbarman.org/"   >http://docs.pgbarman.org/</a></div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="pg_rman@NTT  Barman@2ndQuadrant - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
	<h3>评论</h3>
	<div class="" id="" style="padding:0 20px;">
			<div id="">
				<h5 id="">Freya - 2014-10-13 17:39:13</h5>
				<div>德哥好，我以前也安装过pg_rman做增量备份，不过咋子恢复的时候只能恢复到rman全备份，好像增量备份的文件不管用似的。。</div>
			</div>
	</div>
</div>
</body>
</html>