<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">ceph introduce</h2>
	<h5 id="">2014-12-01 9:01:51&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201411185030878/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>ceph 存储集群主要包含osd, mon, mds组件.</div><div>osd组件负责存储数据, 数据复制, 恢复, 均衡, 提供监控数据等.</div><div>mon组件负责维护集群状态, 包括monitor map, osd map, pg(placement group) map, crush map等. 所有状态的变更都被记录.</div><div>mds是可选组件, 只有在使用ceph 文件系统是才需要用到, 负责userspace接口.</div><div><br></div><div>用户数据被切分成objects, 经crush算法决定存储在哪些placement group, 并计算出了placement group存储在哪些OSD, CRUSH算法同时负责计算ceph集群的扩展, 均衡, 动态恢复等.</div><div><br></div><div>ceph存储集群至少需要1个监控节点, 2个OSD节点(如果配置了2份数据拷贝到话, 2个OSD才能使集群到达active+clean的状态)才能运转起来.</div><div>要使用ceph 对象存储, 块设备为云平台(如openstack)提供服务, 或者使用ceph文件系统的话, 首选要部署ceph storage cluster.</div><div>部署ceph storage cluster, 必须先部署ceph node.</div><div><br></div><div><br></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://ceph.com/docs/master/start/intro/"   >http://ceph.com/docs/master/start/intro/</a></div><div><h1 style="margin: 0px 0px 10px; padding: 5px 0px; text-transform: uppercase; font-weight: normal; font-stretch: normal; font-size: 20px; line-height: 2; font-family: 'Titillium Web'; color: rgb(55, 66, 74); border-top-width: 20px; border-top-style: solid; border-top-color: white;"   >INTRO TO CEPH<a title="Permalink to this headline" style="color: rgb(198, 15, 15); text-decoration: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" rel="nofollow" href="http://ceph.com/docs/master/start/intro/#intro-to-ceph"   ></a></h1><p style="line-height: 1.5em; color: rgb(62, 67, 73); font-family: Helvetica, Arial, sans-serif; font-size: 14px;"   >Whether you want to provide&nbsp;<a style="color: rgb(240, 92, 86); text-decoration: none;" rel="nofollow" href="http://ceph.com/docs/master/glossary/#term-ceph-object-storage"   ><em>Ceph Object Storage</em></a>&nbsp;and/or&nbsp;<a style="color: rgb(240, 92, 86); text-decoration: none;" rel="nofollow" href="http://ceph.com/docs/master/glossary/#term-ceph-block-device"   ><em>Ceph Block Device</em></a>&nbsp;services to&nbsp;<a style="color: rgb(240, 92, 86); text-decoration: none;" rel="nofollow" href="http://ceph.com/docs/master/glossary/#term-cloud-platforms"   ><em>Cloud Platforms</em></a>, deploy a&nbsp;<a style="color: rgb(240, 92, 86); text-decoration: none;" rel="nofollow" href="http://ceph.com/docs/master/glossary/#term-ceph-filesystem"   ><em>Ceph Filesystem</em></a>&nbsp;or use Ceph for another purpose, all&nbsp;<a style="color: rgb(240, 92, 86); text-decoration: none;" rel="nofollow" href="http://ceph.com/docs/master/glossary/#term-ceph-storage-cluster"   ><em>Ceph Storage Cluster</em></a>&nbsp;deployments begin with setting up each&nbsp;<a style="color: rgb(240, 92, 86); text-decoration: none;" rel="nofollow" href="http://ceph.com/docs/master/glossary/#term-ceph-node"   ><em>Ceph Node</em></a>, your network and the Ceph Storage Cluster. A Ceph Storage Cluster requires at least one Ceph Monitor and at least two Ceph OSD Daemons. The Ceph Metadata Server is essential when running Ceph Filesystem clients.</p><p style="line-height: 1.5em; color: rgb(62, 67, 73); font-family: Helvetica, Arial, sans-serif; font-size: 14px;"   ><img title="ceph introduce - 德哥@Digoal - PostgreSQL research"   alt="ceph introduce - 德哥@Digoal - PostgreSQL research"   src="http://ceph.com/docs/master/_images/ditaa-fbe8ee62a8a21a317df92d84a62447c4ecd11e34.png"   ></p><ul style="color: rgb(62, 67, 73); font-family: Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19.6000003814697px;"   ><li style="line-height: 1.5em;"   ><strong>Ceph OSDs</strong>: A&nbsp;<a style="color: rgb(240, 92, 86); text-decoration: none;" rel="nofollow" href="http://ceph.com/docs/master/glossary/#term-ceph-osd-daemon"   ><em>Ceph OSD Daemon</em></a>&nbsp;(Ceph OSD) stores data, handles data replication, recovery, backfilling, rebalancing, and provides some monitoring information to Ceph Monitors by checking other Ceph OSD Daemons for a heartbeat. A Ceph Storage Cluster requires at least two Ceph OSD Daemons to achieve an&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>active</span>&nbsp;<span>+</span>&nbsp;<span>clean</span></tt>&nbsp;state when the cluster makes two copies of your data (Ceph makes 2 copies by default, but you can adjust it).</li><li style="line-height: 1.5em;"   ><strong>Monitors</strong>: A&nbsp;<a style="color: rgb(240, 92, 86); text-decoration: none;" rel="nofollow" href="http://ceph.com/docs/master/glossary/#term-ceph-monitor"   ><em>Ceph Monitor</em></a>&nbsp;maintains maps of the cluster state, including the monitor map, the OSD map, the Placement Group (PG) map, and the CRUSH map. Ceph maintains a history (called an “epoch”) of each state change in the Ceph Monitors, Ceph OSD Daemons, and PGs.</li><li style="line-height: 1.5em;"   ><strong>MDSs</strong>: A&nbsp;<a style="color: rgb(240, 92, 86); text-decoration: none;" rel="nofollow" href="http://ceph.com/docs/master/glossary/#term-ceph-metadata-server"   ><em>Ceph Metadata Server</em></a>&nbsp;(MDS) stores metadata on behalf of the&nbsp;<a style="color: rgb(240, 92, 86); text-decoration: none;" rel="nofollow" href="http://ceph.com/docs/master/glossary/#term-ceph-filesystem"   ><em>Ceph Filesystem</em></a>&nbsp;(i.e., Ceph Block Devices and Ceph Object Storage do not use MDS). Ceph Metadata Servers make it feasible for POSIX file system users to execute basic commands like&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>ls</span></tt>,&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>find</span></tt>, etc. without placing an enormous burden on the Ceph Storage Cluster.</li></ul><p style="line-height: 1.5em; color: rgb(62, 67, 73); font-family: Helvetica, Arial, sans-serif; font-size: 14px;"   >Ceph stores a client’s data as objects within storage pools. Using the CRUSH algorithm, Ceph calculates which placement group should contain the object, and further calculates which Ceph OSD Daemon should store the placement group. The CRUSH algorithm enables the Ceph Storage Cluster to scale, rebalance, and recover dynamically.</p></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="ceph introduce - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>