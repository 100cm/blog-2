<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">ceph rbd.ko by elrepo (when I mapping it, Module rbd not found, CentOS 7)</h2>
	<h5 id="">2014-12-23 15:38:14&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402014112325944867/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>我们知道ceph的支持块设备功能, 但是需要客户端加载RBD模块, 并且能够连到CEPH集群的所有节点.</div><div><div><img title="ceph rbd.ko by elrepo (when I mapping it, Module rbd not found, CentOS 7) - 德哥@Digoal - PostgreSQL research"   alt="ceph rbd.ko by elrepo (when I mapping it, Module rbd not found, CentOS 7) - 德哥@Digoal - PostgreSQL research"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/wvNFUp209Zxh_UMAHOGcFw==/3112268817507581511.png"   ></div></div><div><br></div><div>但是测试过程中, 在使用rbd 映射块设备时, 出现一个错误, 如下 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@localhost ~]# rbd map img1 --pool pool1 -m 172.17.0.2 -k /etc/ceph/ceph.client.admin.keyring&nbsp;</font></div><div><font size="2"   >modinfo: ERROR: Module rbd not found.</font></div><div><font size="2"   >modprobe: FATAL: Module rbd not found.</font></div><div><font size="2"   >rbd: failed to load rbd kernel module (1)</font></div><div><font size="2"   >rbd: sysfs write failed</font></div><div><font size="2"   >rbd: map failed: (2) No such file or directory</font></div><p></p></pre></div><div>这个错误的原因是没有rbd模块.</div><div>我这里用的是CentOS 7 x64, 解决办法有2个.</div><div>1. 自行编译内核, 将rbd模块加入内核.</div><div>参考 :&nbsp;</div><div><a target="_blank" rel="nofollow" href="https://github.com/ceph/ceph-kmod-rpm"   >https://github.com/ceph/ceph-kmod-rpm</a></div><div>2. 使用elrepo提供的, 已经编译好的内核.</div><div>参考 :&nbsp;</div><div><a target="_blank" rel="nofollow" href="http://elrepo.org/"   >http://elrepo.org/</a></div><div>这里使用第二种方法来解决这个问题, 即安装已经编译好的内核 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@localhost ~]# rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</font></div><div><font size="2"   >[root@localhost ~]# rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</font></div><div><font size="2"   >[root@localhost ~]# yum install -y yum-plugin-fastestmirror</font></div><div><font size="2"   >[root@localhost ~]# yum --enablerepo=elrepo-kernel install&nbsp;<span style="line-height: 28px;"   >kernel-ml&nbsp;</span><span style="line-height: 28px;"   >kernel-ml-devel</span></font></div><p></p></pre></div><div><span style="line-height: 28px;"   >可以看到新的内核支持rbd模块</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@localhost ceph-kmod-rpm]# locate rbd.ko</font></div><div><font size="2"   >/usr/lib/modules/3.18.1-1.el7.elrepo.x86_64/kernel/drivers/block/rbd.ko</font></div><p></p></pre></div><div>修改为以新内核启动</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@localhost ~]# &nbsp;cat /boot/grub2/grub.cfg |grep menuentry</font></div><div><font size="2"   >if [ x"${feature_menuentry_id}" = xy ]; then</font></div><div><font size="2"   >&nbsp; menuentry_id_option="--id"</font></div><div><font size="2"   >&nbsp; menuentry_id_option=""</font></div><div><font size="2"   >export menuentry_id_option</font></div><div><font size="2"   >menuentry 'CentOS Linux (3.18.1-1.el7.elrepo.x86_64) 7 (Core)' --class centos --class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option 'gnulinux-3.10.0-123.el7.x86_64-advanced-5b6291c5-d316-467f-9a78-f4535ad76e6f' {</font></div><div><font size="2"   >menuentry 'CentOS Linux, with Linux 3.10.0-123.el7.x86_64' --class centos --class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option 'gnulinux-3.10.0-123.el7.x86_64-advanced-5b6291c5-d316-467f-9a78-f4535ad76e6f' {</font></div><div><font size="2"   >menuentry 'CentOS Linux, with Linux 0-rescue-0e18ebb9ae3d4dbfb4b95bbd4cf359ed' --class centos --class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option 'gnulinux-0-rescue-0e18ebb9ae3d4dbfb4b95bbd4cf359ed-advanced-5b6291c5-d316-467f-9a78-f4535ad76e6f' {</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[root@localhost ~]# grub2-set-default 'CentOS Linux (3.18.1-1.el7.elrepo.x86_64) 7 (Core)'</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[root@localhost ~]# grub2-editenv list</font></div><div><font size="2"   >saved_entry=CentOS Linux (3.18.1-1.el7.elrepo.x86_64) 7 (Core)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[root@localhost ~]# grub2-mkconfig -o /boot/grub2/grub.cfg</font></div><div><font size="2"   >Generating grub configuration file ...</font></div><div><font size="2"   >Found linux image: /boot/vmlinuz-3.18.1-1.el7.elrepo.x86_64</font></div><div><font size="2"   >Found initrd image: /boot/initramfs-3.18.1-1.el7.elrepo.x86_64.img</font></div><div><font size="2"   >Found linux image: /boot/vmlinuz-3.10.0-123.el7.x86_64</font></div><div><font size="2"   >Found initrd image: /boot/initramfs-3.10.0-123.el7.x86_64.img</font></div><div><font size="2"   >Found linux image: /boot/vmlinuz-0-rescue-0e18ebb9ae3d4dbfb4b95bbd4cf359ed</font></div><div><font size="2"   >Found initrd image: /boot/initramfs-0-rescue-0e18ebb9ae3d4dbfb4b95bbd4cf359ed.img</font></div><div><font size="2"   >done</font></div><p></p></pre></div><div><span style="line-height: 28px;"   >重启系统, 确认已经可以使用rbd模块.</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@localhost ~]# uname -r</font></div><div><font size="2"   >3.18.1-1.el7.elrepo.x86_64</font></div><div><font size="2"   >[root@localhost ~]# lsmod|grep rbd</font></div><div><font size="2"   >[root@localhost ~]# modprobe rbd</font></div><div><font size="2"   >[root@localhost ~]# lsmod|grep rbd</font></div><div><font size="2"   >rbd &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;73304 &nbsp;0&nbsp;</font></div><div><font size="2"   >libceph &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 235718 &nbsp;1 rbd</font></div><p></p></pre></div><div><br></div><div><span style="line-height: 28px;"   >好了, 再回过头来演示一遍使用ceph块设备的过程.(使用块设备的系统必须能连接到ceph集群(指集群中的所有节点))</span></div><div><div>因为我的环境是docker下部署的, 所以需要重启这些容器, 手工配置IP</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >docker start deploy</font></div><div><font size="2"   >docker start mon1</font></div><div><font size="2"   >docker start mon2</font></div><div><font size="2"   >docker start mon3</font></div><div><font size="2"   >docker start mon4</font></div><div><font size="2"   >docker start mon5</font></div><div><font size="2"   >docker start osd1</font></div><div><font size="2"   >docker start osd2</font></div><div><font size="2"   >docker start osd3</font></div><div><font size="2"   >docker start osd4</font></div><p></p></pre></div></div><div><span style="line-height: 28px;"   >配置IP</span></div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >./pipework.sh docker0 -i eth0 deploy 172.17.0.1/16@172.17.42.1</font></div><div><font size="2"   >./pipework.sh docker0 -i eth0 mon1 172.17.0.2/16@172.17.42.1</font></div><div><font size="2"   >./pipework.sh docker0 -i eth0 mon2 172.17.0.3/16@172.17.42.1</font></div><div><font size="2"   >./pipework.sh docker0 -i eth0 mon3 172.17.0.4/16@172.17.42.1</font></div><div><font size="2"   >./pipework.sh docker0 -i eth0 osd1 172.17.0.5/16@172.17.42.1</font></div><div><font size="2"   >./pipework.sh docker0 -i eth0 osd2 172.17.0.6/16@172.17.42.1</font></div><div><font size="2"   >./pipework.sh docker0 -i eth0 osd3 172.17.0.7/16@172.17.42.1</font></div><div><font size="2"   >./pipework.sh docker0 -i eth0 osd4 172.17.0.8/16@172.17.42.1</font></div><div><font size="2"   >./pipework.sh docker0 -i eth0 mon4 172.17.0.9/16@172.17.42.1</font></div><div><font size="2"   >./pipework.sh docker0 -i eth0 mon5 172.17.0.10/16@172.17.42.1</font></div></div><div><div><font size="2"   >./pipework.sh docker0 -i eth1 deploy 172.18.0.1/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth1 mon1 172.18.0.2/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth1 mon2 172.18.0.3/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth1 mon3 172.18.0.4/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth1 osd1 172.18.0.5/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth1 osd2 172.18.0.6/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth1 osd3 172.18.0.7/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth1 osd4 172.18.0.8/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth1 mon4 172.18.0.9/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth1 mon5 172.18.0.10/16</font></div></div><div><div><font size="2"   >./pipework.sh docker0 -i eth2 deploy 172.19.0.1/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth2 mon1 172.19.0.2/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth2 mon2 172.19.0.3/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth2 mon3 172.19.0.4/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth2 osd1 172.19.0.5/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth2 osd2 172.19.0.6/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth2 osd3 172.19.0.7/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth2 osd4 172.19.0.8/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth2 mon4 172.19.0.9/16</font></div><div><font size="2"   >./pipework.sh docker0 -i eth2 mon5 172.19.0.10/16</font></div></div><p></p></pre></div><div><span style="line-height: 28px;"   >启动mon, osd</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >service ceph start mon.mon1</font></div><div><font size="2"   >...</font></div><div><font size="2"   >ceph-mon -i mon4 --pid-file /var/run/ceph/mon.mon4.pid -c /etc/ceph/ceph.conf --cluster ceph --mon-data /data01/ceph/mon/ceph-4</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >service ceph start osd1</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >... 略</font></div><p></p></pre></div><div>接下来可以在宿主机管理这个ceph了, 注意如果有认证的话, 需要拷贝配置文件和认证文件到宿主机, 如果文件名非默认的话, 那么需要在命令中指定配置文件和认证文件.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@localhost rbd0]# ceph osd lspools</font></div><div><font size="2"   >0 rbd</font></div><p></p></pre></div><div>创建pool</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >exp.</font></div><div><font size="2"   >ceph osd pool create {pool-name} {pg-num} [{pgp-num}] [replicated] \</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;[crush-ruleset-name]</font></div></div><div><font size="2"   ><br></font></div><div><font size="2"   >[root@localhost rbd0]# ceph osd pool create pool1 128 128 replicated</font></div><div><div><font size="2"   >[root@localhost rbd0]# ceph osd lspools</font></div><div><font size="2"   >0 rbd,1 pool1,</font></div></div><p></p></pre></div><div>创建块设备镜像</div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@localhost rbd0]# rbd create --help</font></div><div></div><p></p></pre><div><span style="line-height: 28px;"   >在pool1池创建一个镜像名为img2, 大小8192MB, 格式为2(支持克隆)</span></div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@localhost rbd0]# rbd create --size 8192 img2 --image-format 2 -p pool1</font></div><div></div><p></p></pre><div><span style="line-height: 28px;"   >接着创建</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >rbd create --size 8192 img2 -p rbd</font></div><div><font size="2"   >rbd create --size 8192 img1 -p rbd</font></div><div><font size="2"   >rbd create --size 8192 img1 -p pool1</font></div><p></p></pre></div><div><br></div><div>接下来可以在宿主机(即更新了内核的主机)映射这个块设备镜像了.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@localhost ~]# rbd map img1 --pool pool1 -m 172.17.0.2 -k /etc/ceph/ceph.client.admin.keyring&nbsp;</font></div><div><font size="2"   >/dev/rbd0</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[root@localhost ~]# fdisk -c -u /dev/rbd0</font></div><div><font size="2"   >Welcome to fdisk (util-linux 2.23.2).</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Changes will remain in memory only, until you decide to write them.</font></div><div><font size="2"   >Be careful before using the write command.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Device does not contain a recognized partition table</font></div><div><font size="2"   >Building a new DOS disklabel with disk identifier 0x2b2bb069.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Command (m for help): p</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Disk /dev/rbd0: 8589 MB, 8589934592 bytes, 16777216 sectors</font></div><div><font size="2"   >Units = sectors of 1 * 512 = 512 bytes</font></div><div><font size="2"   >Sector size (logical/physical): 512 bytes / 512 bytes</font></div><div><font size="2"   >I/O size (minimum/optimal): 4194304 bytes / 4194304 bytes</font></div><div><font size="2"   >Disk label type: dos</font></div><div><font size="2"   >Disk identifier: 0x2b2bb069</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;Device Boot &nbsp; &nbsp; &nbsp;Start &nbsp; &nbsp; &nbsp; &nbsp; End &nbsp; &nbsp; &nbsp;Blocks &nbsp; Id &nbsp;System</font></div><p></p></pre></div><div><span style="line-height: 28px;"   >创建文件系统</span></div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >[root@localhost ~]# mkfs.xfs /dev/rbd0</font></div><div><font size="2"   >log stripe unit (4194304 bytes) is too large (maximum is 256KiB)</font></div><div><font size="2"   >log stripe unit adjusted to 32KiB</font></div><div><font size="2"   >meta-data=/dev/rbd0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;isize=256 &nbsp; &nbsp;agcount=9, agsize=261120 blks</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sectsz=512 &nbsp; attr=2, projid32bit=1</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; crc=0</font></div><div><font size="2"   >data &nbsp; &nbsp; = &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bsize=4096 &nbsp; blocks=2097152, imaxpct=25</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sunit=1024 &nbsp; swidth=1024 blks</font></div><div><font size="2"   >naming &nbsp; =version 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;bsize=4096 &nbsp; ascii-ci=0 ftype=0</font></div><div><font size="2"   >log &nbsp; &nbsp; &nbsp;=internal log &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bsize=4096 &nbsp; blocks=2560, version=2</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sectsz=512 &nbsp; sunit=8 blks, lazy-count=1</font></div><div><font size="2"   >realtime =none &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; extsz=4096 &nbsp; blocks=0, rtextents=0</font></div><div><font size="2"   >[root@localhost ~]# mkdir /rbd0</font></div><div><font size="2"   >[root@localhost ~]# mount /dev/rbd0 /rbd0</font></div></div><div><font size="2"   >df -h</font></div><div><font size="2"   >/dev/rbd0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8.0G &nbsp; 33M &nbsp;8.0G &nbsp; 1% /rbd0</font></div><p></p></pre></div><div>简单的使用测试 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >[root@localhost rbd0]# dd if=/dev/zero of=./test.img bs=8192k count=512 oflag=direct</font></div><div><font size="2"   >512+0 records in</font></div><div><font size="2"   >512+0 records out</font></div><div><font size="2"   >4294967296 bytes (4.3 GB) copied, 53.148 s, 80.8 MB/s</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >[root@localhost ~]# ceph -s</font></div><div><font size="2"   >&nbsp; &nbsp; cluster f649b128-963c-4802-ae17-5a76f36c4c76</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;health HEALTH_OK</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;monmap e8: 5 mons at {mon1=172.17.0.2:6789/0,mon2=172.17.0.3:6789/0,mon3=172.17.0.4:6789/0,mon4=172.17.0.9:6789/0,mon5=172.17.0.10:6789/0}, election epoch 50, quorum 0,1,2,3,4 mon1,mon2,mon3,mon4,mon5</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;osdmap e59: 4 osds: 4 up, 4 in</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; pgmap v21762: 256 pgs, 2 pools, 1773 MB data, 456 objects</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 444 GB used, 1192 GB / 1636 GB avail</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;256 active+clean</font></div><div><font size="2"   >&nbsp; client io 105 MB/s wr, 420 op/s</font></div></div><p></p></pre></div><div>其他测试 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@localhost rbd1]# rbd bench-write img2 -p rbd</font></div><div><font size="2"   >bench-write &nbsp;io_size 4096 io_threads 16 bytes 1073741824 pattern seq</font></div><div><font size="2"   >&nbsp; SEC &nbsp; &nbsp; &nbsp; OPS &nbsp; OPS/SEC &nbsp; BYTES/SEC</font></div><div><font size="2"   >&nbsp; &nbsp; 1 &nbsp; &nbsp; 30097 &nbsp;30059.61 &nbsp;123124145.56</font></div><div><font size="2"   >&nbsp; &nbsp; 2 &nbsp; &nbsp; 52487 &nbsp;25616.02 &nbsp;104923229.04</font></div><div><font size="2"   >&nbsp; &nbsp; 3 &nbsp; &nbsp; 77155 &nbsp;25716.23 &nbsp;105333691.08</font></div><div><font size="2"   >&nbsp; &nbsp; 4 &nbsp; &nbsp;102370 &nbsp;24461.42 &nbsp;100193961.33</font></div><div><font size="2"   >&nbsp; &nbsp; 5 &nbsp; &nbsp;128880 &nbsp;25772.12 &nbsp;105562598.27</font></div><div><font size="2"   >&nbsp; &nbsp; 6 &nbsp; &nbsp;150406 &nbsp;24981.22 &nbsp;102323056.68</font></div><div><font size="2"   >&nbsp; &nbsp; 7 &nbsp; &nbsp;174073 &nbsp;24863.73 &nbsp;101841845.28</font></div><div><font size="2"   >&nbsp; &nbsp; 8 &nbsp; &nbsp;192126 &nbsp;24012.55 &nbsp;98355418.43</font></div><div><font size="2"   >&nbsp; &nbsp; 9 &nbsp; &nbsp;220293 &nbsp;24475.64 &nbsp;100252211.29</font></div><div><font size="2"   >&nbsp; &nbsp;10 &nbsp; &nbsp;241683 &nbsp;24168.03 &nbsp;98992238.19</font></div><div><font size="2"   >elapsed: &nbsp; &nbsp;11 &nbsp;ops: &nbsp; 262144 &nbsp;ops/sec: 23773.85 &nbsp;bytes/sec: 97377672.90</font></div><p></p></pre></div><div><br></div><div>快照 :&nbsp;</div><div><pre class="prettyprint"   ><p><font size="2"   >[root@localhost rbd1]# rbd snap create img2 -p rbd --snap img2@123</font></p></pre></div><div><br></div><div>[参考]</div><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://elrepo.org/"   >http://elrepo.org/</a></div><div>2.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="https://github.com/ceph/ceph-kmod-rpm"   >https://github.com/ceph/ceph-kmod-rpm</a></div><div>3.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://ceph.com/docs/master/rbd/rbd/"   >http://ceph.com/docs/master/rbd/rbd/</a></div><div><br></div><wbr>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="ceph rbd.ko by elrepo (when map Module rbd not found, CentOS 7) - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>