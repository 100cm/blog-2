<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">kvm performance tuning for qemu-kvm daemon's high cpu usage</h2>
	<h5 id="">2015-04-02 10:22:53&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201532101426174/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>昨天写了两篇关于kvm虚拟机安装的文章</div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020153142253971/"   >http://blog.163.com/digoal@126/blog/static/16387704020153142253971/</a><br><wbr><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402015315195563/"   >http://blog.163.com/digoal@126/blog/static/1638770402015315195563/</a></div><div>在装好后, 发现一个问题, 即使我的虚拟机上没跑任何用户进程, 在宿主机上对应的qemu-kvm进程的CPU利用率也有9.0左右.</div><div>删掉一些不必要的控制器(如USB), 然后添加CPU模块, 使用本地CPU的flag.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >virsh # shutdown&nbsp;centos6_6_x64</font></div><div><font size="2"   >virsh # edit&nbsp;<span style="line-height: 28px;"   >centos6_6_x64</span></font></div><div><font size="2"   >..................</font></div><p></p></pre></div><div>原来的配置文件大概是这样的,&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&lt;domain type='kvm' id='2'&gt;</font></div><div><font size="2"   >&nbsp; &lt;name&gt;centos6_6_x64&lt;/name&gt;</font></div><div><font size="2"   >&nbsp; &lt;uuid&gt;4c613d4e-716b-f2cb-4df3-09bc7779f7df&lt;/uuid&gt;</font></div><div><font size="2"   >&nbsp; &lt;memory unit='KiB'&gt;4194304&lt;/memory&gt;</font></div><div><font size="2"   >&nbsp; &lt;currentMemory unit='KiB'&gt;4194304&lt;/currentMemory&gt;</font></div><div><font size="2"   >&nbsp; &lt;vcpu placement='static'&gt;4&lt;/vcpu&gt;</font></div><div><font size="2"   >&nbsp; &lt;os&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;type arch='x86_64' machine='rhel6.6.0'&gt;hvm&lt;/type&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;boot dev='hd'/&gt;</font></div><div><font size="2"   >&nbsp; &lt;/os&gt;</font></div><div><font size="2"   >&nbsp; &lt;features&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;acpi/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;apic/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;pae/&gt;</font></div><div><font size="2"   >&nbsp; &lt;/features&gt;</font></div><div><font size="2"   >&nbsp; &lt;clock offset='utc'/&gt;</font></div><div><font size="2"   >&nbsp; &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;</font></div><div><font size="2"   >&nbsp; &lt;on_reboot&gt;restart&lt;/on_reboot&gt;</font></div><div><font size="2"   >&nbsp; &lt;on_crash&gt;restart&lt;/on_crash&gt;</font></div><div><font size="2"   >&nbsp; &lt;devices&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;emulator&gt;/usr/libexec/qemu-kvm&lt;/emulator&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;disk type='file' device='disk'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;driver name='qemu' type='raw' cache='writethrough'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;source file='/data02/kvmdisk/disk01.img'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;target dev='vda' bus='virtio'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='virtio-disk0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/disk&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;disk type='block' device='cdrom'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;driver name='qemu' type='raw'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;target dev='hdc' bus='ide'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;readonly/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='ide0-1-0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='drive' controller='0' bus='1' target='0' unit='0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/disk&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;controller type='usb' index='0' model='ich9-ehci1'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='usb0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x7'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/controller&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;controller type='usb' index='0' model='ich9-uhci1'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='usb0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;master startport='0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0' multifunction='on'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/controller&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;controller type='usb' index='0' model='ich9-uhci2'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='usb0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;master startport='2'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x1'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/controller&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;controller type='usb' index='0' model='ich9-uhci3'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='usb0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;master startport='4'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x2'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/controller&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;controller type='ide' index='0'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='ide0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x1'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/controller&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;interface type='bridge'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;mac address='52:54:00:76:ac:2b'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;source bridge='virbr0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;target dev='vnet0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;model type='virtio'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='net0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/interface&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;serial type='pty'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;source path='/dev/pts/2'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;target port='0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='serial0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/serial&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;console type='pty' tty='/dev/pts/2'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;source path='/dev/pts/2'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;target type='serial' port='0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='serial0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/console&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;input type='tablet' bus='usb'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='input0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/input&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;memballoon model='virtio'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;alias name='balloon0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x06' function='0x0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/memballoon&gt;</font></div><div><font size="2"   >&nbsp; &lt;/devices&gt;</font></div><div><font size="2"   >&lt;/domain&gt;</font></div><p></p></pre></div><div><br></div><div>修改后的XML如下 :&nbsp;</div><div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >virsh # dumpxml centos6_6_x64</font></div><div><font size="2"   >&lt;domain type='kvm'&gt;</font></div><div><font size="2"   >&nbsp; &lt;name&gt;centos6_6_x64&lt;/name&gt;</font></div><div><font size="2"   >&nbsp; &lt;uuid&gt;4c613d4e-716b-f2cb-4df3-09bc7779f7df&lt;/uuid&gt;</font></div><div><font size="2"   >&nbsp; &lt;memory unit='KiB'&gt;4194304&lt;/memory&gt;</font></div><div><font size="2"   >&nbsp; &lt;currentMemory unit='KiB'&gt;4194304&lt;/currentMemory&gt;</font></div><div><font size="2"   >&nbsp; &lt;vcpu placement='static'&gt;4&lt;/vcpu&gt;</font></div><div><font size="2"   >&nbsp; &lt;os&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;type arch='x86_64' machine='rhel6.6.0'&gt;hvm&lt;/type&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;boot dev='hd'/&gt;</font></div><div><font size="2"   >&nbsp; &lt;/os&gt;</font></div><div><font size="2"   >&nbsp; &lt;features&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;acpi/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;apic/&gt;</font></div><div><font size="2"   >&nbsp; &lt;/features&gt;</font></div><div><font size="2"   >&nbsp; &lt;cpu mode='host-model'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;model fallback='allow'/&gt;</font></div><div><font size="2"   >&nbsp; &lt;/cpu&gt;</font></div><div><font size="2"   >&nbsp; &lt;clock offset='utc'/&gt;</font></div><div><font size="2"   >&nbsp; &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;</font></div><div><font size="2"   >&nbsp; &lt;on_reboot&gt;restart&lt;/on_reboot&gt;</font></div><div><font size="2"   >&nbsp; &lt;on_crash&gt;restart&lt;/on_crash&gt;</font></div><div><font size="2"   >&nbsp; &lt;devices&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;emulator&gt;/usr/libexec/qemu-kvm&lt;/emulator&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;disk type='file' device='disk'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;driver name='qemu' type='raw' cache='writethrough'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;source file='/data03/kvmdisk/disk01.img'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;target dev='vda' bus='virtio'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/disk&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;controller type='usb' index='0'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x2'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/controller&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;interface type='bridge'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;mac address='52:54:00:76:ac:2b'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;source bridge='virbr0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;model type='virtio'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/interface&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;serial type='pty'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;target port='0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/serial&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;console type='pty'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;target type='serial' port='0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/console&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;memballoon model='virtio'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &lt;/memballoon&gt;</font></div><div><font size="2"   >&nbsp; &lt;/devices&gt;</font></div><div><font size="2"   >&lt;/domain&gt;</font></div><p></p></pre></div><div>开机</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >virsh # start centos6_6_x64</font></div><div><font size="2"   >Domain centos6_6_x64 started</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >virsh # console centos6_6_x64</font></div><div><font size="2"   >Connected to domain centos6_6_x64</font></div><div><font size="2"   >Escape character is ^]</font></div><p></p></pre></div><div><br></div><div>查看当前的cpu flag, 判断为<span style="line-height: 28px;"   >Nehalem</span><span style="line-height: 28px;"   >:</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-172-16-3-150 ~]# ps -ewf|grep kvm</font></div><div><font size="2"   >root &nbsp; &nbsp; &nbsp; 966 &nbsp; &nbsp; 2 &nbsp;0 Apr01 ? &nbsp; &nbsp; &nbsp; &nbsp;00:00:00 [kvm-irqfd-clean]</font></div><div><font size="2"   >qemu &nbsp; &nbsp; 20418 &nbsp; &nbsp; 1 31 10:18 ? &nbsp; &nbsp; &nbsp; &nbsp;00:00:16 /usr/libexec/qemu-kvm -name centos6_6_x64 -S -M rhel6.6.0 -cpu Nehalem,+rdtscp,+dca,+pdcm,+xtpr,+tm2,+est,+vmx,+ds_cpl,+monitor,+dtes64,+pbe,+tm,+ht,+ss,+acpi,+ds,+vme -enable-kvm -m 4096 -realtime mlock=off -smp 4,sockets=4,cores=1,threads=1 -uuid 4c613d4e-716b-f2cb-4df3-09bc7779f7df -nographic -nodefconfig -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/centos6_6_x64.monitor,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=utc -no-shutdown -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -drive file=/data03/kvmdisk/disk01.img,if=none,id=drive-virtio-disk0,format=raw,cache=writethrough -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x5,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 -netdev tap,fd=25,id=hostnet0,vhost=on,vhostfd=26 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=52:54:00:76:ac:2b,bus=pci.0,addr=0x3 -chardev pty,id=charserial0 -device isa-serial,chardev=charserial0,id=serial0 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x4 -msg timestamp=on</font></div><p></p></pre></div><div>现在qemu-kvm CPU使用率降低到0.x%</div></div><div><br></div><div>XML配置文件样本,</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-172-16-3-150 ~]# cd /usr/share/libvirt/</font></div><div><font size="2"   >[root@db-172-16-3-150 libvirt]# ll -R</font></div><div><font size="2"   >.:</font></div><div><font size="2"   >total 28K</font></div><div><font size="2"   >-rw-r--r--. 1 root root &nbsp;19K Jan 29 20:49 cpu_map.xml</font></div><div><font size="2"   >drwxr-xr-x. 2 root root 4.0K Apr &nbsp;1 13:33 networks</font></div><div><font size="2"   >drwxr-xr-x. 2 root root 4.0K Feb 11 10:42 schemas</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >./networks:</font></div><div><font size="2"   >total 4.0K</font></div><div><font size="2"   >-rw-r--r--. 1 root root 230 Jan 29 20:49 default.xml</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >./schemas:</font></div><div><font size="2"   >total 236K</font></div><div><font size="2"   >-rw-r--r--. 1 root root 7.4K Jan 29 20:49 basictypes.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root 8.7K Jan 29 20:49 capability.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root 101K Jan 29 20:49 domaincommon.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root &nbsp;285 Jan 29 20:49 domain.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root 3.9K Jan 29 20:49 domainsnapshot.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root &nbsp;12K Jan 29 20:49 interface.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root 5.8K Jan 29 20:49 networkcommon.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root &nbsp;11K Jan 29 20:49 network.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root 8.8K Jan 29 20:49 nodedev.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root &nbsp;30K Jan 29 20:49 nwfilter.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root 1.6K Jan 29 20:49 secret.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root &nbsp;788 Jan 29 20:49 storageencryption.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root &nbsp;12K Jan 29 20:49 storagepool.rng</font></div><div><font size="2"   >-rw-r--r--. 1 root root 4.9K Jan 29 20:49 storagevol.rng</font></div><p></p></pre></div><div><br></div><div><div style="line-height: 28px;"   >还记得cluster.rng吗?</div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-150 libvirt]# cd /usr/share/cluster/</font></div><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-150 cluster]# ll</font></div><div style="line-height: 28px;"   ><font size="2"   >total 20K</font></div><div style="line-height: 28px;"   ><font size="2"   >-rwxr-xr-x. 1 root root 2.4K Oct 15 19:45 checkquorum</font></div><div style="line-height: 28px;"   ><font size="2"   >-rw-r--r--. 1 root root 2.4K Oct 15 19:45 checkquorum.wdmd</font></div><div style="line-height: 28px;"   ><font size="2"   >lrwxrwxrwx. 1 root root &nbsp; 28 Feb 11 10:42 cluster.rng -&gt; /var/lib/cluster/cluster.rng</font></div><p></p></pre></div><div style="line-height: 28px;"   ><br></div></div></div><div>[参考]</div><div>其他优化手段参考如下 :&nbsp;</div><div>1.&nbsp;<a target="_blank" rel="nofollow" href="http://www.linux-kvm.org/page/Tuning_KVM"   >http://www.linux-kvm.org/page/Tuning_KVM</a></div><div>2.&nbsp;<a target="_blank" rel="nofollow" href="http://wiki.qemu.org/Qemu-doc.html"   >http://wiki.qemu.org/Qemu-doc.html</a></div><div>3.&nbsp;<a target="_blank" rel="nofollow" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html-single/Virtualization_Tuning_and_Optimization_Guide/index.html"   >https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html-single/Virtualization_Tuning_and_Optimization_Guide/index.html</a></div><div>4. /usr/share/libvirt</div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="kvm performance tuning for qemu-kvm daemons high cpu usage - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>