<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">R地图包 maps,mapdata,geosphere及其绘图</h2>
	<h5 id="">2015-04-15 17:12:56&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020153154589234/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>接 &nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201531524411938/"   >http://blog.163.com/digoal@126/blog/static/163877040201531524411938/</a></div><div><div>为大家介绍R语言提供的丰富的地图包功能,首先需要安装maps包,可以用来画出漂亮的世界地图,供我们做社交网络分析.</div><div>遗憾的是该包不包含中国地图包,如若需要绘制中国地图,以方面建议加载mapdata包,</div><div>另一方面,强烈建议谷歌贡献的ggmap包,</div><div>相关命令如下 :&nbsp;</div></div><div>世界地图</div><div><div>&gt; library(maps)</div><div>警告信息：</div><div>程辑包‘maps’是用R版本3.1.3 来建造的&nbsp;</div><div>&gt; map("world",fill=TRUE,col=rainbow(200),ylim=c(-60,90),mar=c(0,0,0,0))</div></div><div><div><img title="R地图包 maps,mapdata,geosphere及其绘图 - 德哥@Digoal - PostgreSQL research"   alt="R地图包 maps,mapdata,geosphere及其绘图 - 德哥@Digoal - PostgreSQL research"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/EMF7E2xxV6GJDKzBI4dR5g==/6630343187536362874.png"   ></div></div><div><br></div><div>中国地图</div><div><div>&gt; library(mapdata)</div><div>警告信息：</div><div>程辑包‘mapdata’是用R版本3.1.3 来建造的&nbsp;</div><div>&gt; map("china",col="red4",ylim=c(18,54),panel.first=grid())</div></div><div><div><img title="R地图包 maps,mapdata,geosphere及其绘图 - 德哥@Digoal - PostgreSQL research"   alt="R地图包 maps,mapdata,geosphere及其绘图 - 德哥@Digoal - PostgreSQL research"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/q1C9G7qkbHD7_V0FUiO_Og==/6630236534908466343.png"   ></div></div><div><br></div><div><div>最后以一个航空公司航线分布案例,首先导入外部数据, 然后构造航线,最终在图形中展示出来.</div><div>命令如下 :&nbsp;</div></div><div>&gt; install.packages("geosphere")</div><div>&gt; library("geosphere")</div><div><div>airports &lt;- read.csv("http://datasets.flowingdata.com/tuts/maparcs/airports.csv", header=TRUE) &nbsp;</div><div>flights &lt;- read.csv("http://datasets.flowingdata.com/tuts/maparcs/flights.csv", header=TRUE, as.is=TRUE) &nbsp;</div><div>map("world",col="#f2f2f2",fill=TRUE,bg="white",lwd=0.5) &nbsp;</div><div>fsub &lt;- flights[flights$airline=="AA",] &nbsp;</div><div>for (j in 1:length(fsub$airline)) { &nbsp;</div><div>&nbsp; air1 &lt;- airports[airports$iata == fsub[j,]$airport1,] &nbsp;</div><div>&nbsp; air2 &lt;- airports[airports$iata == fsub[j,]$airport2,] &nbsp;</div><div>&nbsp; inter &lt;- gcIntermediate(c(air1[1,]$long, air1[1,]$lat), c(air2[1,]$long, air2[1,]$lat), n=100, addStartEnd=TRUE) &nbsp;</div><div>&nbsp; lines(inter, col="black", lwd=0.8)</div><div>}</div></div><div><div><img title="R地图包 maps,mapdata,geosphere及其绘图 - 德哥@Digoal - PostgreSQL research"   alt="R地图包 maps,mapdata,geosphere及其绘图 - 德哥@Digoal - PostgreSQL research"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/6adkm5l45d5Xyi93TJYAuw==/6619355767840516040.png"   ></div></div><div><br></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201531524411938/"   >http://blog.163.com/digoal@126/blog/static/163877040201531524411938/</a></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="R地图包 maps,mapdata,geosphere及其绘图 - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>