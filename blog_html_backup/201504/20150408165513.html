<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">R in common use functions for numeric</h2>
	<h5 id="">2015-04-08 16:55:13&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020153831651477/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>测试一下R一些常用的数字处理函数.</div><div>如下 &nbsp;:&nbsp;</div><div><img title="R - 德哥@Digoal - PostgreSQL research"   alt="R - 德哥@Digoal - PostgreSQL research"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/dF4B5h4YQP8PWCjDW2-cJg==/1055812637659641657.png"   ></div><div>round, 四舍五入到小数点后几位.</div><div>例如</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&gt; round(x,1)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; x &nbsp; y &nbsp; z</font></div><div><font size="2"   >1 &nbsp; 0.0 0.0 0.0</font></div><div><font size="2"   >2 &nbsp; 0.0 0.2 0.5</font></div><div><font size="2"   >3 &nbsp; 0.8 0.9 0.8</font></div><div><font size="2"   >4 &nbsp; 0.3 0.6 1.0</font></div><div><font size="2"   >5 &nbsp; 0.4 0.8 0.4</font></div><div><font size="2"   >6 &nbsp; 0.3 0.9 0.8</font></div><p></p></pre></div><div><br></div><div>sort, 正向排序</div><div>rev, 返向排序 (注意要得到按顺序的反向排序, 需要rev(sort(?)))</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&gt; x &lt;- 1:10</font></div><div><div><font size="2"   >&gt; y &lt;- rep(x, each=2)</font></div><div><div><font size="2"   >&gt; y &lt;- rep(x, times=2)</font></div><div><font size="2"   >&gt; y</font></div><div><font size="2"   >&nbsp;[1] &nbsp;1 &nbsp;2 &nbsp;3 &nbsp;4 &nbsp;5 &nbsp;6 &nbsp;7 &nbsp;8 &nbsp;9 10 &nbsp;1 &nbsp;2 &nbsp;3 &nbsp;4 &nbsp;5 &nbsp;6 &nbsp;7 &nbsp;8 &nbsp;9 10</font></div></div></div><div><div><font size="2"   >&gt; sort(y)</font></div><div><font size="2"   >&nbsp;[1] &nbsp;1 &nbsp;1 &nbsp;2 &nbsp;2 &nbsp;3 &nbsp;3 &nbsp;4 &nbsp;4 &nbsp;5 &nbsp;5 &nbsp;6 &nbsp;6 &nbsp;7 &nbsp;7 &nbsp;8 &nbsp;8 &nbsp;9 &nbsp;9 10 10</font></div><div><font size="2"   >&gt; rev(sort(y))</font></div><div><font size="2"   >&nbsp;[1] 10 10 &nbsp;9 &nbsp;9 &nbsp;8 &nbsp;8 &nbsp;7 &nbsp;7 &nbsp;6 &nbsp;6 &nbsp;5 &nbsp;5 &nbsp;4 &nbsp;4 &nbsp;3 &nbsp;3 &nbsp;2 &nbsp;2 &nbsp;1 &nbsp;1</font></div></div><div><div><font size="2"   >&gt; rev(y)</font></div><div><font size="2"   >&nbsp;[1] 10 &nbsp;9 &nbsp;8 &nbsp;7 &nbsp;6 &nbsp;5 &nbsp;4 &nbsp;3 &nbsp;2 &nbsp;1 10 &nbsp;9 &nbsp;8 &nbsp;7 &nbsp;6 &nbsp;5 &nbsp;4 &nbsp;3 &nbsp;2 &nbsp;1</font></div></div><p></p></pre></div><div><br></div><div>rank和scale见:</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201533335228/"   >http://blog.163.com/digoal@126/blog/static/163877040201533335228/</a></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020153343446995/"   >http://blog.163.com/digoal@126/blog/static/16387704020153343446995/</a></div><div><br></div><div>log(x, base) , 以base为底的x的对数. 默认是e</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&gt; log(100,2)</font></div><div><font size="2"   >[1] 6.643856</font></div><div><font size="2"   >&gt; log(100,10)</font></div><div><font size="2"   >[1] 2</font></div></div><div><div><font size="2"   >&gt; 2^6.643856</font></div><div><font size="2"   >[1] 99.99999</font></div></div><p></p></pre></div><div><br></div><div>pmin,&nbsp;</div><div>pmax,&nbsp;</div><div>多个向量, 每个位置对应处的, 最大值或最小值.</div><div>例如</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&gt; x</font></div><div><font size="2"   >&nbsp;[1] &nbsp;1 &nbsp;2 &nbsp;3 &nbsp;4 &nbsp;5 &nbsp;6 &nbsp;7 &nbsp;8 &nbsp;9 10</font></div><div><font size="2"   >&gt; y &lt;- rev(sort(x))</font></div><div><font size="2"   >&gt; x</font></div><div><font size="2"   >&nbsp;[1] &nbsp;1 &nbsp;2 &nbsp;3 &nbsp;4 &nbsp;5 &nbsp;6 &nbsp;7 &nbsp;8 &nbsp;9 10</font></div><div><font size="2"   >&gt; y</font></div><div><font size="2"   >&nbsp;[1] 10 &nbsp;9 &nbsp;8 &nbsp;7 &nbsp;6 &nbsp;5 &nbsp;4 &nbsp;3 &nbsp;2 &nbsp;1</font></div></div><div><font size="2"   >位置对应</font></div><div><div><font size="2"   >&gt; pmin(x,y)</font></div><div><font size="2"   >&nbsp;[1] 1 2 3 4 5 5 4 3 2 1</font></div></div><div><div><font size="2"   >&gt; pmax(x,y)</font></div><div><font size="2"   >&nbsp;[1] 10 &nbsp;9 &nbsp;8 &nbsp;7 &nbsp;6 &nbsp;6 &nbsp;7 &nbsp;8 &nbsp;9 10</font></div></div><font size="2"   >&nbsp;最好是长度一样的向量进行计算, 否则会告警.<wbr><br></font><div><div><font size="2"   >&gt; pmax(x,y,z)</font></div><div><font size="2"   >&nbsp;[1] 10 11 12 13 14 15 16 17 18 19 20 21 22</font></div><div><font size="2"   >Warning message:</font></div><div><font size="2"   >In pmax(x, y, z) : an argument will be fractionally recycled</font></div></div><p></p></pre></div><div><br></div><div>cumsum, 截至到每个位置处的累计和</div><div>cumprod,&nbsp;<span style="line-height: 28px;"   >截至到每个位置处的累计积</span></div><div>cummin,&nbsp;<span style="line-height: 28px;"   >截至到每个位置处的最小值</span></div><div>cummax,&nbsp;<span style="line-height: 28px;"   >截至到每个位置处的最大值</span></div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&gt; x</font></div><div><font size="2"   >&nbsp;[1] &nbsp;1 &nbsp;2 &nbsp;3 &nbsp;4 &nbsp;5 &nbsp;6 &nbsp;7 &nbsp;8 &nbsp;9 10</font></div><div><font size="2"   >&gt; cumsum(x)</font></div><div><font size="2"   >&nbsp;[1] &nbsp;1 &nbsp;3 &nbsp;6 10 15 21 28 36 45 55</font></div><div><font size="2"   >1 , 1+2 , 1+2+3 , .....</font></div><div><font size="2"   >&gt; cumprod(x)</font></div><div><font size="2"   >&nbsp;[1] &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; 6 &nbsp; &nbsp; &nbsp;24 &nbsp; &nbsp; 120 &nbsp; &nbsp; 720 &nbsp; &nbsp;5040 &nbsp; 40320 &nbsp;362880</font></div><div><font size="2"   >[10] 3628800</font></div><div><font size="2"   >1, 1*2, 1*2*3, ....</font></div><div><font size="2"   >&gt; cummin(x)</font></div><div><font size="2"   >&nbsp;[1] 1 1 1 1 1 1 1 1 1 1</font></div><div><font size="2"   >min(1), min(1,2), min(1,2,3),...</font></div><div><font size="2"   >&gt; cummax(x)</font></div><div><font size="2"   >&nbsp;[1] &nbsp;1 &nbsp;2 &nbsp;3 &nbsp;4 &nbsp;5 &nbsp;6 &nbsp;7 &nbsp;8 &nbsp;9 10</font></div></div><div><font size="2"   >max(1), max(1,2), max(1,2,3),...</font></div><p></p></pre></div><div><br></div><div>match(x,y), 返回和第一个向量长度一致的向量, 表示x的值在Y中的位置索引.</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&gt; x</font></div><div><font size="2"   >&nbsp;[1] &nbsp;5 &nbsp;6 &nbsp;7 &nbsp;8 &nbsp;9 10 11 12 13 14 15 16</font></div><div><font size="2"   >&gt; y</font></div><div><font size="2"   >&nbsp;[1] 10 &nbsp;9 &nbsp;8 &nbsp;7 &nbsp;6 &nbsp;5 &nbsp;4 &nbsp;3 &nbsp;2 &nbsp;1</font></div><div><font size="2"   >&gt; match(x,y)</font></div><div><font size="2"   >&nbsp;[1] &nbsp;6 &nbsp;5 &nbsp;4 &nbsp;3 &nbsp;2 &nbsp;1 NA NA NA NA NA NA</font></div></div><div><font size="2"   >5在y的位置是6. 即y[6]==x[1]</font></div><p></p></pre></div><div><br></div><div>which (x == a) , x 是一个向量, a是一个值, 如果x中有值与a匹配, 那么返回索引位置.</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&gt; x</font></div><div><font size="2"   >&nbsp;[1] 10 10 &nbsp;9 &nbsp;9 &nbsp;8 &nbsp;8 &nbsp;7 &nbsp;7 &nbsp;6 &nbsp;6 &nbsp;5 &nbsp;5 &nbsp;4 &nbsp;4 &nbsp;3 &nbsp;3 &nbsp;2 &nbsp;2 &nbsp;1 &nbsp;1</font></div></div><div><div><font size="2"   >&gt; which(x == 1)</font></div><div><font size="2"   >[1] 19 20</font></div></div><div><font size="2"   >注意y不要使用向量</font></div><div><div><font size="2"   >&gt; which(x == c(1,3,100))</font></div><div><font size="2"   >[1] 19</font></div><div><font size="2"   >Warning message:</font></div><div><font size="2"   >In x == c(1, 3, 100) :</font></div><div><font size="2"   >&nbsp; longer object length is not a multiple of shorter object length</font></div></div><p></p></pre></div><div><br></div><div>choose(n,k) , 二项分布值.</div><div>lchoose(n,k) , 二项分布值的E为底的对数.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >算法区分k&gt;0, k=0, k&lt;0的情况, 如下 :&nbsp;</font></div><div><font size="2"   ><span style="line-height: 28px;"   >&nbsp;</span><span style="line-height: 28px;"   >n(n-1)...(n-k+1) / k!,&nbsp;</span></font></div><div><span style="line-height: 28px;"   ><font size="2"   >&nbsp;as 1 for k = 0&nbsp;</font></span></div><div><font size="2"   ><span style="line-height: 28px;"   >&nbsp;as 0</span><span style="line-height: 28px;"   >&nbsp;for negative k.</span></font></div><div><span style="line-height: 28px;"   ><font size="2"   >k如果不是整数, 则取round值.</font></span></div><div style="line-height: 28px;"   ><font size="2"   >例子</font></div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><font size="2"   >&gt; choose(4,3)</font></div><div style="line-height: 28px;"   ><font size="2"   >[1] 4</font></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   ><font size="2"   >&gt; (4*3*2)/(3*2*1)</font></span></div><div style="line-height: 28px;"   ><font size="2"   >[1] 4</font></div><div style="line-height: 28px;"   ><font size="2"   ><br></font></div><div style="line-height: 28px;"   ><font size="2"   >lchoose则返回choose结果绝对值的对数.</font></div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><font size="2"   >&gt; choose(10,2)</font></div><div style="line-height: 28px;"   ><font size="2"   >[1] 45</font></div><div style="line-height: 28px;"   ><font size="2"   >&gt; lchoose(10,2)</font></div><div style="line-height: 28px;"   ><font size="2"   >[1] 3.806662</font></div><div style="line-height: 28px;"   ><font size="2"   >&gt; log(45)</font></div><div style="line-height: 28px;"   ><font size="2"   >[1] 3.806662</font></div><div style="line-height: 28px;"   ><font size="2"   >参考帮助 :&nbsp;</font></div></div></div><div><div><font size="2"   >&nbsp; &nbsp; &nbsp;The functions ‘choose’ and ‘lchoose’ return binomial coefficients</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;and the logarithms of their absolute values. &nbsp;Note that ‘choose(n,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;k)’ is defined for all real numbers n and integer k. &nbsp;For k &gt;= 1</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;it is defined as n(n-1)...(n-k+1) / k!, as 1 for k = 0 and as 0</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;for negative k. &nbsp;Non-integer values of ‘k’ are rounded to an</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;integer, with a warning.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘choose(*, k)’ uses direct arithmetic (instead of ‘[l]gamma’</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;calls) for small ‘k’, for speed and accuracy reasons. &nbsp;Note the</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;function ‘combn’ (package ‘utils’) for enumeration of all possible</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;combinations.</font></div></div><p></p></pre></div><div><br></div><div>na.omit(x), 忽略向量中的NA值, 如果X是矩阵或数据框, 则忽略整行.</div><div>na.fail(x), 如果x 中包含NA值, 则返回错误.</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&gt; na.fail(c(1,2,3,NA))</font></div><div><font size="2"   >Error in na.fail.default(c(1, 2, 3, NA)) : missing values in object</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >&gt; na.omit(c(1,2,3,NA,4))</font></div><div><font size="2"   >[1] 1 2 3 4</font></div><div><font size="2"   >attr(,"na.action")</font></div><div><font size="2"   >[1] 4</font></div><div><font size="2"   >attr(,"class")</font></div><div><font size="2"   >[1] "omit"</font></div></div><p></p></pre></div><div><br></div><div>unique(x), 去重复数据.</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&gt; unique(c(1,1,1,1,2,3,4,4))</font></div><div><font size="2"   >[1] 1 2 3 4</font></div></div><div><font size="2"   >对于数据框, 则去除重复行</font></div><div><div><font size="2"   >&gt; x &lt;- data.frame(rep(1:2, each=2),rep(1:2, each=2))</font></div><div><font size="2"   >&gt; x</font></div><div><font size="2"   >&nbsp; rep.1.2..each...2. rep.1.2..each...2..1</font></div><div><font size="2"   >1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1</font></div><div><font size="2"   >2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1</font></div><div><font size="2"   >3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2</font></div><div><font size="2"   >4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2</font></div><div><font size="2"   >&gt; unique(x)</font></div><div><font size="2"   >&nbsp; rep.1.2..each...2. rep.1.2..each...2..1</font></div><div><font size="2"   >1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1</font></div><div><font size="2"   >3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2</font></div></div><p></p></pre></div><div><br></div><div>table(x) , 返回重复数据的个数的表格.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&gt; x &lt;- data.frame(rep(6:8, each=2),rep(5:7, each=2))</font></div><div><font size="2"   >&gt; x</font></div><div><font size="2"   >&nbsp; rep.6.8..each...2. rep.5.7..each...2.</font></div><div><font size="2"   >1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5</font></div><div><font size="2"   >2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5</font></div><div><font size="2"   >3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6</font></div><div><font size="2"   >4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6</font></div><div><font size="2"   >5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7</font></div><div><font size="2"   >6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7</font></div><div><font size="2"   >&gt; table(x)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rep.5.7..each...2.</font></div><div><font size="2"   >rep.6.8..each...2. 5 6 7</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6 2 0 0</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7 0 2 0</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8 0 0 2</font></div><p></p></pre></div><div><br></div><div>table(x,y) ,&nbsp;</div><div>返回x,y的列联表, 输入值为两个factor, 并且长度必须一致</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&gt; x &lt;- gl(1,10)</font></div><div><font size="2"   >&gt; y &lt;- gl(10,2)</font></div><div><font size="2"   >&gt; x</font></div><div><font size="2"   >&nbsp;[1] 1 1 1 1 1 1 1 1 1 1</font></div><div><font size="2"   >Levels: 1</font></div><div><font size="2"   >&gt; y</font></div><div><font size="2"   >&nbsp;[1] 1 &nbsp;1 &nbsp;2 &nbsp;2 &nbsp;3 &nbsp;3 &nbsp;4 &nbsp;4 &nbsp;5 &nbsp;5 &nbsp;6 &nbsp;6 &nbsp;7 &nbsp;7 &nbsp;8 &nbsp;8 &nbsp;9 &nbsp;9 &nbsp;10 10</font></div><div><font size="2"   >Levels: 1 2 3 4 5 6 7 8 9 10</font></div><div><font size="2"   >&gt; table(x,y)</font></div><div><font size="2"   >Error in table(x, y) : all arguments must have the same length</font></div><div><font size="2"   >&gt; y &lt;- gl(10,1)</font></div><div><font size="2"   >&gt; table(x,y)</font></div><div><font size="2"   >&nbsp; &nbsp;y</font></div><div><font size="2"   >x &nbsp; 1 2 3 4 5 6 7 8 9 10</font></div><div><font size="2"   >&nbsp; 1 1 1 1 1 1 1 1 1 1 &nbsp;1</font></div><div><font size="2"   >&gt; mode(table(x,y))</font></div><div><font size="2"   >[1] "numeric"</font></div><p></p></pre></div><div><br></div><div>subset(x, ...), 给定条件的子集</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&gt; z</font></div><div><font size="2"   >&nbsp;[1] 10 11 12 13 14 15 16 17 18 19 20 21 22</font></div><div><font size="2"   >&gt; subset(z, z&gt;1)</font></div><div><font size="2"   >&nbsp;[1] 10 11 12 13 14 15 16 17 18 19 20 21 22</font></div><div><font size="2"   >&gt; subset(z, z&gt;15)</font></div><div><font size="2"   >[1] 16 17 18 19 20 21 22</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >&gt; x &lt;- data.frame(1:10, 5:14, 6:15)</font></div><div><font size="2"   >&gt; x</font></div><div><font size="2"   >&nbsp; &nbsp;X1.10 X5.14 X6.15</font></div><div><font size="2"   >1 &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp; 5 &nbsp; &nbsp; 6</font></div><div><font size="2"   >2 &nbsp; &nbsp; &nbsp;2 &nbsp; &nbsp; 6 &nbsp; &nbsp; 7</font></div><div><font size="2"   >3 &nbsp; &nbsp; &nbsp;3 &nbsp; &nbsp; 7 &nbsp; &nbsp; 8</font></div><div><font size="2"   >4 &nbsp; &nbsp; &nbsp;4 &nbsp; &nbsp; 8 &nbsp; &nbsp; 9</font></div><div><font size="2"   >5 &nbsp; &nbsp; &nbsp;5 &nbsp; &nbsp; 9 &nbsp; &nbsp;10</font></div><div><font size="2"   >6 &nbsp; &nbsp; &nbsp;6 &nbsp; &nbsp;10 &nbsp; &nbsp;11</font></div><div><font size="2"   >7 &nbsp; &nbsp; &nbsp;7 &nbsp; &nbsp;11 &nbsp; &nbsp;12</font></div><div><font size="2"   >8 &nbsp; &nbsp; &nbsp;8 &nbsp; &nbsp;12 &nbsp; &nbsp;13</font></div><div><font size="2"   >9 &nbsp; &nbsp; &nbsp;9 &nbsp; &nbsp;13 &nbsp; &nbsp;14</font></div><div><font size="2"   >10 &nbsp; &nbsp;10 &nbsp; &nbsp;14 &nbsp; &nbsp;15</font></div></div><div><div><font size="2"   >&gt; subset(x, x$X1.10&gt;5)</font></div><div><font size="2"   >&nbsp; &nbsp;X1.10 X5.14 X6.15</font></div><div><font size="2"   >6 &nbsp; &nbsp; &nbsp;6 &nbsp; &nbsp;10 &nbsp; &nbsp;11</font></div><div><font size="2"   >7 &nbsp; &nbsp; &nbsp;7 &nbsp; &nbsp;11 &nbsp; &nbsp;12</font></div><div><font size="2"   >8 &nbsp; &nbsp; &nbsp;8 &nbsp; &nbsp;12 &nbsp; &nbsp;13</font></div><div><font size="2"   >9 &nbsp; &nbsp; &nbsp;9 &nbsp; &nbsp;13 &nbsp; &nbsp;14</font></div><div><font size="2"   >10 &nbsp; &nbsp;10 &nbsp; &nbsp;14 &nbsp; &nbsp;15</font></div></div><p></p></pre></div><div><br></div><div>sample(x, size), x可以是向量或列表, 从x中采样size个元素, 如果是列表, 采样表示列数.</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&gt; x</font></div><div><font size="2"   >&nbsp; rep.6.8..each...2. rep.5.7..each...2.</font></div><div><font size="2"   >1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5</font></div><div><font size="2"   >2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5</font></div><div><font size="2"   >3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6</font></div><div><font size="2"   >4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6</font></div><div><font size="2"   >5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7</font></div><div><font size="2"   >6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7</font></div><div><font size="2"   >&gt; mode(x)</font></div><div><font size="2"   >[1] "list"</font></div><div><font size="2"   >&gt; length(x)</font></div><div><font size="2"   >[1] 2</font></div><div><font size="2"   >&gt; sample(x, 1)</font></div><div><font size="2"   >&nbsp; rep.5.7..each...2.</font></div><div><font size="2"   >1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5</font></div><div><font size="2"   >2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5</font></div><div><font size="2"   >3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6</font></div><div><font size="2"   >4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6</font></div><div><font size="2"   >5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7</font></div><div><font size="2"   >6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7</font></div></div><div><div><font size="2"   >&gt; z</font></div><div><font size="2"   >&nbsp;[1] 10 11 12 13 14 15 16 17 18 19 20 21 22</font></div><div><font size="2"   >&gt; sample(z, 5)</font></div><div><font size="2"   >[1] 21 13 22 14 15</font></div></div><div><font size="2"   >另外还有两个可选参数prob, replace.</font></div><div><font size="2"   >prob是一个长度和x的长度一致的向量, 每个位置对应采样倾向度, 越大则越可能被选择, 0表示排除.</font></div><div><font size="2"   >例如 :&nbsp;</font></div><div><div><font size="2"   >&gt; z-10</font></div><div><font size="2"   >&nbsp;[1] &nbsp;0 &nbsp;1 &nbsp;2 &nbsp;3 &nbsp;4 &nbsp;5 &nbsp;6 &nbsp;7 &nbsp;8 &nbsp;9 10 11 12</font></div></div><div><font size="2"   >以下prob表示z的第一个元素10不可能被采样选择.</font></div><div><div><font size="2"   >&gt; sample(z, 5, prob=z-10)</font></div><div><font size="2"   >[1] 16 13 12 20 17</font></div></div><div><font size="2"   >replace=TRUE表示可能出现采样重复值.</font></div><div><div><font size="2"   >&gt; sample(z, 5, prob=z-10, replace=TRUE)</font></div><div><font size="2"   >[1] 18 12 15 22 14</font></div><div><font size="2"   >&gt; sample(z, 5, prob=z-10, replace=TRUE) &nbsp;, 因为21,22<span style="line-height: 28px;"   >对应的prod最大, 可能性最大.&nbsp;</span></font></div><div><font size="2"   >[1] 21 21 21 18 11</font></div></div><p></p></pre></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="R in common use functions for numeric - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>