<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">GFS2,GFS,EXT2,EXT3 SEQ-write performance compare</h2>
	<h5 id="">2010-05-19 19:59:55&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201041975955385/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><span class="Apple-style-span" style="font-family: Tahoma, Arial, Helvetica, sans-serif; line-height: normal; font-size: 13px; color: rgb(51, 68, 85);"><div id="_mcePaste" style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">两个节点的RH-CLUSTER，</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">同一个存储设备,同样的配置,写同样的文件.</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">比较如下：</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1.GFS1</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">mkfs.gfs -O -j 2 -p lock_dlm -r 2048 -t cluster_name:lock_name /dev/mapper/diskgroup1p1</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">截取</div></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">[root@]# time dd if=/dev/zero of=./test.img bs=4k count=10240000</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">10240000+0 records in</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">10240000+0 records out</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">41943040000 bytes (42 GB) copied, 254.467 seconds, 165 MB/s</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">real &nbsp; &nbsp;4m14.475s</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">user &nbsp; &nbsp;0m4.184s</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">sys &nbsp; &nbsp; 4m6.117s</div></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">截取到的vmstat信息</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;0 &nbsp; &nbsp;476 9989164 &nbsp;25624 14075568 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 165712 1403 &nbsp;373 &nbsp;0 15 84 &nbsp;0 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;0 &nbsp; &nbsp;476 9815724 &nbsp;25632 14243176 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 165796 1403 &nbsp;456 &nbsp;0 15 84 &nbsp;0 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;0 &nbsp; &nbsp;476 9646040 &nbsp;25632 14409468 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 165736 1409 &nbsp;349 &nbsp;0 15 84 &nbsp;0 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">2 &nbsp;0 &nbsp; &nbsp;476 9470764 &nbsp;25632 14579412 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 173320 1401 &nbsp;377 &nbsp;0 15 84 &nbsp;0 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">2 &nbsp;0 &nbsp; &nbsp;476 9315428 &nbsp;25632 14730928 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 153960 1397 &nbsp;366 &nbsp;0 15 85 &nbsp;0 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;0 &nbsp; &nbsp;476 9140812 &nbsp;25632 14900484 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 167632 1402 &nbsp;331 &nbsp;0 16 84 &nbsp;0 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">2 &nbsp;0 &nbsp; &nbsp;476 8960568 &nbsp;25640 15075376 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 176240 1410 &nbsp;512 &nbsp;0 16 84 &nbsp;0 &nbsp;0</div></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">2.GFS2</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">mkfs.gfs2 -O -j 2 -p lock_dlm -r 2048 -t cluster_name:lock_name /dev/mapper/diskgroup1p1</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">[root@sanp-gamehall-db2 msa2_vd02vol01p1]# time dd if=/dev/zero of=./test.img bs=4k count=10240000</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">10240000+0 records in</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">10240000+0 records out</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">41943040000 bytes (42 GB) copied, 291.332 seconds, 144 MB/s</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">real &nbsp; &nbsp;4m51.352s</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">user &nbsp; &nbsp;0m3.134s</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">sys &nbsp; &nbsp; 2m31.986s</div></div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">截取到的vmstat信息</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;78072 &nbsp; 1744 23149112 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 301648 1553 &nbsp;237 &nbsp;0 &nbsp;6 75 19 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;2 &nbsp; &nbsp;476 &nbsp;72932 &nbsp; 1760 23182624 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 26672 1917 &nbsp;473 &nbsp;0 &nbsp;8 76 16 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;2 &nbsp; &nbsp;476 &nbsp;71076 &nbsp; 1756 23184272 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; 132 &nbsp; &nbsp;60 1016 &nbsp;628 &nbsp;0 13 71 16 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;2 &nbsp; &nbsp;476 &nbsp;75548 &nbsp; 1756 23180912 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 1014 &nbsp;514 &nbsp;0 14 74 12 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;2 &nbsp; &nbsp;476 &nbsp;71384 &nbsp; 1740 23183928 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 1010 &nbsp;516 &nbsp;0 14 74 12 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;2 &nbsp; &nbsp;476 &nbsp;73100 &nbsp; 1740 23182964 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 1011 &nbsp;533 &nbsp;0 14 72 14 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;1 &nbsp; &nbsp;476 &nbsp;74756 &nbsp; 1740 23180920 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 1013 &nbsp;521 &nbsp;0 14 74 12 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;2 &nbsp; &nbsp;476 &nbsp;73824 &nbsp; 1748 23182252 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp;60 1013 &nbsp;640 &nbsp;0 14 74 12 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;2 &nbsp; &nbsp;476 &nbsp;75232 &nbsp; 1748 23180208 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 1014 &nbsp;526 &nbsp;0 14 74 12 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;0 &nbsp; &nbsp;476 &nbsp;76144 &nbsp; 1748 23150872 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 276392 1432 &nbsp;387 &nbsp;0 11 81 &nbsp;8 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;73512 &nbsp; 1748 23150872 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 401604 1742 &nbsp;237 &nbsp;0 &nbsp;8 84 &nbsp;8 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;75732 &nbsp; 1748 23150872 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 272824 1486 &nbsp;243 &nbsp;0 &nbsp;6 75 19 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;1 &nbsp; &nbsp;476 &nbsp;75888 &nbsp; 1756 23150864 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 291868 1543 &nbsp;329 &nbsp;0 &nbsp;6 75 19 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;1 &nbsp; &nbsp;476 &nbsp;76020 &nbsp; 1756 23150872 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 265176 1483 &nbsp;240 &nbsp;0 &nbsp;6 75 20 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;75040 &nbsp; 1756 23150872 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 294576 1522 &nbsp;234 &nbsp;0 &nbsp;6 75 19 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">0 &nbsp;1 &nbsp; &nbsp;476 &nbsp;95692 &nbsp; 1768 23150872 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 207192 1470 &nbsp;263 &nbsp;0 &nbsp;5 78 17 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;1 &nbsp; &nbsp;476 &nbsp;74244 &nbsp; 1792 23180544 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 4 30036 1839 &nbsp;447 &nbsp;0 &nbsp;7 80 12 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;2 &nbsp; &nbsp;476 &nbsp;71836 &nbsp; 1800 23183388 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp;60 1012 &nbsp;643 &nbsp;0 14 64 22 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;1 &nbsp; &nbsp;476 &nbsp;72388 &nbsp; 1796 23182512 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; 132 &nbsp; &nbsp; 0 1015 &nbsp;523 &nbsp;0 13 64 22 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;2 &nbsp; &nbsp;476 &nbsp;74068 &nbsp; 1788 23180424 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 1010 &nbsp;530 &nbsp;0 14 64 22 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">2 &nbsp;1 &nbsp; &nbsp;476 &nbsp;70552 &nbsp; 1788 23181872 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 1100 &nbsp;833 &nbsp;0 14 64 22 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;1 &nbsp; &nbsp;476 &nbsp;72860 &nbsp; 1788 23180588 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp; 0 1010 &nbsp;532 &nbsp;0 14 64 22 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">1 &nbsp;2 &nbsp; &nbsp;476 &nbsp;73648 &nbsp; 1796 23179312 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 &nbsp; &nbsp;60 1013 &nbsp;648 &nbsp;0 14 64 22 &nbsp;0</div><div style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">0 &nbsp;0 &nbsp; &nbsp;476 &nbsp;73316 &nbsp; 1796 23180896 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp;16 &nbsp; &nbsp; 0 1025 &nbsp;446 &nbsp;0 10 74 17 &nbsp;0</div></div><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">从上面的信息看出，GFS2的测试消耗了更多IO等待和CPU，GFS2在速度方面也有下降，并且GFS2每隔一段时间会有短暂的IO堵塞。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">同时RH官方也不建议在生产系统使用GFS2文件系统。</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">EXT2与EXT3的比较，</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">配置文件如下</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">[defaults]</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">base_features = sparse_super,filetype,resize_inode,dir_index</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">blocksize = 4096</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">inode_ratio = 8192</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">[fs_types]</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">small = {</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">blocksize = 1024</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">inode_ratio = 4096</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">}</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">floppy = {</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">blocksize = 1024</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">}</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">news = {</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">inode_ratio = 4096</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">}</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">largefile = {</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">inode_ratio = 1048576</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">}</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">largefile4 = {</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">inode_ratio = 4194304</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">}</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">EXT2:</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">[root@]# time dd if=/dev/zero of=./test.img bs=4k count=10240000</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">10240000+0 records in</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">10240000+0 records out</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">41943040000 bytes (42 GB) copied, 94.7451 seconds, 443 MB/s</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">real &nbsp; &nbsp;1m34.760s</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">user &nbsp; &nbsp;0m1.688s</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">sys &nbsp; &nbsp; 0m51.302s</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;72392 &nbsp;27744 23739736 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 331744 1670 &nbsp;759 &nbsp;0 &nbsp;1 86 12 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;72580 &nbsp;27752 23740328 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 341948 1586 &nbsp;570 &nbsp;0 &nbsp;1 86 12 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;72580 &nbsp;27752 23740328 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 344408 1608 &nbsp;433 &nbsp;0 &nbsp;1 87 12 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;73164 &nbsp;27752 23740328 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 342788 1594 &nbsp;460 &nbsp;0 &nbsp;1 86 13 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;73164 &nbsp;27752 23740328 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 342284 1582 &nbsp;438 &nbsp;0 &nbsp;1 85 14 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;73416 &nbsp;27752 23740328 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 339976 1608 &nbsp;436 &nbsp;0 &nbsp;1 86 13 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">1 &nbsp;1 &nbsp; &nbsp;476 &nbsp;73168 &nbsp;27760 23740320 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 340192 1587 &nbsp;570 &nbsp;0 &nbsp;1 86 13 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;73444 &nbsp;27760 23740328 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 338268 1563 &nbsp;457 &nbsp;0 &nbsp;1 85 13 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;73444 &nbsp;27760 23740328 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 346540 1605 &nbsp;461 &nbsp;0 &nbsp;1 86 13 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">1 &nbsp;1 &nbsp; &nbsp;476 &nbsp;73700 &nbsp;27760 23740328 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 324348 1532 &nbsp;446 &nbsp;0 &nbsp;1 85 14 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">0 &nbsp;2 &nbsp; &nbsp;476 &nbsp;73700 &nbsp;27760 23740328 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 0 347544 1608 &nbsp;440 &nbsp;0 &nbsp;1 86 13 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">EXT3:</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">[root@sanp-gamehall-db2 msa2_vd02vol01p1]# time dd if=/dev/zero of=./test.img bs=4k count=10240000</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">10240000+0 records in</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">10240000+0 records out</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">41943040000 bytes (42 GB) copied, 125.324 seconds, 335 MB/s</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">real &nbsp; &nbsp;2m5.354s</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">user &nbsp; &nbsp;0m2.511s</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">sys &nbsp; &nbsp; 1m46.675s</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">2 &nbsp;9 &nbsp; &nbsp;476 &nbsp;73644 &nbsp;38676 23454500 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 8 319724 1597 &nbsp;511 &nbsp;0 18 36 46 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">2 &nbsp;9 &nbsp; &nbsp;476 &nbsp;74020 &nbsp;39004 23447696 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 8 331436 1609 &nbsp;544 &nbsp;0 20 36 43 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">4 &nbsp;9 &nbsp; &nbsp;476 &nbsp;70172 &nbsp;39304 23443504 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp;12 323772 1580 &nbsp;516 &nbsp;0 19 37 44 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">1 10 &nbsp; &nbsp;476 &nbsp;72416 &nbsp;39600 23432712 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 8 312364 1586 &nbsp;799 &nbsp;0 17 36 47 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">2 &nbsp;9 &nbsp; &nbsp;476 &nbsp;77248 &nbsp;39936 23419664 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp;12 288652 1522 &nbsp;552 &nbsp;0 19 36 45 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">2 &nbsp;0 &nbsp; &nbsp;476 133048 &nbsp;40188 23448368 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp; 8 209468 1513 &nbsp;493 &nbsp;0 19 48 33 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">2 &nbsp;9 &nbsp; &nbsp;476 &nbsp;76212 &nbsp;40520 23485780 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp;12 358952 1522 &nbsp;574 &nbsp;0 21 36 43 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">2 &nbsp;9 &nbsp; &nbsp;476 &nbsp;77044 &nbsp;40852 23486328 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp;12 340836 1619 &nbsp;580 &nbsp;0 19 25 55 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">0 11 &nbsp; &nbsp;476 &nbsp;70620 &nbsp;41224 23484304 &nbsp; &nbsp;0 &nbsp; &nbsp;0 &nbsp; &nbsp;12 291816 1564 &nbsp;871 &nbsp;0 19 26 55 &nbsp;0</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">从EXT2和EXT3的测试信息上来分析，</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">EXT2消耗的CPU极低在1%左右，EXT3消耗的CPU在20%左右，</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">EXT2消耗的IO在15%左右，EXT3消耗的IO在50%左右.</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">从速度上看，EXT2 为443MB/S ，EXT3为335MB/S</p><p style="margin-top: 0px; margin-right: 0px; margin-bottom: 18px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; line-height: 18px;">EXT2和EXT3按情况选择吧。安全和性能不可兼得</p></span></div>
	</div>
</div>
</body>
</html>