<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Docker LXC VS KVM in OpenStack</h2>
	<h5 id="">2014-08-26 16:24:31&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201472642334576/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><strong style="line-height: 28px;"   ><a title="KVM and docker LXC Benchmarking with OpenStack" target="_blank" rel="nofollow" href="https://www.slideshare.net/BodenRussell/kvm-and-docker-lxc-benchmarking-with-openstack"   >KVM and docker LXC Benchmarking with OpenStack</a> </strong><span style="line-height: 28px;"   > from </span><strong style="line-height: 28px;"   ><a target="_blank" rel="nofollow" href="http://www.slideshare.net/BodenRussell"   >Boden Russell</a></strong></div><div><h1 id="understanding-docker"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.33; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 27px; margin: 6px 0px 8px;"   >Understanding Docker</h1><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   ><span style="line-height: 1.7;"   >What is Docker?</span></p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker is an open platform for developing, shipping, and running applications. Docker is designed to deliver your applications faster. With Docker you can separate your applications from your infrastructure AND treat your infrastructure like a managed application. Docker helps you ship code faster, test faster, deploy faster, and shorten the cycle between writing code and running code.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker does this by combining a lightweight container virtualization platform with workflows and tooling that help you manage and deploy your applications.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >At its core, Docker provides a way to run almost any application securely isolated in a container. The isolation and security allow you to run many containers simultaneously on your host. The lightweight nature of containers, which run without the extra load of a hypervisor, means you can get more out of your hardware.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Surrounding the container virtualization are tooling and a platform which can help you in several ways:</p><ul style="padding-top: 10px; padding-bottom: 10px; padding-left: 20px; list-style: circle; font-size: 14px; line-height: 23.799999237060547px; color: rgb(57, 77, 84); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin-top: 0px !important;"   ><li style="line-height: 1.7; padding-bottom: 5px;"   >getting your applications (and supporting components) into Docker containers</li><li style="line-height: 1.7; padding-bottom: 5px;"   >distributing and shipping those containers to your teams for further development and testing</li><li style="line-height: 1.7; padding-bottom: 5px;"   >deploying those applications to your production environment, whether it be in a local data center or the Cloud.</li></ul><h2 id="what-can-i-use-docker-for"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 21px; margin: 10px 0px 4px;"   >What can I use Docker for?</h2><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   ><em style="line-height: 1.7;"   >Faster delivery of your applications</em></p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker is perfect for helping you with the development lifecycle. Docker allows your developers to develop on local containers that contain your applications and services. It can then integrate into a continuous integration and deployment workflow.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >For example, your developers write code locally and share their development stack via Docker with their colleagues. When they are ready, they push their code and the stack they are developing onto a test environment and execute any required tests. From the testing environment, you can then push the Docker images into production and deploy your code.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   ><em style="line-height: 1.7;"   >Deploying and scaling more easily</em></p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker's container-based platform allows for highly portable workloads. Docker containers can run on a developer's local host, on physical or virtual machines in a data center, or in the Cloud.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker's portability and lightweight nature also make dynamically managing workloads easy. You can use Docker to quickly scale up or tear down applications and services. Docker's speed means that scaling can be near real time.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   ><em style="line-height: 1.7;"   >Achieving higher density and running more workloads</em></p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker is lightweight and fast. It provides a viable, cost-effective alternative to hypervisor-based virtual machines. This is especially useful in high density environments: for example, building your own Cloud or Platform-as-a-Service. But it is also useful for small and medium deployments where you want to get more out of the resources you have.</p><h2 id="what-are-the-major-docker-components"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 21px; margin: 10px 0px 4px;"   >What are the major Docker components?</h2><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker has two major components:</p><ul style="padding-top: 10px; padding-bottom: 10px; padding-left: 20px; list-style: circle; font-size: 14px; line-height: 23.799999237060547px; color: rgb(57, 77, 84); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin-top: 0px !important;"   ><li style="line-height: 1.7; padding-bottom: 5px;"   >Docker: the open source container virtualization platform.</li><li style="line-height: 1.7; padding-bottom: 5px;"   ><a style="color: rgb(36, 184, 235); line-height: 1.7; text-decoration: none !important;" rel="nofollow" href="https://hub.docker.com/"   >Docker Hub</a>: our Software-as-a-Service platform for sharing and managing Docker containers.</li></ul><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   ><span style="line-height: 1.7;"   >Note:</span>&nbsp;Docker is licensed under the open source Apache 2.0 license.</p><h2 id="what-is-dockers-architecture"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 21px; margin: 10px 0px 4px;"   >What is Docker's architecture?</h2><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker uses a client-server architecture. The Docker&nbsp;<em style="line-height: 1.7;"   >client</em>&nbsp;talks to the Docker&nbsp;<em style="line-height: 1.7;"   >daemon</em>, which does the heavy lifting of building, running, and distributing your Docker containers. Both the Docker client and the daemon&nbsp;<em style="line-height: 1.7;"   >can</em>&nbsp;run on the same system, or you can connect a Docker client to a remote Docker daemon. The Docker client and daemon communicate via sockets or through a RESTful API.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   ><img title="Docker VS KVM in OpenStack - 德哥@Digoal - PostgreSQL research"   alt="Docker Architecture Diagram"   src="https://docs.docker.com/article-img/architecture.svg"   style="height: auto; vertical-align: middle; line-height: 1.7;"   ></p><h3 id="the-docker-daemon"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >The Docker daemon</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >As shown in the diagram above, the Docker daemon runs on a host machine. The user does not directly interact with the daemon, but instead through the Docker client.</p><h3 id="the-docker-client"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >The Docker client</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >The Docker client, in the form of the&nbsp;<code style="padding: 2px 6px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border: 1px solid rgb(219, 221, 224); white-space: pre-line; line-height: 1.7; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-bottom: 2px; background-color: rgb(252, 252, 252);"   >docker</code>&nbsp;binary, is the primary user interface to Docker. It accepts commands from the user and communicates back and forth with a Docker daemon.</p><h3 id="inside-docker"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >Inside Docker</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >To understand Docker's internals, you need to know about three components:</p><ul style="padding-top: 10px; padding-bottom: 10px; padding-left: 20px; list-style: circle; font-size: 14px; line-height: 23.799999237060547px; color: rgb(57, 77, 84); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin-top: 0px !important;"   ><li style="line-height: 1.7; padding-bottom: 5px;"   >Docker images.</li><li style="line-height: 1.7; padding-bottom: 5px;"   >Docker registries.</li><li style="line-height: 1.7; padding-bottom: 5px;"   >Docker containers.</li></ul><h4 id="docker-images"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 23.799999237060547px; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 14px;"   >Docker images</h4><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >A Docker image is a read-only template. For example, an image could contain an Ubuntu operating system with Apache and your web application installed. Images are used to create Docker containers. Docker provides a simple way to build new images or update existing images, or you can download Docker images that other people have already created. Docker images are the&nbsp;<span style="line-height: 1.7;"   >build</span>&nbsp;component of Docker.</p><h4 id="docker-registries"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 23.799999237060547px; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 14px;"   >Docker Registries</h4><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker registries hold images. These are public or private stores from which you upload or download images. The public Docker registry is called&nbsp;<a style="color: rgb(36, 184, 235); line-height: 1.7;" rel="nofollow" href="http://hub.docker.com/"   >Docker Hub</a>. It provides a huge collection of existing images for your use. These can be images you create yourself or you can use images that others have previously created. Docker registries are the&nbsp;<span style="line-height: 1.7;"   >distribution</span>&nbsp;component of Docker.</p><h4 id="docker-containers"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 23.799999237060547px; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 14px;"   >Docker containers</h4><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker containers are similar to a directory. A Docker container holds everything that is needed for an application to run. Each container is created from a Docker image. Docker containers can be run, started, stopped, moved, and deleted. Each container is an isolated and secure application platform. Docker containers are the&nbsp;<span style="line-height: 1.7;"   >run</span>&nbsp;component of Docker.</p><h2 id="so-how-does-docker-work"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 21px; margin: 10px 0px 4px;"   >So how does Docker work?</h2><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >So far, we've learned that:</p><ol style="padding-left: 22px; font-size: 14px; line-height: 23.799999237060547px; color: rgb(57, 77, 84); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   ><li style="line-height: 1.7; margin: 8px;"   >You can build Docker images that hold your applications.</li><li style="line-height: 1.7; margin: 8px;"   >You can create Docker containers from those Docker images to run your applications.</li><li style="line-height: 1.7; margin: 8px;"   >You can share those Docker images via&nbsp;<a style="color: rgb(36, 184, 235); line-height: 1.7; text-decoration: none !important;" rel="nofollow" href="https://hub.docker.com/"   >Docker Hub</a>&nbsp;or your own registry.</li></ol><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Let's look at how these elements combine together to make Docker work.</p><h3 id="how-does-a-docker-image-work"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >How does a Docker Image work?</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >We've already seen that Docker images are read-only templates from which Docker containers are launched. Each image consists of a series of layers. Docker makes use of&nbsp;<a style="color: rgb(36, 184, 235); line-height: 1.7;" rel="nofollow" href="http://en.wikipedia.org/wiki/UnionFS"   >union file systems</a>&nbsp;to combine these layers into a single image. Union file systems allow files and directories of separate file systems, known as branches, to be transparently overlaid, forming a single coherent file system.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >One of the reasons Docker is so lightweight is because of these layers. When you change a Docker image―for example, update an application to a new version― a new layer gets built. Thus, rather than replacing the whole image or entirely rebuilding, as you may do with a virtual machine, only that layer is added or updated. Now you don't need to distribute a whole new image, just the update, making distributing Docker images faster and simpler.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Every image starts from a base image, for example&nbsp;<code style="padding: 2px 6px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border: 1px solid rgb(219, 221, 224); white-space: pre-line; line-height: 1.7; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-bottom: 2px; background-color: rgb(252, 252, 252);"   >ubuntu</code>, a base Ubuntu image, or&nbsp;<code style="padding: 2px 6px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border: 1px solid rgb(219, 221, 224); white-space: pre-line; line-height: 1.7; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-bottom: 2px; background-color: rgb(252, 252, 252);"   >fedora</code>, a base Fedora image. You can also use images of your own as the basis for a new image, for example if you have a base Apache image you could use this as the base of all your web application images.</p><blockquote style="padding: 10px 10px 10px 15px; border-left-width: 4px; border-style: none none none solid; border-left-color: rgb(173, 229, 249); font-size: 14px; line-height: 23.799999237060547px; color: rgb(57, 77, 84); font-style: italic; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin-top: 20px !important; margin-bottom: 20px !important; margin-left: 0px !important;"   ><p style="margin-top: 0px; margin-bottom: 0px; line-height: 1.7;"   ><span style="line-height: 1.7;"   >Note:</span>&nbsp;Docker usually gets these base images from&nbsp;<a style="color: rgb(36, 184, 235); line-height: 1.7;" rel="nofollow" href="https://hub.docker.com/"   >Docker Hub</a>.</p></blockquote><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker images are then built from these base images using a simple, descriptive set of steps we call<em style="line-height: 1.7;"   >instructions</em>. Each instruction creates a new layer in our image. Instructions include actions like:</p><ul style="padding-top: 10px; padding-bottom: 10px; padding-left: 20px; list-style: circle; font-size: 14px; line-height: 23.799999237060547px; color: rgb(57, 77, 84); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin-top: 0px !important;"   ><li style="line-height: 1.7; padding-bottom: 5px;"   >Run a command.</li><li style="line-height: 1.7; padding-bottom: 5px;"   >Add a file or directory.</li><li style="line-height: 1.7; padding-bottom: 5px;"   >Create an environment variable.</li><li style="line-height: 1.7; padding-bottom: 5px;"   >What process to run when launching a container from this image.</li></ul><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >These instructions are stored in a file called a&nbsp;<code style="padding: 2px 6px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border: 1px solid rgb(219, 221, 224); white-space: pre-line; line-height: 1.7; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-bottom: 2px; background-color: rgb(252, 252, 252);"   >Dockerfile</code>. Docker reads this&nbsp;<code style="padding: 2px 6px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border: 1px solid rgb(219, 221, 224); white-space: pre-line; line-height: 1.7; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-bottom: 2px; background-color: rgb(252, 252, 252);"   >Dockerfile</code>&nbsp;when you request a build of an image, executes the instructions, and returns a final image.</p><h3 id="how-does-a-docker-registry-work"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >How does a Docker registry work?</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >The Docker registry is the store for your Docker images. Once you build a Docker image you can&nbsp;<em style="line-height: 1.7;"   >push</em>&nbsp;it to a public registry&nbsp;<a style="color: rgb(36, 184, 235); line-height: 1.7;" rel="nofollow" href="https://hub.docker.com/"   >Docker Hub</a>&nbsp;or to your own registry running behind your firewall.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Using the Docker client, you can search for already published images and then pull them down to your Docker host to build containers from them.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   ><a style="color: rgb(36, 184, 235); line-height: 1.7;" rel="nofollow" href="https://hub.docker.com/"   >Docker Hub</a>&nbsp;provides both public and private storage for images. Public storage is searchable and can be downloaded by anyone. Private storage is excluded from search results and only you and your users can pull images down and use them to build containers. You can&nbsp;<a style="color: rgb(36, 184, 235); line-height: 1.7;" rel="nofollow" href="https://hub.docker.com/plans"   >sign up for a storage plan here</a>.</p><h3 id="how-does-a-container-work"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >How does a container work?</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >A container consists of an operating system, user-added files, and meta-data. As we've seen, each container is built from an image. That image tells Docker what the container holds, what process to run when the container is launched, and a variety of other configuration data. The Docker image is read-only. When Docker runs a container from an image, it adds a read-write layer on top of the image (using a union file system as we saw earlier) in which your application can then run.</p><h3 id="what-happens-when-you-run-a-container"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >What happens when you run a container?</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Either by using the&nbsp;<code style="padding: 2px 6px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border: 1px solid rgb(219, 221, 224); white-space: pre-line; line-height: 1.7; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-bottom: 2px; background-color: rgb(252, 252, 252);"   >docker</code>&nbsp;binary or via the API, the Docker client tells the Docker daemon to run a container.</p><pre style="padding: 8px; font-family: Monaco, Consolas, 'Lucida Console', monospace; font-size: 14px; color: rgb(51, 51, 51); line-height: 23.799999237060547px; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border-color: rgb(227, 227, 227); min-height: 20px; margin-bottom: 20px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; overflow-x: auto; background-color: rgb(252, 252, 252);"   ><code style="padding: 0px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: inherit; border: 0px; white-space: pre; line-height: 1.7; overflow-wrap: normal; background-color: transparent;"   ><span style="line-height: 1.7; color: rgb(72, 72, 76);"   >$ docker run </span><span style="line-height: 1.7; color: rgb(147, 161, 161);"   >-</span><span style="line-height: 1.7; color: rgb(72, 72, 76);"   >i </span><span style="line-height: 1.7; color: rgb(147, 161, 161);"   >-</span><span style="line-height: 1.7; color: rgb(72, 72, 76);"   >t ubuntu </span><span style="line-height: 1.7; color: rgb(147, 161, 161);"   >/</span><span style="line-height: 1.7; color: rgb(72, 72, 76);"   >bin</span><span style="line-height: 1.7; color: rgb(147, 161, 161);"   >/</span><span style="line-height: 1.7; color: rgb(72, 72, 76);"   >bash</span></code></pre><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Let's break down this command. The Docker client is launched using the&nbsp;<code style="padding: 2px 6px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border: 1px solid rgb(219, 221, 224); white-space: pre-line; line-height: 1.7; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-bottom: 2px; background-color: rgb(252, 252, 252);"   >docker</code>&nbsp;binary with the&nbsp;<code style="padding: 2px 6px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border: 1px solid rgb(219, 221, 224); white-space: pre-line; line-height: 1.7; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-bottom: 2px; background-color: rgb(252, 252, 252);"   >run</code>option telling it to launch a new container. The bare minimum the Docker client needs to tell the Docker daemon to run the container is:</p><ul style="padding-top: 10px; padding-bottom: 10px; padding-left: 20px; list-style: circle; font-size: 14px; line-height: 23.799999237060547px; color: rgb(57, 77, 84); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin-top: 0px !important;"   ><li style="line-height: 1.7; padding-bottom: 5px;"   >What Docker image to build the container from, here&nbsp;<code style="padding: 2px 4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(221, 17, 68); border: 1px solid rgb(225, 225, 232); white-space: pre-line; line-height: 1.7; background-color: rgb(247, 247, 249);"   >ubuntu</code>, a base Ubuntu image;</li><li style="line-height: 1.7; padding-bottom: 5px;"   >The command you want to run inside the container when it is launched, here&nbsp;<code style="padding: 2px 4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(221, 17, 68); border: 1px solid rgb(225, 225, 232); white-space: pre-line; line-height: 1.7; background-color: rgb(247, 247, 249);"   >/bin/bash</code>, to start the Bash shell inside the new container.</li></ul><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >So what happens under the hood when we run this command?</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >In order, Docker does the following:</p><ul style="padding-top: 10px; padding-bottom: 10px; padding-left: 20px; list-style: circle; font-size: 14px; line-height: 23.799999237060547px; color: rgb(57, 77, 84); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin-top: 0px !important;"   ><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >Pulls the&nbsp;<code style="padding: 2px 4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(221, 17, 68); border: 1px solid rgb(225, 225, 232); white-space: pre-line; line-height: 1.7; background-color: rgb(247, 247, 249);"   >ubuntu</code>&nbsp;image:</span>&nbsp;Docker checks for the presence of the&nbsp;<code style="padding: 2px 4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(221, 17, 68); border: 1px solid rgb(225, 225, 232); white-space: pre-line; line-height: 1.7; background-color: rgb(247, 247, 249);"   >ubuntu</code>&nbsp;image and, if it doesn't exist locally on the host, then Docker downloads it from&nbsp;<a style="color: rgb(36, 184, 235); line-height: 1.7; text-decoration: none !important;" rel="nofollow" href="https://hub.docker.com/"   >Docker Hub</a>. If the image already exists, then Docker uses it for the new container.</li><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >Creates a new container:</span>&nbsp;Once Docker has the image, it uses it to create a container.</li><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >Allocates a filesystem and mounts a read-write&nbsp;<em style="line-height: 1.7;"   >layer</em>:</span>&nbsp;The container is created in the file system and a read-write layer is added to the image.</li><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >Allocates a network / bridge interface:</span>&nbsp;Creates a network interface that allows the Docker container to talk to the local host.</li><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >Sets up an IP address:</span>&nbsp;Finds and attaches an available IP address from a pool.</li><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >Executes a process that you specify:</span>&nbsp;Runs your application, and;</li><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >Captures and provides application output:</span>&nbsp;Connects and logs standard input, outputs and errors for you to see how your application is running.</li></ul><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >You now have a running container! From here you can manage your container, interact with your application and then, when finished, stop and remove your container.</p><h2 id="the-underlying-technology"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 21px; margin: 10px 0px 4px;"   >The underlying technology</h2><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker is written in Go and makes use of several Linux kernel features to deliver the functionality we've seen.</p><h3 id="namespaces"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >Namespaces</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker takes advantage of a technology called&nbsp;<code style="padding: 2px 6px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border: 1px solid rgb(219, 221, 224); white-space: pre-line; line-height: 1.7; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-bottom: 2px; background-color: rgb(252, 252, 252);"   >namespaces</code>&nbsp;to provide the isolated workspace we call the<em style="line-height: 1.7;"   >container</em>. When you run a container, Docker creates a set of&nbsp;<em style="line-height: 1.7;"   >namespaces</em>&nbsp;for that container.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >This provides a layer of isolation: each aspect of a container runs in its own namespace and does not have access outside it.</p><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Some of the namespaces that Docker uses are:</p><ul style="padding-top: 10px; padding-bottom: 10px; padding-left: 20px; list-style: circle; font-size: 14px; line-height: 23.799999237060547px; color: rgb(57, 77, 84); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin-top: 0px !important;"   ><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >The&nbsp;<code style="padding: 2px 4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(221, 17, 68); border: 1px solid rgb(225, 225, 232); white-space: pre-line; line-height: 1.7; background-color: rgb(247, 247, 249);"   >pid</code>&nbsp;namespace:</span>&nbsp;Used for process isolation (PID: Process ID).</li><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >The&nbsp;<code style="padding: 2px 4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(221, 17, 68); border: 1px solid rgb(225, 225, 232); white-space: pre-line; line-height: 1.7; background-color: rgb(247, 247, 249);"   >net</code>&nbsp;namespace:</span>&nbsp;Used for managing network interfaces (NET: Networking).</li><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >The&nbsp;<code style="padding: 2px 4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(221, 17, 68); border: 1px solid rgb(225, 225, 232); white-space: pre-line; line-height: 1.7; background-color: rgb(247, 247, 249);"   >ipc</code>&nbsp;namespace:</span>&nbsp;Used for managing access to IPC resources (IPC: InterProcess Communication).</li><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >The&nbsp;<code style="padding: 2px 4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(221, 17, 68); border: 1px solid rgb(225, 225, 232); white-space: pre-line; line-height: 1.7; background-color: rgb(247, 247, 249);"   >mnt</code>&nbsp;namespace:</span>&nbsp;Used for managing mount-points (MNT: Mount).</li><li style="line-height: 1.7; padding-bottom: 5px;"   ><span style="line-height: 1.7;"   >The&nbsp;<code style="padding: 2px 4px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(221, 17, 68); border: 1px solid rgb(225, 225, 232); white-space: pre-line; line-height: 1.7; background-color: rgb(247, 247, 249);"   >uts</code>&nbsp;namespace:</span>&nbsp;Used for isolating kernel and version identifiers. (UTS: Unix Timesharing System).</li></ul><h3 id="control-groups"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >Control groups</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker also makes use of another technology called&nbsp;<code style="padding: 2px 6px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border: 1px solid rgb(219, 221, 224); white-space: pre-line; line-height: 1.7; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-bottom: 2px; background-color: rgb(252, 252, 252);"   >cgroups</code>&nbsp;or control groups. A key to running applications in isolation is to have them only use the resources you want. This ensures containers are good multi-tenant citizens on a host. Control groups allow Docker to share available hardware resources to containers and, if required, set up limits and constraints. For example, limiting the memory available to a specific container.</p><h3 id="union-file-systems"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >Union file systems</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Union file systems, or UnionFS, are file systems that operate by creating layers, making them very lightweight and fast. Docker uses union file systems to provide the building blocks for containers. Docker can make use of several union file system variants including: AUFS, btrfs, vfs, and DeviceMapper.</p><h3 id="container-format"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >Container format</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Docker combines these components into a wrapper we call a container format. The default container format is called&nbsp;<code style="padding: 2px 6px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; border: 1px solid rgb(219, 221, 224); white-space: pre-line; line-height: 1.7; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; margin-bottom: 2px; background-color: rgb(252, 252, 252);"   >libcontainer</code>. Docker also supports traditional Linux containers using&nbsp;<a style="color: rgb(36, 184, 235); line-height: 1.7;" rel="nofollow" href="https://linuxcontainers.org/"   >LXC</a>. In the future, Docker may support other container formats, for example, by integrating with BSD Jails or Solaris Zones.</p><h2 id="next-steps"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 21px; margin: 10px 0px 4px;"   >Next steps</h2><h3 id="installing-docker"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >Installing Docker</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   >Visit the&nbsp;<a style="color: rgb(36, 184, 235); line-height: 1.7;" rel="nofollow" href="https://docs.docker.com/installation/#installation"   >installation section</a>.</p><h3 id="the-docker-user-guide"   style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight: 400; line-height: 1.7; color: rgb(57, 77, 84); text-rendering: optimizelegibility; font-size: 18px; margin: 10px 0px 4px;"   >The Docker User Guide</h3><p style="margin-top: 0px; margin-bottom: 1em; font-size: 14px; color: rgb(57, 77, 84); line-height: 23.799999237060547px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;"   ><a style="color: rgb(36, 184, 235); line-height: 1.7;" rel="nofollow" href="https://docs.docker.com/userguide/"   >Learn Docker in depth</a>.</p></div><div><br></div><div><br></div>[参考]<div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.slideshare.net/BodenRussell/kvm-and-docker-lxc-benchmarking-with-openstack?ref=http://bodenr.blogspot.in/2014/05/kvm-and-docker-lxc-benchmarking-with.html"   >http://www.slideshare.net/BodenRussell/kvm-and-docker-lxc-benchmarking-with-openstack?ref=http://bodenr.blogspot.in/2014/05/kvm-and-docker-lxc-benchmarking-with.html</a></div><div>2.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://bodenr.blogspot.in/2014/05/kvm-and-docker-lxc-benchmarking-with.html"   >http://bodenr.blogspot.in/2014/05/kvm-and-docker-lxc-benchmarking-with.html</a></div><div>3.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="https://linuxcontainers.org/"   >https://linuxcontainers.org/</a></div><div>4.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="https://www.docker.com/"   >https://www.docker.com/</a></div><div>5.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.infoq.com/cn/articles/docker-core-technology-preview"   >http://www.infoq.com/cn/articles/docker-core-technology-preview</a></div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="Docker VS KVM in OpenStack - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>