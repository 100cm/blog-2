<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL 9.5 new feature - Allow vacuumdb to vacuum in parallel using --jobs</h2>
	<h5 id="">2015-06-16 14:05:38&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020155162538936/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><div>PostgreSQL 9.5 新特性，允许vacuumdb开启多个连接，同时执行vacuum或analyze操作。对于IOPS能力很好的数据库，这样做可以缩短处理时间。例如，在使用pg_upgrade后，需要重新生成统计信息，这是一个比较好的选择。</div><div>但是注意最好不要和vacuum full一起使用，可能引起dead lock。</div><div><br></div><div>-j njobs</div><div>--jobs=njobs</div><div>Execute the vacuum or analyze commands in parallel by running njobs commands simultaneously. This option reduces the time of the processing but it also increases the load on the database server.</div><div><br></div><div>vacuumdb will open njobs connections to the database, so make sure your max_connections setting is high enough to accommodate all connections.</div><div><br></div><div>Note that using this mode together with the -f (FULL) option might cause deadlock failures if certain system catalogs are processed in parallel.</div></div><wbr><div><br></div><div><br></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/devel/static/app-vacuumdb.html"   >http://www.postgresql.org/docs/devel/static/app-vacuumdb.html</a></div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="PostgreSQL 9.5 new feature - Allow vacuumdb to vacuum in parallel using --jobs - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>