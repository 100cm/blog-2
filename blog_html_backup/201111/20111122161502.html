<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">bind9 dlz used in multi-IDC Application & PGCloud,YES it can.</h2>
	<h5 id="">2011-11-22 16:15:02&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201110224518292/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">  <DIV>测试服务器 :&nbsp;</DIV>  <DIV>BIND Server : 172.16.3.150</DIV>  <DIV>Client 1 IDC_A : 172.16.3.33</DIV>  <DIV>Client 2 IDC_B :&nbsp;172.16.3.39</DIV>  <DIV>Client 3 IDC_C :&nbsp;172.16.3.40</DIV>  <DIV>digoal.sky-mobi.com IN IDC_A :&nbsp;172.16.3.2</DIV>  <DIV>  <DIV>digoal.sky-mobi.com IN IDC_B :&nbsp;172.16.3.3</DIV></DIV>  <DIV>  <DIV>digoal.sky-mobi.com IN IDC_C :&nbsp;172.16.3.4</DIV></DIV>  <DIV><BR></DIV>  <DIV>测试目标 :&nbsp;</DIV>  <DIV>从Client 1查找digoal.sky-mobi.com返回的IP是172.16.3.2</DIV>  <DIV>从Client 2查找digoal.sky-mobi.com返回的IP是172.16.3.3</DIV>  <DIV>从Client 3查找digoal.sky-mobi.com返回的IP是172.16.3.4</DIV><WBR>  <DIV><BR></DIV>下载 :&nbsp;  <DIV><A rel="nofollow" href="http://www.isc.org/software/bind" >http://www.isc.org/software/bind</A></DIV>  <DIV><BR></DIV>  <DIV>版本 : bind-9.7.4-P1, （9.8.1-P1有DLZ BUG。）</DIV>  <DIV><BR></DIV>  <DIV>安装PostgreSQL 9.1.1</DIV>  <DIV>编译BIND9的--with-dlz-postgres选项需要用到PostgreSQL的include和lib文件.所以需要先安装PostgreSQL.PG安装不在这里细数, 有兴趣的朋友可以参考我以前写过的BLOG或者参考PG手册.&nbsp;</DIV>  <DIV><BR></DIV>  <DIV>BIND9 with dlz postgresql 简易安装 :&nbsp;</DIV>  <DIV>su - root</DIV>  <DIV>cd&nbsp;/opt/soft_bak/bind-9.7.4-P1</DIV>  <DIV>LDFLAGS="-L/opt/pgsql/lib" CFLAGS="-I/opt/pgsql/include" ./configure --prefix=/opt/bind --with-libtool --enable-largefile --enable-threads --enable-fixed-rrset --disable-openssl-version-check --with-dlz-postgres=/opt/soft_bak/bind-9.7.4-P1/contrib/dlz/drivers</DIV>  <DIV>make</DIV>  <DIV>make install</DIV>  <DIV>chown -R root:root /opt/bind</DIV>  <DIV><BR></DIV>  <DIV>配置用户 :&nbsp;</DIV>  <DIV>  <DIV># useradd bind</DIV>  <DIV># su - bind</DIV></DIV>  <DIV>$ vi .bash_profile</DIV>  <DIV>增加如下,</DIV>  <DIV># add by digoal.</DIV>  <DIV>  <DIV>  <DIV>export PS1="$USER@`/bin/hostname -s`-&gt; "</DIV>  <DIV>export LANG=en_US.utf8</DIV>  <DIV>export PG_HOME=/opt/pgsql</DIV>  <DIV>export BIND_HOME=/opt/bind</DIV>  <DIV>export LD_LIBRARY_PATH=$PG_HOME/lib:$BIND_HOME/lib:/lib64:/usr/lib64:/usr/local/lib64:/lib:/usr/lib:/usr/local/lib</DIV>  <DIV>export DATE=`date +"%Y%m%d%H%M"`</DIV>  <DIV>export PATH=$BIND_HOME/sbin:$BIND_HOME/bin:$PATH:.</DIV>  <DIV>export MANPATH=$BIND_HOME/share/man:$MANPATH</DIV>  <DIV>alias rm='rm -i'</DIV>  <DIV>alias ll='ls -lh'</DIV></DIV></DIV>  <DIV><BR></DIV>  <DIV>配置bind</DIV>  <DIV>  <DIV>cd /opt/bind/etc</DIV>  <DIV>rndc-confgen &gt;rndc.conf</DIV>  <DIV>编辑rndc.conf,把注释的部分去除写入 /opt/bind/etc/named.conf</DIV>  <DIV><BR></DIV>  <DIV># Use with the following in named.conf, adjusting the allow list as needed:</DIV>  <DIV><BR></DIV>  <DIV>controls {</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; inet 127.0.0.1 port 1953</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; allow { 127.0.0.1; } keys { "rndc-key"; };</DIV>  <DIV>};</DIV>  <DIV><BR></DIV>  <DIV># End of named.conf</DIV>  <DIV><BR></DIV>  <DIV>rm -f rndc.conf &nbsp;（该文件与 rndc.key 文件一起出现会出现 rndc警告，删除为妙） &nbsp;</DIV>  <DIV>dig &gt; /opt/bind/etc/named.root</DIV>  <DIV>查看是否存在 /opt/bind/etc/rndc.key 文件，如果没有就生成一个</DIV>  <DIV>rndc-confgen -a -c /opt/bind/etc/rndc.key</DIV>  <DIV>root@db-172-16-3-150-&gt; cat /opt/bind/etc/rndc.key</DIV>  <DIV>key "rndc-key" {</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; algorithm hmac-md5;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; secret "9D9cfokRSjU6KNm0mzG5sw==";</DIV>  <DIV>};</DIV>  <DIV>把KEY文件include到 named.conf</DIV>  <DIV>include "/opt/bind/etc/rndc.key";</DIV>  <DIV>调用KEY的时候用到的key需要和KEY文件里对应.</DIV>  <DIV><BR></DIV>  <DIV>编写view配置文件:</DIV>  <DIV>/opt/bind/etc/idc_a.conf</DIV>  <DIV>#idc_a network view</DIV>  <DIV>view "idc_a" { &nbsp;</DIV>  <DIV>&nbsp;match-clients &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { IDC_A; }; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #使用数据库时的配置，无需同步 &nbsp;</DIV>  <DIV>&nbsp;allow-query &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { IDC_A; }; &nbsp;</DIV>  <DIV>&nbsp;allow-recursion { LOCAL; }; &nbsp; #表示不递归解析不存在这个name server的地址.&nbsp;</DIV>  <DIV><BR></DIV>  <DIV>#---dlz postgresql database configure---- &nbsp;</DIV>  <DIV>&nbsp;dlz "postgres zone" { &nbsp;</DIV>  <DIV>&nbsp; database "postgres 8 &nbsp;</DIV>  <DIV>&nbsp; {host=127.0.0.1 port=1921 dbname=dns user=dns} &nbsp;</DIV>  <DIV>&nbsp; {select zone from dns_records where zone = '$zone$' limit 1} &nbsp;</DIV>  <DIV>&nbsp; {select ttl, type, mx_priority, case when lower(type)='txt' then '\"' || data || '\"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = '$zone$' and lower(view)='idc_a' and host = '$record$'}"; &nbsp;&nbsp;</DIV>  <DIV>&nbsp;}; &nbsp;</DIV>  <DIV>#---dlz postgresql database configure---- &nbsp;</DIV>  <DIV>}; &nbsp;</DIV>  <DIV><BR></DIV>  <DIV>/opt/bind/etc/idc_b.conf</DIV>  <DIV>#idc_a network view</DIV>  <DIV>view "idc_b" { &nbsp;</DIV>  <DIV>&nbsp;match-clients &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { IDC_B; }; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #使用数据库时的配置，无需同步 &nbsp;</DIV>  <DIV>&nbsp;allow-query &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { IDC_B; }; &nbsp;</DIV>  <DIV>&nbsp;allow-recursion { LOCAL; }; &nbsp; #表示不递归解析不存在这个name server的地址.&nbsp;</DIV>  <DIV><BR></DIV>  <DIV>#---dlz postgresql database configure---- &nbsp;</DIV>  <DIV>&nbsp;dlz "postgres zone" { &nbsp;</DIV>  <DIV>&nbsp; database "postgres 8 &nbsp;</DIV>  <DIV>&nbsp; {host=127.0.0.1 port=1921 dbname=dns user=dns} &nbsp;</DIV>  <DIV>&nbsp; {select zone from dns_records where zone = '$zone$' limit 1} &nbsp;</DIV>  <DIV>&nbsp; {select ttl, type, mx_priority, case when lower(type)='txt' then '\"' || data || '\"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = '$zone$' and lower(view)='idc_b' and host = '$record$'}"; &nbsp;&nbsp;</DIV>  <DIV>&nbsp;}; &nbsp;</DIV>  <DIV>#---dlz postgresql database configure---- &nbsp;</DIV>  <DIV>}; &nbsp;</DIV>  <DIV><BR></DIV>  <DIV>/opt/bind/etc/idc_c.conf</DIV>  <DIV>#idc_a network view</DIV>  <DIV>view "idc_c" { &nbsp;</DIV>  <DIV>&nbsp;match-clients &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { IDC_C; }; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #使用数据库时的配置，无需同步 &nbsp;</DIV>  <DIV>&nbsp;allow-query &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { IDC_C; }; &nbsp;</DIV>  <DIV>&nbsp;allow-recursion { LOCAL; }; &nbsp; #表示不递归解析不存在这个name server的地址.&nbsp;</DIV>  <DIV><BR></DIV>  <DIV>#---dlz postgresql database configure---- &nbsp;</DIV>  <DIV>&nbsp;dlz "postgres zone" { &nbsp;</DIV>  <DIV>&nbsp; database "postgres 8 &nbsp;</DIV>  <DIV>&nbsp; {host=127.0.0.1 port=1921 dbname=dns user=dns} &nbsp;</DIV>  <DIV>&nbsp; {select zone from dns_records where zone = '$zone$' limit 1} &nbsp;</DIV>  <DIV>&nbsp; {select ttl, type, mx_priority, case when lower(type)='txt' then '\"' || data || '\"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = '$zone$' and lower(view)='idc_c' and host = '$record$'}"; &nbsp;&nbsp;</DIV>  <DIV>&nbsp;}; &nbsp;</DIV>  <DIV>#---dlz postgresql database configure---- &nbsp;</DIV>  <DIV>}; &nbsp;</DIV>  <DIV><BR></DIV>  <DIV><BR></DIV>  <DIV>最终的named.conf</DIV>  <DIV># Use with the following in named.conf, adjusting the allow list as needed:</DIV>  <DIV><BR></DIV>  <DIV>include "/opt/bind/etc/idc_a.conf";</DIV>  <DIV>include "/opt/bind/etc/idc_b.conf";</DIV>  <DIV>include "/opt/bind/etc/idc_c.conf";</DIV>  <DIV><BR></DIV>  <DIV>include "/opt/bind/etc/rndc.key";</DIV>  <DIV><BR></DIV>  <DIV>acl "LOCAL" { &nbsp;</DIV>  <DIV>&nbsp; localhost;</DIV>  <DIV>};</DIV>  <DIV><BR></DIV>  <DIV>acl "ALL" {</DIV>  <DIV>&nbsp; 172.16.0.0/16;</DIV>  <DIV>};</DIV>  <DIV><BR></DIV>  <DIV>acl "IDC_A" {</DIV>  <DIV>&nbsp; 172.16.3.33/32;</DIV>  <DIV>};</DIV>  <DIV><BR></DIV>  <DIV>acl "IDC_B" {</DIV>  <DIV>&nbsp; 172.16.3.39/32;</DIV>  <DIV>};</DIV>  <DIV><BR></DIV>  <DIV>acl "IDC_C" {</DIV>  <DIV>&nbsp; 172.16.3.40/32;</DIV>  <DIV>};</DIV>  <DIV><BR></DIV>  <DIV>controls {</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; inet 127.0.0.1 port 1953</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; allow { 127.0.0.1; } keys { "rndc-key"; };</DIV>  <DIV>};</DIV>  <DIV><BR></DIV>  <DIV>options &nbsp;</DIV>  <DIV>{ &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; directory &nbsp; &nbsp; &nbsp; "/opt/bind/var/run/named"; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; dump-file &nbsp; &nbsp; &nbsp; "/opt/bind/var/cache_dump.db"; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; statistics-file "/opt/bind/var/named_stats.log"; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; memstatistics-file "/opt/bind/var/named_mem_stats.log"; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; listen-on port 53 { 0.0.0.0/0; }; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; allow-recursion { 127.0.0.1; }; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; edns-udp-size &nbsp; 512; &nbsp;</DIV>  <DIV>}; &nbsp;</DIV>  <DIV><BR></DIV>  <DIV>logging { &nbsp; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; channel query_log { &nbsp; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; file "/opt/bind/var/query.log" &nbsp; &nbsp; &nbsp; &nbsp;versions 3 size 20m; &nbsp; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; severity &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;info; &nbsp; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print-time &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;yes; &nbsp; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print-category &nbsp;yes; &nbsp; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print-severity &nbsp;yes;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; }; &nbsp; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; category default { &nbsp; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; query_log; &nbsp; &nbsp;</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; }; &nbsp;</DIV>  <DIV>}; &nbsp;</DIV>  <DIV><BR></DIV>  <DIV># End of named.conf</DIV></DIV>  <DIV><BR></DIV>  <DIV>配置PostgreSQL</DIV>  <DIV>最优配置应该是这样的,</DIV>  <DIV>  <DIV><IMG style="MARGIN: 0px 10px 0px 0px;"  title="bind9 dlz used in multi-IDC Application - 德哥@Digoal - The Heart,The World."  alt="bind9 dlz used in multi-IDC Application - 德哥@Digoal - The Heart,The World."  src="http://img9.ph.126.net/d5SsGvlOGR1nAoYdr4I4VQ==/2541437564737614809.jpg"  ></DIV>可以使用PostgreSQL的流复制，复制延时在毫秒级 .</DIV>  <DIV>本例仅仅为测试所以没有使用到复制,</DIV>  <DIV>初始化数据库与表:</DIV>  <DIV>create role dns .... ;</DIV>  <DIV>create tablespace .... ;</DIV>  <DIV>create database with owner dns .....;</DIV>  <DIV>\c dns dns</DIV>  <DIV>create schema dns authorization dsn;</DIV>  <DIV>  <DIV>create table dns_records( &nbsp;</DIV>  <DIV>&nbsp; &nbsp; zone text, &nbsp;</DIV>  <DIV>&nbsp; &nbsp; host text NOT NULL default '@',</DIV>  <DIV>&nbsp; &nbsp; ttl integer, &nbsp;</DIV>  <DIV>&nbsp; &nbsp; view text, &nbsp;</DIV>  <DIV>&nbsp; &nbsp; type text, &nbsp;</DIV>  <DIV>&nbsp; &nbsp; mx_priority integer, &nbsp;</DIV>  <DIV>&nbsp; &nbsp; data text, &nbsp;</DIV>  <DIV>&nbsp; &nbsp; resp_person text, &nbsp;</DIV>  <DIV>&nbsp; &nbsp; serial integer, &nbsp;</DIV>  <DIV>&nbsp; &nbsp; refresh integer, &nbsp;</DIV>  <DIV>&nbsp; &nbsp; retry integer, &nbsp;</DIV>  <DIV>&nbsp; &nbsp; expire integer, &nbsp;</DIV>  <DIV>&nbsp; &nbsp; minimum integer &nbsp;</DIV>  <DIV>);</DIV>  <DIV>create INDEX dns_records_host_index on dns_records (host);</DIV>  <DIV>create INDEX dns_records_zone_index on dns_records (zone);</DIV></DIV>  <DIV><BR></DIV>  <DIV>配置pg_hba.conf . 让本地可以不需要密码访问数据库.</DIV>  <DIV>host dns dns 127.0.0.1/32 trust</DIV>  <DIV><BR></DIV>  <DIV>插入zone数据</DIV>  <DIV>\c dns dns</DIV>  <DIV>  <DIV>insert into dns_records(zone, host, ttl, view, type, mx_priority, data, resp_person, serial, refresh, retry, expire, minimum) values ('sky-mobi.com', 'digoal', 600, 'idc_a', 'A', NULL, '172.16.3.2', &nbsp;NULL, NULL, NULL, NULL, NULL, NULL);&nbsp;</DIV>  <DIV>insert into dns_records(zone, host, ttl, view, type, mx_priority, data, resp_person, serial, refresh, retry, expire, minimum) values ('sky-mobi.com', 'digoal', 600, 'idc_b', 'A', NULL, '172.16.3.3', &nbsp;NULL, NULL, NULL, NULL, NULL, NULL);&nbsp;</DIV>  <DIV>insert into dns_records(zone, host, ttl, view, type, mx_priority, data, resp_person, serial, refresh, retry, expire, minimum) values ('sky-mobi.com', 'digoal', 600, 'idc_c', 'A', NULL, '172.16.3.4', &nbsp;NULL, NULL, NULL, NULL, NULL, NULL);&nbsp;</DIV></DIV>  <DIV><BR></DIV>  <DIV>不需要SOA,NS记录。这里只需要A记录。因为不配置SLAVE。</DIV>  <DIV><BR></DIV>  <DIV>启动BIND(为了观察方便这里使用了-g -d 1, 测试正常后启动不需要加这个) :&nbsp;</DIV>  <DIV>su - root</DIV>  <DIV>. /home/bind/.bash_profile</DIV>  <DIV>named -c /opt/bind/etc/named.conf -g -d 1</DIV>  <DIV><BR></DIV>  <DIV>测试 :&nbsp;</DIV>  <DIV>连接到172.16.3.33</DIV>  <DIV>nslookup&nbsp;</DIV>  <DIV>  <DIV>&gt; digoal.sky-mobi.com</DIV>  <DIV>Server: &nbsp; &nbsp; &nbsp; &nbsp; 172.16.3.150</DIV>  <DIV>Address: &nbsp; &nbsp; &nbsp; &nbsp;172.16.3.150#53</DIV>  <DIV>Name: &nbsp; digoal.sky-mobi.com</DIV>  <DIV>Address: 172.16.3.2</DIV></DIV>  <DIV><BR></DIV>  <DIV>BIND日志:</DIV>  <DIV>  <DIV>24-Nov-2011 17:04:39.957&nbsp;</DIV>  <DIV>Query String: select zone from dns_records where zone = 'digoal.sky-mobi.com' limit 1</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:04:39.957&nbsp;</DIV>  <DIV>Query String: select zone from dns_records where zone = 'sky-mobi.com' limit 1</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:04:39.958&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_a' and host = '@'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:04:39.959&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_a' and host = '*'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:04:39.960&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_a' and host = 'digoal'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:04:39.961&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_a' and host = '@'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:04:39.962&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_a' and host = '*'</DIV></DIV>  <DIV><BR></DIV>  <DIV>连接到172.16.3.39</DIV>  <DIV>nslookup&nbsp;</DIV>  <DIV>  <DIV>&gt; digoal.sky-mobi.com</DIV>  <DIV>Server: &nbsp; &nbsp; &nbsp; &nbsp; 172.16.3.150</DIV>  <DIV>Address: &nbsp; &nbsp; &nbsp; &nbsp;172.16.3.150#53</DIV>  <DIV>Name: &nbsp; digoal.sky-mobi.com</DIV>  <DIV>Address: 172.16.3.3</DIV></DIV>  <DIV><BR></DIV>  <DIV>BIND日志 :&nbsp;</DIV>  <DIV>  <DIV>24-Nov-2011 17:06:48.641&nbsp;</DIV>  <DIV>Query String: select zone from dns_records where zone = 'digoal.sky-mobi.com' limit 1</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:06:48.641&nbsp;</DIV>  <DIV>Query String: select zone from dns_records where zone = 'sky-mobi.com' limit 1</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:06:48.642&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_b' and host = '@'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:06:48.642&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_b' and host = '*'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:06:48.643&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_b' and host = 'digoal'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:06:48.644&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_b' and host = '@'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:06:48.644&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_b' and host = '*'</DIV></DIV>  <DIV><BR></DIV>  <DIV>连接到172.16.3.40</DIV>  <DIV>  <DIV>nslookup&nbsp;</DIV>  <DIV>  <DIV>&gt; digoal.sky-mobi.com</DIV>  <DIV>Server: &nbsp; &nbsp; &nbsp; &nbsp; 172.16.3.150</DIV>  <DIV>Address: &nbsp; &nbsp; &nbsp; &nbsp;172.16.3.150#53</DIV>  <DIV>Name: &nbsp; digoal.sky-mobi.com</DIV>  <DIV>Address: 172.16.3.4</DIV></DIV></DIV>  <DIV><BR></DIV>  <DIV>BIND日志</DIV>  <DIV>  <DIV>24-Nov-2011 17:08:59.727&nbsp;</DIV>  <DIV>Query String: select zone from dns_records where zone = 'digoal.sky-mobi.com' limit 1</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:08:59.728&nbsp;</DIV>  <DIV>Query String: select zone from dns_records where zone = 'sky-mobi.com' limit 1</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:08:59.728&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_c' and host = '@'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:08:59.729&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_c' and host = '*'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:08:59.730&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_c' and host = 'digoal'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:08:59.731&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_c' and host = '@'</DIV>  <DIV><BR></DIV>  <DIV>24-Nov-2011 17:08:59.731&nbsp;</DIV>  <DIV>Query String: select ttl, type, mx_priority, case when lower(type)='txt' then '"' || data || '"'</DIV>  <DIV>&nbsp; &nbsp;when lower(type)='soa' then data || ' ' || resp_person || ' ' || serial || ' ' || refresh || ' ' || retry || ' ' || expire || ' ' || minimum &nbsp;&nbsp;</DIV>  <DIV>&nbsp; &nbsp;else data end from dns_records where zone = 'sky-mobi.com' and lower(view)='idc_c' and host = '*'</DIV></DIV>  <DIV><BR></DIV>  <DIV>【应用场景】</DIV>  <DIV>1. 根据来源IP解析不同的目标IP，可用于多机房部署的业务，数据库比如复制到了多个IDC，应用程序不需要关心数据库的IP，统统连到db.sky-mobi.com。BIND可以根据应用的IP来判断应该连接到最近的DB服务器。</DIV>  <DIV>2. 可以做FAILOVER，如与POSTGRESQL的流复制结合使用。例如 :&nbsp;</DIV>  <DIV>  <DIV><IMG style="MARGIN: 0px 10px 0px 0px;"  title="bind9 dlz used in multi-IDC Application - 德哥@Digoal - The Heart,The World."  alt="bind9 dlz used in multi-IDC Application - 德哥@Digoal - The Heart,The World."  src="http://img5.ph.126.net/Ch44bza8d2cLEgfyJi9Xmw==/2394789101871360635.jpg"  ></DIV>  <DIV>plproxy让你的数据库抛弃存储也可以跑得飞快。</DIV>  <DIV>PGCloud让你的数据库抛弃存储也可以达到高可用。</DIV>  <DIV>PGCloud让你的数据库抛弃虚拟机也可以跑在云端。</DIV>  <DIV><BR></DIV></DIV>  <DIV>【参考】</DIV>  <DIV><A rel="nofollow" href="http://bind-dlz.sourceforge.net/postgresql_driver.html" >http://bind-dlz.sourceforge.net/postgresql_driver.html</A></DIV>  <DIV>BIND 9 Administrator Reference Manual</DIV>  <DIV><BR></DIV>  <DIV>【附录】</DIV>  <DIV>可配置项 :&nbsp;</DIV>  <DIV>  <DIV>./configure --help</DIV>  <DIV>`configure' configures this package to adapt to many kinds of systems.</DIV>  <DIV><BR></DIV>  <DIV>Usage: ./configure [OPTION]... [VAR=VALUE]...</DIV>  <DIV><BR></DIV>  <DIV>To assign environment variables (e.g., CC, CFLAGS...), specify them as</DIV>  <DIV>VAR=VALUE. &nbsp;See below for descriptions of some of the useful variables.</DIV>  <DIV><BR></DIV>  <DIV>Defaults for the options are specified in brackets.</DIV>  <DIV><BR></DIV>  <DIV>Configuration:</DIV>  <DIV>&nbsp; -h, --help &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;display this help and exit</DIV>  <DIV>&nbsp; &nbsp; &nbsp; --help=short &nbsp; &nbsp; &nbsp; &nbsp;display options specific to this package</DIV>  <DIV>&nbsp; &nbsp; &nbsp; --help=recursive &nbsp; &nbsp;display the short help of all the included packages</DIV>  <DIV>&nbsp; -V, --version &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; display version information and exit</DIV>  <DIV>&nbsp; -q, --quiet, --silent &nbsp; do not print `checking ...' messages</DIV>  <DIV>&nbsp; &nbsp; &nbsp; --cache-file=FILE &nbsp; cache test results in FILE [disabled]</DIV>  <DIV>&nbsp; -C, --config-cache &nbsp; &nbsp; &nbsp;alias for `--cache-file=config.cache'</DIV>  <DIV>&nbsp; -n, --no-create &nbsp; &nbsp; &nbsp; &nbsp; do not create output files</DIV>  <DIV>&nbsp; &nbsp; &nbsp; --srcdir=DIR &nbsp; &nbsp; &nbsp; &nbsp;find the sources in DIR [configure dir or `..']</DIV>  <DIV><BR></DIV>  <DIV>Installation directories:</DIV>  <DIV>&nbsp; --prefix=PREFIX &nbsp; &nbsp; &nbsp; &nbsp; install architecture-independent files in PREFIX</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [/usr/local]</DIV>  <DIV>&nbsp; --exec-prefix=EPREFIX &nbsp; install architecture-dependent files in EPREFIX</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [PREFIX]</DIV>  <DIV><BR></DIV>  <DIV>By default, `make install' will install all the files in</DIV>  <DIV>`/usr/local/bin', `/usr/local/lib' etc. &nbsp;You can specify</DIV>  <DIV>an installation prefix other than `/usr/local' using `--prefix',</DIV>  <DIV>for instance `--prefix=$HOME'.</DIV>  <DIV><BR></DIV>  <DIV>For better control, use the options below.</DIV>  <DIV><BR></DIV>  <DIV>Fine tuning of the installation directories:</DIV>  <DIV>&nbsp; --bindir=DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;user executables [EPREFIX/bin]</DIV>  <DIV>&nbsp; --sbindir=DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; system admin executables [EPREFIX/sbin]</DIV>  <DIV>&nbsp; --libexecdir=DIR &nbsp; &nbsp; &nbsp; &nbsp;program executables [EPREFIX/libexec]</DIV>  <DIV>&nbsp; --sysconfdir=DIR &nbsp; &nbsp; &nbsp; &nbsp;read-only single-machine data [PREFIX/etc]</DIV>  <DIV>&nbsp; --sharedstatedir=DIR &nbsp; &nbsp;modifiable architecture-independent data [PREFIX/com]</DIV>  <DIV>&nbsp; --localstatedir=DIR &nbsp; &nbsp; modifiable single-machine data [PREFIX/var]</DIV>  <DIV>&nbsp; --libdir=DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;object code libraries [EPREFIX/lib]</DIV>  <DIV>&nbsp; --includedir=DIR &nbsp; &nbsp; &nbsp; &nbsp;C header files [PREFIX/include]</DIV>  <DIV>&nbsp; --oldincludedir=DIR &nbsp; &nbsp; C header files for non-gcc [/usr/include]</DIV>  <DIV>&nbsp; --datarootdir=DIR &nbsp; &nbsp; &nbsp; read-only arch.-independent data root [PREFIX/share]</DIV>  <DIV>&nbsp; --datadir=DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; read-only architecture-independent data [DATAROOTDIR]</DIV>  <DIV>&nbsp; --infodir=DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; info documentation [DATAROOTDIR/info]</DIV>  <DIV>&nbsp; --localedir=DIR &nbsp; &nbsp; &nbsp; &nbsp; locale-dependent data [DATAROOTDIR/locale]</DIV>  <DIV>&nbsp; --mandir=DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;man documentation [DATAROOTDIR/man]</DIV>  <DIV>&nbsp; --docdir=DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;documentation root [DATAROOTDIR/doc/PACKAGE]</DIV>  <DIV>&nbsp; --htmldir=DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; html documentation [DOCDIR]</DIV>  <DIV>&nbsp; --dvidir=DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dvi documentation [DOCDIR]</DIV>  <DIV>&nbsp; --pdfdir=DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pdf documentation [DOCDIR]</DIV>  <DIV>&nbsp; --psdir=DIR &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ps documentation [DOCDIR]</DIV>  <DIV><BR></DIV>  <DIV>System types:</DIV>  <DIV>&nbsp; --build=BUILD &nbsp; &nbsp; configure for building on BUILD [guessed]</DIV>  <DIV>&nbsp; --host=HOST &nbsp; &nbsp; &nbsp; cross-compile to build programs to run on HOST [BUILD]</DIV>  <DIV><BR></DIV>  <DIV>Optional Features:</DIV>  <DIV>&nbsp; --disable-option-checking &nbsp;ignore unrecognized --enable/--with options</DIV>  <DIV>&nbsp; --disable-FEATURE &nbsp; &nbsp; &nbsp; do not include FEATURE (same as --enable-FEATURE=no)</DIV>  <DIV>&nbsp; --enable-FEATURE[=ARG] &nbsp;include FEATURE [ARG=yes]</DIV>  <DIV>&nbsp; --enable-shared[=PKGS] &nbsp;build shared libraries [default=yes]</DIV>  <DIV>&nbsp; --enable-static[=PKGS] &nbsp;build static libraries [default=yes]</DIV>  <DIV>&nbsp; --enable-fast-install[=PKGS]</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; optimize for fast installation [default=yes]</DIV>  <DIV>&nbsp; --disable-libtool-lock &nbsp;avoid locking (might break parallel builds)</DIV>  <DIV>&nbsp; --enable-libbind &nbsp; &nbsp; &nbsp; &nbsp;deprecated</DIV>  <DIV>&nbsp; --enable-kqueue &nbsp; &nbsp; &nbsp; &nbsp; use BSD kqueue when available [default=yes]</DIV>  <DIV>&nbsp; --enable-epoll &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;use Linux epoll when available [default=auto]</DIV>  <DIV>&nbsp; --enable-devpoll &nbsp; &nbsp; &nbsp; &nbsp;use /dev/poll when available [default=yes]</DIV>  <DIV>&nbsp; --enable-openssl-version-check</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Check OpenSSL Version [default=yes]</DIV>  <DIV>&nbsp; --enable-openssl-hash &nbsp; use OpenSSL for hash functions [default=no]</DIV>  <DIV>&nbsp; --enable-threads &nbsp; &nbsp; &nbsp;enable multithreading</DIV>  <DIV>&nbsp; --enable-largefile &nbsp; &nbsp; &nbsp;64-bit file support</DIV>  <DIV>&nbsp; --enable-backtrace &nbsp; &nbsp; &nbsp;log stack backtrace on abort [default=yes]</DIV>  <DIV>&nbsp; --enable-symtable &nbsp; &nbsp; &nbsp; use internal symbol table for backtrace</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [all|minimal(default)|none]</DIV>  <DIV>&nbsp; --enable-exportlib &nbsp; &nbsp;build exportable library (GNU make required)</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [default=no]</DIV>  <DIV>&nbsp; --enable-ipv6 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; use IPv6 default=autodetect</DIV>  <DIV>&nbsp; --enable-getifaddrs &nbsp; &nbsp; Enable the use of getifaddrs() [yes|no].</DIV>  <DIV>&nbsp; --disable-isc-spnego &nbsp; &nbsp;use SPNEGO from GSSAPI library</DIV>  <DIV>&nbsp; --disable-chroot &nbsp; &nbsp; &nbsp; &nbsp;disable chroot</DIV>  <DIV>&nbsp; --disable-linux-caps &nbsp; &nbsp;disable linux capabilities</DIV>  <DIV>&nbsp; --enable-atomic &nbsp; &nbsp; &nbsp; &nbsp; enable machine specific atomic operations</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [default=autodetect]</DIV>  <DIV>&nbsp; --enable-fixed-rrset &nbsp; &nbsp;enable fixed rrset ordering</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [default=no]</DIV>  <DIV>&nbsp; --enable-rpz-nsip &nbsp; &nbsp; &nbsp; enable rpz-nsip rules [default=no]</DIV>  <DIV>&nbsp; --enable-rpz-nsdname &nbsp; &nbsp;enable rpz-nsdname rules [default=no]</DIV>  <DIV>&nbsp; --enable-filter-aaaa &nbsp; &nbsp;enable filtering of AAAA records over IPv4</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [default=no]</DIV>  <DIV><BR></DIV>  <DIV>Optional Packages:</DIV>  <DIV>&nbsp; --with-PACKAGE[=ARG] &nbsp; &nbsp;use PACKAGE [ARG=yes]</DIV>  <DIV>&nbsp; --without-PACKAGE &nbsp; &nbsp; &nbsp; do not use PACKAGE (same as --with-PACKAGE=no)</DIV>  <DIV>&nbsp; --with-gnu-ld &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assume the C compiler uses GNU ld [default=no]</DIV>  <DIV>&nbsp; --with-pic &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;try to use only PIC/non-PIC objects [default=use</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; both]</DIV>  <DIV>&nbsp; --with-tags[=TAGS] &nbsp; &nbsp; &nbsp;include additional configurations [automatic]</DIV>  <DIV>&nbsp; --with-openssl=PATH &nbsp; &nbsp; Build with OpenSSL yes|no|path.</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (Required for DNSSEC)</DIV>  <DIV><BR></DIV>  <DIV>&nbsp; --with-pkcs11=PATH &nbsp; &nbsp; &nbsp;Build with PKCS11 support yes|no|path</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (PATH is for the PKCS11 provider)</DIV>  <DIV>&nbsp; --with-gssapi=PATH &nbsp; &nbsp; &nbsp;Specify path for system-supplied GSSAPI [default=yes]</DIV>  <DIV>&nbsp; --with-randomdev=PATH &nbsp; Specify path for random device</DIV>  <DIV>&nbsp; --with-libxml2=PATH &nbsp; &nbsp; Build with libxml2 library yes|no|path</DIV>  <DIV>&nbsp; --with-purify=PATH &nbsp; &nbsp; &nbsp;use Rational purify</DIV>  <DIV>&nbsp; --with-libtool &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;use GNU libtool</DIV>  <DIV>&nbsp; --with-export-libdir=PATH</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; installation directory for the export library</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [EPREFIX/lib/bind9]</DIV>  <DIV>&nbsp; --with-export-includedir=PATH</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; installation directory for the header files of the</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; export library [PREFIX/include/bind9]</DIV>  <DIV>&nbsp; --with-kame=PATH &nbsp; &nbsp; &nbsp; &nbsp;use Kame IPv6 default path /usr/local/v6</DIV>  <DIV>&nbsp; --with-docbook-xsl=PATH Specify path for Docbook-XSL stylesheets</DIV>  <DIV>&nbsp; --with-idn=MPREFIX &nbsp; &nbsp; &nbsp;enable IDN support using idnkit default PREFIX</DIV>  <DIV>&nbsp; --with-libiconv=IPREFIX GNU libiconv are in IPREFIX default PREFIX</DIV>  <DIV>&nbsp; --with-iconv=LIBSPEC &nbsp; &nbsp;specify iconv library default -liconv</DIV>  <DIV>&nbsp; --with-idnlib=ARG &nbsp; &nbsp; &nbsp; specify libidnkit</DIV>  <DIV>&nbsp; --with-atf=ARG &nbsp; &nbsp; &nbsp; Automated Test Framework support</DIV>  <DIV>&nbsp; --with-dlopen=ARG &nbsp; &nbsp; &nbsp; Support dynamically loadable DLZ drivers</DIV>  <DIV>&nbsp; --with-dlz-postgres=PATH &nbsp; Build with Postgres DLZ driver yes|no|path.</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(Required to use Postgres with DLZ)</DIV>  <DIV>&nbsp; --with-dlz-mysql=PATH &nbsp; Build with MySQL DLZ driver yes|no|path.</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(Required to use MySQL with DLZ)</DIV>  <DIV>&nbsp; --with-dlz-bdb=PATH &nbsp; Build with Berkeley DB DLZ driver yes|no|path.</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(Required to use Berkeley DB with DLZ)</DIV>  <DIV>&nbsp; --with-dlz-filesystem=PATH &nbsp; Build with filesystem DLZ driver yes|no.</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(Required to use file system driver with DLZ)</DIV>  <DIV>&nbsp; --with-dlz-ldap=PATH &nbsp; Build with LDAP DLZ driver yes|no|path.</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(Required to use LDAP with DLZ)</DIV>  <DIV>&nbsp; --with-dlz-odbc=PATH &nbsp; Build with ODBC DLZ driver yes|no|path.</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(Required to use ODBC with DLZ)</DIV>  <DIV>&nbsp; --with-dlz-stub=PATH &nbsp; Build with stub DLZ driver yes|no.</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(Required to use stub driver with DLZ)</DIV>  <DIV>&nbsp; --with-make-clean &nbsp; &nbsp; &nbsp;Run "make clean" at end of configure [yes|no].</DIV>  <DIV><BR></DIV>  <DIV>Some influential environment variables:</DIV>  <DIV>&nbsp; CC &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;C compiler command</DIV>  <DIV>&nbsp; CFLAGS &nbsp; &nbsp; &nbsp;C compiler flags</DIV>  <DIV>&nbsp; LDFLAGS &nbsp; &nbsp; linker flags, e.g. -L&lt;lib dir&gt; if you have libraries in a</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nonstandard directory &lt;lib dir&gt;</DIV>  <DIV>&nbsp; LIBS &nbsp; &nbsp; &nbsp; &nbsp;libraries to pass to the linker, e.g. -l&lt;library&gt;</DIV>  <DIV>&nbsp; CPPFLAGS &nbsp; &nbsp;(Objective) C/C++ preprocessor flags, e.g. -I&lt;include dir&gt; if</DIV>  <DIV>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; you have headers in a nonstandard directory &lt;include dir&gt;</DIV>  <DIV>&nbsp; CPP &nbsp; &nbsp; &nbsp; &nbsp; C preprocessor</DIV>  <DIV>&nbsp; CXX &nbsp; &nbsp; &nbsp; &nbsp; C++ compiler command</DIV>  <DIV>&nbsp; CXXFLAGS &nbsp; &nbsp;C++ compiler flags</DIV>  <DIV>&nbsp; CXXCPP &nbsp; &nbsp; &nbsp;C++ preprocessor</DIV>  <DIV>&nbsp; F77 &nbsp; &nbsp; &nbsp; &nbsp; Fortran 77 compiler command</DIV>  <DIV>&nbsp; FFLAGS &nbsp; &nbsp; &nbsp;Fortran 77 compiler flags</DIV>  <DIV><BR></DIV>  <DIV>Use these variables to override the choices made by `configure' or to help</DIV>  <DIV>it to find libraries and programs with nonstandard names/locations.</DIV>  <DIV><BR></DIV>  <DIV>Report bugs to the package provider.</DIV></DIV>  <DIV><BR></DIV>  <DIV><WBR></DIV></div>
	</div>
</div>
</body>
</html>