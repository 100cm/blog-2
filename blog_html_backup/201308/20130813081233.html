<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">DragonFlyBSD & hammer fs & swapcache</h2>
	<h5 id="">2013-08-13 8:12:33&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201371242439746/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>DragonFlyBSD目前的最新版本为3.5.0</div><div><a rel="nofollow" href="http://gitweb.dragonflybsd.org/dragonfly.git"   >http://gitweb.dragonflybsd.org/dragonfly.git</a></div><div><br></div><div>The following graph charts the performance of the PostgreSQL 9.3 development version as of late June 2012 on DragonFly BSD 3.0 and 3.2, FreeBSD 9.1, NetBSD 6.0 and Scientific Linux 6.2 running Linux kernel version 2.6.32. The tests were performed using system defaults on each platform with pgbench as the test client with a scaling factor of 800. The test system in question was a dual-socket Intel Xeon X5650 with 24GB RAM.</div><div>[备注] sclinux 6.2 与 CentOS 6.2 , RHEL 6.2 , Oracle Linux 6.2 等产品 雷同.&nbsp;</div><div><div><img title="DragonFlyBSD - 德哥@Digoal - PostgreSQL"   alt="DragonFlyBSD - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/baXBgsjCIpDEPPmQ9KIS-Q==/3390647569556796566.png"   ></div>&nbsp;</div><div>DragonFly BSD 一个比较有特点的文件系统: hammer fs</div><div><a rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=HAMMER&amp;5"   >http://leaf.dragonflybsd.org/cgi/web-man?command=HAMMER&amp;5</a></div><div><h2 style="background-image: none; font-weight: normal; margin: 0px 0px 0.6em; overflow: hidden; padding-top: 0.5em; padding-bottom: 0.17em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170); font-size: 19px; font-family: sans-serif; line-height: 19.1875px;"   ><span id="Features"   >Features</span><span style="-webkit-user-select: none; font-size: small; margin-left: 1em; vertical-align: baseline; line-height: 1em; display: inline-block; white-space: nowrap; padding-right: 0.25em; unicode-bidi: -webkit-isolate; direction: ltr;"   ><span style="margin-left: -0.25em; margin-right: 0.25em; color: rgb(85, 85, 85);"   >[</span><a title="Edit section: Features" style="text-decoration: none; color: rgb(11, 0, 128); background-image: none; background-position: initial initial; background-repeat: initial initial;" rel="nofollow" href="http://en.wikipedia.org/w/index.php?title=HAMMER&amp;action=edit&amp;section=1"   >edit source</a><span style="color: rgb(85, 85, 85);"   >&nbsp;|&nbsp;</span><a title="Edit section: Features" style="text-decoration: none; color: rgb(11, 0, 128); background-image: none; background-position: initial initial; background-repeat: initial initial;" rel="nofollow" href="http://en.wikipedia.org/w/index.php?title=HAMMER&amp;veaction=edit&amp;section=1"   >edit<span style="font-size: 0.7em; vertical-align: top; line-height: 1.43em; padding-left: 0.5em; background-image: none !important; display: inline !important;"   >beta</span></a><span style="margin-right: -0.25em; margin-left: 0.25em; color: rgb(85, 85, 85);"   >]</span></span></h2><p style="margin-top: 0.4em; margin-bottom: 0.5em; line-height: 19.1875px; font-family: sans-serif; font-size: 13px;"   >HAMMER file systems provide the following features:<sup id="cite_ref-descr-page_5-0"   style="line-height: 1em; unicode-bidi: -webkit-isolate;"   ><a style="text-decoration: none; color: rgb(11, 0, 128); background-image: none; white-space: nowrap; background-position: initial initial; background-repeat: initial initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/HAMMER#cite_note-descr-page-5"   >[5]</a></sup><sup id="cite_ref-man-8-hammer_6-0"   style="line-height: 1em; unicode-bidi: -webkit-isolate;"   ><a style="text-decoration: none; color: rgb(11, 0, 128); background-image: none; white-space: nowrap; background-position: initial initial; background-repeat: initial initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/HAMMER#cite_note-man-8-hammer-6"   >[6]</a></sup></p><ul style="line-height: 19.1875px; margin-top: 0.3em; margin-bottom: 0px; margin-left: 1.6em; font-family: sans-serif; font-size: 13px;"   ><li style="margin-bottom: 0.1em;"   >configurable fine-grained and coarse-grained filesystem histories</li><li style="margin-bottom: 0.1em;"   >history and snapshots are accessible online</li><li style="margin-bottom: 0.1em;"   >near real-time log-less streaming mirroring to slaves or backups</li><li style="margin-bottom: 0.1em;"   >different retention parameters for slaves</li><li style="margin-bottom: 0.1em;"   ><a title="Cyclic redundancy check" style="text-decoration: none; color: rgb(11, 0, 128); background-image: none; background-position: initial initial; background-repeat: initial initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/Cyclic_redundancy_check"   >CRC</a>&nbsp;checksumming of data and metadata</li><li style="margin-bottom: 0.1em;"   >no&nbsp;<a title="Fsck" style="text-decoration: none; color: rgb(11, 0, 128); background-image: none; background-position: initial initial; background-repeat: initial initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/Fsck"   >fsck</a>&nbsp;required on remount</li><li style="margin-bottom: 0.1em;"   >1&nbsp;<a title="EiB" style="text-decoration: none; color: rgb(11, 0, 128); background-image: none; background-position: initial initial; background-repeat: initial initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/EiB"   >EiB</a>&nbsp;maximum storage capacity</li><li style="margin-bottom: 0.1em;"   >online layout correction</li><li style="margin-bottom: 0.1em;"   ><a title="Data deduplication" style="text-decoration: none; color: rgb(11, 0, 128); background-image: none; background-position: initial initial; background-repeat: initial initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/Data_deduplication"   >data deduplication</a>, 一致数据去重的压缩技术</li></ul><h2 style="background-image: none; font-weight: normal; margin: 0px 0px 0.6em; overflow: hidden; padding-top: 0.5em; padding-bottom: 0.17em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170); font-size: 19px; font-family: sans-serif; line-height: 19.1875px;"   ><span id="Limitations"   >Limitations</span><span style="-webkit-user-select: none; font-size: small; margin-left: 1em; vertical-align: baseline; line-height: 1em; display: inline-block; white-space: nowrap; padding-right: 0.25em; unicode-bidi: -webkit-isolate; direction: ltr;"   ><span style="margin-left: -0.25em; margin-right: 0.25em; color: rgb(85, 85, 85);"   >[</span><a title="Edit section: Limitations" style="text-decoration: none; color: rgb(11, 0, 128); background-image: none; background-position: initial initial; background-repeat: initial initial;" rel="nofollow" href="http://en.wikipedia.org/w/index.php?title=HAMMER&amp;action=edit&amp;section=2"   >edit source</a><span style="color: rgb(85, 85, 85);"   >&nbsp;|&nbsp;</span><a title="Edit section: Limitations" style="text-decoration: none; color: rgb(11, 0, 128); background-image: none; background-position: initial initial; background-repeat: initial initial;" rel="nofollow" href="http://en.wikipedia.org/w/index.php?title=HAMMER&amp;veaction=edit&amp;section=2"   >edit<span style="font-size: 0.7em; vertical-align: top; line-height: 1.43em; padding-left: 0.5em; background-image: none !important; display: inline !important;"   >beta</span></a><span style="margin-right: -0.25em; margin-left: 0.25em; color: rgb(85, 85, 85);"   >]</span></span></h2><p style="margin-top: 0.4em; margin-bottom: 0.5em; line-height: 19.1875px; font-family: sans-serif; font-size: 13px;"   >Requires a pruning/reblocking&nbsp;<a title="Cron" style="text-decoration: none; color: rgb(11, 0, 128); background-image: none; background-position: initial initial; background-repeat: initial initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/Cron"   >cron</a>&nbsp;job run a few minutes every night to incrementally clean up and regain space on the filesystem. Deletions do not immediately reclaim space.</p><p style="margin-top: 0.4em; margin-bottom: 0.5em; line-height: 19.1875px; font-family: sans-serif; font-size: 13px;"   >Does not yet support multi-master configuration.</p><p style="margin-top: 0.4em; margin-bottom: 0.5em; line-height: 19.1875px; font-family: sans-serif; font-size: 13px;"   ><br></p><p style="margin-top: 0.4em; margin-bottom: 0.5em; line-height: 19.1875px; font-family: sans-serif; font-size: 13px;"   ><span style="font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 22px;"   >swapcache</span></p><p style="margin-top: 0.4em; margin-bottom: 0.5em;"   >SWAPCACHE - Managed SSD support</p><p style="margin-top: 0.4em; margin-bottom: 0.5em;"   ></p><p style="margin-top: 0.4em; margin-bottom: 0.5em;"   >This DragonFly feature allows SSD-configured swap to also be used to cache clean filesystem data and meta-data. The feature is carefully managed to maximize the write endurance of the SSD. Swapcache is typically used to reduce or remove seek overheads related to managing filesystems with a large number of discrete inodes. DragonFly's swap subsystem also supports much larger than normal swap partitions. 32-bit systems support 32G of swap by default while 64-bit systems support up to 512G of swap by default.</p><p style="margin-top: 0.4em; margin-bottom: 0.5em;"   ><a rel="nofollow" href="http://www.dragonflybsd.org/docs/howtos/swapcache/"   >http://www.dragonflybsd.org/docs/howtos/swapcache/</a></p><p style="margin-top: 0.4em; margin-bottom: 0.5em; line-height: 19.1875px; font-family: sans-serif; font-size: 13px;"   ><span style="font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 22px;"   ><br></span></p><p style="margin-top: 0.4em; margin-bottom: 0.5em; line-height: 19.1875px; font-family: sans-serif; font-size: 13px;"   ><span style="font-family: Arial, Helvetica, sans-serif; font-size: 14px; line-height: 22px;"   ><br></span></p><p style="margin-top: 0.4em; margin-bottom: 0.5em; line-height: 19.1875px; font-family: sans-serif; font-size: 13px;"   >DragonFlyBSD的其他自主技术点</p><p style="margin-top: 0.4em; margin-bottom: 0.5em; line-height: 19.1875px; font-family: sans-serif; font-size: 13px;"   ><a rel="nofollow" href="http://www.dragonflybsd.org/docs/developer/DragonFly_Technologies/"   >http://www.dragonflybsd.org/docs/developer/DragonFly_Technologies/</a></p><p style="font-family: Tahoma, sans-serif; font-size: small; line-height: 16.890625px;"   >This page lists DragonFly inventions, new DragonFly tools, or DragonFly implementations of new technologies.</p><ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 44.4375px; line-height: 1.2; font-family: Tahoma, sans-serif; font-size: small;"   ><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=battd&amp;section8"   >battd</a>&nbsp;- Battery status monitoring daemon</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=checkpt&amp;section1"   >checkpt</a>&nbsp;- restore/resume support for Process Checkpointing (serialize process state to be resumed later on a compatible system)</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=devfs&amp;section5"   >devfs</a>&nbsp;- dynamic device file system</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=diskinfo&amp;section8"   >diskinfo</a>&nbsp;- report about block media devices</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=dma&amp;section8"   >dma</a>&nbsp;- The DragonFly Mail Agent</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=dntpd&amp;section8"   >dntpd</a>&nbsp;- Network time protocol client daemon</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=ecc&amp;section4"   >ECC detection</a>&nbsp;- detects memory faults on supported systems</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=getdevpath&amp;section8"   >getdevpath</a>&nbsp;- device label name and path mapping</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=HAMMER&amp;5"   >HAMMER</a>&nbsp;- file system for large and multiple volumes with historical data retention.</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=jscan&amp;section8"   >jscan</a>&nbsp;- utility for scanning journaling files</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=mount_udf&amp;section8"   >mount_udf</a>&nbsp;- mount a UDF file system</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=mountctl&amp;section8"   >mountctl</a>&nbsp;- control journaling and other features on mounted file systems</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=pctrack&amp;section8"   >pctrack</a>&nbsp;- dumps program counter tracking data recorded by the kernel</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=pkg_radd&amp;section1"   >pkg_radd</a>&nbsp;- allows installation of pkgsrc binaries, even if there isn’t a local pkgsrc tree</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=pkg_search&amp;section1"   >pkg_search</a>&nbsp;- print information about a package</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=rconfig&amp;section8"   >rconfig</a>&nbsp;- Remote Configuration Client/Server</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=rcstart"   >rcrun</a>&nbsp;(and family) - for managing startup scripts (rcenable/rcdisable)</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=resident&amp;section8"   >resident</a>&nbsp;- make a dynamic binary memory-resident</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=syslink&amp;section2"   >syslink</a>&nbsp;- connect pair of file descriptors between two processes</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=varsym&amp;section1"   >varsym</a>&nbsp;- variant symlinks</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=vkernel&amp;section7"   >vkernel</a>&nbsp;- virtual kernel infrastructure allows the kernel to be run as a user-space process</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=vknetd&amp;section8"   >vknetd</a>&nbsp;- create virtualized bridged network suitable for vkernel use</p></li><li><p><a style="color: rgb(34, 34, 34);" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=wmake&amp;section1"   >wmake</a>&nbsp;- build DragonFly source in a buildworld environment</p></li></ul></div><div><br></div><div><br></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="http://www.dragonflybsd.org/"   >http://www.dragonflybsd.org</a></div><div>2.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="http://en.wikipedia.org/wiki/DragonFly_BSD"   >http://en.wikipedia.org/wiki/DragonFly_BSD</a></div><div>3.&nbsp;<a rel="nofollow" href="http://en.wikipedia.org/wiki/HAMMER"   >http://en.wikipedia.org/wiki/HAMMER</a></div><div>4.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="http://gitweb.dragonflybsd.org/dragonfly.git"   >http://gitweb.dragonflybsd.org/dragonfly.git</a></div><div>5.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="http://www.dragonflybsd.org/docs/developer/DragonFly_Technologies/"   >http://www.dragonflybsd.org/docs/developer/DragonFly_Technologies/</a></div>6.&nbsp;<a rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=HAMMER&amp;5"   >http://leaf.dragonflybsd.org/cgi/web-man?command=HAMMER&amp;5</a><br><div>7.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="http://www.dragonflybsd.org/docs/howtos/swapcache/"   >http://www.dragonflybsd.org/docs/howtos/swapcache/</a></div><div>8.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="http://leaf.dragonflybsd.org/cgi/web-man?command=swapcache&amp;section8"   >http://leaf.dragonflybsd.org/cgi/web-man?command=swapcache&amp;section8</a></div></div>
	</div>
</div>
</body>
</html>