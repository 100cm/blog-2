<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Ruby Study 7 : Conditional Statements</h2>
	<h5 id="">2012-03-05 10:42:40&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402012258300320/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >这篇的内容很简单, 基本上都是以前用过的语法, 稍微讲的详细一点.</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >1. if .. then .. else</span></font></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >#!/opt/ruby/bin/ruby</font></div><div><font size="2"  >def get_daytype(aDay)</font></div><div><font size="2"  >&nbsp;if (aDay.to_s.downcase == 'saturday') || (aDay.to_s.downcase == 'sunday')  # 分行写的话then可以忽略.</font></div><div><font size="2"  >&nbsp; &nbsp;daytype = 'weekend'</font></div><div><font size="2"  >&nbsp;else</font></div><div><font size="2"  >&nbsp; &nbsp;daytype = 'weekday'</font></div><div><font size="2"  >&nbsp;end</font></div><div><font size="2"  >&nbsp;return daytype</font></div><div><font size="2"  >end</font></div><div><font size="2"  >print ("please enter day:")</font></div><div><font size="2"  >aDay = gets().chomp</font></div><div><font size="2"  >puts( get_daytype(aDay) )</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 23px;"  >一个等号赋值, 两个等号为相等. 三个等号后面讲.</span></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 23px;"  >执行结果 :&nbsp;</span></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >please enter day:sunday</font></div><div><font size="2"  >weekend</font></div><p></p></pre></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >if .. else .. end还有一种简写.( ? .. : )</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >例如以下两句是一样的 :&nbsp;</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  ><div><pre class="prettyprint"  ><p></p><div>('abc' == 'abc') ? puts("true") : puts("false")</div><div>if ('abc' == 'abc') then puts("true") else puts("false") end</div><p></p></pre></div><div>? .. : 也可以写成多行, 只不过有一些特殊的限制 :&nbsp;</div><div>?结尾行下面必须是 :结尾的行 .</div><div><br></div></span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >2. and, or, not ( &amp;&amp; , || , ! )</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >and , or , not 的另一种表示方法是, &amp;&amp; , || , !</span></font></font></div><div><span style="color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; font-size: small; line-height: 23px;"  >因为两者的优先级不一样,&nbsp;</span><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >一般不要混用, 建议要么全部使用and, or , not. 或全部使用 &amp;&amp;, ||, ! .&nbsp;</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >另外需要注意的是, 使用括弧会使得逻辑更明了.</span></font></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 20px;"  ><br></span></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >3. if .. elsif</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >前面讲的是单个条件的判断, 如果有多个条件的话就要用到elsif. 例如 :&nbsp;</span></font></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >#!/opt/ruby/bin/ruby</font></div><div><font size="2"  >loop do</font></div><div><font size="2"  >&nbsp; print("Please enter a number or (q to exit):")</font></div><div><font size="2"  >&nbsp; input = gets().chomp</font></div><div><font size="2"  >&nbsp; if input == 'q'</font></div><div><font size="2"  >&nbsp; &nbsp; puts( "Bye" )</font></div><div><font size="2"  >&nbsp; &nbsp; break</font></div><div><font size="2"  >&nbsp; elsif input.to_i &gt; 800 &amp;&amp; input.to_i &lt;= 1000</font></div><div><font size="2"  >&nbsp; &nbsp; puts( "That's a high rate of pay!" )</font></div><div><font size="2"  >&nbsp; elsif input.to_i &lt;= 800 &amp;&amp; input.to_i &gt; 0</font></div><div><font size="2"  >&nbsp; &nbsp; puts( "We can afford that" ) &nbsp;&nbsp;</font></div><div><font size="2"  >&nbsp; else</font></div><div><font size="2"  >&nbsp; &nbsp; puts( "I said: Enter a number between 1 and 1000!" )</font></div><div><font size="2"  >&nbsp; end</font></div><div><font size="2"  >end</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 20px;"  ><br></span></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >4. unless</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >类似while 和until是对立的. if和unless也是对立的.</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >unless () 等同于 if !()&nbsp;</span></font></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >if !(1==1) then</font></div><div><font size="2"  >&nbsp; puts("ture")</font></div><div><font size="2"  >else</font></div><div><font size="2"  >&nbsp; puts("false")</font></div><div><font size="2"  >end</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >unless 1==1 then</font></div><div><font size="2"  >&nbsp; puts("ture")</font></div><div><font size="2"  >else</font></div><div><font size="2"  >&nbsp; puts("false")</font></div><div><font size="2"  >end</font></div><p></p></pre></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  ><br></span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >5. if and unless Modifiers</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >类似while, until的modifier写法, if和unless也有类似写法.但是if和unless的modifier写法不会有one or more times的执行次数. 也就是必须是先判断再执行的.</span></font></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >puts("true") if (1==1)</font></div><div><font size="2"  >puts("true") unless !(1==1)</font></div><div><font size="2"  >begin</font></div><div><font size="2"  >&nbsp; puts("true")  # 不执行</font></div><div><font size="2"  >&nbsp; puts("true again")  </font><span style="font-size: small; line-height: 19px;"  ># 不执行</span></div><div><font size="2"  >end if (1!=1)</font></div><div><font size="2"  >begin</font></div><div><font size="2"  >&nbsp; puts("true")  </font><span style="font-size: small; line-height: 19px;"  ># 不执行</span></div><div><font size="2"  >&nbsp; puts("true again")  </font><span style="font-size: small; line-height: 19px;"  ># 不执行</span></div><div><font size="2"  >end unless !(1!=1)</font></div><p></p></pre></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  ><br></span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >6. case</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >当有多个条件判断时, 写if .. elsif .. elsif .. 可能会觉得繁琐. 可以用case替代.&nbsp;</span></font></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >case (变量, 或算数运算表达式等)</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >when ? then</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >&nbsp; 表达式</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >when ? then</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >&nbsp; 表达式</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >...</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >else</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >&nbsp; 表达式</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >end</span></font></font></div><p></p></pre></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  ><div><pre class="prettyprint"  ><p></p><div>#!/opt/ruby/bin/ruby</div><div>loop do</div><div>&nbsp; print("Please enter a number or (q to exit):")</div><div>&nbsp; i = gets().chomp</div><div>&nbsp; case( i )</div><div>&nbsp; &nbsp; when '1' then puts("It's Monday" )</div><div>&nbsp; &nbsp; when '2' then puts("It's Tuesday" )</div><div>&nbsp; &nbsp; when '3' then puts("It's Wednesday" )</div><div>&nbsp; &nbsp; when '4' then puts("It's Thursday" )</div><div>&nbsp; &nbsp; when '5' then puts("It's Friday" )</div><div>&nbsp; &nbsp; when ('6'..'7') then puts( "Yippee! It's the weekend! " )</div><div>&nbsp; &nbsp; when 'q' then puts("Bye")</div><div>&nbsp; &nbsp; &nbsp; break</div><div>&nbsp; &nbsp; else puts( "That's not a real day!" )</div><div>&nbsp; end</div><div>end</div><p></p></pre></div><div>执行结果 :&nbsp;</div></span></font></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >./test.rb&nbsp;</font></div><div><font size="2"  >Please enter a number or (q to exit):1</font></div><div><font size="2"  >It's Monday</font></div><div><font size="2"  >Please enter a number or (q to exit):2</font></div><div><font size="2"  >It's Tuesday</font></div><div><font size="2"  >Please enter a number or (q to exit):3</font></div><div><font size="2"  >It's Wednesday</font></div><div><font size="2"  >Please enter a number or (q to exit):4</font></div><div><font size="2"  >It's Thursday</font></div><div><font size="2"  >Please enter a number or (q to exit):5</font></div><div><font size="2"  >It's Friday</font></div><div><font size="2"  >Please enter a number or (q to exit):6</font></div><div><font size="2"  >Yippee! It's the weekend!&nbsp;</font></div><div><font size="2"  >Please enter a number or (q to exit):7</font></div><div><font size="2"  >Yippee! It's the weekend!&nbsp;</font></div><div><font size="2"  >Please enter a number or (q to exit):8</font></div><div><font size="2"  >That's not a real day!</font></div><div><font size="2"  >Please enter a number or (q to exit):q</font></div><div><font size="2"  >Bye</font></div><p></p></pre></div><div><span style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; font-size: small;"  >case中的Range运用 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >def method1(i)</font></div><div><font size="2"  >case (i)</font></div><div><font size="2"  >&nbsp; when ('a'..'z'), ('A'..'Z'), ('0'..'1') then</font></div><div><font size="2"  >&nbsp; &nbsp; puts("it's a letter")</font></div><div><font size="2"  >&nbsp; when (0..9) then</font></div><div><font size="2"  >&nbsp; &nbsp; puts("it's a number")</font></div><div><font size="2"  >&nbsp; else&nbsp;</font></div><div><font size="2"  >&nbsp; &nbsp; puts("please enter one character a time")</font></div><div><font size="2"  >end</font></div><div><font size="2"  >end</font></div><div><font size="2"  >method1('1')</font></div><div><font size="2"  >method1(1)</font></div><div><font size="2"  >method1('z')</font></div><div><font size="2"  >method1('A')</font></div><div><font size="2"  >method1('abc')</font></div><div><font size="2"  ># 执行结果 :&nbsp;</font></div><div><div><font size="2"  >it's a letter</font></div><div><font size="2"  >it's a number</font></div><div><font size="2"  >it's a letter</font></div><div><font size="2"  >it's a letter</font></div><div><font size="2"  >please enter one character a time</font></div></div><p></p></pre></div><div><span style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; font-size: small;"  >case 也是从上往下匹配的, 匹配到之后后面的将不再进行匹配 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >case( i )</font></div><div><font size="2"  >&nbsp; &nbsp; when 1 then puts("It's Monday" )</font></div><div><font size="2"  >&nbsp; &nbsp; when 2 then puts("It's Tuesday" )</font></div><div><font size="2"  >&nbsp; &nbsp; when 3 then puts("It's Wednesday" )</font></div><div><font size="2"  >&nbsp; &nbsp; when 4 then puts("It's Thursday" )</font></div><div><font size="2"  >&nbsp; &nbsp; when 5 then puts("It's Friday" )</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; puts("...nearly the weekend!")</font></div><div><font size="2"  >&nbsp; &nbsp; when 6, 7 &nbsp;</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; puts("It's Saturday!" ) if i == 6&nbsp;</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; puts("It's Sunday!" ) if i == 7&nbsp;</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; puts( "Yippee! It's the weekend! " )</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # the following never executes, 下面的 </font><span style="font-size: small; line-height: 19px;"  >when 5 </span><span style="font-size: small;"  >永远都不会执行.</span></div><div><font size="2"  >&nbsp; &nbsp; when 5 then puts( "It's Friday all over again!" )</font></div><div><font size="2"  >&nbsp; &nbsp; else puts( "That's not a real day!" )</font></div><div><font size="2"  >end</font></div><p></p></pre></div><div><span style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53; font-size: small;"  >case的返回值赋值给其他变量 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >def method1(i)</font></div><div><font size="2"  >case (i)</font></div><div><font size="2"  >&nbsp; when ('a'..'z'), ('A'..'Z'), ('0'..'1') then</font></div><div><font size="2"  >&nbsp; &nbsp; puts("it's a letter")</font></div><div><font size="2"  >&nbsp; &nbsp; return "letter"</font></div><div><font size="2"  >&nbsp; when (0..9) then</font></div><div><font size="2"  >&nbsp; &nbsp; puts("it's a number")</font></div><div><font size="2"  >&nbsp; &nbsp; return "number"</font></div><div><font size="2"  >&nbsp; else&nbsp;</font></div><div><font size="2"  >&nbsp; &nbsp; puts("please enter one character a time")</font></div><div><font size="2"  >&nbsp; &nbsp; return "nonalphanumeric"</font></div><div><font size="2"  >end</font></div><div><font size="2"  >end</font></div><div><font size="2"  >a = method1('1')</font></div><div><font size="2"  >puts(a)</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 23px;"  >执行结果 :&nbsp;</span></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >it's a letter</font></div><div><font size="2"  >letter</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 23px;"  ><br></span></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >7. CONSTANTS</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >常量, 这个在Ruby里面其实不是强制限制不能修改的, 只是语义上面来说不能修改, 当然建议还是不要修改它.</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >查看有哪些常量, 例如我们看看Object类有哪些常量.</span></font></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >print (Object.constants.sort) &nbsp;# 用到constants方法</font></font></div><div><font size="2"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >输出 :&nbsp;(其中包含了类,例如Array, Data等)</font></font></div><div><font size="2"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >[:ARGF, :ARGV, :ArgumentError, :Array, :BasicObject, :Bignum, :Binding, :CROSS_COMPILING, :Class, :Comparable, :Complex, :Config, :Data, :Dir, :ENV, :EOFError, :Encoding, :EncodingError, :Enumerable, :Enumerator, :Errno, :Exception, :FALSE, :FalseClass, :Fiber, :FiberError, :File, :FileTest, :Fixnum, :Float, :FloatDomainError, :GC, :Gem, :Hash, :IO, :IOError, :IndexError, :Integer, :Interrupt, :Kernel, :KeyError, :LoadError, :LocalJumpError, :Marshal, :MatchData, :Math, :Method, :Module, :Mutex, :NIL, :NameError, :NilClass, :NoMemoryError, :NoMethodError, :NotImplementedError, :Numeric, :Object, :ObjectSpace, :Proc, :Process, :RUBY_COPYRIGHT, :RUBY_DESCRIPTION, :RUBY_ENGINE, :RUBY_PATCHLEVEL, :RUBY_PLATFORM, :RUBY_RELEASE_DATE, :RUBY_REVISION, :RUBY_VERSION, :Random, :Range, :RangeError, :Rational, :RbConfig, :Regexp, :RegexpError, :RubyVM, :RuntimeError, :STDERR, :STDIN, :STDOUT, :ScriptError, :SecurityError, :Signal, :SignalException, :StandardError, :StopIteration, :String, :Struct, :Symbol, :SyntaxError, :SystemCallError, :SystemExit, :SystemStackError, :TOPLEVEL_BINDING, :TRUE, :Thread, :ThreadError, :ThreadGroup, :Time, :TrueClass, :TypeError, :UnboundMethod, :ZeroDivisionError]</font></font></div><p></p></pre></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >查看常量的值 : 用两个冒号, 其实class中的class也是通过两个冒号来调用的.</span></font></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >print(Math.constants.sort) &nbsp;# 查看Math class的常量 :&nbsp;</font></font></div><div><font size="2"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  >[:DomainError, :E, :PI]</font></font></div><p></p></pre></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >puts(Math::E)</font></div><div><font size="2"  >puts(Math::PI)</font></div><div><font size="2"  >Math::PI = 100</font></div><div><font size="2"  >puts(Math::PI)</font></div><p></p></pre></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >输出结果 :&nbsp;</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >修改PI的时候给出了一个警告, 当然值已经修改了.</span></font></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >C:/Users/digoal/Desktop/new.rb:4: warning: already initialized constant PI</font></div><div><font size="2"  >2.718281828459045</font></div><div><font size="2"  >3.141592653589793</font></div><div><font size="2"  >100</font></div><p></p></pre></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  ><br></span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >8. === method</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >这个方法比较有意思, Range 类对象的===方法相当于include?的用法 . 而Array类对象的===方法就是相等的意思.&nbsp;</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >Regexp 类对象的===方法则是匹配的意思, 因此使用===方法时, 左边是它的对象, 右边是传递给这个方法的参数.</span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  ><div><pre class="prettyprint"  ><p></p><div>puts(%r/^abc$/.===('abc'))</div><div>puts(%r/^abc$/ === 'abc')</div><div>puts([1,2,3] === [1,2,3])</div><div>puts([1,2,3].===([3,2,1]))</div><div>puts((1..10).===(1))</div><div>puts((1..10) === 1)</div><p></p></pre></div><div>输出结果 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div>true</div><div>true</div><div>true</div><div>false</div><div>true</div><div>true</div><p></p></pre></div></span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >Range的instance method ===相当于 include? . 下面两句得到的结果是一样的</span></font></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >puts((1..10).include?(1))</font></div><div><font size="2"  >puts((1..10) === 1)</font></div><p></p></pre></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  ><br></span></font></font></div><div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >9. catch, throw</span></font></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 20px;"  >其他编程语言中有goto可以直接跳转到其他部分, 在Ruby中没有goto的用法. 但是有catch和throw. 类似goto.</span></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 20px;"  >catch在一个代码块的外围, 参数是Symbol.</span></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 20px;"  >throw在代码块(do end或{} )的里面用于跳出catch包围的代码块. 参数也是Symbol.</span></font></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 20px;"  >例如 :&nbsp;</span></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >#!/opt/ruby/bin/ruby</font></div><div><font size="2"  >def dothings( aNum )</font></div><div><font size="2"  >&nbsp; &nbsp;i = 0</font></div><div><font size="2"  >&nbsp; &nbsp;while true</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; puts( "I'm doing things..." )</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; i += 1</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; throw( :go_for_tea ) if ( i == aNum )</font></div><div><font size="2"  ># throws to end of go_to_tea block</font></div><div><font size="2"  >&nbsp; &nbsp;end</font></div><div><font size="2"  >end</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >catch( :go_for_tea ) { &nbsp; # this is the :go_for_tea block</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; dothings(5)</font></div><div><font size="2"  >}</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >catch( :finished ) do</font></div><div><font size="2"  >&nbsp; &nbsp;print( 'Enter a number: ' )</font></div><div><font size="2"  >&nbsp; &nbsp;num = gets().chomp.to_i</font></div><div><font size="2"  >&nbsp; &nbsp;if num == 0 then&nbsp;</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp;throw :finished&nbsp;</font></div><div><font size="2"  >&nbsp; &nbsp;end</font></div><div><font size="2"  >&nbsp; &nbsp;puts( 100 / num ) &nbsp;&nbsp;</font></div><div><font size="2"  >&nbsp; &nbsp;catch( :go_for_tea ) {</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; dothings(5)</font></div><div><font size="2"  >&nbsp; &nbsp;}</font></div><div><font size="2"  >&nbsp; &nbsp;puts( "Things have all been done. Time for tea!" )</font></div><div><font size="2"  >end</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 20px;"  >执行结果 :&nbsp;</span></font></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >./test.rb&nbsp;</font></div><div><font size="2"  >I'm doing things...</font></div><div><font size="2"  >I'm doing things...</font></div><div><font size="2"  >I'm doing things...</font></div><div><font size="2"  >I'm doing things...</font></div><div><font size="2"  >I'm doing things...</font></div><div><font size="2"  >Enter a number: 100</font></div><div><font size="2"  >1</font></div><div><font size="2"  >I'm doing things...</font></div><div><font size="2"  >I'm doing things...</font></div><div><font size="2"  >I'm doing things...</font></div><div><font size="2"  >I'm doing things...</font></div><div><font size="2"  >I'm doing things...</font></div><div><font size="2"  >Things have all been done. Time for tea!</font></div><p></p></pre></div><div><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  size="2"  ><span style="line-height: 20px;"  >不管是goto还是catch, throw都需要慎重使用.</span></font></div><font size="2"  style="line-height: 23px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font color="#333333"  face="Arial, Helvetica, simsun, u5b8bu4f53"  style="line-height: 23px;"  ><span style="line-height: 23px;"  >【参考】</span></font></font><div style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font size="2"  style="line-height: 23px;"  >The Book Of Ruby</font></div><div style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"  ><font size="2"  style="line-height: 23px;"  >Ruby 1.9.3 API</font></div><wbr></div>
	</div>
</div>
</body>
</html>