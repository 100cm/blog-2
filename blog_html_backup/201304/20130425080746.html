<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Changing Priority on Linux Processes</h2>
	<h5 id="">2013-04-25 8:07:46&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402013325807755/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>原文转载:</div><div><a rel="nofollow" href="http://www.nixtutor.com/linux/changing-priority-on-linux-processes/"   >http://www.nixtutor.com/linux/changing-priority-on-linux-processes/</a></div><div><div style="margin: 0px 0px 0px 20px; padding: 0px 6px 0px 0px; position: relative; font-family: FreeSans, Helvetica, Arial, sans-serif; font-size: 0.8em; width: 415px; float: right; line-height: normal;"   ><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; color: rgb(136, 136, 136); font-style: italic; font-family: 'Nimbus Roman No9 L', Georgia, 'Times New Roman', Times, serif; font-size: 0.9em; line-height: 25px;"   >by&nbsp;<span style="margin: 0px; padding: 0px; font-style: normal; text-transform: uppercase; letter-spacing: 1px;"   >MARK SANBORN</span>&nbsp;on April 22, 2009</p><div style="margin: 7px 0px 0px; padding: 0px; position: relative; font-style: italic; color: rgb(68, 72, 79);"   ><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px;"   >What is Priority and Why Should I Care? When talking about processes priority is all about managing processor time. The Processor or CPU is like a human juggling multiple tasks at the same time. Sometimes we can have enough room to take on multiple projects. Sometimes we can only focus on one thing at a [...]</p></div></div><div style="margin: 0px; padding: 0px; position: relative; clear: both; font-family: FreeSans, helvetica, sans-serif; font-size: medium; line-height: normal;"   ></div><h2 style="margin: 35px 0px; padding: 0px; font-size: 1.6em; color: rgb(148, 34, 34); letter-spacing: -0.04em; font-family: FreeSans, helvetica, sans-serif; line-height: normal;"   >What is Priority and Why Should I Care?</h2><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >When talking about processes priority is all about managing processor time. The Processor or CPU is like a human juggling multiple tasks at the same time. Sometimes we can have enough room to take on multiple projects. Sometimes we can only focus on one thing at a time. Other times something important pops up and we want to devote all of our energy into solving that problem while putting less important tasks on the back burner.</p><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >In Linux we can set guidelines for the CPU to follow when it is looking at all the tasks it has to do. These guidelines are called&nbsp;<em style="margin: 0px; padding: 0px;"   ><strong style="margin: 0px; padding: 0px; font-style: normal;"   >niceness</strong></em>&nbsp;or&nbsp;<em style="margin: 0px; padding: 0px;"   ><strong style="margin: 0px; padding: 0px; font-style: normal;"   >nice value</strong></em>. The Linux niceness scale goes from -20 to 19. The lower the number the more priority that task gets. If the niceness value is high number like 19 the task will be set to the lowest priority and the CPU will process it whenever it gets a chance. The default nice value is zero.</p><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >By using this scale we can allocate our CPU resources more appropriately. Lower priority programs that are not important can be set to a higher nice value, while high priority programs like daemons and services can be set to receive more of the CPU’s focus. You can even give a specific user a lower nice value for all of his/her processes so you can limit their ability to slow down the computer’s core services.</p><h2 style="margin: 35px 0px; padding: 0px; font-size: 1.6em; color: rgb(148, 34, 34); letter-spacing: -0.04em; font-family: FreeSans, helvetica, sans-serif; line-height: normal;"   >Checking the Priority of Running Processes</h2><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >The easiest way to get a quick picture of what the current niceness priority on a process is to open up the top processes with:</p><div style="margin: 20px; padding: 0.5em; position: relative; background-color: rgb(68, 72, 79); border-top-width: 2px; border-top-style: solid; border-top-color: rgb(87, 93, 105); border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: rgb(0, 0, 0); border-right-width: 2px; border-right-style: solid; border-right-color: rgb(0, 0, 0); color: rgb(255, 255, 255); font-family: monospace; font-size: medium; list-style-type: none; width: 550px; overflow: auto; white-space: pre; line-height: normal;"   >top</div><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   ></p><div><div><img title="Changing Priority on Linux Processes - 德哥@Digoal - The Heart,The World."   alt="Changing Priority on Linux Processes - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/V_Fq9YJRqKfgM87rx8_9zw==/6598089013936549488.png"   ></div>&nbsp;</div>&nbsp;<p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >Another way you can get the nice value is use&nbsp;<strong style="margin: 0px; padding: 0px;"   >ps</strong>:</p><div style="margin: 20px; padding: 0.5em; position: relative; background-color: rgb(68, 72, 79); border-top-width: 2px; border-top-style: solid; border-top-color: rgb(87, 93, 105); border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: rgb(0, 0, 0); border-right-width: 2px; border-right-style: solid; border-right-color: rgb(0, 0, 0); color: rgb(255, 255, 255); font-family: monospace; font-size: medium; list-style-type: none; width: 550px; overflow: auto; white-space: pre; line-height: normal;"   >ps -o pid,comm,nice -p 594</div><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >This will output the process ID, command, and nice value (marked as NI).</p><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   ></p><div><img title="Changing Priority on Linux Processes - 德哥@Digoal - The Heart,The World."   alt="Changing Priority on Linux Processes - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/tHWpkR03YqtkfTaJXlARsQ==/3038240898633166188.png"   ></div>&nbsp;<h2 style="margin: 35px 0px; padding: 0px; font-size: 1.6em; color: rgb(148, 34, 34); letter-spacing: -0.04em; font-family: FreeSans, helvetica, sans-serif; line-height: normal;"   >Setting priority on new processes</h2><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >At this point you are probably wondering how you can set your own priority levels on processes. To change the priority when issuing a new command you do&nbsp;<strong style="margin: 0px; padding: 0px;"   >nice -n [nice value] [command]</strong>:</p><div style="margin: 20px; padding: 0.5em; position: relative; background-color: rgb(68, 72, 79); border-top-width: 2px; border-top-style: solid; border-top-color: rgb(87, 93, 105); border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: rgb(0, 0, 0); border-right-width: 2px; border-right-style: solid; border-right-color: rgb(0, 0, 0); color: rgb(255, 255, 255); font-family: monospace; font-size: medium; list-style-type: none; width: 550px; overflow: auto; white-space: pre; line-height: normal;"   >nice -n 10 apt-get upgrade</div><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >This will increment the default nice value by a positive 10 for the command, ‘<strong style="margin: 0px; padding: 0px;"   >apt-get upgrade</strong>‘ This is often useful for times when you want to upgrade apps but don’t want the extra process burden at the given time. Remember a positive number is gives less priority for a process.</p><h2 style="margin: 35px 0px; padding: 0px; font-size: 1.6em; color: rgb(148, 34, 34); letter-spacing: -0.04em; font-family: FreeSans, helvetica, sans-serif; line-height: normal;"   >Setting Priority on Existing Processes</h2><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >Obviously at some point you are going to want to alter the nice value of something that is already running. Just the other day I was doing an upgrade to Ubuntu Jaunty and Firefox started to become unusably slow. A quick&nbsp;<strong style="margin: 0px; padding: 0px;"   >renice</strong>&nbsp;command rescheduled the upgrade to a lower priority and I was back to surfing in no time.</p><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >To change the priority of an existing process just do renice [nice value] -p [process id]:</p><div style="margin: 20px; padding: 0.5em; position: relative; background-color: rgb(68, 72, 79); border-top-width: 2px; border-top-style: solid; border-top-color: rgb(87, 93, 105); border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: rgb(0, 0, 0); border-right-width: 2px; border-right-style: solid; border-right-color: rgb(0, 0, 0); color: rgb(255, 255, 255); font-family: monospace; font-size: medium; list-style-type: none; width: 550px; overflow: auto; white-space: pre; line-height: normal;"   >renice 10 -p 21827</div><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >This will increment the priority of the process with an id of 21827 to 10.</p><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   ><strong style="margin: 0px; padding: 0px;"   >Note:</strong>&nbsp;<em style="margin: 0px; padding: 0px;"   >Only root can apply negative nice values</em>.</p><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   ></p><div><img title="Changing Priority on Linux Processes - 德哥@Digoal - The Heart,The World."   alt="Changing Priority on Linux Processes - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/boRrSMrwKXxDGO-cK_W3Mw==/3069484621047536482.png"   ></div>&nbsp;<h2 style="margin: 35px 0px; padding: 0px; font-size: 1.6em; color: rgb(148, 34, 34); letter-spacing: -0.04em; font-family: FreeSans, helvetica, sans-serif; line-height: normal;"   >Setting Permanent Priority on all Processes for a Specific User</h2><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >Sometimes it is helpful to give specific users lower priority than others to keep system resources allocated in the proper places like core services and other programs.</p><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >You can set the default nice value of a particular user or group in the&nbsp;<strong style="margin: 0px; padding: 0px;"   >/etc/security/limits.conf</strong>file.</p><div style="margin: 20px; padding: 0.5em; position: relative; background-color: rgb(68, 72, 79); border-top-width: 2px; border-top-style: solid; border-top-color: rgb(87, 93, 105); border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: rgb(0, 0, 0); border-right-width: 2px; border-right-style: solid; border-right-color: rgb(0, 0, 0); color: rgb(255, 255, 255); font-family: monospace; font-size: medium; list-style-type: none; width: 550px; overflow: auto; white-space: pre; line-height: normal;"   >/etc/security/limits.conf</div><p style="margin-top: 0px; margin-bottom: 12px; margin-left: 20px; font-size: 0.9em; line-height: 25px; font-family: FreeSans, helvetica, sans-serif;"   >It uses this syntax: [username] [hard|soft] priority [nice value]</p><div style="margin: 20px; padding: 0.5em; position: relative; background-color: rgb(68, 72, 79); border-top-width: 2px; border-top-style: solid; border-top-color: rgb(87, 93, 105); border-bottom-width: 2px; border-bottom-style: solid; border-bottom-color: rgb(0, 0, 0); border-right-width: 2px; border-right-style: solid; border-right-color: rgb(0, 0, 0); color: rgb(255, 255, 255); font-family: monospace; font-size: medium; list-style-type: none; width: 550px; overflow: auto; white-space: pre; line-height: normal;"   >backupuser hard priority 1</div></div><div><br></div>[参考]<div>1.&nbsp;<a rel="nofollow" href="http://www.nixtutor.com/linux/changing-priority-on-linux-processes/"   >http://www.nixtutor.com/linux/changing-priority-on-linux-processes/</a><br><br><wbr></div></div>
	</div>
	<h3>评论</h3>
	<div class="" id="" style="padding:0 20px;">
			<div id="">
				<h5 id="">吉诺比利-斯科拉 - 2013-06-03 16:10:53</h5>
				<div>chrt<br><br></div>
			</div>
	</div>
</div>
</body>
</html>