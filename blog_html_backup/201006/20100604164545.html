<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Deal with Pgbouncer Error “closing because: Old V2 protocol not supported”</h2>
	<h5 id="">2010-06-04 16:45:45&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020105444545420/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><span style="WIDOWS: 2; TEXT-TRANSFORM: none; TEXT-INDENT: 0px; BORDER-COLLAPSE: separate; FONT: medium Simsun; WHITE-SPACE: normal; ORPHANS: 2; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"  ><span style="TEXT-ALIGN: left; FONT-FAMILY: Tahoma, Arial, Helvetica, sans-serif; COLOR: rgb(51,68,85); FONT-SIZE: 13px;"  > <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >大概是在2008年的时候，斯凯的数据库已经初具规模了，为了更好的掌握数据库运行状态，做了一个服务器运行状态统计信息收集的系统。（当时对很多开源的工具还不太了解。现在想想发现和HQ，OACLE的grid control非常类似：</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >架构图如下:</p> <div><img style="MARGIN: 0px 10px 0px 0px;"  title="Deal with Pgbouncer Error “closing because: Old V2 protocol not supported” - 德哥(DiGoal,Just Do It!) - Not Only DBA"  alt="Deal with Pgbouncer Error “closing because: Old V2 protocol not supported” - 德哥(DiGoal,Just Do It!) - Not Only DBA"  src="http://img120.ph.126.net/_n91zV7zDUjBCAjziZ4Jtw==/1625517990505391870.jpg"  ></div> <div><span style="WIDOWS: 2; TEXT-TRANSFORM: none; TEXT-INDENT: 0px; BORDER-COLLAPSE: separate; FONT: medium Simsun; WHITE-SPACE: normal; ORPHANS: 2; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"  ><span style="TEXT-ALIGN: left; FONT-FAMILY: Tahoma, Arial, Helvetica, sans-serif; COLOR: rgb(51,68,85); FONT-SIZE: 13px;"  > <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >分为三个层次：</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >第一个部分：</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >agent,部署在被监控的服务器上面，收集实时的服务器运行状况，发送到repository.</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >我这里是使用ISQL来实现的（需要在被监控的服务器上安装unixODBC）。</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >第二部分：</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Repository，用于存储来自被监控的服务器发送过来的数据。另一个功能是提供给HTML服务器生成报告的历史数据。</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >我这里使用了一个PostgreSQL来作为Repository。</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >第三部分：</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Ctl层和HTML展现层，用于配置一些展现需要的信息，获取来自REPOSITORY的数据并在HTML上展现出来。</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >最近在一个测试环境中搭建了一套一样的环境。与之前不同的是，这次增加了一个PostgreSQL的连接池pgbouncer 1.3.3。</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >数据库使用的是PostgreSQL9beta1 。</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >一用就出现问题了，Agent去连接repository的时候报“[ISQL]ERROR: Could not SQLConnect”这样的错误。</p> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >到pgbouncer的日志中看到如下输出：</p> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  id="_mcePaste"  >2010-06-04 15:35:04.733 15323 LOG C-0×998e490: (nodb)/(nouser)@xxx.xxx.xxx.xxx:17905 closing because: Old V2 protocol not supported (age=0)</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  id="_mcePaste"  >2010-06-04 15:35:04.733 15323 WARNING C-0×998e490: (nodb)/(nouser)@xxx.xxx.xxx.xxx:17905 Pooler Error: Old V2 protocol not supported</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >从日志上分析，客户端发起请求使用的V2协议已经不被Pgbouncer支持了。</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >接下来马上绕过pgbouncer，agent直接和postgresql9连接，成功。</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >OK，找到问题的根源了，来解决它，毕竟PGBOUNCER还是要使用滴。</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >首先翻阅了PGBOUNCER的说明文档，最后在pgbouncer的维基发现有这么一句话”<span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  >Supports protocol V3 only, so backend version must be &gt;= 7.4.”</font></span></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  >也就是说pgbouncer仅仅支持V3是没错的啦。</font></span></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  >OK，那来看看ODBC的配置里面有没有可以指定协议版本的，又翻阅了一下unixODBC的手册，发现下面一段话：</font></span></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  > <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><font face="Tahoma"  ></font></p> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Protocol: Note that when using SSL connections this setting is ignored.</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >6.2: Forces driver to use PostgreSQL 6.2(V0) protocol, which had different byte ordering, protocol, and other semantics.</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >6.3: Use the 6.3(V1) protocol. This is compatible with both V1(6.3) and V2(6.4 to 7.3) backends.</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >6.4+: Use the 6.4(V2) protocol. This is only compatible with 6.4 and higher backends.</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >7.4+: Use the 7.4(V3) protocol. This is only compatible with 7.4 and higher backends.</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >很明显，是可以改滴，赶紧吧odbc.ini修改了一下</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  > <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >[PostgreSQL]</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Description &nbsp; &nbsp; &nbsp; &nbsp; = Test to Postgres</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Driver &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= PostgreSQL</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Trace &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = Yes</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >TraceFile &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = /tmp/sql.log</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Database &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= xxx</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Servername &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= xxx.xxx.xxx.xxx</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >UserName &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Password &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Port &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 20013</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Protocol &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 7.4</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >ReadOnly &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= No</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >RowVersioning &nbsp; &nbsp; &nbsp; = No</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >ShowSystemTables &nbsp; &nbsp;= No</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >ShowOidColumn &nbsp; &nbsp; &nbsp; = No</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >FakeOidIndex &nbsp; &nbsp; &nbsp; &nbsp;= No</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >ConnSettings &nbsp; &nbsp; &nbsp; &nbsp;=</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >再次使用ISQL连接pgbouncer，还是报一样的错误，这下纳闷了。</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >毫无头绪。</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >不过很快就有了新的突破，/etc/odbcinst.ini找一下用的SO是不是太老了，压根就没有V3的支持。</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  > <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ># Included in the unixODBC package</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >[PostgreSQL]</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Description &nbsp; &nbsp; = ODBC for PostgreSQL</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Driver &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= /usr/lib64/libodbcpsql.so</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Setup &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = /usr/lib64/libodbcpsqlS.so</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >FileUsage &nbsp; &nbsp; &nbsp; = 1</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >马上去postgresql-odbc上面下了一个最新的psqlodbc编译安装。</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >重新指向so文件。</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  > <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >[PostgreSQL]</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Description &nbsp; &nbsp; &nbsp; &nbsp; = Test to Postgres</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >#Driver &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= PostgreSQL</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Driver &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= /usr/local/lib/psqlodbcw.so</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Trace &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = Yes</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >TraceFile &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = /tmp/sql.log</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Database &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= xxx</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Servername &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= xxx.xxx.xxx.xxx</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >UserName &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Password &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Port &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 20013</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >Protocol &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 7.4 &nbsp;#(这里调成6.4的话也是会报V2不被支持的错误的)</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >ReadOnly &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= No</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >RowVersioning &nbsp; &nbsp; &nbsp; = No</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >ShowSystemTables &nbsp; &nbsp;= No</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >ShowOidColumn &nbsp; &nbsp; &nbsp; = No</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >FakeOidIndex &nbsp; &nbsp; &nbsp; &nbsp;= No</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >ConnSettings &nbsp; &nbsp; &nbsp; &nbsp;=</div></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >终于，Old V2的异常消失了，这时有一个</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  > <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >[08P01][unixODBC]ERROR: Unsupported startup parameter: geqo</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >[ISQL]ERROR: Could not SQLConnect</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >从异常信息上看geqo是一个已经废弃的参数，在pgbouncer里面忽略这个参数，重新连接，一切正常。</div></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >总结：</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >对待这种情况一定要淡定，坚持,总会有突破口的(当然对英文文档的阅读能力和平时的积累是必不可少的)。</div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="WIDOWS: 2; TEXT-TRANSFORM: none; TEXT-INDENT: 0px; BORDER-COLLAPSE: separate; FONT: medium Simsun; WHITE-SPACE: normal; ORPHANS: 2; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-border-horizontal-spacing: 0px; -webkit-border-vertical-spacing: 0px; -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px;"  ><span style="TEXT-ALIGN: left; FONT-FAMILY: Tahoma, Arial, Helvetica, sans-serif; COLOR: rgb(51,68,85); FONT-SIZE: 13px;"  > <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  >[参考]</font></span></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  >pgbouncer</font></span></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  >unixODBC</font></span></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  >unixODBC-devel</font></span></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  >psqlodbc</font></span></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  ><a rel="nofollow" href="http://www.easysoft.com"  >www.easysoft.com</a></font></span></span></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  >[依赖关系]</font></span></span></div> <div style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  ><span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  >安装 psqlodbc 需要先安装 <span style="PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT-FAMILY: sans-serif; PADDING-TOP: 0px;"  ><font face="Tahoma"  >unixODBC-devel</font></span></font></span></font></span></span></div></span></span></div></div></div></span></div></span></span></div> <p style="PADDING-BOTTOM: 0px; LINE-HEIGHT: 18px; MARGIN: 0px 0px 18px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px;"  >&nbsp;</p></span></span></div>
	</div>
</div>
</body>
</html>