<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Install oracle10g using responseFile in silent mode</h2>
	<h5 id="">2010-06-05 12:18:31&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020105501831313/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><span style="font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif; line-height: 19px; font-size: 13px;"><div>今天在上海上OCM试训课程，好久没搞ORACLE的安装了。而且还是虚拟机，实在不想开图形界面，所以赶紧翻阅了一下ORACLE手册关于静默安装的部分。</div><div>稍微写点东西如下.</div></span></div>当没有图形界面时，安装 ORACLE 需要使用 responseFile。<div>安装前的工作准备和图形界面安装 ORACLE10G 是一样的。直到运行runInstaller。</div><div>安装前简单的配置过程如下:</div><div>config /etc/redhat-release</div><div><span style="white-space:pre;"> </span>Red Hat Enterprise Linux Server release 4.5 (Tikanga)</div><div>config Hostname</div><div><span style="white-space:pre;"> </span>digoal.sky-mobi.com.hz</div><div>config /etc/sysconfig/network</div><div><span style="white-space:pre;"> NETWORKING=yes NETWORKING_IPV6=no HOSTNAME=digoal.sky-mobi.com.hz GATEWAY=192.168.152.2</span></div><div>config /etc/sysconig/network-scripts/ifcfg-ethx</div><div><div><span style="white-space:pre;"> </span>DEVICE=eth0</div><div><span style="white-space:pre;"> </span>BOOTPROTO=static</div><div><span style="white-space:pre;"> </span>BROADCAST=192.168.152.255</div><div><span style="white-space:pre;"> </span>HWADDR=00:0C:29:2D:C8:C8</div><div><span style="white-space:pre;"> </span>IPADDR=192.168.152.88</div><div><span style="white-space:pre;"> </span>NETMASK=255.255.255.0</div><div><span style="white-space:pre;"> </span>NETWORK=192.168.152.0</div><div><span style="white-space:pre;"> </span>ONBOOT=yes</div></div><div>config /etc/hosts</div><div><span style="white-space:pre;"> 127.0.0.1 localhost.localdomain localhost 192.168.152.88 digoal.sky-mobi.com.hz digoal</span></div><div>config /etc/sysctl.conf</div><div><div><span style="white-space:pre;"> </span>kernel.sem = 5010 641280 5010 512</div><div><span style="white-space:pre;"> </span>fs.file-max = 357364</div><div><span style="white-space:pre;"> </span>net.ipv4.ip_local_port_range = 1024 65000</div><div><span style="white-space:pre;"> </span>net.core.rmem_default = 1048576</div><div><span style="white-space:pre;"> </span>net.core.rmem_max = 1048576</div><div><span style="white-space:pre;"> </span>net.core.wmem_default = 262144</div><div><span style="white-space:pre;"> </span>net.core.wmem_max = 262144</div><div><span style="white-space:pre;"> </span>net.ipv4.tcp_tw_recycle = 1</div><div><span style="white-space:pre;"> </span>net.core.netdev_max_backlog = 4096</div><div><span style="white-space:pre;"> </span>net.ipv4.tcp_max_syn_backlog = 10000</div><div><span style="white-space:pre;"> </span>vm.overcommit_memory = 0</div></div><div>config /etc/security.conf</div><div><span style="white-space:pre;"> <span style="white-space:pre;">	</span>* soft nofile 131072&nbsp;</span></div><div><span style="white-space:pre;"><span style="white-space:pre;">	</span>* hard nofile 131072</span></div><div><span style="white-space:pre;"> <span style="white-space:pre;">	</span>* soft nproc 131072&nbsp;</span></div><div><span style="white-space:pre;"><span style="white-space:pre;">	</span>* hard nproc 131072&nbsp;</span></div><div><span style="white-space:pre;"><span style="white-space:pre;">	</span>* soft core unlimited&nbsp;</span></div><div><span style="white-space:pre;"><span style="white-space:pre;">	</span>* hard core unlimited</span></div><div><span style="white-space:pre;"><span style="white-space:pre;">	</span> * soft memlock 50000000&nbsp;</span></div><div><span style="white-space:pre;"><span style="white-space:pre;">	</span>* hard memlock 50000000</span></div><div>config /etc/pam.d/login</div><div><div><span style="white-space:pre;"> </span>session &nbsp; &nbsp;required &nbsp; &nbsp; /lib/security/pam_limits.so &nbsp;#32位系统</div><div><span style="white-space:pre;"> </span>session &nbsp; &nbsp;required &nbsp; &nbsp; pam_limits.so</div><div>config swap #确保满足ORACLE需求</div><div><div>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total &nbsp; &nbsp; &nbsp; used &nbsp; &nbsp; &nbsp; free &nbsp; &nbsp; shared &nbsp; &nbsp;buffers &nbsp; &nbsp; cached</div><div>Mem: &nbsp; &nbsp; &nbsp; 1035108 &nbsp; &nbsp; 752512 &nbsp; &nbsp; 282596 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp; 5484 &nbsp; &nbsp; 670180</div><div>-/+ buffers/cache: &nbsp; &nbsp; &nbsp;76848 &nbsp; &nbsp; 958260</div><div>Swap: &nbsp; &nbsp; &nbsp;1652240 &nbsp; &nbsp; &nbsp; &nbsp; 68 &nbsp; &nbsp;1652172</div><div><br></div><div>groupadd oinstall</div><div>groupadd dba</div><div>useradd -g oinstall -G dba oracle</div><div>passwd oracle</div><div>#mkdir -p /opt/oracle</div><div>#chown -R oracle:oinstall /opt/oracle</div><div>#su - oracle</div><div>vi .bash_profile</div><div><div><span style="white-space:pre;"> </span>export ORACLE_BASE=/opt/oracle</div><div><span style="white-space:pre;"> </span>export ORACLE_HOME=$ORACLE_BASE/product/10.2.0/db_1</div><div><span style="white-space:pre;"> </span>export LD_LIBRARY_PATH=$ORACLE_HOME/lib:$ORACLE_HOME/lib32:/usr/local/lib:/usr/lib:/lib</div><div><span style="white-space:pre;"> </span>export PATH=$ORACLE_HOME/bin:$PATH</div><div><span style="white-space:pre;"> </span>export NLS_LANG=AMERICAN_AMERICA.UTF8</div><div><span style="white-space:pre;"> </span>export NLS_DATE_FORMAT="yyyy-mm-dd hh24:mi:ss"</div><div><span style="white-space:pre;"> </span>export EDITOR=vi</div><div><span style="white-space:pre;"> </span>export ORACLE_SID=digoal</div><div><br></div><div><span style="white-space:pre;"> </span>alias rm='rm -i'</div><div><span style="white-space:pre;"> </span>alias sqlplus='rlwrap sqlplus'</div><div><span style="white-space:pre;"> </span>alias rman='rlwrap rman'</div><div><span style="white-space:pre;"> </span>alias ll='ls -lh'</div><div><br></div><div>接下来进入使用responseFile安装数据库软件的过程：</div><div>#如果是第一次安装ORACLE软件，必须先创建一个oraInst.loc文件</div><div>#vi /etc/oraInst.loc</div><div><span style="white-space:pre;"> </span>inventory_loc=/opt/oracle/oraInventory</div><div><span style="white-space:pre;"> </span>inst_group=oinstall</div><div>#chmod 664 /etc/oraInst.loc</div><div># su - oracle</div><div>$ cd $ORACLE_INSTALL_CD</div><div>$ 修改配置文件$ORACLE_INSTALLCD/response/custom.rsp</div><div><div>RESPONSEFILE_VERSION=2.2.1.0.0</div><div>UNIX_GROUP_NAME="oinstall" &nbsp; #需要修改的配置参数</div><div>FROM_LOCATION="/opt/soft_bak/database/stage/products.xml"&nbsp;&nbsp; #需要修改的配置参数</div><div>ORACLE_HOME="/opt/oracle/product/10.2.0/db_1"&nbsp;&nbsp; #需要修改的配置参数</div><div>ORACLE_HOME_NAME="OraDbHome"&nbsp;&nbsp; #需要修改的配置参数</div><div>TOPLEVEL_COMPONENT={"oracle.server","10.2.0.1.0"}</div><div>DEINSTALL_LIST={"oracle.server","10.2.0.1.0"}</div><div>SHOW_SPLASH_SCREEN=false</div><div>SHOW_WELCOME_PAGE=false</div><div>SHOW_NODE_SELECTION_PAGE=false</div><div>SHOW_SUMMARY_PAGE=false</div><div>SHOW_CUSTOM_TREE_PAGE=false</div><div>SHOW_INSTALL_PROGRESS_PAGE=false</div><div>SHOW_CONFIG_TOOL_PAGE=false</div><div>SHOW_XML_PREREQ_PAGE=false</div><div>SHOW_ROOTSH_CONFIRMATION=true</div><div>SHOW_END_SESSION_PAGE=false</div><div>SHOW_EXIT_CONFIRMATION=false</div><div>NEXT_SESSION=false&nbsp;&nbsp; #需要修改的配置参数</div><div>NEXT_SESSION_ON_FAIL=false&nbsp;&nbsp; #需要修改的配置参数</div><div>SHOW_DEINSTALL_CONFIRMATION=false</div><div>SHOW_DEINSTALL_PROGRESS=false</div><div>RESTART_SYSTEM=false&nbsp;&nbsp; #需要修改的配置参数</div><div>RESTART_REMOTE_SYSTEM=false&nbsp;&nbsp; #需要修改的配置参数</div><div>REMOVE_HOMES="/opt/oracle/product/10.2.0/db_1"&nbsp;&nbsp; #需要修改的配置参数</div><div>ORACLE_HOSTNAME="digoal.sky-mobi.com.hz"&nbsp;&nbsp; #需要修改的配置参数</div><div>SHOW_END_OF_INSTALL_MSGS=false</div><div>COMPONENT_LANGUAGES={"en"}</div><div>INSTALL_TYPE="EE"&nbsp;&nbsp; #需要修改的配置参数</div><div>oracle.server:DEPENDENCY_LIST={"oracle.rdbms:10.2.0.1.0","oracle.options:10.2.0.1.0","oracle.network:10.2.0.1.0","oracle.sysman.console.db:10.2.0.1.0","oracle.rdbms.oci:10.2.0.1.0","oracle.precomp:10.2.0.1.0","oracle.xdk:10.2.0.1.0","oracle.sqlplus.isqlplus:10.2.0.1.0","oracle.odbc:10.2.0.1.0"}</div><div>oracle.options:DEPENDENCY_LIST={"oracle.network.aso:10.2.0.1.0","oracle.rdbms.partitioning:10.2.0.1.0","oracle.sdo:10.2.0.1.0","oracle.oraolap:10.2.0.1.0","oracle.rdbms.lbac:10.2.0.1.0","oracle.rdbms.dmse:10.2.0.1.0"}&nbsp;&nbsp; #需要修改的配置参数</div><div>oracle.network:DEPENDENCY_LIST={"oracle.network.listener:10.2.0.1.0"}</div><div>s_nameForDBAGrp="dba"&nbsp;&nbsp; #需要修改的配置参数</div><div>varSelect=3&nbsp;&nbsp; #需要修改的配置参数</div><div>还有一些是注释掉的参数.</div><div>#开始安装</div></div><div>$&nbsp;./runInstaller -silent -responseFile $ORACLE_INSTALLCD/response/custom.rsp&nbsp;</div></div></div></div><div>安装完的话监听会默认安装.</div><div><br></div><div>【参考】</div><div><span style="font-family: Tahoma, sans-serif; line-height: normal; font-size: small;"><table summary="" cellspacing="0" cellpadding="0" width="100%" style="font-size: small;"><tbody><tr><td align="left" valign="top" style="vertical-align: top;"><b>Oracle? Database Installation Guide &nbsp;<span style="font-weight: normal; line-height: normal;"><b>10<i>g</i>&nbsp;Release 2 (10.2) for Linux x86<br><span style="font-weight: normal; line-height: normal; border-collapse: collapse;">Universal Installer and OPatch User's Guide for Windows and UNIX<br>ORACLE INSTALL CD/response/custom.rsp<br><br></span></b></span></b></td></tr></tbody></table></span><div><br></div></div></div>
	</div>
</div>
</body>
</html>