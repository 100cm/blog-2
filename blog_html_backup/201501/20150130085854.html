<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">use pickle dump & load data with file</h2>
	<h5 id="">2015-01-30 8:58:54&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201502931750278/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>pickle.dump 导出到文件</div><div>pickle.load 从文件读取</div><div>数据流格式为binary.</div><div>例子 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >[root@localhost ~]# vi test.py</font></div><div><font size="2"   >import pickle</font></div><div><font size="2"   >import sys</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >l_list = ['hello',['i',['am','digoal']]]</font></div><div><font size="2"   >with open("/tmp/abc.txt", "wb") as f1:</font></div><div><font size="2"   >&nbsp; pickle.dump(l_list, f1)</font></div><div><font size="2"   >with open("/tmp/abc.txt", "rb") as f2:</font></div><div><font size="2"   >&nbsp; new_list=pickle.load(f2)</font></div><div><font size="2"   >print(new_list,file=sys.stdout)</font></div></div><div><font size="2"   ><br></font></div><div><font size="2"   >输出</font></div><div><div><font size="2"   >[root@localhost ~]# python test.py</font></div><div><font size="2"   >['hello', ['i', ['am', 'digoal']]]</font></div></div><div><font size="2"   ><br></font></div><div><font size="2"   >pickle的格式是binary的, 直接读取是一堆乱码.</font></div><div><div><font size="2"   >[root@localhost ~]# cat /tmp/abc.txt&nbsp;</font></div><div><font size="2"   >?]q(Xhelloq]q(Xiq]q(XamqXdigoalqeee.</font></div></div><p></p></pre></div><wbr><div><br></div><div>[其他]</div><div>1.&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >print(*objects, sep=' ', end='\n', file=sys.stdout, flush=False)</font></div><div><font size="2"   >Print objects to the text stream file, separated by sep and followed by end. sep, end and file, if present, must be given as keyword arguments.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >All non-keyword arguments are converted to strings like str() does and written to the stream, separated by sep and followed by end. Both sep and end must be strings; they can also be None, which means to use the default values. If no objects are given, print() will just write end.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The file argument must be an object with a write(string) method; if it is not present or None, sys.stdout will be used. Since printed arguments are converted to text strings, print() cannot be used with binary mode file objects. For these, use file.write(...) instead.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Whether output is buffered is usually determined by file, but if the flush keyword argument is true, the stream is forcibly flushed.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Changed in version 3.3: Added the flush keyword argument.</font></div><p></p></pre></div><div>2.&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >The strip() &nbsp;method removes unwanted whitespace from strings.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The file argument to the print() BIF controls where data is sent/saved.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The finally suite is always executed no matter what exceptions occur within a try/except statement.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >An exception object is passed into the except suite and can be assigned to an identifier using the as keyword.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The str() &nbsp;BIF can be used to access the stringed representation of any data object that supports the conversion.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The locals() &nbsp;BIF returns a collection of variables within the current scope.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The in operator tests for membership.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The “+” operator concatenates two strings when used with strings but adds two numbers together when used with numbers.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The with statement automatically arranges to close all opened files, even when exceptions occur. The with statement uses the as keyword, too.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >sys.stdout is what Python calls “standard output” and is available from the standard library’s sys module.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The standard library’s pickle module lets you easily and efficiently save and restore Python data objects to disk.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The pickle.dump() &nbsp;function saves data to disk.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The pickle.load() &nbsp;function restores data from disk.</font></div><p></p></pre></div><div><br></div><div><br></div><div><br></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="https://docs.python.org/3/library/pickle.html#module-pickle"   >https://docs.python.org/3/library/pickle.html#module-pickle</a></div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="use pickle dump  load data with file - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>