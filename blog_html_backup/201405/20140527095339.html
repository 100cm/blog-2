<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Which Linux patch may affect PostgreSQL's Compatibility</h2>
	<h5 id="">2014-05-27 9:53:39&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201442794510407/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">PostgreSQL的运行可能依赖到一些操作系统的库函数, 或者第三方软件的库函数.&nbsp;<wbr><div>例如</div><div><div>[root@db-172-16-3-150 bin]# ldd postgres</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; linux-vdso.so.1 =&gt; &nbsp;(0x00007ffffe160000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libxml2.so.2 =&gt; /usr/lib64/libxml2.so.2 (0x0000003381400000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libpam.so.0 =&gt; /lib64/libpam.so.0 (0x0000003387800000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libssl.so.10 =&gt; /usr/lib64/libssl.so.10 (0x0000003284600000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libcrypto.so.10 =&gt; /usr/lib64/libcrypto.so.10 (0x0000003284200000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libdl.so.2 =&gt; /lib64/libdl.so.2 (0x0000003378400000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libm.so.6 =&gt; /lib64/libm.so.6 (0x0000003378c00000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libc.so.6 =&gt; /lib64/libc.so.6 (0x0000003377c00000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libz.so.1 =&gt; /lib64/libz.so.1 (0x0000003378800000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libaudit.so.1 =&gt; /lib64/libaudit.so.1 (0x0000003384800000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libcrypt.so.1 =&gt; /lib64/libcrypt.so.1 (0x000000337f800000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libgssapi_krb5.so.2 =&gt; /lib64/libgssapi_krb5.so.2 (0x0000003386400000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libkrb5.so.3 =&gt; /lib64/libkrb5.so.3 (0x0000003384c00000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libcom_err.so.2 =&gt; /lib64/libcom_err.so.2 (0x0000003384400000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libk5crypto.so.3 =&gt; /lib64/libk5crypto.so.3 (0x0000003386000000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /lib64/ld-linux-x86-64.so.2 (0x0000003377800000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libfreebl3.so =&gt; /lib64/libfreebl3.so (0x000000337f000000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libkrb5support.so.0 =&gt; /lib64/libkrb5support.so.0 (0x0000003385000000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libkeyutils.so.1 =&gt; /lib64/libkeyutils.so.1 (0x0000003385c00000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libresolv.so.2 =&gt; /lib64/libresolv.so.2 (0x0000003379c00000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x0000003378000000)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; libselinux.so.1 =&gt; /lib64/libselinux.so.1 (0x0000003379800000)</font></div><p></p></pre></div></div><div>如果操作系统补丁包涉及到这些文件的变更, 兼容性可能受到影响, 例如PostgreSQL用到的这些库中的某些函数的调用形式变更.</div><div>要完全了解兼容性, 还需要查看其他依赖库.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >ldd $PGHOME/bin/*|grep -oP "(/.*) "|sort|uniq</font></div><div><font size="2"   >ldd $PGHOME/lib/*|grep -oP "(/.*) "|sort|uniq</font></div><p></p></pre></div><div>检测依赖库文件对应的包.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >#!/bin/bash</font></div><div><font size="2"   >PGHOME=$1</font></div><div><font size="2"   >for i in `ldd $PGHOME/bin/*|grep -oP "(/.*) "|sort|uniq`; do</font></div><div><font size="2"   >&nbsp; rpm -qf $i</font></div><div><font size="2"   >done</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >for i in `ldd $PGHOME/lib/*|grep -oP "(/.*) "|sort|uniq`; do</font></div><div><font size="2"   >&nbsp; rpm -qf $i</font></div><div><font size="2"   >done</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[root@db-172-16-3-150 ~]# ./test.sh /home/pg93/pgsql9.3.3|sort|uniq</font></div><div><font size="2"   >ldd: warning: you do not have execution permission for `/home/pg93/pgsql9.3.3/lib/libecpg.a'</font></div><div><font size="2"   >ldd: warning: you do not have execution permission for `/home/pg93/pgsql9.3.3/lib/libecpg_compat.a'</font></div><div><font size="2"   >ldd: warning: you do not have execution permission for `/home/pg93/pgsql9.3.3/lib/libpgcommon.a'</font></div><div><font size="2"   >ldd: warning: you do not have execution permission for `/home/pg93/pgsql9.3.3/lib/libpgport.a'</font></div><div><font size="2"   >ldd: warning: you do not have execution permission for `/home/pg93/pgsql9.3.3/lib/libpgtypes.a'</font></div><div><font size="2"   >ldd: warning: you do not have execution permission for `/home/pg93/pgsql9.3.3/lib/libpq.a'</font></div><div><font size="2"   >ldd: /home/pg93/pgsql9.3.3/lib/pgxs: not regular file</font></div><div><font size="2"   >ldd: /home/pg93/pgsql9.3.3/lib/pkgconfig: not regular file</font></div><div><font size="2"   >audit-libs-2.2-2.el6.x86_64</font></div><div><font size="2"   >file /home/pg93/pgsql9.3.3/lib/libecpg.so.6 is not owned by any package</font></div><div><font size="2"   >file /home/pg93/pgsql9.3.3/lib/libpgtypes.so.3 is not owned by any package</font></div><div><font size="2"   >file /home/pg93/pgsql9.3.3/lib/libpq.so.5 is not owned by any package</font></div><div><font size="2"   >file /opt/python2.7.6/lib/libpython2.7.so.1.0 is not owned by any package</font></div><div><font size="2"   >file /opt/scws-1.2.2/lib/libscws.so.1 is not owned by any package</font></div><div><font size="2"   >glibc-2.12-1.132.el6.x86_64</font></div><div><font size="2"   >keyutils-libs-1.4-4.el6.x86_64</font></div><div><font size="2"   >krb5-libs-1.10.3-10.el6_4.6.x86_64</font></div><div><font size="2"   >libcom_err-1.41.12-14.el6_4.2.x86_64</font></div><div><font size="2"   >libselinux-2.0.94-5.3.el6.x86_64</font></div><div><font size="2"   >libxml2-2.7.6-12.el6_4.1.x86_64</font></div><div><font size="2"   >libxslt-1.1.26-2.el6_3.1.x86_64</font></div><div><font size="2"   >ncurses-libs-5.7-3.20090208.el6.x86_64</font></div><div><font size="2"   >nss-softokn-freebl-3.12.9-11.el6.x86_64</font></div><div><font size="2"   >openssl-1.0.1e-16.el6_5.7.x86_64</font></div><div><font size="2"   >pam-1.1.1-13.el6.x86_64</font></div><div><font size="2"   >perl-libs-5.10.1-129.el6.x86_64</font></div><div><font size="2"   >protobuf-c-0.15-2.el6.x86_64</font></div><div><font size="2"   >readline-6.0-4.el6.x86_64</font></div><div><font size="2"   >tcl-8.5.7-6.el6.x86_64</font></div><div><font size="2"   >zlib-1.2.3-29.el6.x86_64</font></div><p></p></pre></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="Which Linux patch may affect PostgreSQLs Compatibility - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>