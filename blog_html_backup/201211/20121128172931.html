<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">smartmontools monitor storage device's health status</h2>
	<h5 id="">2012-11-28 17:29:31&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020121028103934749/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>不管是SSD硬盘还是机械硬盘, 都有使用寿命.</div><div>大多数的硬盘是支持S.M.A.R.T的, 全称(<b style="font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;"  >Self-Monitoring, Analysis and Reporting Technology</b>)</div><div>smartmontools这个工具可以用来读取硬盘的smart信息, 进行测试, 改变一些属性等.</div><div>操作系统自带的smartmontools版本较低, 所以建议去源站下载一个最新的, 可以支持更多的硬盘.</div><div>使用smartmontools可以提前知道哪些硬盘可能要坏了, 做好预先更换的准备. 像EMC的CX4存储就带这个功能, 能够提前侦测出硬盘是否可能会坏了, 提前用hot spare盘顶上去. 这样能提高卷组的可靠性, 减少数据丢失的风险, 在硬盘数量较多的卷组中尤为重要.</div><div><br></div><div>我们也能够利用smartmontools这个工具来提前对硬盘的使用情况进行告警.</div><div><br></div><div>安装 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >wget&nbsp;http://downloads.sourceforge.net/project/smartmontools/smartmontools/6.0/smartmontools-6.0.tar.gz?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fsmartmontools%2Ffiles%2Fsmartmontools%2F6.0%2F&amp;ts=1354091701&amp;use_mirror=jaist</font></div><div><font size="2"  >tar -zxvf&nbsp;<span style="line-height: 22px;"  >smartmontools-6.0.tar.gz</span></font></div><div><font size="2"  ><span style="line-height: 22px;"  >cd&nbsp;</span><span style="line-height: 22px;"  >smartmontools-6.0</span></font></div><div><font size="2"  ><span style="line-height: 22px;"  >./configure --prefix=/opt/</span><span style="line-height: 22px;"  >smartmontools-6.0</span></font></div><div><span style="line-height: 22px;"  ><font size="2"  >make</font></span></div><div><span style="line-height: 22px;"  ><font size="2"  >make install</font></span></div><p></p></pre></div><div><span style="line-height: 22px;"  ><br></span></div><div>使用 :&nbsp;</div><div>查询你的硬盘是否在对应的smartmontools版本库中 :&nbsp;</div><div>硬盘是接在RAID卡上的, 所以这里要加上设备, &nbsp;后面有一个是PCI-E设备, 不需要加--device</div><div>以下是希捷的机械盘</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 ~]# /opt/smartmontools-6.0/sbin/smartctl --info --device=megaraid,1 /dev/sda</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >Vendor: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SEAGATE&nbsp;</font></div><div><font size="2"  >Product: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ST9146803SS &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"  >Revision: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FS03</font></div><div><font size="2"  >User Capacity: &nbsp; &nbsp; &nbsp; &nbsp;146,815,733,760 bytes [146 GB]</font></div><div><font size="2"  >Logical block size: &nbsp; 512 bytes</font></div><div><font size="2"  >Logical Unit id: &nbsp; &nbsp; &nbsp;0x5000c50016c512bb</font></div><div><font size="2"  >Serial number: &nbsp; &nbsp; &nbsp; &nbsp;3SD17SDR</font></div><div><font size="2"  >Device type: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;disk</font></div><div><font size="2"  >Transport protocol: &nbsp; SAS</font></div><div><font size="2"  >Local Time is: &nbsp; &nbsp; &nbsp; &nbsp;Wed Nov 28 16:37:48 2012 CST</font></div><div><font size="2"  >Device supports SMART and is Enabled</font></div><div><font size="2"  >Temperature Warning Disabled or Not Supported</font></div><p></p></pre></div><div><br></div><div>以下是一块DELL的SATA接口SSD硬盘, 注意这行 :&nbsp;</div><div><pre class="prettyprint"  ><p><font size="2"  >Device is: &nbsp; &nbsp; &nbsp; &nbsp;Not in smartctl database [for details use: -P showall]</font></p></pre></div><div><span style="line-height: 22px;"  >表示这个设备不在当前的smartctl库中.</span></div><div><span style="line-height: 22px;"  >库文件是源码中的</span>drivedb.h, 运行smartctl时可以替换这个文件, 使用-B选项.</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >&nbsp; -B [+]FILE, --drivedb=[+]FILE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Read and replace [add] drive database from FILE</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; [default is +/opt/smartmontools-6.0/etc/smart_drivedb.h</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;and then &nbsp; &nbsp;/opt/smartmontools-6.0/share/smartmontools/drivedb.h]</font></div><p></p></pre></div><div><br></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 ~]# /opt/smartmontools-6.0/sbin/smartctl --info --device=sat+megaraid,2 /dev/sdb</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >=== START OF INFORMATION SECTION ===</font></div><div><font size="2"  >Device Model: &nbsp; &nbsp; MZ-5EA2000-0D3</font></div><div><font size="2"  >Serial Number: &nbsp; &nbsp;S0SDNEABB01510</font></div><div><font size="2"  >LU WWN Device Id: 5 002538 250005b9c</font></div><div><font size="2"  >Firmware Version: AXM17D3Q</font></div><div><font size="2"  >User Capacity: &nbsp; &nbsp;200,049,647,616 bytes [200 GB]</font></div><div><font size="2"  >Sector Size: &nbsp; &nbsp; &nbsp;512 bytes logical/physical</font></div><div><font size="2"  >Rotation Rate: &nbsp; &nbsp;Solid State Device</font></div><div><font size="2"  >Device is: &nbsp; &nbsp; &nbsp; &nbsp;Not in smartctl database [for details use: -P showall]</font></div><div><font size="2"  >ATA Version is: &nbsp; ATA8-ACS T13/1699-D revision 6</font></div><div><font size="2"  >SATA Version is: &nbsp;SATA 2.6, 3.0 Gb/s</font></div><div><font size="2"  >Local Time is: &nbsp; &nbsp;Wed Nov 28 16:39:14 2012 CST</font></div><div><font size="2"  >SMART support is: Available - device has SMART capability.</font></div><div><font size="2"  >SMART support is: Enabled</font></div><p></p></pre></div><div><br></div><div>以下是OCZ RevoDrive3的PCI-E SSD硬盘 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 ~]# /opt/smartmontools-6.0/sbin/smartctl --info /dev/sdd</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >=== START OF INFORMATION SECTION ===</font></div><div><font size="2"  >Model Family: &nbsp; &nbsp; SandForce Driven SSDs</font></div><div><font size="2"  >Device Model: &nbsp; &nbsp; OCZ-REVODRIVE3</font></div><div><font size="2"  >Serial Number: &nbsp; &nbsp;OCZ-Z2134R0TLQBNE659</font></div><div><font size="2"  >LU WWN Device Id: 5 e83a97 e827c316e</font></div><div><font size="2"  >Firmware Version: 2.15</font></div><div><font size="2"  >User Capacity: &nbsp; &nbsp;240,068,197,888 bytes [240 GB]</font></div><div><font size="2"  >Sector Size: &nbsp; &nbsp; &nbsp;512 bytes logical/physical</font></div><div><font size="2"  >Rotation Rate: &nbsp; &nbsp;Solid State Device</font></div><div><font size="2"  >Device is: &nbsp; &nbsp; &nbsp; &nbsp;In smartctl database [for details use: -P show]</font></div><div><font size="2"  >ATA Version is: &nbsp; ATA8-ACS, ACS-2 T13/2015-D revision 3</font></div><div><font size="2"  >SATA Version is: &nbsp;SATA 3.0, 6.0 Gb/s (current: 6.0 Gb/s)</font></div><div><font size="2"  >Local Time is: &nbsp; &nbsp;Wed Nov 28 16:42:26 2012 CST</font></div><div><font size="2"  >SMART support is: Available - device has SMART capability.</font></div><div><font size="2"  >SMART support is: Enabled</font></div><p></p></pre></div><div>根据提示可以列出它的详细信息 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 ~]# /opt/smartmontools-6.0/sbin/smartctl -P show /dev/sdd</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >Drive found in smartmontools Database. &nbsp;Drive identity strings:</font></div><div><font size="2"  >MODEL: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;OCZ-REVODRIVE3</font></div><div><font size="2"  >FIRMWARE: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.15</font></div><div><font size="2"  >match smartmontools Drive Database entry:</font></div><div><font size="2"  >MODEL REGEXP: &nbsp; &nbsp; &nbsp; SandForce 1st Ed\.|ADATA SSD S(510|599) .?..GB|Corsair CSSD-F(40|60|80|115|120|160|240)GBP?2.*|Corsair Force (3 SSD|GT)|FM-25S2S-(60|120|240)GBP2|FTM(06|12|24|48)CT25H|KINGSTON SH100S3(120|240)G|OCZ[ -](AGILITY2([ -]EX)?|COLOSSUS2|ONYX2|VERTEX(2|-LE))( [123]\..*)?|OCZ-NOCTI|OCZ-REVODRIVE3?( X2)?|OCZ[ -](VELO|VERTEX2[ -](EX|PRO))( [123]\..*)?|D2[CR]STK251...-....|OCZ-(AGILITY3|SOLID3|VERTEX3( MI)?)|OCZ Z-DRIVE R4 [CR]M8[48]|(APOC|DENC|DENEVA|FTNC|GFGC|MANG|MMOC|NIMC|TMSC).*|(DENR|DRSAK|EC188|NIMR|PSIR|TRSAK).*|OWC Mercury Electra [36]G SSD|OWC Mercury Extreme Pro (RE )?SSD|Patriot Pyro|SanDisk SDSSDX(60|120|240|480)GG25|(TX32|TX31C1|VN0..GCNMK|VN0...GCNMK).*|(TX22D1|TX21B1).*|TX52D1.*|UGB(88P|99S)GC...H[BF].</font></div><div><font size="2"  >FIRMWARE REGEXP: &nbsp; &nbsp;.*</font></div><div><font size="2"  >MODEL FAMILY: &nbsp; &nbsp; &nbsp; SandForce Driven SSDs</font></div><div><font size="2"  >ATTRIBUTE OPTIONS: &nbsp;001 Raw_Read_Error_Rate</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 005 Retired_Block_Count</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 009 Power_On_Hours_and_Msec</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 013 Soft_Read_Error_Rate</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 100 Gigabytes_Erased</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 170 Reserve_Block_Count</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 171 Program_Fail_Count</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 172 Erase_Fail_Count</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 174 Unexpect_Power_Loss_Ct</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 177 Wear_Range_Delta</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 181 Program_Fail_Count</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 182 Erase_Fail_Count</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 184 IO_Error_Detect_Code_Ct</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 195 ECC_Uncorr_Error_Count</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 198 Uncorrectable_Sector_Ct</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 199 SATA_CRC_Error_Count</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 201 Unc_Soft_Read_Err_Rate</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 204 Soft_ECC_Correct_Rate</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 230 Life_Curve_Status</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 231 SSD_Life_Left</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 233 SandForce_Internal</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 234 SandForce_Internal</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 235 SuperCap_Health</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 241 Lifetime_Writes_GiB</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 242 Lifetime_Reads_GiB</font></div><p></p></pre></div><div>查看你的硬盘支持哪些SMART特性 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 smartmontools-6.0]# /opt/smartmontools-6.0/sbin/smartctl -c /dev/sdd</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >=== START OF READ SMART DATA SECTION ===</font></div><div><font size="2"  >General SMART Values:</font></div><div><font size="2"  >Offline data collection status: &nbsp;(0x00) Offline data collection activity</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; was never started.</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Auto Offline Data Collection: Disabled.</font></div><div><font size="2"  >Self-test execution status: &nbsp; &nbsp; &nbsp;( &nbsp; 0) The previous self-test routine completed</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; without error or no self-test has ever&nbsp;</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; been run.</font></div><div><font size="2"  >Total time to complete Offline&nbsp;</font></div><div><font size="2"  >data collection: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;( 2097) seconds.</font></div><div><font size="2"  >Offline data collection</font></div><div><font size="2"  >capabilities: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(0x7f) SMART execute Offline immediate.</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Auto Offline data collection on/off support.</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Abort Offline collection upon new</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; command.</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Offline surface scan supported.</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Self-test supported.</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Conveyance Self-test supported.</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Selective Self-test supported.</font></div><div><font size="2"  >SMART capabilities: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(0x0003) Saves SMART data before entering</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; power-saving mode.</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Supports SMART auto save timer.</font></div><div><font size="2"  >Error logging capability: &nbsp; &nbsp; &nbsp; &nbsp;(0x01) Error logging supported.</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; General Purpose Logging supported.</font></div><div><font size="2"  >Short self-test routine&nbsp;</font></div><div><font size="2"  >recommended polling time: &nbsp; &nbsp; &nbsp; &nbsp;( &nbsp; 1) minutes.</font></div><div><font size="2"  >Extended self-test routine</font></div><div><font size="2"  >recommended polling time: &nbsp; &nbsp; &nbsp; &nbsp;( &nbsp;48) minutes.</font></div><div><font size="2"  >Conveyance self-test routine</font></div><div><font size="2"  >recommended polling time: &nbsp; &nbsp; &nbsp; &nbsp;( &nbsp; 2) minutes.</font></div><div><font size="2"  >SCT capabilities: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(0x0021) SCT Status supported.</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SCT Data Table supported.</font></div><p></p></pre></div><div><br></div><div>健康查询 :&nbsp;</div><div>DELL SAS 机械盘 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 smartmontools-6.0]# /opt/smartmontools-6.0/sbin/smartctl -H -d megaraid,1 /dev/sda</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >SMART Health Status: OK</font></div><p></p></pre></div><div>DELL SATA SSD硬盘 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 smartmontools-6.0]# /opt/smartmontools-6.0/sbin/smartctl -H -d sat+megaraid,2 /dev/sdb</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >=== START OF READ SMART DATA SECTION ===</font></div><div><font size="2"  >SMART overall-health self-assessment test result: PASSED</font></div><div><font size="2"  >Warning: This result is based on an Attribute check.</font></div><p></p></pre></div><div>注意上面查询DELL SATA SSD盘是有一个告警, 这是一个BUG造成的. 如下</div><div><a target="_blank" rel="nofollow" href="http://sourceforge.net/apps/trac/smartmontools/ticket/149"  >http://sourceforge.net/apps/trac/smartmontools/ticket/149</a></div><div><a target="_blank" rel="nofollow" href="http://sourceforge.net/apps/trac/smartmontools/attachment/ticket/149/megaraid.patch"  >http://sourceforge.net/apps/trac/smartmontools/attachment/ticket/149/megaraid.patch</a></div><div>OCZ PCI-E SSD硬盘 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 smartmontools-6.0]# /opt/smartmontools-6.0/sbin/smartctl -H /dev/sdd</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >=== START OF READ SMART DATA SECTION ===</font></div><div><font size="2"  >SMART overall-health self-assessment test result: PASSED</font></div><p></p></pre></div><div><br></div><div>信息 :&nbsp;</div><div>列出所有信息使用-a, 或者 -x, 或者-A</div><div><br></div><div>测试 :&nbsp;</div><div><div style="line-height: 22px;"  ><pre class="prettyprint"  ><p></p><div style="line-height: 22px;"  ><font size="2"  >&nbsp; -t TEST, --test=TEST</font></div><div style="line-height: 22px;"  ><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Run test. TEST: offline, short, long, conveyance, force, vendor,N,</font></div><div style="line-height: 22px;"  ><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; select,M-N, pending,N, afterselect,[on|off]</font></div><p></p></pre></div></div><div style="line-height: 22px;"  >例如 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 smartmontools-6.0]# /opt/smartmontools-6.0/sbin/smartctl -t short -d sat+megaraid,2 /dev/sdb</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >=== START OF OFFLINE IMMEDIATE AND SELF-TEST SECTION ===</font></div><div><font size="2"  >Sending command: "Execute SMART Short self-test routine immediately in off-line mode".</font></div><div><font size="2"  >Drive command "Execute SMART Short self-test routine immediately in off-line mode" successful.</font></div><div><font size="2"  >Testing has begun.</font></div><div><font size="2"  >Please wait 1 minutes for test to complete.</font></div><div><font size="2"  >Test will complete after Wed Nov 28 17:11:37 2012</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >Use smartctl -X to abort test.</font></div><p></p></pre></div><div>使用 -X 可以中断它.</div><div style="line-height: 22px;"  ><br></div><div style="line-height: 22px;"  >查看测试结果 :&nbsp;</div><div style="line-height: 22px;"  >这里第一条表示当前还有测试未完成.</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 smartmontools-6.0]# /opt/smartmontools-6.0/sbin/smartctl -l selftest -d sat+megaraid,2 /dev/sdb</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >=== START OF READ SMART DATA SECTION ===</font></div><div><font size="2"  >SMART Self-test log structure revision number 1</font></div><div><font size="2"  >Num &nbsp;Test_Description &nbsp; &nbsp;Status &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Remaining &nbsp;LifeTime(hours) &nbsp;LBA_of_first_error</font></div><div><font size="2"  ># 1 &nbsp;Short offline &nbsp; &nbsp; &nbsp; Self-test routine in progress 60% &nbsp; &nbsp; &nbsp;2376 &nbsp; &nbsp; &nbsp; &nbsp; -</font></div><div><font size="2"  ># 2 &nbsp;Short offline &nbsp; &nbsp; &nbsp; Completed without error &nbsp; &nbsp; &nbsp; 00% &nbsp; &nbsp; &nbsp;2375 &nbsp; &nbsp; &nbsp; &nbsp; -</font></div><p></p></pre></div><div><br></div><div>命令行参数 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 man8]# /opt/smartmontools-6.0/sbin/smartctl --help</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >Usage: smartctl [options] device</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >============================================ SHOW INFORMATION OPTIONS =====</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -h, --help, --usage</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Display this help and exit</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -V, --version, --copyright, --license</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Print license, copyright, and version information and exit</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -i, --info</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Show identity information for device</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; --identify[=[w][nvb]]</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Show words and bits from IDENTIFY DEVICE data &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(ATA)</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -g NAME, --get=NAME</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Get device setting: all, aam, apm, lookahead, security, wcache</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -a, --all</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Show all SMART information for device</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -x, --xall</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Show all information for device</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; --scan</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Scan for devices</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; --scan-open</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Scan for devices and try to open each device</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >================================== SMARTCTL RUN-TIME BEHAVIOR OPTIONS =====</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -q TYPE, --quietmode=TYPE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Set smartctl quiet mode to one of: errorsonly, silent, noserial</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -d TYPE, --device=TYPE</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Specify device type to one of: ata, scsi, sat[,auto][,N][+TYPE], usbcypress[,X], usbjmicron[,x][,N], usbsunplus, marvell, areca,N/E, 3ware,N, hpt,L/M/N, megaraid,N, cciss,N, auto, test</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -T TYPE, --tolerance=TYPE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Tolerance: normal, conservative, permissive, verypermissive</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -b TYPE, --badsum=TYPE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Set action on bad checksum to one of: warn, exit, ignore</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -r TYPE, --report=TYPE</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Report transactions (see man page)</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -n MODE, --nocheck=MODE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;No check if: never, sleep, standby, idle (see man page)</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >============================== DEVICE FEATURE ENABLE/DISABLE COMMANDS =====</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -s VALUE, --smart=VALUE</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Enable/disable SMART on device (on/off)</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -o VALUE, --offlineauto=VALUE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Enable/disable automatic offline testing on device (on/off)</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -S VALUE, --saveauto=VALUE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Enable/disable Attribute autosave on device (on/off)</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -s NAME[,VALUE], --set=NAME[,VALUE]</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Enable/disable/change device setting: aam,[N|off], apm,[N|off],</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; lookahead,[on|off], security-freeze, standby,[N|off|now],</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; wcache,[on|off]</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >======================================= READ AND DISPLAY DATA OPTIONS =====</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -H, --health</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Show device SMART health status</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -c, --capabilities &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Show device SMART capabilities</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -A, --attributes</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Show device SMART vendor-specific Attributes and values</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -f FORMAT, --format=FORMAT &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Set output format for attributes: old, brief, hex[,id|val]</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -l TYPE, --log=TYPE</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Show device log. TYPE: error, selftest, selective, directory[,g|s],</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;xerror[,N][,error], xselftest[,N][,selftest],</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;background, sasphy[,reset], sataphy[,reset],</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;scttemp[sts,hist], scttempint,N[,p],</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;scterc[,N,M], devstat[,N], ssd,</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gplog,N[,RANGE], smartlog,N[,RANGE]</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -v N,OPTION , --vendorattribute=N,OPTION &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Set display OPTION for vendor Attribute N (see man page)</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -F TYPE, --firmwarebug=TYPE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Use firmware bug workaround:</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; none, nologdir, samsung, samsung2, samsung3, xerrorlba, swapid</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -P TYPE, --presets=TYPE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Drive-specific presets: use, ignore, show, showall</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -B [+]FILE, --drivedb=[+]FILE &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (ATA)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Read and replace [add] drive database from FILE</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; [default is +/opt/smartmontools-6.0/etc/smart_drivedb.h</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;and then &nbsp; &nbsp;/opt/smartmontools-6.0/share/smartmontools/drivedb.h]</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >============================================ DEVICE SELF-TEST OPTIONS =====</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -t TEST, --test=TEST</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Run test. TEST: offline, short, long, conveyance, force, vendor,N,</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; select,M-N, pending,N, afterselect,[on|off]</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -C, --captive</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Do test in captive mode (along with -t)</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; -X, --abort</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; Abort any non-captive test on device</font></div><p></p></pre></div><div><br></div><div>使用例子 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >=================================================== SMARTCTL EXAMPLES =====</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; smartctl --all /dev/hda &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(Prints all SMART information)</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; smartctl --smart=on --offlineauto=on --saveauto=on /dev/hda</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (Enables SMART on first disk)</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; smartctl --test=long /dev/hda &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(Executes extended disk self-test)</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; smartctl --attributes --log=selftest --quietmode=errorsonly /dev/hda</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (Prints Self-Test &amp; Attribute errors)</font></div><div><font size="2"  >&nbsp; smartctl --all --device=3ware,2 /dev/sda</font></div><div><font size="2"  >&nbsp; smartctl --all --device=3ware,2 /dev/twe0</font></div><div><font size="2"  >&nbsp; smartctl --all --device=3ware,2 /dev/twa0</font></div><div><font size="2"  >&nbsp; smartctl --all --device=3ware,2 /dev/twl0</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (Prints all SMART info for 3rd ATA disk on 3ware RAID controller)</font></div><div><font size="2"  >&nbsp; smartctl --all --device=hpt,1/1/3 /dev/sda</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (Prints all SMART info for the SATA disk attached to the 3rd PMPort</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;of the 1st channel on the 1st HighPoint RAID controller)</font></div><div><font size="2"  >&nbsp; smartctl --all --device=areca,3/1 /dev/sg2</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (Prints all SMART info for 3rd ATA disk of the 1st enclosure</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;on Areca RAID controller)</font></div><p></p></pre></div><div><br></div><div>SMART属性介绍 :&nbsp;</div><div>参见 :&nbsp;<a target="_blank" rel="nofollow" href="http://en.wikipedia.org/wiki/S.M.A.R.T."  >http://en.wikipedia.org/wiki/S.M.A.R.T.</a></div><div>这里有个表, 但不是每个硬盘厂商的都一样, 可能略有变化.&nbsp;</div><div>具体请看smartctl -A的输出.</div><div>例如 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 smartmontools-6.0]# /opt/smartmontools-6.0/sbin/smartctl -A /dev/sdd</font></div><div><font size="2"  >smartctl 6.0 2012-10-10 r3643 [x86_64-linux-2.6.18-274.el5] (local build)</font></div><div><font size="2"  >Copyright (C) 2002-12, Bruce Allen, Christian Franke, www.smartmontools.org</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >=== START OF READ SMART DATA SECTION ===</font></div><div><font size="2"  >SMART Attributes Data Structure revision number: 10</font></div><div><font size="2"  >Vendor Specific SMART Attributes with Thresholds:</font></div><div><font size="2"  >ID# ATTRIBUTE_NAME &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;FLAG &nbsp; &nbsp; VALUE WORST THRESH TYPE &nbsp; &nbsp; &nbsp;UPDATED &nbsp;WHEN_FAILED RAW_VALUE</font></div><div><font size="2"  >&nbsp; 1 Raw_Read_Error_Rate &nbsp; &nbsp; 0x000f &nbsp; 083 &nbsp; 083 &nbsp; 050 &nbsp; &nbsp;Pre-fail &nbsp;Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 0/72989578</font></div><div><font size="2"  >&nbsp; 5 Retired_Block_Count &nbsp; &nbsp; 0x0033 &nbsp; 100 &nbsp; 100 &nbsp; 003 &nbsp; &nbsp;Pre-fail &nbsp;Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"  >&nbsp; 9 Power_On_Hours_and_Msec 0x0032 &nbsp; 100 &nbsp; 100 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 122h+57m+28.195s</font></div><div><font size="2"  >&nbsp;12 Power_Cycle_Count &nbsp; &nbsp; &nbsp; 0x0032 &nbsp; 100 &nbsp; 100 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 8</font></div><div><font size="2"  >171 Program_Fail_Count &nbsp; &nbsp; &nbsp;0x0032 &nbsp; 000 &nbsp; 000 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"  >172 Erase_Fail_Count &nbsp; &nbsp; &nbsp; &nbsp;0x0032 &nbsp; 000 &nbsp; 000 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"  >174 Unexpect_Power_Loss_Ct &nbsp;0x0030 &nbsp; 000 &nbsp; 000 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Offline &nbsp; &nbsp; &nbsp;- &nbsp; &nbsp; &nbsp; 7</font></div><div><font size="2"  >177 Wear_Range_Delta &nbsp; &nbsp; &nbsp; &nbsp;0x0000 &nbsp; 000 &nbsp; 000 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Offline &nbsp; &nbsp; &nbsp;- &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"  >181 Program_Fail_Count &nbsp; &nbsp; &nbsp;0x0032 &nbsp; 000 &nbsp; 000 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"  >182 Erase_Fail_Count &nbsp; &nbsp; &nbsp; &nbsp;0x0032 &nbsp; 000 &nbsp; 000 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"  >187 Reported_Uncorrect &nbsp; &nbsp; &nbsp;0x0032 &nbsp; 100 &nbsp; 100 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"  >194 Temperature_Celsius &nbsp; &nbsp; 0x0022 &nbsp; 030 &nbsp; 030 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 30 (Min/Max 30/30)</font></div><div><font size="2"  >195 ECC_Uncorr_Error_Count &nbsp;0x001c &nbsp; 120 &nbsp; 120 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Offline &nbsp; &nbsp; &nbsp;- &nbsp; &nbsp; &nbsp; 0/72989578</font></div><div><font size="2"  >196 Reallocated_Event_Count 0x0033 &nbsp; 100 &nbsp; 100 &nbsp; 003 &nbsp; &nbsp;Pre-fail &nbsp;Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"  >201 Unc_Soft_Read_Err_Rate &nbsp;0x001c &nbsp; 120 &nbsp; 120 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Offline &nbsp; &nbsp; &nbsp;- &nbsp; &nbsp; &nbsp; 0/72989578</font></div><div><font size="2"  >204 Soft_ECC_Correct_Rate &nbsp; 0x001c &nbsp; 120 &nbsp; 120 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Offline &nbsp; &nbsp; &nbsp;- &nbsp; &nbsp; &nbsp; 0/72989578</font></div><div><font size="2"  >230 Life_Curve_Status &nbsp; &nbsp; &nbsp; 0x0013 &nbsp; 100 &nbsp; 100 &nbsp; 000 &nbsp; &nbsp;Pre-fail &nbsp;Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 100</font></div><div><font size="2"  >231 SSD_Life_Left &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x0013 &nbsp; 100 &nbsp; 100 &nbsp; 010 &nbsp; &nbsp;Pre-fail &nbsp;Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"  >233 SandForce_Internal &nbsp; &nbsp; &nbsp;0x0000 &nbsp; 000 &nbsp; 000 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Offline &nbsp; &nbsp; &nbsp;- &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"  >234 SandForce_Internal &nbsp; &nbsp; &nbsp;0x0000 &nbsp; 000 &nbsp; 000 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Offline &nbsp; &nbsp; &nbsp;- &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"  >241 Lifetime_Writes_GiB &nbsp; &nbsp; 0x0032 &nbsp; 000 &nbsp; 000 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 15503</font></div><div><font size="2"  >242 Lifetime_Reads_GiB &nbsp; &nbsp; &nbsp;0x0032 &nbsp; 000 &nbsp; 000 &nbsp; 000 &nbsp; &nbsp;Old_age &nbsp; Always &nbsp; &nbsp; &nbsp; - &nbsp; &nbsp; &nbsp; 101</font></div><p></p></pre></div><div>以上是OCZ PCI-E RevoDrive3的输出, 所以要到OCZ厂商索取SMART的attribute信息表, 根据芯片不同, 也有不同的smart属性.</div><div>如下 :&nbsp;</div><div><a target="_blank" rel="nofollow" href="http://www.ocztechnologyforum.com/forum/showthread.php?79848-THE-BASIC-GUIDE-amp-FAQ-ABC-for-OCZ-SSD&amp;p=567596&amp;viewfull=1#post567596"  >http://www.ocztechnologyforum.com/forum/showthread.php?79848-THE-BASIC-GUIDE-amp-FAQ-ABC-for-OCZ-SSD&amp;p=567596&amp;viewfull=1#post567596</a></div><div><a target="_blank" rel="nofollow" href="http://www.ocztechnologyforum.com/forum/showthread.php?75786-SMART-Attributes-for-Sandforce-SSD-s-%28Agility2-Vertex2-VertexLE%29"  >http://www.ocztechnologyforum.com/forum/showthread.php?75786-SMART-Attributes-for-Sandforce-SSD-s-%28Agility2-Vertex2-VertexLE%29</a></div><div><a target="_blank" rel="nofollow" href="http://www.ocztechnologyforum.com/forum/showthread.php?75787-SMART-Attributes-for-Indilinx-based-drives-%28Agility-Vertex-Solid2%29"  >http://www.ocztechnologyforum.com/forum/showthread.php?75787-SMART-Attributes-for-Indilinx-based-drives-%28Agility-Vertex-Solid2%29</a></div><div><br></div><div>其他 :&nbsp;</div><div>smartd 可以用来调度硬盘检查计划.</div><div>配置文件的写法参考man smartd.conf</div><div><br></div><div>【参考】</div>1.&nbsp;<wbr><a target="_blank" rel="nofollow" href="http://sourceforge.net/projects/smartmontools/"  >http://sourceforge.net/projects/smartmontools/</a><div>2.&nbsp;<a target="_blank" rel="nofollow" href="http://en.wikipedia.org/wiki/S.M.A.R.T."  >http://en.wikipedia.org/wiki/S.M.A.R.T.</a></div><div>3.&nbsp;<a target="_blank" rel="nofollow" href="http://en.wikipedia.org/wiki/Self-Monitoring%2C_Analysis%2C_and_Reporting_Technology"  >http://en.wikipedia.org/wiki/Self-Monitoring%2C_Analysis%2C_and_Reporting_Technology</a></div><div>4.&nbsp;<a target="_blank" rel="nofollow" href="http://www.smartmontools.org"  >http://www.smartmontools.org</a><br><div>5.&nbsp;<a target="_blank" rel="nofollow" href="http://www.oczenterprise.com/whitepapers/white-paper-write-amplification-trim-and-gc.pdf"  >http://www.oczenterprise.com/whitepapers/white-paper-write-amplification-trim-and-gc.pdf</a></div><div>6.&nbsp;<a target="_blank" rel="nofollow" href="http://www.oczenterprise.com/files/updates/OCZToolbox_v4.2.0.3480_linux.tar.gz"  >http://www.oczenterprise.com/files/updates/OCZToolbox_v4.2.0.3480_linux.tar.gz</a></div><div>7.&nbsp;<a target="_blank" rel="nofollow" href="http://smartmontools.svn.sourceforge.net/viewvc/smartmontools/trunk/smartmontools/drivedb.h"  >http://smartmontools.svn.sourceforge.net/viewvc/smartmontools/trunk/smartmontools/drivedb.h</a></div><div>8.&nbsp;<a target="_blank" rel="nofollow" href="http://gsmartcontrol.berlios.de/home/index.php/en/Home"  >http://gsmartcontrol.berlios.de/home/index.php/en/Home</a></div><div>9. man smartctl</div><div>10. man smartd</div><div>11. man smartd.conf</div><div>12.&nbsp;<a target="_blank" rel="nofollow" href="http://sourceforge.net/apps/trac/smartmontools/"  >http://sourceforge.net/apps/trac/smartmontools/</a></div><div>13.&nbsp;<a style="line-height: 22px;" target="_blank" rel="nofollow" href="http://www.samsung.com/global/business/semiconductor/minisite/Greenmemory/products/green-ssd"  >http://www.samsung.com/global/business/semiconductor/minisite/Greenmemory/products/green-ssd</a></div><div><br></div></div></div>
	</div>
</div>
</body>
</html>