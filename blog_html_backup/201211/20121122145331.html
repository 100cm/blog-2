<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL compile CFLAGS=-O2 diff default CFLAGS=-O3</h2>
	<h5 id="">2012-11-22 14:53:31&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402012102224352198/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">gcc编译器编译PostgreSQL时, 默认的Optimize级别是O2,<wbr><div>在配置了CFLAGS=-O3后编译出来的代码有少许区别。</div><div>例如 :&nbsp;</div><div>默认O2编译</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >tar -jxvf postgresql-9.2.1.tar.bz2</font></div><div><font size="2"   >cd postgresql-9.2.1</font></div><div><font size="2"   >./configure --prefix=/opt/pgsql9.2.1-O2 --with-pgport=9201 --with-perl --with-python --with-tcl --with-openssl --with-pam --without-ldap --with-libxml --with-libxslt --enable-thread-safety --with-wal-blocksize=16 --with-ossp-uuid --with-libs=/opt/uuid-1.6.2/lib</font></div><div><font size="2"   >gmake world</font></div><div><font size="2"   >gmake install-world</font></div><p></p></pre></div><div>编译完后在config.log中能看到如下信息</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >CC='gcc'</font></div><div><font size="2"   >CFLAGS='-O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -Wmissing-format-attribute -Wfor</font></div><div><font size="2"   >mat-security -fno-strict-aliasing -fwrapv'</font></div></div><div><font size="2"   >LDFLAGS=' &nbsp;-L/opt/uuid-1.6.2/lib'</font></div><p></p></pre></div><div><br></div><div>使用-O3编译 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >export CFLAGS=-O3</font></div><div><div style="line-height: 22px;"   ><font size="2"   >tar -jxvf postgresql-9.2.1.tar.bz2</font></div><div style="line-height: 22px;"   ><font size="2"   >cd postgresql-9.2.1</font></div><div style="line-height: 22px;"   ><font size="2"   >./configure --prefix=/opt/pgsql9.2.1-O3 --with-pgport=9201 --with-perl --with-python --with-tcl --with-openssl --with-pam --without-ldap --with-libxml --with-libxslt --enable-thread-safety --with-wal-blocksize=16 --with-ossp-uuid --with-libs=/opt/uuid-1.6.2/lib</font></div><div style="line-height: 22px;"   ><font size="2"   >gmake world</font></div><div style="line-height: 22px;"   ><font size="2"   >gmake install-world</font></div></div><p></p></pre></div><div><div style="line-height: 22px;"   >编译完后在config.log中能看到如下信息</div></div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >ac_cv_env_CFLAGS_set=set</font></div><div><font size="2"   >ac_cv_env_CFLAGS_value=-O3</font></div></div><div><font size="2"   >CC='gcc'</font></div><div><font size="2"   >CFLAGS='-O3 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -Wmissing-format-attribute -Wformat-security -fno-strict-aliasing -fwrapv'</font></div><div><font size="2"   >LDFLAGS=' &nbsp;-L/opt/uuid-1.6.2/lib'</font></div><p></p></pre></div><div><br></div><div>比较两个编译出来的文件的SIZE, 看看有哪些文件的SIZE是有差别的 :&nbsp;</div><div>需要更清晰的比较差别最好使用md5的值进行比较.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >cd /opt</font></div><div><font size="2"   >ls -lRa pgsql9.2.1-O2|awk '{print $5" "$9}' &gt;/tmp/O2</font></div><div><font size="2"   >ls -lRa pgsql9.2.1-O3|awk '{print $5" "$9}' &gt;/tmp/O3</font></div><div><div><font size="2"   >diff -c /tmp/O2 /tmp/O3</font></div></div><p></p></pre></div><div><div>结果如下 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >*** /tmp/O2 &nbsp; &nbsp; 2012-11-22 14:36:30.000000000 +0800</font></div><div><font size="2"   >--- /tmp/O3 &nbsp; &nbsp; 2012-11-22 14:36:24.000000000 +0800</font></div><div><font size="2"   >***************</font></div><div><font size="2"   >*** 11,50 ****</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 4096 .</font></div><div><font size="2"   >&nbsp; 4096 ..</font></div><div><font size="2"   >! 59450 clusterdb</font></div><div><font size="2"   >! 59512 createdb</font></div><div><font size="2"   >! 60515 createlang</font></div><div><font size="2"   >! 60218 createuser</font></div><div><font size="2"   >! 55761 dropdb</font></div><div><font size="2"   >! 60345 droplang</font></div><div><font size="2"   >! 55731 dropuser</font></div><div><font size="2"   >! 741818 ecpg</font></div><div><font size="2"   >! 94021 initdb</font></div><div><font size="2"   >! 26179 oid2name</font></div><div><font size="2"   >! 20841 pg_archivecleanup</font></div><div><font size="2"   >! 56281 pg_basebackup</font></div><div><font size="2"   >! 54801 pgbench</font></div><div><font size="2"   >! 30599 pg_config</font></div><div><font size="2"   >! 26976 pg_controldata</font></div><div><font size="2"   >! 40922 pg_ctl</font></div><div><font size="2"   >! 325072 pg_dump</font></div><div><font size="2"   >! 80008 pg_dumpall</font></div><div><font size="2"   >! 41663 pg_receivexlog</font></div><div><font size="2"   >! 35022 pg_resetxlog</font></div><div><font size="2"   >! 133967 pg_restore</font></div><div><font size="2"   >! 25908 pg_standby</font></div><div><font size="2"   >! 22144 pg_test_fsync</font></div><div><font size="2"   >! 16823 pg_test_timing</font></div><div><font size="2"   >! 102335 pg_upgrade</font></div><div><font size="2"   >&nbsp; 2213 pltcl_delmod</font></div><div><font size="2"   >&nbsp; 2371 pltcl_listmod</font></div><div><font size="2"   >&nbsp; 11449 pltcl_loadmod</font></div><div><font size="2"   >! 5831591 postgres</font></div><div><font size="2"   >&nbsp; 8 postmaster</font></div><div><font size="2"   >! 430151 psql</font></div><div><font size="2"   >! 59482 reindexdb</font></div><div><font size="2"   >! 36444 vacuumdb</font></div><div><font size="2"   >! 26312 vacuumlo</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >--- 11,50 ----</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 4096 .</font></div><div><font size="2"   >&nbsp; 4096 ..</font></div><div><font size="2"   >! 60283 clusterdb</font></div><div><font size="2"   >! 63449 createdb</font></div><div><font size="2"   >! 63240 createlang</font></div><div><font size="2"   >! 63867 createuser</font></div><div><font size="2"   >! 59186 dropdb</font></div><div><font size="2"   >! 63102 droplang</font></div><div><font size="2"   >! 59156 dropuser</font></div><div><font size="2"   >! 753273 ecpg</font></div><div><font size="2"   >! 96240 initdb</font></div><div><font size="2"   >! 27047 oid2name</font></div><div><font size="2"   >! 20716 pg_archivecleanup</font></div><div><font size="2"   >! 56110 pg_basebackup</font></div><div><font size="2"   >! 54637 pgbench</font></div><div><font size="2"   >! 30437 pg_config</font></div><div><font size="2"   >! 27451 pg_controldata</font></div><div><font size="2"   >! 44859 pg_ctl</font></div><div><font size="2"   >! 338871 pg_dump</font></div><div><font size="2"   >! 82917 pg_dumpall</font></div><div><font size="2"   >! 41538 pg_receivexlog</font></div><div><font size="2"   >! 35641 pg_resetxlog</font></div><div><font size="2"   >! 141088 pg_restore</font></div><div><font size="2"   >! 26477 pg_standby</font></div><div><font size="2"   >! 22888 pg_test_fsync</font></div><div><font size="2"   >! 17344 pg_test_timing</font></div><div><font size="2"   >! 103177 pg_upgrade</font></div><div><font size="2"   >&nbsp; 2213 pltcl_delmod</font></div><div><font size="2"   >&nbsp; 2371 pltcl_listmod</font></div><div><font size="2"   >&nbsp; 11449 pltcl_loadmod</font></div><div><font size="2"   >! 6155088 postgres</font></div><div><font size="2"   >&nbsp; 8 postmaster</font></div><div><font size="2"   >! 438212 psql</font></div><div><font size="2"   >! 63419 reindexdb</font></div><div><font size="2"   >! 36319 vacuumdb</font></div><div><font size="2"   >! 26817 vacuumlo</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >***************</font></div><div><font size="2"   >*** 804,885 ****</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 4096 .</font></div><div><font size="2"   >&nbsp; 4096 ..</font></div><div><font size="2"   >! 16801 adminpack.so</font></div><div><font size="2"   >&nbsp; 6985 ascii_and_mic.so</font></div><div><font size="2"   >&nbsp; 6773 auth_delay.so</font></div><div><font size="2"   >&nbsp; 13689 auto_explain.so</font></div><div><font size="2"   >&nbsp; 9994 autoinc.so</font></div><div><font size="2"   >&nbsp; 52347 btree_gin.so</font></div><div><font size="2"   >! 104267 btree_gist.so</font></div><div><font size="2"   >&nbsp; 9628 chkpass.so</font></div><div><font size="2"   >&nbsp; 11768 citext.so</font></div><div><font size="2"   >! 54075 cube.so</font></div><div><font size="2"   >! 17754 cyrillic_and_mic.so</font></div><div><font size="2"   >! 53174 dblink.so</font></div><div><font size="2"   >&nbsp; 8494 dict_int.so</font></div><div><font size="2"   >! 469517 dict_snowball.so</font></div><div><font size="2"   >! 11340 dict_xsyn.so</font></div><div><font size="2"   >&nbsp; 7223 dummy_seclabel.so</font></div><div><font size="2"   >! 7357 earthdistance.so</font></div><div><font size="2"   >! 8959 euc2004_sjis2004.so</font></div><div><font size="2"   >&nbsp; 7311 euc_cn_and_mic.so</font></div><div><font size="2"   >&nbsp; 14726 euc_jp_and_sjis.so</font></div><div><font size="2"   >&nbsp; 7460 euc_kr_and_mic.so</font></div><div><font size="2"   >! 13478 euc_tw_and_big5.so</font></div><div><font size="2"   >&nbsp; 20688 file_fdw.so</font></div><div><font size="2"   >! 30774 fuzzystrmatch.so</font></div><div><font size="2"   >! 65683 hstore.so</font></div><div><font size="2"   >&nbsp; 9295 insert_username.so</font></div><div><font size="2"   >! 55181 _int.so</font></div><div><font size="2"   >! 102467 isn.so</font></div><div><font size="2"   >! 10326 latin2_and_win1250.so</font></div><div><font size="2"   >&nbsp; 8707 latin_and_mic.so</font></div><div><font size="2"   >! 149794 libecpg.a</font></div><div><font size="2"   >! 18852 libecpg_compat.a</font></div><div><font size="2"   >&nbsp; 21 libecpg_compat.so</font></div><div><font size="2"   >&nbsp; 21 libecpg_compat.so.3</font></div><div><font size="2"   >&nbsp; 23295 libecpg_compat.so.3.4</font></div><div><font size="2"   >&nbsp; 14 libecpg.so</font></div><div><font size="2"   >&nbsp; 14 libecpg.so.6</font></div><div><font size="2"   >! 86969 libecpg.so.6.4</font></div><div><font size="2"   >! 66294 libpgport.a</font></div><div><font size="2"   >! 101200 libpgtypes.a</font></div><div><font size="2"   >&nbsp; 17 libpgtypes.so</font></div><div><font size="2"   >&nbsp; 17 libpgtypes.so.3</font></div><div><font size="2"   >! 68934 libpgtypes.so.3.3</font></div><div><font size="2"   >! 286216 libpq.a</font></div><div><font size="2"   >&nbsp; 12 libpq.so</font></div><div><font size="2"   >&nbsp; 12 libpq.so.5</font></div><div><font size="2"   >! 188991 libpq.so.5.5</font></div><div><font size="2"   >&nbsp; 14807 libpqwalreceiver.so</font></div><div><font size="2"   >&nbsp; 7811 lo.so</font></div><div><font size="2"   >! 69635 ltree.so</font></div><div><font size="2"   >&nbsp; 9307 moddatetime.so</font></div><div><font size="2"   >! 22209 pageinspect.so</font></div><div><font size="2"   >&nbsp; 8413 passwordcheck.so</font></div><div><font size="2"   >! 9295 pg_buffercache.so</font></div><div><font size="2"   >! 137978 pgcrypto.so</font></div><div><font size="2"   >&nbsp; 7294 pg_freespacemap.so</font></div><div><font size="2"   >&nbsp; 12278 pgrowlocks.so</font></div><div><font size="2"   >! 32384 pg_stat_statements.so</font></div><div><font size="2"   >! 19963 pgstattuple.so</font></div><div><font size="2"   >! 28357 pg_trgm.so</font></div><div><font size="2"   >&nbsp; 11826 pg_upgrade_support.so</font></div><div><font size="2"   >! 26916 pgxml.so</font></div><div><font size="2"   >&nbsp; 4096 pgxs</font></div><div><font size="2"   >! 116047 plperl.so</font></div><div><font size="2"   >! 175180 plpgsql.so</font></div><div><font size="2"   >! 134743 plpython2.so</font></div><div><font size="2"   >! 40887 pltcl.so</font></div><div><font size="2"   >! 16862 refint.so</font></div><div><font size="2"   >! 38478 seg.so</font></div><div><font size="2"   >&nbsp; 15809 sslinfo.so</font></div><div><font size="2"   >! 25352 tablefunc.so</font></div><div><font size="2"   >&nbsp; 10179 tcn.so</font></div><div><font size="2"   >&nbsp; 8097 test_parser.so</font></div><div><font size="2"   >! 15673 timetravel.so</font></div><div><font size="2"   >! 31889 tsearch2.so</font></div><div><font size="2"   >! 13877 unaccent.so</font></div><div><font size="2"   >&nbsp; 6990 utf8_and_ascii.so</font></div><div><font size="2"   >&nbsp; 228417 utf8_and_big5.so</font></div><div><font size="2"   >&nbsp; 12223 utf8_and_cyrillic.so</font></div><div><font size="2"   >--- 804,885 ----</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 4096 .</font></div><div><font size="2"   >&nbsp; 4096 ..</font></div><div><font size="2"   >! 16904 adminpack.so</font></div><div><font size="2"   >&nbsp; 6985 ascii_and_mic.so</font></div><div><font size="2"   >&nbsp; 6773 auth_delay.so</font></div><div><font size="2"   >&nbsp; 13689 auto_explain.so</font></div><div><font size="2"   >&nbsp; 9994 autoinc.so</font></div><div><font size="2"   >&nbsp; 52347 btree_gin.so</font></div><div><font size="2"   >! 103946 btree_gist.so</font></div><div><font size="2"   >&nbsp; 9628 chkpass.so</font></div><div><font size="2"   >&nbsp; 11768 citext.so</font></div><div><font size="2"   >! 55747 cube.so</font></div><div><font size="2"   >! 17416 cyrillic_and_mic.so</font></div><div><font size="2"   >! 55696 dblink.so</font></div><div><font size="2"   >&nbsp; 8494 dict_int.so</font></div><div><font size="2"   >! 465208 dict_snowball.so</font></div><div><font size="2"   >! 11282 dict_xsyn.so</font></div><div><font size="2"   >&nbsp; 7223 dummy_seclabel.so</font></div><div><font size="2"   >! 7212 earthdistance.so</font></div><div><font size="2"   >! 8927 euc2004_sjis2004.so</font></div><div><font size="2"   >&nbsp; 7311 euc_cn_and_mic.so</font></div><div><font size="2"   >&nbsp; 14726 euc_jp_and_sjis.so</font></div><div><font size="2"   >&nbsp; 7460 euc_kr_and_mic.so</font></div><div><font size="2"   >! 13606 euc_tw_and_big5.so</font></div><div><font size="2"   >&nbsp; 20688 file_fdw.so</font></div><div><font size="2"   >! 31781 fuzzystrmatch.so</font></div><div><font size="2"   >! 65790 hstore.so</font></div><div><font size="2"   >&nbsp; 9295 insert_username.so</font></div><div><font size="2"   >! 55648 _int.so</font></div><div><font size="2"   >! 103546 isn.so</font></div><div><font size="2"   >! 10056 latin2_and_win1250.so</font></div><div><font size="2"   >&nbsp; 8707 latin_and_mic.so</font></div><div><font size="2"   >! 158410 libecpg.a</font></div><div><font size="2"   >! 18828 libecpg_compat.a</font></div><div><font size="2"   >&nbsp; 21 libecpg_compat.so</font></div><div><font size="2"   >&nbsp; 21 libecpg_compat.so.3</font></div><div><font size="2"   >&nbsp; 23295 libecpg_compat.so.3.4</font></div><div><font size="2"   >&nbsp; 14 libecpg.so</font></div><div><font size="2"   >&nbsp; 14 libecpg.so.6</font></div><div><font size="2"   >! 90068 libecpg.so.6.4</font></div><div><font size="2"   >! 69822 libpgport.a</font></div><div><font size="2"   >! 110120 libpgtypes.a</font></div><div><font size="2"   >&nbsp; 17 libpgtypes.so</font></div><div><font size="2"   >&nbsp; 17 libpgtypes.so.3</font></div><div><font size="2"   >! 74066 libpgtypes.so.3.3</font></div><div><font size="2"   >! 295208 libpq.a</font></div><div><font size="2"   >&nbsp; 12 libpq.so</font></div><div><font size="2"   >&nbsp; 12 libpq.so.5</font></div><div><font size="2"   >! 196263 libpq.so.5.5</font></div><div><font size="2"   >&nbsp; 14807 libpqwalreceiver.so</font></div><div><font size="2"   >&nbsp; 7811 lo.so</font></div><div><font size="2"   >! 71051 ltree.so</font></div><div><font size="2"   >&nbsp; 9307 moddatetime.so</font></div><div><font size="2"   >! 22257 pageinspect.so</font></div><div><font size="2"   >&nbsp; 8413 passwordcheck.so</font></div><div><font size="2"   >! 9623 pg_buffercache.so</font></div><div><font size="2"   >! 144289 pgcrypto.so</font></div><div><font size="2"   >&nbsp; 7294 pg_freespacemap.so</font></div><div><font size="2"   >&nbsp; 12278 pgrowlocks.so</font></div><div><font size="2"   >! 33152 pg_stat_statements.so</font></div><div><font size="2"   >! 20169 pgstattuple.so</font></div><div><font size="2"   >! 31278 pg_trgm.so</font></div><div><font size="2"   >&nbsp; 11826 pg_upgrade_support.so</font></div><div><font size="2"   >! 26998 pgxml.so</font></div><div><font size="2"   >&nbsp; 4096 pgxs</font></div><div><font size="2"   >! 119755 plperl.so</font></div><div><font size="2"   >! 184714 plpgsql.so</font></div><div><font size="2"   >! 134714 plpython2.so</font></div><div><font size="2"   >! 40661 pltcl.so</font></div><div><font size="2"   >! 16846 refint.so</font></div><div><font size="2"   >! 40057 seg.so</font></div><div><font size="2"   >&nbsp; 15809 sslinfo.so</font></div><div><font size="2"   >! 25432 tablefunc.so</font></div><div><font size="2"   >&nbsp; 10179 tcn.so</font></div><div><font size="2"   >&nbsp; 8097 test_parser.so</font></div><div><font size="2"   >! 15817 timetravel.so</font></div><div><font size="2"   >! 31816 tsearch2.so</font></div><div><font size="2"   >! 13861 unaccent.so</font></div><div><font size="2"   >&nbsp; 6990 utf8_and_ascii.so</font></div><div><font size="2"   >&nbsp; 228417 utf8_and_big5.so</font></div><div><font size="2"   >&nbsp; 12223 utf8_and_cyrillic.so</font></div><div><font size="2"   >***************</font></div><div><font size="2"   >*** 897,903 ****</font></div><div><font size="2"   >&nbsp; 130481 utf8_and_sjis.so</font></div><div><font size="2"   >&nbsp; 284794 utf8_and_uhc.so</font></div><div><font size="2"   >&nbsp; 31357 utf8_and_win.so</font></div><div><font size="2"   >! 12636 uuid-ossp.so</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >--- 897,903 ----</font></div><div><font size="2"   >&nbsp; 130481 utf8_and_sjis.so</font></div><div><font size="2"   >&nbsp; 284794 utf8_and_uhc.so</font></div><div><font size="2"   >&nbsp; 31357 utf8_and_win.so</font></div><div><font size="2"   >! 12581 uuid-ossp.so</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >***************</font></div><div><font size="2"   >*** 916,922 ****</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 4096 .</font></div><div><font size="2"   >&nbsp; 4096 ..</font></div><div><font size="2"   >! 23091 Makefile.global</font></div><div><font size="2"   >&nbsp; 481 Makefile.port</font></div><div><font size="2"   >&nbsp; 4096 makefiles</font></div><div><font size="2"   >&nbsp; 14858 Makefile.shlib</font></div><div><font size="2"   >--- 916,922 ----</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 4096 .</font></div><div><font size="2"   >&nbsp; 4096 ..</font></div><div><font size="2"   >! 23085 Makefile.global</font></div><div><font size="2"   >&nbsp; 481 Makefile.port</font></div><div><font size="2"   >&nbsp; 4096 makefiles</font></div><div><font size="2"   >&nbsp; 14858 Makefile.shlib</font></div><div><font size="2"   >***************</font></div><div><font size="2"   >*** 939,945 ****</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 4096 .</font></div><div><font size="2"   >&nbsp; 4096 ..</font></div><div><font size="2"   >! 55586 pg_regress</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >--- 939,945 ----</font></div><div><font size="2"   >&nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 4096 .</font></div><div><font size="2"   >&nbsp; 4096 ..</font></div><div><font size="2"   >! 59199 pg_regress</font></div><p></p></pre></div></div><div><br></div><div>【参考】</div><div>1. man gcc</div><div><pre class="prettyprint"   ><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;-O</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;-O1 Optimize. &nbsp;Optimizing compilation takes somewhat more time, and a lot more memory for a large function.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;With -O, the compiler tries to reduce code size and execution time, without performing any optimizations</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;that take a great deal of compilation time.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-O turns on the following optimization flags: -fdefer-pop -fdelayed-branch -fguess-branch-probability</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-fcprop-registers -floop-optimize -fif-conversion -fif-conversion2 -ftree-ccp -ftree-dce -ftree-domina-</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tor-opts -ftree-dse -ftree-ter -ftree-lrs -ftree-sra -ftree-copyrename -ftree-fre -ftree-ch</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-funit-at-a-time -fmerge-constants</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-O also turns on -fomit-frame-pointer on machines where doing so does not interfere with debugging.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-O doesn’t turn on -ftree-sra for the Ada compiler. &nbsp;This option must be explicitly specified on the com-</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mand line to be enabled for the Ada compiler.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;-O2 Optimize even more. &nbsp;GCC performs nearly all supported optimizations that do not involve a space-speed</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tradeoff. &nbsp;The compiler does not perform loop unrolling or function inlining when you specify -O2. &nbsp;As com-</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pared to -O, this option increases both compilation time and the performance of the generated code.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-O2 turns on all optimization flags specified by -O. &nbsp;It also turns on the following optimization flags:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-fthread-jumps -fcrossjumping -foptimize-sibling-calls -fcse-follow-jumps &nbsp;-fcse-skip-blocks -fgcse</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-fgcse-lm -fexpensive-optimizations -fstrength-reduce -frerun-cse-after-loop &nbsp;-frerun-loop-opt</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-fcaller-saves -fpeephole2 -fschedule-insns &nbsp;-fschedule-insns2 -fsched-interblock &nbsp;-fsched-spec -fregmove</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-fstrict-aliasing -fdelete-null-pointer-checks -freorder-blocks &nbsp;-freorder-functions -falign-functions</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-falign-jumps -falign-loops &nbsp;-falign-labels -ftree-vrp -ftree-pre</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Please note the warning under -fgcse about invoking -O2 on programs that use computed gotos.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;-O3 Optimize yet more. &nbsp;-O3 turns on all optimizations specified by -O2 and also turns on the -finline-func-</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tions, -funswitch-loops and -fgcse-after-reload options.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;-O0 Do not optimize. &nbsp;This is the default.</font></div><p></p></pre></div>2.&nbsp;<a target="_blank" rel="nofollow" href="http://www.gentoo.org/doc/en/gcc-optimization.xml"   >http://www.gentoo.org/doc/en/gcc-optimization.xml</a><div>3.&nbsp;<a style="line-height: 22px;" target="_blank" rel="nofollow" href="http://wiki.gentoo.org/wiki/CFLAGS"   >http://wiki.gentoo.org/wiki/CFLAGS</a></div>4.&nbsp;<a target="_blank" rel="nofollow" href="http://www.gentoo.org/proj/en/qa/backtraces.xml"   >http://www.gentoo.org/proj/en/qa/backtraces.xml</a></div>
	</div>
</div>
</body>
</html>