<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Fetion Test</h2>
	<h5 id="">2010-12-29 14:44:29&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201011292328581/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">【参考】<br>http://code.google.com/p/maplefetion/<br>http://code.google.com/p/litefetion/<br><br>platform : <br>CentOS release 5.2 (Final) x64<br><br>software : <br>jdk-6u22-linux-x64.bin<br>apache-tomcat-6.0.20.tar.gz<br>skyfeition2010 (内部使用)<br>curl<br><br>部署:<br>1. mkdir /home/fetion<br>mv jdk-6u22-linux-x64.bin /home/fetion<br>mv apache-tomcat-6.0.20.tar.gz /home/fetion<br>安装 jdk-6u22-linux-x64.bin , apache-tomcat-6.0.20.tar.gz<br><br>2. mv skyfeition2010 /home/feition/apache-tomcat-6.0.20/webapps<br><br>3. vi /home/feition/apache-tomcat-6.0.20/conf/server.xml<br>&nbsp;&nbsp;&nbsp; &lt;Connector port="8080" protocol="HTTP/1.1"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; connectionTimeout="20000"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; redirectPort="8443"<br>后面新增以下两个参数<span style="font-size: 10.5pt; font-family: 宋体;">用以支持</span><span style="font-size: 10.5pt; font-family: &quot;Times New Roman&quot;,&quot;serif&quot;;" lang="EN-US">http</span><span style="font-size: 10.5pt; font-family: 宋体;">请求中的中文字符</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; useBodyEncodingForURI="true"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; URIEncoding="UTF-8" /&gt;<br><br>4. vi /home/feition/apache-tomcat-6.0.20/webapps/skyfetion2010/WEB-INF/classes/config.properties<br>用于飞信登录异常的邮件提醒.<br>projectpath=/home/feition/apache-tomcat-6.0.20/webapps/skyfetion2010<br># email<br>email.host=sky-mobi.com<br>email.user=***@sky-mobi.com<br>email.password=******<br>email.from=***@sky-mobi.com<br># <br>email.fetion.warn=err@sky-mobi.com<br><br>5. vi /home/feition/apache-tomcat-6.0.20/webapps/skyfetion2010/WEB-INF/classes/log4j.properties<br>log4j.appender.R.File=/home/feition/apache-tomcat-6.0.20/logs/skyfetion.log<br><br>6. 启动tomcat<br>export JAVA_HOME=/home/feition/jdk1.6.0_22<br>export JAVA_CLASSPATH=/home/feition/jdk1.6.0_22/jre<br>export PATH=$JAVA_HOME/bin:$PATH<br>/home/feition/apache-tomcat-6.0.20/bin/startup.sh<br><br>7. 验证<br>[root@db1 bin]# ps -ewf|grep tomcat<br>root&nbsp;&nbsp;&nbsp;&nbsp; 15035 32399&nbsp; 0 14:37 pts/1&nbsp;&nbsp;&nbsp; 00:00:00 grep tomcat<br>root&nbsp;&nbsp;&nbsp;&nbsp; 30563&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp; 0 13:33 pts/0&nbsp;&nbsp;&nbsp; 00:00:05 /home/feition/jdk1.6.0_22/bin/java -Djava.util.logging.config.file=/home/feition/apache-tomcat-6.0.20/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/home/feition/apache-tomcat-6.0.20/endorsed -classpath :/home/feition/apache-tomcat-6.0.20/bin/bootstrap.jar -Dcatalina.base=/home/feition/apache-tomcat-6.0.20 -Dcatalina.home=/home/feition/apache-tomcat-6.0.20 -Djava.io.tmpdir=/home/feition/apache-tomcat-6.0.20/temp org.apache.catalina.startup.Bootstrap start<br>[root@db1 bin]# netstat -anp|grep 8080<br>tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 :::8080&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :::*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LISTEN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 30563/java&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0 :::28080&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :::*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LISTEN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12665/balance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><br>使用浏览器登录<br>http://172.16.3.13:8080/skyfetion2010/<br>查看飞信登录状态,如果没有登录的话登录一下。登录完后就可以使用WEB页面或LINUX命令行发送飞信了。<br><br>8. linux命令行发送飞信<br>curl "http://$IP:8080/skyfetion2010/OpenSmsServlet.do?m=s&amp;tid=${FETION_ID_or_PHONENUM}&amp;ct=${MESSAGE}"<br><br>发送中文的话使用UTF8编码.</div>
	</div>
</div>
</body>
</html>