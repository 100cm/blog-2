PostgreSQL research

Download Hotspot

2012-03-28 16:32:22   查看原文>>

 一个下载型的业务平台, 可能包含以下一些业务逻辑.
1. 用户浏览.
2. 针对用户行为推送给用户他们可能关注的内容.
3. 全局的资源下载排行
4. 用户下载内容.
前面的3点都是为了让用户下载资源, 第四点就是整个业务系统的临门一脚了.
在2G或者2.5G时代, 一般来说下载的资源单元都比较小, 平均可能几百KB.
一天下载1000W次可能峰值流量2G bit就够了.
所以带宽不太会成为瓶颈, 也不需要在带宽上下太多的功夫关注.
但是智能机时代, 有了3G网络和WIFI的加入, 下载和上传的资源包从几百KB到几MB甚至上百MB.
带宽的资源就显得很重要了. 1000W次下载会需要多少带宽呢? 200G bit或者更多?
流量很贵!

如何从业务层来解决这个问题?
下面是我的几点思路.
1. CDN, 建多机房, 内容分发, 用户从就近的IDC下载
2. 资源包分片, 用户下载资源不是从单一的IDC下载, 它可以并行从多IDC下载不同的资源分片, 最终把所有分片都下好后合并.
3. 资源包共享, 用户可以从其他用户共享中下载资源, 而不必占用IDC的带宽.
4. 压缩传输.
5. 实时的IDC流量监测结合资源搜索和实际下载逻辑剥离, 因为搜索并不占用多少带宽资源, 但是下载占用很多带宽, 根据IDC流量检查把下载的流量分摊到各个IDC.
