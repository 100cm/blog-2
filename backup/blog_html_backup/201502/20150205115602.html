<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Motor: Asynchronous Python driver for Tornado and MongoDB</h2>
	<h5 id="">2015-02-05 11:56:02&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020151583111207/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><div>使用pymongo驱动连接mongodb插入100W记录, 需要364秒. 性能较差,&nbsp;<span style="line-height: 28px;"   >原因是pymongo未使用异步接口.</span></div><div>motor驱动使用异步接口, 性能有所提升.</div><div>安装motor驱动, 可以使用pip快速安装, 解决依赖问题. pip是一个脚本, 可以自动从PyPI安装module. 如下</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   ># cat /usr/local/bin/pip3.4</font></div><div><font size="2"   >#!/usr/local/bin/python3.4</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ># -*- coding: utf-8 -*-</font></div><div><font size="2"   >import re</font></div><div><font size="2"   >import sys</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >from pip import main</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >if __name__ == '__main__':</font></div><div><font size="2"   >&nbsp; &nbsp; sys.argv[0] = re.sub(r'(-script\.pyw|\.exe)?$', '', sys.argv[0])</font></div><div><font size="2"   >&nbsp; &nbsp; sys.exit(main())</font></div><p></p></pre></div></div><div>安装motor</div><div><pre class="prettyprint"   ><p><font size="2"   >[root@localhost bin]# pip3.4 install motor</font></p><div><font size="2"   >或</font></div><div><font size="2"   ><span style="line-height: 28px;"   >[root@localhost bin]# pip3.4 install motor&nbsp;</span>--upgrade</font></div><p></p></pre><div>motor的使用手册如下</div><div><a target="_blank" rel="nofollow" href="http://motor.readthedocs.org/en/stable/index.html"   >http://motor.readthedocs.org/en/stable/index.html</a></div><div><a target="_blank" rel="nofollow" href="http://motor.readthedocs.org/en/stable/tutorial.html"   >http://motor.readthedocs.org/en/stable/tutorial.html</a></div><div>修改测试脚本 :&nbsp;</div><div>使用批量写入.</div><div><br></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   ><span style="line-height: 21px;"   >[root@localhost ~]# cat t.py<br>import motor<br>import tornado<br>import time<br>import threading<br><br>c = motor.MotorClient('/tmp/mongodb-5281.sock', max_pool_size=1000)<br>db = c.test_database<br>db.drop_collection('test_collection')<br>collection = db.test_collection<br><br>@motor.gen.coroutine<br>def do_count():<br>  n = yield collection.count()<br>  print(str(n) + ' documents in collection')<br><br>tornado.ioloop.IOLoop.current().run_sync(do_count)<br><br>def my_callback(result, error):<br>  tornado.ioloop.IOLoop.instance().stop()<br><br>print(time.time())<br><br>class n_t(threading.Thread):   #The timer class is derived from the class threading.Thread<br>  def __init__(self, num):<br>    threading.Thread.__init__(self)<br>    self.thread_num = num<br><br>  def run(self): #Overwrite run() method, put what you want the thread do here<br>    start_t = time.time()<br>    print("TID:" + str(self.thread_num) + " " + str(start_t))<br><br>    collection.insert(({'id':i, 'username': 'digoal.zhou', 'age':32, 'email':'digoal@126.com', 'qq':'276732431'} for i in range(0,100000)), callback=my_callback)<br>    tornado.ioloop.IOLoop.instance().start()<br><br>    stop_t = time.time()<br>    print("TID:" + str(self.thread_num) + " " + str(stop_t))<br>    print(stop_t-start_t)<br><br>def test():<br>  t_names = dict()<br>  for i in range(0,8):<br>    t_names[i] = n_t(i) <br>    t_names[i].start()<br>  return<br><br>if __name__ == '__main__':<br>  test()</span></font></div><p></p></pre></div><div>报了一堆错误, 除了0号线程未报错, 其他线程都报类似以下错误 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >Exception in thread Thread-5:</font></div><div><font size="2"   >Traceback (most recent call last):</font></div><div><font size="2"   >&nbsp; File "/usr/local/lib/python3.4/threading.py", line 921, in _bootstrap_inner</font></div><div><font size="2"   >&nbsp; &nbsp; self.run()</font></div><div><font size="2"   >&nbsp; File "t.py", line 33, in run</font></div><div><font size="2"   >&nbsp; &nbsp; tornado.ioloop.IOLoop.instance().start()</font></div><div><font size="2"   >&nbsp; File "/usr/local/lib/python3.4/site-packages/tornado/ioloop.py", line 704, in start</font></div><div><font size="2"   >&nbsp; &nbsp; raise RuntimeError("IOLoop is already running")</font></div><div><font size="2"   >RuntimeError: IOLoop is already running</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >ERROR:tornado.application:Uncaught exception, closing connection.</font></div><div><font size="2"   >Traceback (most recent call last):</font></div><div><font size="2"   >&nbsp; File "/usr/local/lib/python3.4/site-packages/tornado/iostream.py", line 508, in wrapper</font></div><div><font size="2"   >&nbsp; &nbsp; return callback(*args)</font></div><div><font size="2"   >&nbsp; File "/usr/local/lib/python3.4/site-packages/tornado/stack_context.py", line 275, in null_wrapper</font></div><div><font size="2"   >&nbsp; &nbsp; return fn(*args, **kwargs)</font></div><div><font size="2"   >&nbsp; File "/usr/local/lib/python3.4/site-packages/motor/__init__.py", line 138, in callback</font></div><div><font size="2"   >&nbsp; &nbsp; child_gr.switch(result)</font></div><div><font size="2"   >greenlet.error: cannot switch to a different thread</font></div></div><p></p></pre></div><div>改为单线程执行, 一次批量1000条 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   ><span style="line-height: 21px;"   >[root@localhost ~]# cat t.py<br>import motor<br>import tornado<br>import time<br>import threading<br><br>c = motor.MotorClient('/tmp/mongodb-5281.sock', max_pool_size=1000)<br>db = c.test_database<br>db.drop_collection('test_collection')<br>collection = db.test_collection<br><br>@motor.gen.coroutine<br>def do_count():<br>  n = yield collection.count()<br>  print(str(n) + ' documents in collection')<br><br>tornado.ioloop.IOLoop.current().run_sync(do_count)<br><br>def my_callback(result, error):<br>  tornado.ioloop.IOLoop.instance().stop()<br><br>print(time.time())<br><br>class n_t(threading.Thread):   #The timer class is derived from the class threading.Thread<br>  def __init__(self, num):<br>    threading.Thread.__init__(self)<br>    self.thread_num = num<br><br>  def run(self): #Overwrite run() method, put what you want the thread do here<br>    start_t = time.time()<br>    print("TID:" + str(self.thread_num) + " " + str(start_t))<br><br>    all = 1000000<br>    pice = 1000<br>    for i in range(1,int(all/pice)+1):<br>      if i == 1:<br>        s=0<br>        e=pice<br>      else:<br>        s=pice*(i-1)<br>        e=pice*i<br>      collection.insert(({'id':i, 'username': 'digoal.zhou', 'age':32, 'email':'digoal@126.com', 'qq':'276732431'} for i in range(s,e)), callback=my_callback)<br>      tornado.ioloop.IOLoop.instance().start()<br><br>    stop_t = time.time()<br>    print("TID:" + str(self.thread_num) + " " + str(stop_t))<br>    print(stop_t-start_t)<br>    tornado.ioloop.IOLoop.current().run_sync(do_count)<br><br>def test():<br>  t_names = dict()<br>  for i in range(0,1):<br>    t_names[i] = n_t(i) <br>    t_names[i].start()<br>  return<br><br>if __name__ == '__main__':<br>  test()</span></font></div></pre></div><div><div>插入耗时38秒 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@localhost ~]# python t.py</font></div><div><font size="2"   >0 documents in collection</font></div><div><font size="2"   >1423138288.7702804</font></div><div><font size="2"   >TID:0 1423138288.7712061</font></div><div><font size="2"   >TID:0 1423138326.7712593</font></div><div><font size="2"   >38.00005316734314</font></div><div><font size="2"   >1000000 documents in collection</font></div><p></p></pre></div></div><div><span style="line-height: 28px;"   >以上相比PostgreSQL 使用pgbench 单步提交测试16秒还有差距.&nbsp;</span></div><div><span style="line-height: 28px;"   ><br></span></div><div><span style="line-height: 28px;"   >开16个一起测, 220秒插入1600W.</span></div><div><pre class="prettyprint"   ><p></p><div><span style="line-height: 28px;"   ><font size="2"   >不删除collection: 注释</font></span></div><div><font size="2"   ><span style="line-height: 28px;"   >#</span>db.drop_collection('test_collection')</font></div><div><font size="2"   >mongo 127.0.0.1:5281/test_database</font></div><div><font size="2"   >use test_database</font></div><div><font size="2"   >db.test_collection.drop()</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ># vi t.py</font></div><div><font size="2"   >import motor<br>import tornado<br>import time<br>import threading<br><br>c = motor.MotorClient('/tmp/mongodb-5281.sock', max_pool_size=1000)<br>db = c.test_database<br>#db.drop_collection('test_collection')<br>collection = db.test_collection<br><br>@motor.gen.coroutine<br>def do_count():<br>  n = yield collection.count()<br>  print(str(n) + ' documents in collection')<br><br>tornado.ioloop.IOLoop.current().run_sync(do_count)<br><br>def my_callback(result, error):<br>  tornado.ioloop.IOLoop.instance().stop()<br><br>start_t = time.time()<br>print(str(start_t))<br><br>all = 1000000<br>pice = 1000<br>for i in range(1,int(all/pice)+1):<br>  if i == 1:<br>    s=0<br>    e=pice<br>  else:<br>    s=pice*(i-1)<br>    e=pice*i<br>  collection.insert(({'id':i, 'username': 'digoal.zhou', 'age':32, 'email':'digoal@126.com', 'qq':'276732431'} for i in range(s,e)), callback=my_callback)<br>  tornado.ioloop.IOLoop.instance().start()<br><br>stop_t = time.time()<br>print(str(stop_t))<br>print(stop_t-start_t)<br>tornado.ioloop.IOLoop.current().run_sync(do_count)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ># vi test.sh</font></div><div><div><font size="2"   >for ((m=1;m&lt;17;m++))</font></div><div><font size="2"   >do</font></div><div><font size="2"   >&nbsp; python /root/t.py &amp;</font></div><div><font size="2"   >done</font></div></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><font size="2"   >测试结果 :&nbsp;</font></div><div><div><font size="2"   >[root@localhost ~]# . ./test.sh</font></div><div><font size="2"   >[root@localhost ~]# 0 documents in collection</font></div><div><font size="2"   >1423138761.355559</font></div><div><font size="2"   >TID:0 1423138761.3678153</font></div><div><font size="2"   >0 documents in collection</font></div><div><font size="2"   >0 documents in collection</font></div><div><font size="2"   >1423138761.4109175</font></div><div><font size="2"   >1423138761.4113982</font></div><div><font size="2"   >TID:0 1423138761.4338183</font></div><div><font size="2"   >TID:0 1423138761.4408538</font></div><div><font size="2"   >1255 documents in collection</font></div><div><font size="2"   >1127 documents in collection</font></div><div><font size="2"   >1423138761.4774377</font></div><div><font size="2"   >1423138761.4775264</font></div><div><font size="2"   >2383 documents in collection</font></div><div><font size="2"   >1423138761.4832406</font></div><div><font size="2"   >TID:0 1423138761.483632</font></div><div><font size="2"   >TID:0 1423138761.4897928</font></div><div><font size="2"   >TID:0 1423138761.5128014</font></div><div><font size="2"   >6506 documents in collection</font></div><div><font size="2"   >1423138761.5683684</font></div><div><font size="2"   >8037 documents in collection</font></div><div><font size="2"   >1423138761.58344</font></div><div><font size="2"   >TID:0 1423138761.58417</font></div><div><font size="2"   >7550 documents in collection</font></div><div><font size="2"   >1423138761.5864558</font></div><div><font size="2"   >8932 documents in collection</font></div><div><font size="2"   >1423138761.5868194</font></div><div><font size="2"   >TID:0 1423138761.5982714</font></div><div><font size="2"   >TID:0 1423138761.5984921</font></div><div><font size="2"   >TID:0 1423138761.613552</font></div><div><font size="2"   >11407 documents in collection</font></div><div><font size="2"   >1423138761.620963</font></div><div><font size="2"   >TID:0 1423138761.623182</font></div><div><font size="2"   >15278 documents in collection</font></div><div><font size="2"   >1423138761.6682127</font></div><div><font size="2"   >TID:0 1423138761.6716254</font></div><div><font size="2"   >17677 documents in collection</font></div><div><font size="2"   >17677 documents in collection</font></div><div><font size="2"   >17677 documents in collection</font></div><div><font size="2"   >1423138761.713706</font></div><div><font size="2"   >1423138761.7137444</font></div><div><font size="2"   >17677 documents in collection</font></div><div><font size="2"   >1423138761.7138374</font></div><div><font size="2"   >1423138761.7139668</font></div><div><font size="2"   >TID:0 1423138761.7142007</font></div><div><font size="2"   >TID:0 1423138761.714226</font></div><div><font size="2"   >TID:0 1423138761.714233</font></div><div><font size="2"   >TID:0 1423138761.714348</font></div><div><font size="2"   >TID:0 1423138980.550259</font></div><div><font size="2"   >218.92707705497742</font></div><div><font size="2"   >15900545 documents in collection</font></div><div><font size="2"   >TID:0 1423138980.9974186</font></div><div><font size="2"   >219.56360030174255</font></div><div><font size="2"   >15932365 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.2562747</font></div><div><font size="2"   >219.54192662239075</font></div><div><font size="2"   >15951346 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.4110239</font></div><div><font size="2"   >219.81253170967102</font></div><div><font size="2"   >15961596 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.4463546</font></div><div><font size="2"   >219.96272253990173</font></div><div><font size="2"   >15964366 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.4915378</font></div><div><font size="2"   >219.90736770629883</font></div><div><font size="2"   >15967637 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.540123</font></div><div><font size="2"   >220.17230772972107</font></div><div><font size="2"   >15970868 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.6574204</font></div><div><font size="2"   >220.05914902687073</font></div><div><font size="2"   >15979686 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.681502</font></div><div><font size="2"   >220.00987672805786</font></div><div><font size="2"   >15981430 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.7540042</font></div><div><font size="2"   >220.03977823257446</font></div><div><font size="2"   >15985686 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.792348</font></div><div><font size="2"   >220.3514940738678</font></div><div><font size="2"   >15988377 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.8279915</font></div><div><font size="2"   >220.315190076828</font></div><div><font size="2"   >15991149 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.8720205</font></div><div><font size="2"   >220.38222765922546</font></div><div><font size="2"   >15994000 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.874455</font></div><div><font size="2"   >220.26090288162231</font></div><div><font size="2"   >15994000 documents in collection</font></div><div><font size="2"   >TID:0 1423138981.9668252</font></div><div><font size="2"   >220.25259232521057</font></div><div><font size="2"   >15998000 documents in collection</font></div><div><font size="2"   >TID:0 1423138982.0496628</font></div><div><font size="2"   >220.33546209335327</font></div><div><font size="2"   >16000000 documents in collection</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[1] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[2] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[3] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[4] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[5] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[6] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[7] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[8] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[9] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[10] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[11] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[12] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[13] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[14] &nbsp; Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[15]- &nbsp;Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div><div><font size="2"   >[16]+ &nbsp;Done &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/usr/local/bin/python3 /root/t.py</font></div></div><p></p></pre></div><div><br></div><div>将PostgreSQL改为批量提交测试结果42秒插入1600W .</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >postgres@localhost-&gt; pgbench -M prepared -n -r -f ./test.sql -c 16 -j 4 -t 50000</font></div><div><font size="2"   >transaction type: Custom query</font></div><div><font size="2"   >scaling factor: 1</font></div><div><font size="2"   >query mode: prepared</font></div><div><font size="2"   >number of clients: 16</font></div><div><font size="2"   >number of threads: 4</font></div><div><font size="2"   >number of transactions per client: 50000</font></div><div><font size="2"   >number of transactions actually processed: 800000/800000</font></div><div><font size="2"   >tps = 18835.837413 (including connections establishing)</font></div><div><font size="2"   >tps = 18840.926458 (excluding connections establishing)</font></div><div><font size="2"   >statement latencies in milliseconds:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 0.842201 &nbsp; &nbsp; &nbsp; &nbsp;insert into tt values(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431'),(1, 'digoal.zhou',32,'digoal@126.com','276732431');</font></div><div><font size="2"   >postgres@localhost-&gt; psql</font></div><div><font size="2"   >psql (9.3.5)</font></div><div><font size="2"   >Type "help" for help.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres=# select count(*) from tt;</font></div><div><font size="2"   >&nbsp; count &nbsp;&nbsp;</font></div><div><font size="2"   >----------</font></div><div><font size="2"   >&nbsp;16000000</font></div><div><font size="2"   >(1 row)</font></div></div><div><div><font size="2"   >postgres=# select 16000000/20/18835.837413;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; ?column? &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >---------------------</font></div><div><font size="2"   >&nbsp;42.4722289993786537</font></div><div><font size="2"   >(1 row)</font></div></div><p></p></pre></div><div><br></div><div><br></div><div>[参考]</div><div><div style="line-height: 28px;"   ><a target="_blank" rel="nofollow" href="http://motor.readthedocs.org/en/stable/index.html"   >http://motor.readthedocs.org/en/stable/index.html</a></div><div style="line-height: 28px;"   ><a target="_blank" rel="nofollow" href="http://motor.readthedocs.org/en/stable/tutorial.html"   >http://motor.readthedocs.org/en/stable/tutorial.html</a></div></div><div><br><wbr><div><br></div></div></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="Motor: Asynchronous Python driver for Tornado and MongoDB - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>