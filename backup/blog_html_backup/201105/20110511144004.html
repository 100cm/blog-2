<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL 9.1 Replication role privilege change to REPLICATION from SUPERUSER</h2>
	<h5 id="">2011-05-11 14:40:04&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020114112379185/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><font size="3"  >PostgreSQL 9.0引入了stream replication的概念，使用stream replication需要在primary 新建一个用于replication的用户。<wbr></font><div><font size="3"  >这个用户需要superuser权限</font></div><div><font size="3"  >以下是9.0.4的文档引用:</font></div><div><span style="font-family: verdana, sans-serif; line-height: 18px;"  ><font size="3"  >It is very important that the access privileges for replication be set up so that only trusted users can read the WAL stream, because it is easy to extract privileged information from it. Standby servers must authenticate to the primary as a superuser account. So a role with the&nbsp;<tt>SUPERUSER</tt>&nbsp;and&nbsp;<tt>LOGIN</tt>&nbsp;privileges needs to be created on the primary.</font></span></div><div><span style="font-family: verdana, sans-serif; line-height: 18px;"  ><font size="3"  ><br></font></span></div><div><font face="verdana, sans-serif"  size="3"  ><span style="line-height: 18px;"  >由于存在一些安全隐患，而且确实不需要superuser这么大的权限来满足replication的需求。</span></font></div><div><font face="verdana, sans-serif"  size="3"  ><span style="line-height: 18px;"  >因此在9.1以后，新增了一个权限角色replication.9.1beta1 原文引用:</span></font></div><div><font face="verdana, sans-serif"  size="3"  ><span style="line-height: 18px;"  ><span style="line-height: normal;"  ><p>It is very important that the access privileges for replication be set up so that only trusted users can read the WAL stream, because it is easy to extract privileged information from it. Standby servers must authenticate to the primary as an account that has the&nbsp;<tt>REPLICATION</tt>&nbsp;privilege. So a role with the&nbsp;<tt>REPLICATION</tt>&nbsp;and&nbsp;<tt>LOGIN</tt>&nbsp;privileges needs to be created on the primary.</p><div><blockquote><p><b>Note:&nbsp;</b>It is recommended that a dedicated user account is used for replication. While the&nbsp;<tt>REPLICATION</tt>&nbsp;privilege is granted to superuser accounts by default, it is not recommended to use superuser accounts for replication. While&nbsp;<tt>REPLICATION</tt>&nbsp;privilege gives very high permissions, it does not allow the user to modify any data on the primary system, which the&nbsp;<tt>SUPERUSER</tt>&nbsp;privilege does.</p></blockquote></div></span></span></font></div></div>
	</div>
</div>
</body>
</html>