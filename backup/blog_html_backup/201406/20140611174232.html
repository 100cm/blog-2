<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">FreeBSD install</h2>
	<h5 id="">2014-06-11 17:42:32&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020145114251585/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>FreeBSD的可玩性还是很高的.</div>本文将介绍一下FreeBSD在vmware中的安装, 物理机的安装和这个差不多.<div>我们这里将要用到zfs的root disk mirror. 所以虚拟机环境中需要2块物理设备.</div><div>如果是物理机器的话, 建议使用RAID的JBOD模式. (原因参见<a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201441694022110/"   >http://blog.163.com/digoal@126/blog/static/163877040201441694022110/</a>)</div><div><br></div><div>首先我们要下载freebsd 的iso, 本文用到的是10.0 x64的版本.</div><div>ftp://ftp.freebsd.org/pub/FreeBSD/releases/amd64/amd64/ISO-IMAGES/10.0/FreeBSD-10.0-RELEASE-amd64-dvd1.iso</div><div><br></div><div>然后需要安装vmware workstation. 我这里用到的是10的版本.</div><div><div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/SXJorsSyhJynUN-JUXboig==/6599322665982909612.png"   ></div><br></div><div>创建虚拟机</div><div><div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/seLygM4xdAMLUm-2ozaleA==/6608771868910577466.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/O96du7GU63gY17qtpW02Ww==/6608245202841840394.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/ukWZHwfqiDctnpgxWZyc4Q==/6608491493445494062.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/qU0lVcgWPBw7qLPPCUKcwA==/6608669614329193842.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/l0DxAdKiiLJD8FvOFRLxPA==/6608918103957071517.png"   ></div><div>内存建议配大一点, 至少1G, 最好有2GB, 如果使用ZFS的话, 最好大于4GB.</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/Cm4S5-EXZix4fc7A2DCF6A==/6599277586006174087.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/gpaA7nFsix88Mgib9-9w1A==/6608844436678010379.png"   ></div><div>创建磁盘</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/3PdmQaHJ_rXqFMeMnKDDhw==/6608246302353468182.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/7MLSmIv35JGwTFeQ2c1cdw==/6608936795654744456.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/J0FHnEeTiOihNOEplUgu_g==/6608493692468749601.png"   ></div><br></div><div><div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/AokVx7w8vDXI7CLpjrL1AQ==/6608856531305914882.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/KEb3uLqeS84y4GAdC2HXWw==/6608188028237199013.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/1WFV_4ZTT_NqzmHwLF0EEg==/6608271591120908246.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/lX-AowvKeH_IibWrICkJFw==/6599299576238731219.png"   ></div><div>这里只创建了1块磁盘, 所以使用ZFS的话, 无法选择mirror模式.</div><div>最好创建2块一样的磁盘, 实际生产机中, 如果底层设备是RAID模式的, 那么没有必要使用MIRROR模式.</div><div>如果底层设备不是RAID模式, 那么建议使用JBOD+mirror模式.</div><div><br></div><div>准备安装, 选择1.</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/sQ_-s-u0E-Nc4xgSq8H3LA==/6608477199794333012.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/sHy4it8AKvNDQaNcjt9Egg==/6608444214445499210.png"   ></div><div>配置键盘</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/7cWgz41fHebzOjXAVGNE0w==/6608798257189643988.png"   ></div><div>配置主机名</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/TqBjqGGK5XJKjeISo9ZAQA==/6608937895166372243.png"   ></div><div>配置要安装的包</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/numCZy_Hclzy9g_GzdBDHQ==/6608425522748803726.png"   ></div><div>选择磁盘分区, 建议使用ZFS.</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/c4JHbnHqwlVgxAfUoK0dVQ==/6608652022143149441.png"   ></div><div>选择Install, 配置ZPOOL</div><div><br></div><div><div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/MweMsVvIb03pjOG46hErYg==/6608948890282649989.png"   ></div><div>因为例子中只有1块硬盘, 选择mirror后会导致无法进行安装.</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/CxRYyD1U8Nh6V-mOTSlVmw==/6608947790771022220.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/DqZrgp54vsVtyN4LHU--VA==/6599317168424770833.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/h4ffofOMvmvrzWbgbKh0cQ==/6608927999561721489.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/3mO0tut9CnDmqMBofYs_zg==/6599300675750359011.png"   ></div><div>关闭虚拟机, 新建一个硬盘.</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/elciFHsTJa45h4ZDQuKntQ==/6608520080747817261.png"   ></div><div>现在可以选择mirror了, 选中两块硬盘作为mirror vdev.</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/WnyYN-Id74iamXUEP3y_FA==/6608186928725571301.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/JptIcCFfgnkSLHL5Vq6KYQ==/6608927999561721499.png"   ></div><div>开始安装包</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/ifmYkGEypVrPa12y5Wqmlw==/6608765271840810834.png"   ></div></div></div><div>安装完成后, 提示你设置root用户的密码</div><div><div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/237LMb2hPN_pW8ZobNLqHw==/6608201222376737086.png"   ></div></div><div><br></div><div>然后是配置网卡</div><div><br></div><div><div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/UdT3S8RmyH1WioSu1eaDCw==/6608679509933843941.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/NfAwVPolRvA_cVCl4DgWrA==/6599272088448036169.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/g8jXugtlSAXRgNIooyIcDw==/6608637728491989764.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/EuU2m4jOKLUY7Hlgi46pjw==/6608892815189631919.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/IzAiWEeacOMfVK5VFuOsSA==/6608230909190682199.png"   ></div><div>配置时钟, 时区.</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/pL73SO3B7wnSpcBnoHdSMw==/6608546469026883689.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/XLKJD4JtAPposMRyeyy2tg==/6608507986119911885.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/Pmn_EcJTcKKA0Rp13c7DdQ==/6599319367448027148.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/aJeAfkUzUdEzHrAS-rsMhA==/6599298476727104462.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/WQou75tMYZjwwHG4U8kqJA==/6608789461096622226.png"   ></div><div>配置BSD启动后, 开启哪些常用的服务, 例如sshd, ntpd</div><br></div><div><div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/z3vlu9bxRzqQg_Tgt4EcNw==/6608257297469747032.png"   ></div><div>询问是否新增一个普通用户, 可以在后面使用adduser命令添加.</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/Y_eGt7ju0XHqRxgb1GfHOg==/6599299576238732242.png"   ></div><div>是否安装handbook, 可选.</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/GKYYG8__jEffPSMezEBOlw==/6608766371352439099.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/jEWOHeRTs-A2B3MvBhelsA==/6608845536189638593.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/EWPJx_AZoya8AZ8445m3uw==/6599274287471291682.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/kKqj0HKbckk9NtcyN89CkA==/6608178132632548655.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/0Kt_iWxtwLc-pvP5gunnRg==/6608226511144171622.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/JQzz7hFTt3f7cE6kawkJWg==/6608933497119860759.png"   ></div><div>询问是否进入SHELL进行配置, 可以配置, 也可以直接exit退出</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/wL6zj6w5-6h4RXBaFBo1cg==/6608436517864105272.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/VZLjGV5E9kBSW2ihkWwCSA==/6608179232144176421.png"   ></div><div>重启服务器.</div><br></div><div><div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/0VkNlFNID-kq9hAAQrD5dw==/6599301775261987784.png"   ></div><div>接下来要配置一下sshd_config, 让root用户可以使用密码认证, 使用远程登录.</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/d58jUYc9pXcfNQ0_GAMsEg==/6608917004445444152.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/3uDITnytjeRMJ2QWyyXijg==/6608742182096627828.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img2.ph.126.net/iH5qY7Nzt3gHVhHWUzuM7Q==/6608188028237199911.png"   ></div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/2F5IWT1tmLJbA2RJ5vhJgA==/6608683907980355052.png"   ></div><div>重启sshd服务</div>&nbsp;<div><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   alt="FreeBSD install - 德哥@Digoal - PostgreSQL"   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/DJz0JlfeLjA5oIuE-kwANg==/6608767470864066904.png"   ></div></div><div><br></div><div>创建普通用户举例</div><div><pre><p></p><div><pre><p></p><div><div><font size="2"   >root@my-domain:~ # adduser&nbsp;</font></div><div><font size="2"   >Username: digoal &nbsp; &nbsp;输入用户名</font></div><div><font size="2"   >Full name: digoal.zhou &nbsp; 输入全名</font></div><div><font size="2"   >Uid (Leave empty for default):&nbsp;</font></div><div><font size="2"   >Login group [digoal]:&nbsp;</font></div><div><font size="2"   >Login group is digoal. Invite digoal into other groups? []: &nbsp; 类似linux 的useradd -G , 是否加入其他组</font></div><div><font size="2"   >Login class [default]:&nbsp;</font></div><div><font size="2"   >Shell (sh csh tcsh nologin) [sh]: csh &nbsp;使用csh</font></div><div><font size="2"   >Home directory [/home/digoal]:&nbsp;</font></div><div><font size="2"   >Home directory permissions (Leave empty for default):&nbsp;</font></div><div><font size="2"   >Use password-based authentication? [yes]: &nbsp; 是否使用基于密码的认证</font></div><div><font size="2"   >Use an empty password? (yes/no) [no]:&nbsp;</font></div><div><font size="2"   >Use a random password? (yes/no) [no]:&nbsp;</font></div><div><font size="2"   >Enter password:&nbsp;</font></div><div><font size="2"   >Enter password again:&nbsp;</font></div><div><font size="2"   >Lock out the account after creation? [no]: &nbsp; 创建完后是否锁住用户</font></div><div><font size="2"   >Username &nbsp; : digoal</font></div><div><font size="2"   >Password &nbsp; : *****</font></div><div><font size="2"   >Full Name &nbsp;: digoal.zhou</font></div><div><font size="2"   >Uid &nbsp; &nbsp; &nbsp; &nbsp;: 1002</font></div><div><font size="2"   >Class &nbsp; &nbsp; &nbsp;:&nbsp;</font></div><div><font size="2"   >Groups &nbsp; &nbsp; : digoal&nbsp;</font></div><div><font size="2"   >Home &nbsp; &nbsp; &nbsp; : /home/digoal</font></div><div><font size="2"   >Home Mode &nbsp;:&nbsp;</font></div><div><font size="2"   >Shell &nbsp; &nbsp; &nbsp;: /bin/csh</font></div><div><font size="2"   >Locked &nbsp; &nbsp; : no</font></div><div><font size="2"   >OK? (yes/no): yes</font></div><div><font size="2"   >adduser: INFO: Successfully added (digoal) to the user database.</font></div><div><font size="2"   >Add another user? (yes/no): no &nbsp;是否继续创建其他用户</font></div><div><font size="2"   >Goodbye!</font></div></div><div><div><font size="2"   >root@my-domain:~ # id digoal</font></div><div><font size="2"   >uid=1002(digoal) gid=1002(digoal) groups=1002(digoal)</font></div></div><p></p></pre></div><p></p></pre></div><div><br></div><div>查找包举例</div><div><pre><p></p><div><pre><p></p><div><pre><p></p><div><font size="2"   >pkg search $packagename</font></div><div><font size="2"   >第一次使用pkg, 如果没有安装的话, 会提示安装.</font></div><div><font size="2"   >root@digoal:~ # pkg search postgresql
The package management tool is not yet installed on your system.
Do you want to fetch and install it now? [y/N]: y
Bootstrapping pkg from pkg+http://pkg.FreeBSD.org/freebsd:10:x86:64/latest, please wait...</font></div><div><font size="2"   >Verifying signature with trusted certificate pkg.freebsd.org.2013102301... done
Installing pkg-1.2.7_2... done
If you are upgrading from the old package format, first run:

  # pkg2ng</font></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >root@my-domain:~ # pkg search postgresql</font></div><div><font size="2"   >exim-postgresql-4.82</font></div><div><font size="2"   >ja-postgresql82-man-8.2.4</font></div><div><font size="2"   >libgda4-postgresql-4.2.12</font></div><div><font size="2"   >libgda5-postgresql-5.0.3</font></div><div><font size="2"   >p5-Test-postgresql-0.09</font></div><div><font size="2"   >pgtcl-postgresql90-2.0.0</font></div><div><font size="2"   >pgtcl-postgresql91-2.0.0</font></div><div><font size="2"   >pgtcl-postgresql92-2.0.0</font></div><div><font size="2"   >pgtcl-postgresql93-2.0.0</font></div><div><font size="2"   >pgtcl-postgresql94-2.0.0</font></div><div><font size="2"   >postgresql-jdbc-9.1.902_1</font></div><div><font size="2"   >postgresql-libpgeasy-3.0.4_1</font></div><div><font size="2"   >postgresql-libpqxx-4.0.1_1</font></div><div><font size="2"   >postgresql-libpqxx3-3.1.1_1</font></div><div><font size="2"   >postgresql-odbc-09.01.0200_1</font></div><div><font size="2"   >postgresql-pllua-1.0</font></div><div><font size="2"   >postgresql-plproxy-2.5</font></div><div><font size="2"   >postgresql-plruby-0.5.4_2</font></div><div><font size="2"   >postgresql-plv8js-1.4.1</font></div><div><font size="2"   >postgresql-relay-1.3.2_1</font></div><div><font size="2"   >postgresql-repmgr-2.0_1</font></div><div><font size="2"   >postgresql84-client-8.4.21</font></div><div><font size="2"   >postgresql84-contrib-8.4.21_1</font></div><div><font size="2"   >postgresql84-docs-8.4.21</font></div><div><font size="2"   >postgresql84-plperl-8.4.21_1</font></div><div><font size="2"   >postgresql84-plpython-8.4.21_1</font></div><div><font size="2"   >postgresql84-pltcl-8.4.21</font></div><div><font size="2"   >postgresql84-server-8.4.21_1</font></div><div><font size="2"   >postgresql9-client-9.4.b1_1</font></div><div><font size="2"   >postgresql9-contrib-9.4.b1_1</font></div><div><font size="2"   >postgresql9-docs-9.4.b1</font></div><div><font size="2"   >postgresql9-plperl-9.4.b1</font></div><div><font size="2"   >postgresql9-plpython-9.4.b1</font></div><div><font size="2"   >postgresql9-pltcl-9.4.b1</font></div><div><font size="2"   >postgresql9-server-9.4.b1_1</font></div><div><font size="2"   >postgresql90-client-9.0.17</font></div><div><font size="2"   >postgresql90-contrib-9.0.17</font></div><div><font size="2"   >postgresql90-docs-9.0.17</font></div><div><font size="2"   >postgresql90-plperl-9.0.17</font></div><div><font size="2"   >postgresql90-plpython-9.0.17</font></div><div><font size="2"   >postgresql90-pltcl-9.0.17</font></div><div><font size="2"   >postgresql90-server-9.0.17</font></div><div><font size="2"   >postgresql91-client-9.1.13_1</font></div><div><font size="2"   >postgresql91-contrib-9.1.13_1</font></div><div><font size="2"   >postgresql91-docs-9.1.13</font></div><div><font size="2"   >postgresql91-plperl-9.1.13_1</font></div><div><font size="2"   >postgresql91-plpython-9.1.13_1</font></div><div><font size="2"   >postgresql91-pltcl-9.1.13</font></div><div><font size="2"   >postgresql91-server-9.1.13_1</font></div><div><font size="2"   >postgresql92-client-9.2.8_1</font></div><div><font size="2"   >postgresql92-contrib-9.2.8_1</font></div><div><font size="2"   >postgresql92-docs-9.2.8</font></div><div><font size="2"   >postgresql92-plperl-9.2.8_1</font></div><div><font size="2"   >postgresql92-plpython-9.2.8_1</font></div><div><font size="2"   >postgresql92-pltcl-9.2.8</font></div><div><font size="2"   >postgresql92-server-9.2.8_1</font></div><div><font size="2"   >postgresql93-client-9.3.4</font></div><div><font size="2"   >postgresql93-contrib-9.3.4_1</font></div><div><font size="2"   >postgresql93-docs-9.3.4</font></div><div><font size="2"   >postgresql93-plperl-9.3.4</font></div><div><font size="2"   >postgresql93-plpython-9.3.4</font></div><div><font size="2"   >postgresql93-pltcl-9.3.4</font></div><div><font size="2"   >postgresql93-server-9.3.4</font></div><div><font size="2"   >postgresql_autodoc-1.41</font></div><div><font size="2"   >py33-postgresql-1.1.0_1</font></div></div><p></p></pre></div><p></p></pre></div><p></p></pre></div><div><br></div><div><span style="line-height: 28px;"   >安装包举例</span></div><div><span style="line-height: 28px;"   >pkg install $packagename</span></div><div><span style="line-height: 28px;"   >例如安装我们上面查到的postgresql 9.3.4</span></div><div><pre><p></p><div><pre><p></p><div><pre><p></p><div><div><font size="2"   >root@my-domain:~ # pkg install postgresql93-server-9.3.4</font></div><div><font size="2"   >Updating repository catalogue</font></div><div><font size="2"   >The following 2 packages will be installed:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; Installing postgresql93-client: 9.3.4</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; Installing postgresql93-server: 9.3.4</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The installation will require 25 MB more space</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >5 MB to be downloaded</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Proceed with installing packages [y/N]: y</font></div><div><font size="2"   >postgresql93-client-9.3.4.txz &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 100% 1968KB &nbsp;43.7KB/s 108.1KB/s &nbsp; 00:45 &nbsp; &nbsp;</font></div><div><font size="2"   >postgresql93-server-9.3.4.txz &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 100% 3196KB &nbsp;47.0KB/s &nbsp;55.5KB/s &nbsp; 01:08 &nbsp; &nbsp;</font></div><div><font size="2"   >Checking integrity... done</font></div><div><font size="2"   >[1/2] Installing postgresql93-client-9.3.4... done</font></div><div><font size="2"   >[2/2] Installing postgresql93-server-9.3.4...===&gt; Creating users and/or groups.</font></div><div><font size="2"   >Creating group 'pgsql' with gid '70'.</font></div><div><font size="2"   >Creating user 'pgsql' with uid '70'.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; =========== BACKUP YOUR DA<wbr>TA! =============</font></div><div><font size="2"   >&nbsp; As always, backup your da<wbr>ta before</font></div><div><font size="2"   >&nbsp; upgrading. If the upgrade leads to a higher</font></div><div><font size="2"   >&nbsp; minor revision (e.g. 8.3.x -&gt; 8.4), a dump</font></div><div><font size="2"   >&nbsp; and restore of all databases is</font></div><div><font size="2"   >&nbsp; required. This is *NOT* done by the port!</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; Press ctrl-C *now* if you need to pg_dump.</font></div><div><font size="2"   >&nbsp; ===========================================</font></div><div><font size="2"   >&nbsp;done</font></div><div><font size="2"   >The PostgreSQL port has a collection of "side orders":</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgresql-docs</font></div><div><font size="2"   >&nbsp; For all of the html documentation</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >p5-Pg</font></div><div><font size="2"   >&nbsp; A perl5 API for client access to PostgreSQL databases.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgresql-tcltk&nbsp;</font></div><div><font size="2"   >&nbsp; If you want tcl/tk client support.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgresql-jdbc</font></div><div><font size="2"   >&nbsp; For Java JDBC support.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgresql-odbc</font></div><div><font size="2"   >&nbsp; For client access from unix applications using ODBC as access</font></div><div><font size="2"   >&nbsp; method. Not needed to access unix PostgreSQL servers from Win32</font></div><div><font size="2"   >&nbsp; using ODBC. See below.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >ruby-postgres, py-PyGreSQL</font></div><div><font size="2"   >&nbsp; For client access to PostgreSQL databases using the ruby &amp; python</font></div><div><font size="2"   >&nbsp; languages.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgresql-plperl, postgresql-pltcl &amp; postgresql-plruby</font></div><div><font size="2"   >&nbsp; For using perl5, tcl &amp; ruby as procedural languages.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgresql-contrib</font></div><div><font size="2"   >&nbsp; Lots of contributed utilities, postgresql functions and</font></div><div><font size="2"   >&nbsp; datatypes. There you find pg_standby, pgcrypto and many other cool</font></div><div><font size="2"   >&nbsp; things.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >etc...</font></div><div><font size="2"   >For procedural languages and postgresql functions, please note that</font></div><div><font size="2"   >you might have to update them when updating the server.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >If you have many tables and many clients running, consider raising</font></div><div><font size="2"   >kern.maxfiles using sysctl(8), or reconfigure your kernel</font></div><div><font size="2"   >appropriately.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The port is set up to use autovacuum for new databases, but you might</font></div><div><font size="2"   >also want to vacuum and perhaps backup your database regularly. There</font></div><div><font size="2"   >is a periodic script, /usr/local/etc/periodic/daily/502.pgsql, that</font></div><div><font size="2"   >you may find useful. You can use it to backup and perfom vacuum on all</font></div><div><font size="2"   >databases nightly. Per default, it perfoms `vacuum analyze'. See the</font></div><div><font size="2"   >script for instructions. For autovacuum settings, please review</font></div><div><font size="2"   >~pgsql/da<wbr>ta/postgresql.conf.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >If you plan to access your PostgreSQL server using ODBC, please</font></div><div><font size="2"   >consider running the SQL script /usr/local/share/postgresql/odbc.sql</font></div><div><font size="2"   >to get the functions required for ODBC compliance.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Please note that if you use the rc script,</font></div><div><font size="2"   >/usr/local/etc/rc.d/postgresql, to initialize the database, unicode</font></div><div><font size="2"   >(UTF-8) will be used to store character da<wbr>ta by default. &nbsp;Set</font></div><div><font size="2"   >postgresql_initdb_flags or use login.conf settings described below to</font></div><div><font size="2"   >alter this behaviour. See the start rc script for more info.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >To set limits, environment stuff like locale and collation and other</font></div><div><font size="2"   >things, you can set up a class in /etc/login.conf before initializing</font></div><div><font size="2"   >the database. Add something similar to this to /etc/login.conf:</font></div><div><font size="2"   >---</font></div><div><font size="2"   >postgres:\</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; :lang=en_US.UTF-8:\</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; :setenv=LC_COLLATE=C:\</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; :tc=default:</font></div><div><font size="2"   >---</font></div><div><font size="2"   >and run `cap_mkdb /etc/login.conf'.</font></div><div><font size="2"   >Then add 'postgresql_class="postgres"' to /etc/rc.conf.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >======================================================================</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >To initialize the database, run</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; /usr/local/etc/rc.d/postgresql initdb</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >You can then start PostgreSQL by running:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; /usr/local/etc/rc.d/postgresql start</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >For postmaster settings, see ~pgsql/da<wbr>ta/postgresql.conf</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >NB. FreeBSD's PostgreSQL port logs to syslog by default</font></div><div><font size="2"   >&nbsp; &nbsp; See ~pgsql/da<wbr>ta/postgresql.conf for more info</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >======================================================================</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >To run PostgreSQL at startup, add</font></div><div><font size="2"   >'postgresql_enable="YES"' to /etc/rc.conf</font></div></div><div><font size="2"   ><br></font></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >root@my-domain:~ # su - pgsql</font></div><div><font size="2"   >$ which psql</font></div><div><font size="2"   >/usr/local/bin/psql</font></div><div><font size="2"   >$ psql -V</font></div><div><font size="2"   >psql (PostgreSQL) 9.3.4</font></div></div><div><font size="2"   >这个pg的编译参数</font></div><div><div><font size="2"   >$ pg_config --configure</font></div><div><font size="2"   >'--with-libraries=/usr/local/lib' '--with-includes=/usr/local/include' '--enable-thread-safety' '--with-openssl' '--with-libxml' '--enable-nls' '--without-gssapi' '--prefix=/usr/local' '--mandir=/usr/local/man' '--infodir=/usr/local/info/' '--build=amd64-portbld-freebsd10.0' 'build_alias=amd64-portbld-freebsd10.0' 'CC=cc' 'CFLAGS=-O2 -pipe -fno-strict-aliasing' 'LDFLAGS= -L/usr/local/lib -Wl,-rpath,/usr/lib:/usr/local/lib' 'CPPFLAGS=' 'CPP=cpp' 'LDFLAGS_SL='</font></div></div><p></p></pre></div><p></p></pre></div><p></p></pre></div><div><br></div><div><span style="line-height: 28px;"   >删除包举例</span></div><div><pre><p></p><div><pre><p></p><div><pre><p></p><div><div><font size="2"   >root@my-domain:~ # pkg remove postgresql93-server-9.3.4</font></div><div><font size="2"   >Deinstallation has been requested for the following 1 packages:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; postgresql93-server-9.3.4</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >The deinstallation will free 17 MB</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Proceed with deinstalling packages [y/N]: y</font></div><div><font size="2"   >[1/1] Deleting postgresql93-server-9.3.4...==&gt; You should manually remove the "pgsql" user.&nbsp;</font></div><div><font size="2"   >&nbsp;done</font></div></div><div><font size="2"   >提示用户需要手工删除</font></div><div><div><font size="2"   >root@my-domain:~ # id pgsql</font></div><div><font size="2"   >uid=70(pgsql) gid=70(pgsql) groups=70(pgsql)</font></div></div><p></p></pre></div><p></p></pre></div><p></p></pre></div><div><br></div><div>手工删除用户</div><div><pre><p></p><div><pre><p></p><div><pre><p></p><div><font size="2"   >root@my-domain:~ # rmuser pgsql</font></div><div><font size="2"   >Matching password entry:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >pgsql:*:70:70::0:0:PostgreSQL pseudo-user:/usr/local/pgsql:/bin/sh</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Is this the entry you wish to remove? yes</font></div><div><font size="2"   >Remove user's home directory (/usr/local/pgsql)? &nbsp; &nbsp;</font></div><div><font size="2"   >Remove user's home directory (/usr/local/pgsql)? ys</font></div><div><font size="2"   >Remove user's home directory (/usr/local/pgsql)? yes</font></div><div><font size="2"   >Removing user (pgsql): mailspool home passwd.</font></div><div><font size="2"   >root@my-domain:~ # rm</font></div><div><font size="2"   >rm &nbsp; &nbsp; &nbsp; &nbsp;rmail &nbsp; &nbsp; rmd160 &nbsp; &nbsp;rmdir &nbsp; &nbsp; rmextattr rmt &nbsp; &nbsp; &nbsp; rmuser &nbsp; &nbsp;</font></div><div><font size="2"   >root@my-domain:~ # id pgsql</font></div><div><font size="2"   >id: pgsql: no such user</font></div><p></p></pre></div><p></p></pre></div><p></p></pre></div><div><span style="line-height: 28px;"   ><br></span></div><div>下载软件举例</div><div>freebsd默认没有安装wget, 可以使用fetch命令下载软件.</div><div><pre><p></p><pre><p></p><div><pre><pre><p></p><pre><div><pre><div><font size="2"   >fetch&nbsp;http://ftp.postgresql.org/pub/source/v9.3.4/postgresql-9.3.4.tar.bz2</font></div><div></div><p></p></pre></div><div></div><p></p></pre><div></div><p></p></pre><div><span style="line-height: 28px; font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, 宋体;"   >如果要用wget的话, 可以使用pkg安装wget.</span></div></pre></div></pre></pre></div><div><pre><p></p><pre><p></p><div><pre><pre><p></p><pre><div><pre><div><font size="2"   >pkg install wget</font></div><div></div><p></p></pre></div><div></div><p></p></pre><div></div><p></p></pre><div><span style="line-height: 28px; font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, 宋体;"   ><br></span></div><div><span style="line-height: 28px; font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, 宋体;"   >[参考]</span></div></pre></div></pre></pre></div><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201441694022110/"   >http://blog.163.com/digoal@126/blog/static/163877040201441694022110/</a></div><div>2.&nbsp;<a style="line-height: 28px; text-decoration: none; color: rgb(85, 108, 136); font-family: 'Hiragino Sans GB W3', 'Hiragino Sans GB', Arial, Helvetica, simsun, u5b8bu4f53;" target="_blank" rel="nofollow" href="http://en.wikipedia.org/wiki/Non-RAID_drive_architectures"   >http://en.wikipedia.org/wiki/Non-RAID_drive_architectures</a></div><div>3.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.freebsd.org/"   >http://www.freebsd.org/</a></div><div>4.&nbsp;ftp://ftp.freebsd.org/pub/FreeBSD/releases/amd64/amd64/ISO-IMAGES/10.0/FreeBSD-10.0-RELEASE-amd64-dvd1.iso</div><div>5.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/"   >http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/</a></div><div>6.&nbsp;ftp://ftp.freebsd.org/pub/FreeBSD/doc/en_US.ISO8859-1/books/</div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="FreeBSD install - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
	<h3>评论</h3>
	<div class="" id="" style="padding:0 20px;">
			<div id="">
				<h5 id="">francs - 2014-07-03 17:06:22</h5>
				<div>图截得不错！ 改天也装个 FreeBSD 玩玩。</div>
			</div>
			<div style="padding-left:40px;">
				<h5 id="">德哥@Digoal 回复 francs - 2014-07-03 17:06:22</h5>
				<div style="width:600px;">有玩耍的心态,不错!!</div>
			</div>
	</div>
</div>
</body>
</html>