<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">OpenLDAP installation</h2>
	<h5 id="">2014-06-04 11:11:14&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402014548315577/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>最简单的安装方法rpm安装</div><div><pre   ><p></p><div><font size="2"   ># rpm -qa|grep openldap</font></div><div><font size="2"   >openldap-debuginfo-2.4.23-32.el6_4.1.x86_64</font></div><div><font size="2"   >openldap-2.4.23-32.el6_4.1.x86_64</font></div><div><font size="2"   >compat-openldap-2.3.43-2.el6.x86_64</font></div><div><font size="2"   >openldap-clients-2.4.23-32.el6_4.1.x86_64</font></div><div><font size="2"   >openldap-servers-sql-2.4.23-32.el6_4.1.x86_64</font></div><div><font size="2"   >openldap-servers-2.4.23-32.el6_4.1.x86_64</font></div><div><font size="2"   >openldap-devel-2.4.23-32.el6_4.1.x86_64</font></div><p></p></pre></div><div><br></div><div>以下是源码安装.</div><div>下载OpenLDAP的稳定版</div><div><pre   ><p></p><div><font size="2"   ># wget ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-2.4.39.tgz</font></div><div></div><p></p></pre></div><div><br></div><div>安装依赖软件</div><div>为了全面兼容LDAPv3, 需要安装依赖软件, 这些软件的版本建议</div><div><a target="_blank" rel="nofollow" href="http://www.openldap.org/doc/admin24/appendix-recommended-versions.html"   >http://www.openldap.org/doc/admin24/appendix-recommended-versions.html</a></div><div>1. TLS(Transport Layer Security) service 依赖包, OpenLDAP客户端和服务端都需要安装.</div><div><pre   ><p></p><div><font size="2"   >OpenSSL, GnuTLS, or MozNSS(三选一)</font></div><div><font size="2"   >OpenSSL is available from&nbsp;<a target="_blank" rel="nofollow" href="http://www.openssl.org/"   >http://www.openssl.org/</a>.&nbsp;</font></div><div><font size="2"   >GnuTLS is available from&nbsp;<a target="_blank" rel="nofollow" href="http://www.gnu.org/software/gnutls/"   >http://www.gnu.org/software/gnutls/</a>.&nbsp;</font></div><div><font size="2"   >Mozilla NSS is available from&nbsp;<a target="_blank" rel="nofollow" href="http://developer.mozilla.org/en/NSS"   >http://developer.mozilla.org/en/NSS</a>.</font></div><div><font size="2"   >安装openssl</font></div><div><font size="2"   ># wget&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.openssl.org/source/openssl-1.0.1g.tar.gz"   >http://www.openssl.org/source/openssl-1.0.1g.tar.gz</a></font></div><div><font size="2"   ># tar -zxvf openssl-1.0.1g.tar.gz</font></div><div><font size="2"   ># cd openssl-1.0.1g</font></div><div><font size="2"   >阅读INSTALL和README</font></div><div><font size="2"   ># ./config --prefix=/usr/local --openssldir=/usr/local/ssl</font></div><div><font size="2"   ># make</font></div><div><font size="2"   ># make install</font></div><p></p></pre></div><div><br></div><div>2. SASL(Simple Authentication and Security Layer) service&nbsp;<span style="line-height: 28px;"   >依赖包, OpenLDAP客户端和服务端都需要安装.</span></div><div><pre   ><p></p><div><font size="2"   >Cyrus SASL</font></div><div><a target="_blank" rel="nofollow" href="http://asg.web.cmu.edu/sasl/sasl-library.html"   ><font size="2"   >http://asg.web.cmu.edu/sasl/sasl-library.html</font></a></div><div><span style="line-height: 28px;"   ><font size="2"   >安装sasl</font></span></div><div><font size="2"   ># wget&nbsp;ftp://ftp.andrew.cmu.edu/pub/cyrus-mail/cyrus-sasl-2.1.25.tar.gz</font></div><div><font size="2"   ># tar -zxvf cyrus-sasl-2.1.25.tar.gz</font></div><div><font size="2"   ># cd&nbsp;cyrus-sasl-2.1.25</font></div><div><span style="line-height: 28px;"   ><font size="2"   >阅读INSTALL和README</font></span></div><div><div style="line-height: 28px;"   ><font size="2"   ># ./configure</font></div><div style="line-height: 28px;"   ><font size="2"   ># make</font></div><div style="line-height: 28px;"   ><font size="2"   ># make install</font></div></div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><font size="2"   >********************************************************</font></div><div style="line-height: 28px;"   ><font size="2"   >* WARNING:</font></div><div style="line-height: 28px;"   ><font size="2"   >* Plugins are being installed into /usr/local/lib/sasl2,</font></div><div style="line-height: 28px;"   ><font size="2"   >* but the library will look for them in /usr/lib/sasl2.</font></div><div style="line-height: 28px;"   ><font size="2"   >* You need to make sure that the plugins will eventually</font></div><div style="line-height: 28px;"   ><font size="2"   >* be in /usr/lib/sasl2 -- the easiest way is to make a</font></div><div style="line-height: 28px;"   ><font size="2"   >* symbolic link from /usr/lib/sasl2 to /usr/local/lib/sasl2,</font></div><div style="line-height: 28px;"   ><font size="2"   >* but this may not be appropriate for your site, so this</font></div><div style="line-height: 28px;"   ><font size="2"   >* installation procedure won't do it for you.</font></div><div style="line-height: 28px;"   ><font size="2"   >*</font></div><div style="line-height: 28px;"   ><font size="2"   >* If you don't want to do this for some reason, you can</font></div><div style="line-height: 28px;"   ><font size="2"   >* set the location where the library will look for plugins</font></div><div style="line-height: 28px;"   ><font size="2"   >* by setting the environment variable SASL_PATH to the path</font></div><div style="line-height: 28px;"   ><font size="2"   >* the library should use.</font></div><div style="line-height: 28px;"   ><font size="2"   >********************************************************</font></div><div style="line-height: 28px;"   ><font size="2"   >make[2]: Nothing to be done for `install-da<wbr>ta-am'.</font></div><div style="line-height: 28px;"   ><font size="2"   >make[2]: Leaving directory `/opt/soft_bak/cyrus-sasl-2.1.25'</font></div><div style="line-height: 28px;"   ><font size="2"   >make[1]: Leaving directory `/opt/soft_bak/cyrus-sasl-2.1.25'</font></div><div style="line-height: 28px;"   ><font size="2"   >[root@db-172-16-3-150 cyrus-sasl-2.1.25]# ln -s /usr/local/lib/sasl2 /usr/lib/sasl2</font></div></div><p></p></pre></div><div><div style="line-height: 28px;"   >sasl版本不对可能导致slapd启动失败, 见/var/log/messages</div><div><pre   ><p><font size="2"   >slapd[15107]: auxpropfunc error version mismatch with plug-in</font></p></pre></div><div style="line-height: 28px;"   ><br></div></div><div>3.&nbsp;Kerberos Authentication Service</div><div><pre   ><p></p><div><font size="2"   >Heimdal or MIT Kerberos V libraries(二选一)</font></div><div><font size="2"   >Heimdal Kerberos is available from&nbsp;<a target="_blank" rel="nofollow" href="http://www.pdc.kth.se/heimdal/"   >http://www.pdc.kth.se/heimdal/</a>.&nbsp;</font></div><div><font size="2"   >MIT Kerberos is available from&nbsp;<a target="_blank" rel="nofollow" href="http://web.mit.edu/kerberos/www/"   >http://web.mit.edu/kerberos/www/</a>.</font></div><div><font size="2"   >安装MIT Kerberos V Libraries</font></div><div><font size="2"   ># wget&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://web.mit.edu/kerberos/www/dist/krb5/1.12/krb5-1.12.1-signed.tar"   >http://web.mit.edu/kerberos/www/dist/krb5/1.12/krb5-1.12.1-signed.tar</a></font></div><div><font size="2"   ># tar -xvf krb5-1.12.1-signed.tar&nbsp;</font></div><div><font size="2"   ># tar -zxvf krb5-1.12.1.tar.gz</font></div><div><font size="2"   ># cd krb5-1.12.1</font></div><div><font size="2"   ># cd src</font></div><div><font size="2"   ># ./configure</font></div><div><font size="2"   ># make</font></div><div><font size="2"   ># make install</font></div><p></p></pre></div><div><br></div><div>4.&nbsp;Database Software</div><div><pre   ><p></p><div><font size="2"   >OpenLDAP's slapd BDB and HDB primary database backends require Oracle Corporation Berkeley DB</font></div><div><font size="2"   >Berkeley DB download page&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.oracle.com/technology/software/products/berkeley-db/index.html"   >http://www.oracle.com/technology/software/products/berkeley-db/index.html</a></font></div><div><a target="_blank" rel="nofollow" href="http://docs.oracle.com/cd/E17076_03/html/installation/index.html"   ><font size="2"   >http://docs.oracle.com/cd/E17076_03/html/installation/index.html</font></a></div><div><font size="2"   >下载</font></div><div><a target="_blank" rel="nofollow" href="http://download.oracle.com/otn/berkeley-db/db-6.0.30.tar.gz"   ><font size="2"   >http://download.oracle.com/otn/berkeley-db/db-6.0.30.tar.gz</font></a></div><div><font size="2"   >安装</font></div><div><font size="2"   ># tar -zxvf&nbsp;db-6.0.30.tar.gz</font></div><div><font size="2"   ># cd&nbsp;db-6.0.30</font></div><div><font size="2"   ># cd dist/buildpkg</font></div><div><font size="2"   ># cd&nbsp;build_unix</font></div><div><font size="2"   >#&nbsp;../dist/configure --prefix=/opt/bdb6&nbsp;--enable-sql</font></div><div><font size="2"   ># make</font></div><div><font size="2"   ># make install</font></div><p></p></pre></div><div><br></div><div>5. Threads</div><div>OpenLDAP supports POSIX pthreads, Mach CThreads, and a number of other varieties.</div><div><br></div><div>6. TCP Wrappers</div><div>slapd supports TCP Wrappers (IP level access control filters) if preinstalled.</div><div><br></div><div>7. 配置ld.so.conf</div><div><pre   ><p></p><div><font size="2"   ># vi /etc/ld.so.conf</font></div><div><div><font size="2"   >include ld.so.conf.d/*.conf</font></div><div><font size="2"   >/usr/local/lib</font></div><div><font size="2"   >/usr/lib/sasl2</font></div><div><font size="2"   >/opt/bdb6/lib</font></div></div><div><font size="2"   ># ldconfig&nbsp;</font></div><p></p></pre></div><div><br></div><div>安装openldap</div><div><pre   ><p></p><div><font size="2"   ># tar -zxvf openldap-2.4.39.tgz</font></div><div><font size="2"   ># cd openldap-2.4.39</font></div><div><font size="2"   ># ./configure --help</font></div><div><font size="2"   ># ./configure --prefix=/opt/openldap-2.4.39 --with-threads --with-tls --with-cyrus-sasl</font></div><div><font size="2"   ># make depend</font></div><div><font size="2"   ># make</font></div><div><font size="2"   ># make install</font></div><div><font size="2"   ># export MANPATH=/opt/openldap-2.4.39/share/man:$MANPATH</font></div><div><font size="2"   ># export MANPATH=/opt/openldap-2.4.39/bin:/opt/openldap-2.4.39/sbin:$PATH</font></div><p></p></pre></div><div><br></div>[参考]<div>1.&nbsp;<a target="_blank" rel="nofollow" href="http://www.openldap.org/doc/admin24/index.html"   >http://www.openldap.org/doc/admin24/index.html</a><br><div>2.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.openldap.org/software/download/"   >http://www.openldap.org/software/download/</a></div><div>3.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.openldap.org/doc/admin24/quickstart.html"   >http://www.openldap.org/doc/admin24/quickstart.html</a></div><div>4.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.openldap.org/doc/admin24/install.html"   >http://www.openldap.org/doc/admin24/install.html</a></div><div>5.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.openldap.org/doc/admin24/appendix-recommended-versions.html"   >http://www.openldap.org/doc/admin24/appendix-recommended-versions.html</a></div><div>6.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.openssl.org/"   >http://www.openssl.org/</a></div><div><span style="line-height: 28px;"   >7.&nbsp;</span><a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.gnu.org/software/gnutls/"   >http://www.gnu.org/software/gnutls/</a></div><div><span style="line-height: 28px;"   >8.&nbsp;</span><a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://developer.mozilla.org/en/NSS"   >http://developer.mozilla.org/en/NSS</a></div><div><span style="line-height: 28px;"   >9.&nbsp;</span><a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://asg.web.cmu.edu/sasl/sasl-library.html"   >http://asg.web.cmu.edu/sasl/sasl-library.html</a></div><div>10.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.pdc.kth.se/heimdal/"   >http://www.pdc.kth.se/heimdal/</a></div><div><span style="line-height: 28px;"   >11.&nbsp;</span><a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://web.mit.edu/kerberos/www/"   >http://web.mit.edu/kerberos/www/</a></div><div><span style="line-height: 28px;"   >12.&nbsp;</span><a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.oracle.com/technology/software/products/berkeley-db/index.html"   >http://www.oracle.com/technology/software/products/berkeley-db/index.html</a></div><div><span style="line-height: 28px;"   >13.&nbsp;</span><a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.lysator.liu.se/~nisse/nettle/"   >http://www.lysator.liu.se/~nisse/nettle/</a></div><div><span style="line-height: 28px;"   >14. 配置源码时支持的环境变量</span></div><div><table border=""   align="Center"   style="color: rgb(0, 0, 0); font-family: Simsun; line-height: normal;"   ><caption align="top"   >Table 4.1: Variables</caption><tbody><tr><td><strong>Variable</strong></td><td><strong>Description</strong></td></tr><tr><td><tt>CC</tt></td><td>Specify alternative C Compiler</td></tr><tr><td><tt>CFLAGS</tt></td><td>Specify additional compiler flags</td></tr><tr><td><tt>CPPFLAGS</tt></td><td>Specify C Preprocessor flags</td></tr><tr><td><tt>LDFLAGS</tt></td><td>Specify linker flags</td></tr><tr><td><tt>LIBS</tt></td><td>Specify additional libraries</td></tr></table></div><div><span style="line-height: 28px;"   ><br></span></div><div><br></div></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="OpenLDAP installation - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>