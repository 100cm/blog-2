<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">ceph recommendation - os</h2>
	<h5 id="">2014-12-01 15:26:39&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201411132433623/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>内核版本 :&nbsp;</div><div><div>v3.16.3 or later (rbd deadlock regression in v3.16.[0-2])</div><div>v3.14.*</div><div>v3.10.*</div></div><div>注意, 如果要使用firefly 的 crush tunables功能, 建议使用v3.16.3内核.</div><div>firefly (CRUSH_TUNABLES3) tunables are supported starting with v3.15. See CRUSH Tunables for more details.</div><div>如果要使用 btrfs 文件系统 , 建议使用<span style="line-height: 28px;"   >v3.16.3内核.</span></div><div><span style="line-height: 28px;"   ><br></span></div><div><span style="line-height: 28px;"   >GLIBC :&nbsp;</span></div><div>firefly以后的版本(例如giant+), 建议使用fdatasync flush方法提升性能.&nbsp;</div><div><ul style="color: rgb(62, 67, 73); font-family: Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19.6000003814697px;"   ><li style="line-height: 1.5em;"   ><strong>fdatasync(2)</strong>: With Firefly v0.80 and beyond, use&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>fdatasync(2)</span></tt>&nbsp;instead of&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>fsync(2)</span></tt>&nbsp;to improve performance.</li><li style="line-height: 1.5em;"   ><strong>syncfs(2)</strong>: For non-btrfs filesystems such as XFS and ext4 where more than one&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>ceph-osd</span></tt>&nbsp;daemon is used on a single server, Ceph performs significantly better with the&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>syncfs(2)</span></tt>&nbsp;system call (added in kernel 2.6.39 and glibc 2.14).&nbsp;</li><li style="line-height: 1.5em;"   >New versions of Ceph (v0.55 and later) do not depend on glibc support.&nbsp;</li></ul></div><div><span style="line-height: 28px;"   ><br></span></div><div>操作系统</div><div>以Firefly版本为例, 建议使用ubuntu 14.04或CentOS 7, RHEL 7.</div><div><h3 style="margin: 30px 0px 10px; padding: 5px 0px; text-transform: uppercase; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: 1.6; font-family: 'Titillium Web'; color: rgb(55, 66, 74);"   >FIREFLY (0.80)<a title="Permalink to this headline" style="color: rgb(198, 15, 15); text-decoration: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" rel="nofollow" href="http://ceph.com/docs/master/start/os-recommendations/#firefly-0-80"   ></a></h3><table border="1"   style="border: 0px; border-collapse: collapse; margin: 1.5em; color: rgb(62, 67, 73); font-family: Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19.6000003814697px;"   ><colgroup><col width="13%"   ><col width="13%"   ><col width="27%"   ><col width="19%"   ><col width="12%"   ><col width="16%"   ><thead valign="bottom"   ><tr><th style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Distro</th><th style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Release</th><th style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Code Name</th><th style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Kernel</th><th style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Notes</th><th style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Testing</th></tr></thead><tbody valign="top"   ><tr><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Ubuntu</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >12.04</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Precise Pangolin</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >linux-3.2.0</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >1, 2</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >B, I, C</td></tr><tr><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Ubuntu</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >14.04</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Trusty Tahr</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >linux-3.13.0</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >&nbsp;</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >B, I, C</td></tr><tr><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Debian</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >6.0</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Squeeze</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >linux-2.6.32</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >1, 2, 3</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >B</td></tr><tr><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Debian</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >7.0</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Wheezy</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >linux-3.2.0</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >1, 2</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >B</td></tr><tr><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >CentOS</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >6</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >N/A</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >linux-2.6.32</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >1, 2</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >B, I</td></tr><tr><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >RHEL</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >6</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >&nbsp;</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >linux-2.6.32</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >1, 2</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >B, I, C</td></tr><tr><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >RHEL</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >7</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >&nbsp;</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >linux-3.10.0</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >&nbsp;</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >B, I, C</td></tr><tr><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Fedora</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >19.0</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Schr?dinger’s Cat</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >linux-3.10.0</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >&nbsp;</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >B</td></tr><tr><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Fedora</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >20.0</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >Heisenbug</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >linux-3.14.0</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >&nbsp;</td><td style="padding: 1px 8px 1px 5px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170);"   >B</td></tr></table></div><div><h3 style="margin: 30px 0px 10px; padding: 5px 0px; text-transform: uppercase; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: 1.6; font-family: 'Titillium Web'; color: rgb(55, 66, 74);"   >NOTES<a title="Permalink to this headline" style="color: rgb(198, 15, 15); text-decoration: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" rel="nofollow" href="http://ceph.com/docs/master/start/os-recommendations/#notes"   ></a></h3><ul style="color: rgb(62, 67, 73); font-family: Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19.6000003814697px;"   ><li style="line-height: 1.5em;"   ><strong>1</strong>: The default kernel has an older version of&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>btrfs</span></tt>&nbsp;that we do not recommend for&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>ceph-osd</span></tt>&nbsp;storage nodes. Upgrade to a recommended kernel or use&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>XFS</span></tt>&nbsp;or&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>ext4</span></tt>.</li><li style="line-height: 1.5em;"   ><strong>2</strong>: The default kernel has an old Ceph client that we do not recommend for kernel client (kernel RBD or the Ceph file system). Upgrade to a recommended kernel.</li><li style="line-height: 1.5em;"   ><strong>3</strong>: The default kernel or installed version of&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>glibc</span></tt>&nbsp;does not support the&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>syncfs(2)</span></tt>&nbsp;system call. Putting multiple&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>ceph-osd</span></tt>&nbsp;daemons using&nbsp;<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>XFS</span></tt>&nbsp;or<tt style="color: rgb(34, 34, 34); font-size: 15px; background-color: rgb(236, 240, 243);"   ><span>ext4</span></tt>&nbsp;on the same host will not perform as well as they could.</li></ul></div><div><br></div><div>测试数据</div><div><h3 style="margin: 30px 0px 10px; padding: 5px 0px; text-transform: uppercase; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: 1.6; font-family: 'Titillium Web'; color: rgb(55, 66, 74);"   >TESTING<a title="Permalink to this headline" style="color: rgb(198, 15, 15); text-decoration: none; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" rel="nofollow" href="http://ceph.com/docs/master/start/os-recommendations/#testing"   ></a></h3><ul style="color: rgb(62, 67, 73); font-family: Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19.6000003814697px;"   ><li style="line-height: 1.5em;"   ><strong>B</strong>: We continuously build all branches on this platform and exercise basic unit tests. We build release packages for this platform.</li><li style="line-height: 1.5em;"   ><strong>I</strong>: We do basic installation and functionality tests of releases on this platform.</li><li style="line-height: 1.5em;"   ><strong>C</strong>: We run a comprehensive functional, regression, and stress test suite on this platform on a continuous basis. This includes development branches, pre-release, and released code.</li></ul></div><wbr><div><br></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://ceph.com/docs/master/start/os-recommendations/"   >http://ceph.com/docs/master/start/os-recommendations/</a></div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="ceph os recommendations - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>