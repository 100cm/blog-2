<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">rhcs 虚拟IP 不通现象排除记录</h2>
	<h5 id="">2010-07-14 15:53:50&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020106143535025/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><P>今天碰到一个比较怪异的现象，记录如下:</P>
<P>环境：</P>
<P>2台服务器搭建的RHCS集群。其中某机器的VIP 192.168.1.120,PUBLICIP192.168.1.116.&nbsp; 属于192.168.1.0/24网段</P>
<P>怪异现象：</P>
<P>从非192.168.1.0/24网段ping 192.168.1.116正常，ping 192.168.1.120不通。</P>
<P>从192.168.1.0/24网段ping 192.168.1.116正常，ping 192.168.1.120正常。</P>
<P>诊断：</P>
<P>最近这套集群有没有做过改动？无</P>
<P>网络有没有做过改动？无</P>
<P>服务器配置有没有改动？无</P>
<P>排查网络设备</P>
<P>排查服务器/var/log/message</P>
<P>iptables</P>
<P>dmesg</P>
<P>集群状态</P>
<P>一切看起来都是正常的。</P>
<P>后来一位同事提到重启IPTABLES，本来是不抱希望的。</P>
<P>但是 ，很怪异的现象发生了，居然恢复正常了。</P>
<P>但是IPTABLES是没有修改过的。怎么重启一下就可以了？经过与红帽技术支持联系，据说没有遇到过类似CASE，太诡异了。不过红帽建议下次发生类似情况的时候做一下TROUBLESHOOTING。这种不能重现的故障太难排查了。</P>
<P>总结：</P>
<P>1. 发生网络故障后，尽量获取TCPDUMP信息，以便分析。</P>
<P>2. iptables当前的条目可以打印输出一下。</P></div>
	</div>
	<h3>评论</h3>
	<div class="" id="" style="padding:0 20px;">
			<div id="">
				<h5 id="">ruconse - 2010-12-05 12:39:54</h5>
				<div>悲剧。。。这问题我都遇到两回了，不知道有解决方法没，另外我的系统貌似都是5.4 64bit的<br><br></div>
			</div>
	</div>
</div>
</body>
</html>