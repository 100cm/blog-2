<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">openssl vulnerability affect PostgreSQLs</h2>
	<h5 id="">2014-04-09 11:40:58&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201439113832312/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>Openssl的某些版本报的一些心跳扩展包的处理漏洞, 如下 :&nbsp;</div><div><table cellpadding="0"   cellspacing="0"   border="0"   width="100%"   style="color: rgb(0, 0, 0); font-family: Verdana, Helvetica, sans-serif; font-size: 14px; line-height: normal;"   ><tbody><tr><td nowrap="nowrap"   align="center"   valign="top"   style="padding: 5px; font-size: 13px; vertical-align: top; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(224, 219, 210);"   ><h2 style="color: rgb(102, 0, 63); padding: 0px 0px 5px; margin: 0px; font-size: 17px;"   >CVE-2014-0160</h2></td><td valign="top"   style="background-color: rgb(224, 219, 210); padding: 5px; font-size: 13px; vertical-align: top; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(224, 219, 210); border-left-width: 1px; border-left-style: solid; border-left-color: rgb(204, 204, 204);"   ><div style="font-size: 16px;"   ><a style="color: rgb(103, 108, 99);" target="_blank" rel="nofollow" href="http://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-0160"   >Learn more at National Vulnerability Database (NVD)</a></div><div style="font-size: 12px;"   >? Severity Rating ? Fix Information ? Vulnerable Software Versions ? SCAP Mappings</div></td></tr><tr><th colspan="2"   style="padding: 2px 5px; vertical-align: top; background-color: rgb(145, 166, 141); color: rgb(255, 255, 255); border-top-width: 1px; border-top-style: solid; border-top-color: rgb(0, 0, 0); border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(0, 0, 0);"   >Description</th></tr><tr><td colspan="2"   style="padding: 5px; font-size: 13px; vertical-align: top; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(224, 219, 210);"   >The (1) TLS and (2) DTLS implementations in OpenSSL 1.0.1 before 1.0.1g do not properly handle Heartbeat Extension packets, which allows remote attackers to obtain sensitive information from process memory via crafted packets that trigger a buffer over-read, as demonstrated by reading private keys, related to d1_both.c and t1_lib.c, aka the Heartbleed bug.</td></tr></table></div><div>可能导致敏感信息被攻击者获取.</div><div>如果在你的pg中使用了openssl相关的认证, 数据加密. 那么请尽快更新openssl版本, 影响的版本如下.</div><div><dt style="font-family: Simsun; font-size: medium; line-height: normal;"   ><b><a style="text-decoration: none; color: rgb(102, 102, 153);" rel="nofollow" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0160"   >CVE-2014-0160:&nbsp;</a></b>7th April 2014<p></p></dt><dd style="font-family: Simsun; font-size: medium; line-height: normal;"   ><description>A missing bounds check in the handling of the TLS heartbeat extension can be used to reveal up to 64kB of memory to a connected client or server. This issue did not affect versions of OpenSSL prior to 1.0.1.&nbsp;Reported by Neel Mehta.</dd><p style="font-family: Simsun; font-size: medium; line-height: normal;"   ></p><dd style="font-family: Simsun; font-size: medium; line-height: normal;"   >Fixed in OpenSSL 1.0.1g (Affected 1.0.1f, 1.0.1e, 1.0.1d, 1.0.1c, 1.0.1b, 1.0.1a, 1.0.1)</dd></div><div><br></div><div>在PostgreSQL中使用openssl加密的文章可参考 :&nbsp;</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201342233131835"   >http://blog.163.com/digoal@126/blog/static/163877040201342233131835</a></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402013423101455507"   >http://blog.163.com/digoal@126/blog/static/1638770402013423101455507</a></div><div>检测PostgreSQL是否受到此漏洞影响, 可参考如下 :&nbsp;</div><div><a target="_blank" rel="nofollow" href="http://michael.otacoo.com/postgresql-2/testing-heartbleed-on-postgres/"   >http://michael.otacoo.com/postgresql-2/testing-heartbleed-on-postgres/</a></div><div><a target="_blank" rel="nofollow" href="http://filippo.io/Heartbleed"   >http://filippo.io/Heartbleed</a></div><div><br></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0160"   >http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-0160</a></div><div>2.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.openssl.org/news/vulnerabilities.html"   >http://www.openssl.org/news/vulnerabilities.html</a></div><div>3.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://blog.hagander.net/archives/219-PostgreSQL-and-the-OpenSSL-Heartbleed-vulnerability.html"   >http://blog.hagander.net/archives/219-PostgreSQL-and-the-OpenSSL-Heartbleed-vulnerability.html</a></div><div>4. PostgreSQL 用到openssl库的地方.</div><div><div>configure:#include &lt;openssl/ssl.h&gt;</div><div>configure:#include &lt;openssl/ssl.h&gt;</div><div>configure:#include &lt;openssl/err.h&gt;</div><div>configure:#include &lt;openssl/err.h&gt;</div><div>contrib/sslinfo/sslinfo.c:#include &lt;openssl/x509.h&gt;</div><div>contrib/sslinfo/sslinfo.c:#include &lt;openssl/asn1.h&gt;</div><div>contrib/pgcrypto/openssl.c:#include &lt;openssl/evp.h&gt;</div><div>contrib/pgcrypto/openssl.c:#include &lt;openssl/blowfish.h&gt;</div><div>contrib/pgcrypto/openssl.c:#include &lt;openssl/cast.h&gt;</div><div>contrib/pgcrypto/openssl.c:#include &lt;openssl/des.h&gt;</div><div>contrib/pgcrypto/openssl.c:#include &lt;openssl/rand.h&gt;</div><div>contrib/pgcrypto/openssl.c:#include &lt;openssl/err.h&gt;</div><div>contrib/pgcrypto/openssl.c:#include &lt;openssl/aes.h&gt;</div><div>contrib/pgcrypto/pgp-mpi-openssl.c:#include &lt;openssl/bn.h&gt;</div><div>doc/src/sgml/libpq.sgml:#include &lt;openssl/ssl.h&gt;</div><div>doc/src/sgml/html/libpq-status.html:#include &amp;#60;openssl/ssl.h&amp;#62;</div><div>src/interfaces/libpq/fe-secure.c:#include &lt;openssl/ssl.h&gt;</div><div>src/interfaces/libpq/fe-secure.c:#include &lt;openssl/conf.h&gt;</div><div>src/interfaces/libpq/fe-secure.c:#include &lt;openssl/engine.h&gt;</div><div>src/interfaces/libpq/libpq-int.h:#include &lt;openssl/ssl.h&gt;</div><div>src/interfaces/libpq/libpq-int.h:#include &lt;openssl/err.h&gt;</div><div>src/tools/msvc/Solution.pm: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $proj-&gt;AddIncludeDir($self-&gt;{options}-&gt;{openssl} . '\include');</div><div>src/include/pg_config.h.win32:/* Define to build with (Open)SSL support. (--with-openssl) */</div><div>src/include/pg_config.h:/* Define to build with (Open)SSL support. (--with-openssl) */</div><div>src/include/libpq/libpq-be.h:#include &lt;openssl/ssl.h&gt;</div><div>src/include/libpq/libpq-be.h:#include &lt;openssl/err.h&gt;</div><div>src/include/pg_config.h.in:/* Define to build with (Open)SSL support. (--with-openssl) */</div><div>src/bin/psql/command.c:#include &lt;openssl/ssl.h&gt;</div><div>src/backend/postmaster/fork_process.c:#include &lt;openssl/rand.h&gt;</div><div>src/backend/libpq/auth.c:#include &lt;openssl/rand.h&gt;</div><div>src/backend/libpq/be-secure.c:#include &lt;openssl/ssl.h&gt;</div><div>src/backend/libpq/be-secure.c:#include &lt;openssl/dh.h&gt;</div><div>src/backend/libpq/be-secure.c:#include &lt;openssl/conf.h&gt;</div></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="openssl vulnerability affect PostgreSQLs - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
	<h3>评论</h3>
	<div class="" id="" style="padding:0 20px;">
			<div id="">
				<h5 id="">alexsunchenchen - 2014-04-09 23:50:09</h5>
				<div>这次的漏洞，不知多少兄弟连夜加班了。。。</div>
			</div>
			<div style="padding-left:40px;">
				<h5 id="">德哥@Digoal 回复 alexsunchenchen - 2014-04-09 23:50:09</h5>
				<div style="width:600px;">是啊, 受影响的还是个人, 最好把密码都改一遍.</div>
			</div>
			<div id="">
				<h5 id="">alexsunchenchen - 2014-04-09 23:49:48</h5>
				<div>呃，感觉，对PG的影响，不那么大吧，一般DB不连外网，app也是通过lib来使用。。。感觉没啥大问题。</div>
			</div>
	</div>
</div>
</body>
</html>