<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL 9.4 Provide moving-aggregate support for a bunch of numerical or boolean aggregates.</h2>
	<h5 id="">2014-04-14 7:26:06&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201431472355255/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><div>PostgreSQL 9.4新增了几个相当有实用价值的聚合支持.</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >Provide moving-aggregate support for a bunch of numerical aggregates.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >First installment of the promised moving-aggregate support in built-in</font></div><div><font size="2"   >aggregates: count(), sum(), avg(), stddev() and variance() for</font></div><div><font size="2"   >assorted datatypes, though not for float4/float8.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >In passing, remove a 2001-vintage kluge in interval_accum(): interval</font></div><div><font size="2"   >array elements have been properly aligned since around 2003, but</font></div><div><font size="2"   >nobody remembered to take out this workaround. &nbsp;Also, fix a thinko</font></div><div><font size="2"   >in the opr_sanity tests for moving-aggregate catalog entries.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >David Rowley and Florian Pflug, reviewed by Dean Rasheed</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >Provide moving-aggregate support for boolean aggregates.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >David Rowley and Florian Pflug, reviewed by Dean Rasheed</font></div></div><p></p></pre></div><div>moving窗口聚合, 例如目前支持基于数值以及布尔逻辑值的这类聚合.</div><div>详细的例子可参考如下(目前支持的聚合有sum, avg, 标准方差等) :&nbsp;</div><div><pre class="prettyprint"   ><div><div><font size="2"   >+-- Test various built-in aggregates that have moving-aggregate support</font></div><div><font size="2"   >+--</font></div><div><font size="2"   >+-- test inverse transition functions handle NULLs properly</font></div><div><font size="2"   >+SELECT i,AVG(v::bigint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1),(2,2),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | &nbsp; &nbsp; &nbsp; &nbsp;avg &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+---+--------------------</font></div><div><font size="2"   >+ 1 | 1.5000000000000000</font></div><div><font size="2"   >+ 2 | 2.0000000000000000</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,AVG(v::int) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1),(2,2),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | &nbsp; &nbsp; &nbsp; &nbsp;avg &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+---+--------------------</font></div><div><font size="2"   >+ 1 | 1.5000000000000000</font></div><div><font size="2"   >+ 2 | 2.0000000000000000</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,AVG(v::smallint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1),(2,2),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | &nbsp; &nbsp; &nbsp; &nbsp;avg &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+---+--------------------</font></div><div><font size="2"   >+ 1 | 1.5000000000000000</font></div><div><font size="2"   >+ 2 | 2.0000000000000000</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,AVG(v::numeric) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1.5),(2,2.5),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | &nbsp; &nbsp; &nbsp; &nbsp;avg &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+---+--------------------</font></div><div><font size="2"   >+ 1 | 2.0000000000000000</font></div><div><font size="2"   >+ 2 | 2.5000000000000000</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,AVG(v::interval) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,'1 sec'),(2,'2 sec'),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | &nbsp; &nbsp;avg &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+---+------------</font></div><div><font size="2"   >+ 1 | @ 1.5 secs</font></div><div><font size="2"   >+ 2 | @ 2 secs</font></div><div><font size="2"   >+ 3 |&nbsp;</font></div><div><font size="2"   >+ 4 |&nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,SUM(v::smallint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1),(2,2),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | sum&nbsp;</font></div><div><font size="2"   >+---+-----</font></div><div><font size="2"   >+ 1 | &nbsp; 3</font></div><div><font size="2"   >+ 2 | &nbsp; 2</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp;</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,SUM(v::int) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1),(2,2),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | sum&nbsp;</font></div><div><font size="2"   >+---+-----</font></div><div><font size="2"   >+ 1 | &nbsp; 3</font></div><div><font size="2"   >+ 2 | &nbsp; 2</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp;</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,SUM(v::bigint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1),(2,2),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | sum&nbsp;</font></div><div><font size="2"   >+---+-----</font></div><div><font size="2"   >+ 1 | &nbsp; 3</font></div><div><font size="2"   >+ 2 | &nbsp; 2</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp;</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,SUM(v::money) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,'1.10'),(2,'2.20'),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | &nbsp;sum &nbsp;</font></div><div><font size="2"   >+---+-------</font></div><div><font size="2"   >+ 1 | $3.30</font></div><div><font size="2"   >+ 2 | $2.20</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,SUM(v::interval) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,'1 sec'),(2,'2 sec'),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | &nbsp; sum &nbsp; &nbsp;</font></div><div><font size="2"   >+---+----------</font></div><div><font size="2"   >+ 1 | @ 3 secs</font></div><div><font size="2"   >+ 2 | @ 2 secs</font></div><div><font size="2"   >+ 3 |&nbsp;</font></div><div><font size="2"   >+ 4 |&nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,SUM(v::numeric) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1.1),(2,2.2),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | sum&nbsp;</font></div><div><font size="2"   >+---+-----</font></div><div><font size="2"   >+ 1 | 3.3</font></div><div><font size="2"   >+ 2 | 2.2</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp;</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT SUM(n::numeric) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1.01),(2,2),(3,3)) v(i,n);</font></div><div><font size="2"   >+ sum &nbsp;</font></div><div><font size="2"   >+------</font></div><div><font size="2"   >+ 6.01</font></div><div><font size="2"   >+ &nbsp; &nbsp;5</font></div><div><font size="2"   >+ &nbsp; &nbsp;3</font></div><div><font size="2"   >+(3 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,COUNT(v) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1),(2,2),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | count&nbsp;</font></div><div><font size="2"   >+---+-------</font></div><div><font size="2"   >+ 1 | &nbsp; &nbsp; 2</font></div><div><font size="2"   >+ 2 | &nbsp; &nbsp; 1</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp; 0</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp; 0</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,COUNT(*) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1),(2,2),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | count&nbsp;</font></div><div><font size="2"   >+---+-------</font></div><div><font size="2"   >+ 1 | &nbsp; &nbsp; 4</font></div><div><font size="2"   >+ 2 | &nbsp; &nbsp; 3</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp; 2</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp; 1</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VAR_POP(n::bigint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp;var_pop &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;21704.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;13868.750000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;11266.666666666667</font></div><div><font size="2"   >+ 4225.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VAR_POP(n::int) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp;var_pop &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;21704.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;13868.750000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;11266.666666666667</font></div><div><font size="2"   >+ 4225.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VAR_POP(n::smallint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp;var_pop &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;21704.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;13868.750000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;11266.666666666667</font></div><div><font size="2"   >+ 4225.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VAR_POP(n::numeric) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp;var_pop &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;21704.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;13868.750000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;11266.666666666667</font></div><div><font size="2"   >+ 4225.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VAR_SAMP(n::bigint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; var_samp &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;27130.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;18491.666666666667</font></div><div><font size="2"   >+ &nbsp; &nbsp;16900.000000000000</font></div><div><font size="2"   >+ 8450.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VAR_SAMP(n::int) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; var_samp &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;27130.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;18491.666666666667</font></div><div><font size="2"   >+ &nbsp; &nbsp;16900.000000000000</font></div><div><font size="2"   >+ 8450.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VAR_SAMP(n::smallint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; var_samp &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;27130.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;18491.666666666667</font></div><div><font size="2"   >+ &nbsp; &nbsp;16900.000000000000</font></div><div><font size="2"   >+ 8450.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VAR_SAMP(n::numeric) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; var_samp &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;27130.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;18491.666666666667</font></div><div><font size="2"   >+ &nbsp; &nbsp;16900.000000000000</font></div><div><font size="2"   >+ 8450.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VARIANCE(n::bigint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; variance &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;27130.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;18491.666666666667</font></div><div><font size="2"   >+ &nbsp; &nbsp;16900.000000000000</font></div><div><font size="2"   >+ 8450.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VARIANCE(n::int) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; variance &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;27130.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;18491.666666666667</font></div><div><font size="2"   >+ &nbsp; &nbsp;16900.000000000000</font></div><div><font size="2"   >+ 8450.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VARIANCE(n::smallint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; variance &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;27130.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;18491.666666666667</font></div><div><font size="2"   >+ &nbsp; &nbsp;16900.000000000000</font></div><div><font size="2"   >+ 8450.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT VARIANCE(n::numeric) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; variance &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+-----------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;27130.000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp;18491.666666666667</font></div><div><font size="2"   >+ &nbsp; &nbsp;16900.000000000000</font></div><div><font size="2"   >+ 8450.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV_POP(n::bigint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,NULL),(2,600),(3,470),(4,170),(5,430),(6,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; stddev_pop &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;147.322774885623</font></div><div><font size="2"   >+ &nbsp; &nbsp;147.322774885623</font></div><div><font size="2"   >+ &nbsp; &nbsp;117.765657133139</font></div><div><font size="2"   >+ &nbsp; &nbsp;106.144555520604</font></div><div><font size="2"   >+ 65.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV_POP(n::int) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,NULL),(2,600),(3,470),(4,170),(5,430),(6,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; stddev_pop &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;147.322774885623</font></div><div><font size="2"   >+ &nbsp; &nbsp;147.322774885623</font></div><div><font size="2"   >+ &nbsp; &nbsp;117.765657133139</font></div><div><font size="2"   >+ &nbsp; &nbsp;106.144555520604</font></div><div><font size="2"   >+ 65.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV_POP(n::smallint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,NULL),(2,600),(3,470),(4,170),(5,430),(6,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; stddev_pop &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;147.322774885623</font></div><div><font size="2"   >+ &nbsp; &nbsp;147.322774885623</font></div><div><font size="2"   >+ &nbsp; &nbsp;117.765657133139</font></div><div><font size="2"   >+ &nbsp; &nbsp;106.144555520604</font></div><div><font size="2"   >+ 65.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV_POP(n::numeric) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,NULL),(2,600),(3,470),(4,170),(5,430),(6,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; stddev_pop &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;147.322774885623</font></div><div><font size="2"   >+ &nbsp; &nbsp;147.322774885623</font></div><div><font size="2"   >+ &nbsp; &nbsp;117.765657133139</font></div><div><font size="2"   >+ &nbsp; &nbsp;106.144555520604</font></div><div><font size="2"   >+ 65.0000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV_SAMP(n::bigint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,NULL),(2,600),(3,470),(4,170),(5,430),(6,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; stddev_samp &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;135.984067694222</font></div><div><font size="2"   >+ &nbsp; &nbsp;130.000000000000</font></div><div><font size="2"   >+ 91.9238815542511782</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV_SAMP(n::int) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,NULL),(2,600),(3,470),(4,170),(5,430),(6,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; stddev_samp &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;135.984067694222</font></div><div><font size="2"   >+ &nbsp; &nbsp;130.000000000000</font></div><div><font size="2"   >+ 91.9238815542511782</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV_SAMP(n::smallint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,NULL),(2,600),(3,470),(4,170),(5,430),(6,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; stddev_samp &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;135.984067694222</font></div><div><font size="2"   >+ &nbsp; &nbsp;130.000000000000</font></div><div><font size="2"   >+ 91.9238815542511782</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV_SAMP(n::numeric) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,NULL),(2,600),(3,470),(4,170),(5,430),(6,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; stddev_samp &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;135.984067694222</font></div><div><font size="2"   >+ &nbsp; &nbsp;130.000000000000</font></div><div><font size="2"   >+ 91.9238815542511782</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV(n::bigint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(0,NULL),(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; stddev &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;135.984067694222</font></div><div><font size="2"   >+ &nbsp; &nbsp;130.000000000000</font></div><div><font size="2"   >+ 91.9238815542511782</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV(n::int) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(0,NULL),(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; stddev &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;135.984067694222</font></div><div><font size="2"   >+ &nbsp; &nbsp;130.000000000000</font></div><div><font size="2"   >+ 91.9238815542511782</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV(n::smallint) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(0,NULL),(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; stddev &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;135.984067694222</font></div><div><font size="2"   >+ &nbsp; &nbsp;130.000000000000</font></div><div><font size="2"   >+ 91.9238815542511782</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT STDDEV(n::numeric) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(0,NULL),(1,600),(2,470),(3,170),(4,430),(5,300)) r(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; stddev &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+---------------------</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;164.711869639076</font></div><div><font size="2"   >+ &nbsp; &nbsp;135.984067694222</font></div><div><font size="2"   >+ &nbsp; &nbsp;130.000000000000</font></div><div><font size="2"   >+ 91.9238815542511782</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+(6 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+-- test that inverse transition functions work with various frame options</font></div><div><font size="2"   >+SELECT i,SUM(v::int) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND CURRENT ROW)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1),(2,2),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | sum&nbsp;</font></div><div><font size="2"   >+---+-----</font></div><div><font size="2"   >+ 1 | &nbsp; 1</font></div><div><font size="2"   >+ 2 | &nbsp; 2</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp;</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,SUM(v::int) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND 1 FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1),(2,2),(3,NULL),(4,NULL)) t(i,v);</font></div><div><font size="2"   >+ i | sum&nbsp;</font></div><div><font size="2"   >+---+-----</font></div><div><font size="2"   >+ 1 | &nbsp; 3</font></div><div><font size="2"   >+ 2 | &nbsp; 2</font></div><div><font size="2"   >+ 3 | &nbsp; &nbsp;</font></div><div><font size="2"   >+ 4 | &nbsp; &nbsp;</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+SELECT i,SUM(v::int) OVER (ORDER BY i ROWS BETWEEN 1 PRECEDING AND 1 FOLLOWING)</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1),(2,2),(3,3),(4,4)) t(i,v);</font></div><div><font size="2"   >+ i | sum&nbsp;</font></div><div><font size="2"   >+---+-----</font></div><div><font size="2"   >+ 1 | &nbsp; 3</font></div><div><font size="2"   >+ 2 | &nbsp; 6</font></div><div><font size="2"   >+ 3 | &nbsp; 9</font></div><div><font size="2"   >+ 4 | &nbsp; 7</font></div><div><font size="2"   >+(4 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+-- ensure aggregate over numeric properly recovers from NaN values</font></div><div><font size="2"   >+SELECT a, b,</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; SUM(b) OVER(ORDER BY A ROWS BETWEEN 1 PRECEDING AND CURRENT ROW)</font></div><div><font size="2"   >+FROM (VALUES(1,1::numeric),(2,2),(3,'NaN'),(4,3),(5,4)) t(a,b);</font></div><div><font size="2"   >+ a | &nbsp;b &nbsp;| sum&nbsp;</font></div><div><font size="2"   >+---+-----+-----</font></div><div><font size="2"   >+ 1 | &nbsp; 1 | &nbsp; 1</font></div><div><font size="2"   >+ 2 | &nbsp; 2 | &nbsp; 3</font></div><div><font size="2"   >+ 3 | NaN | NaN</font></div><div><font size="2"   >+ 4 | &nbsp; 3 | NaN</font></div><div><font size="2"   >+ 5 | &nbsp; 4 | &nbsp; 7</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><div><font size="2"   >+-- It might be tempting for someone to add an inverse trans function for</font></div><div><font size="2"   >+-- float and double precision. This should not be done as it can give incorrect</font></div><div><font size="2"   >+-- results. This test should fail if anyone ever does this without thinking too</font></div><div><font size="2"   >+-- hard about it.</font></div><div><font size="2"   >+SELECT to_char(SUM(n::float8) OVER (ORDER BY i ROWS BETWEEN CURRENT ROW AND 1 FOLLOWING),'999999999999999999999D9')</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES(1,1e20),(2,1)) n(i,n);</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; to_char &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >+--------------------------</font></div><div><font size="2"   >+ &nbsp;100000000000000000000</font></div><div><font size="2"   >+ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.0</font></div><div><font size="2"   >+(2 rows)</font></div><div><font size="2"   >+</font></div></div><div><font size="2"   ><br></font></div><div><font size="2"   >+SELECT i, b, bool_and(b) OVER w, bool_or(b) OVER w</font></div><div><font size="2"   >+ &nbsp;FROM (VALUES (1,true), (2,true), (3,false), (4,false), (5,true)) v(i,b)</font></div><div><font size="2"   >+ &nbsp;WINDOW w AS (ORDER BY i ROWS BETWEEN CURRENT ROW AND 1 FOLLOWING);</font></div><div><font size="2"   >+ i | b | bool_and | bool_or&nbsp;</font></div><div><font size="2"   >+---+---+----------+---------</font></div><div><font size="2"   >+ 1 | t | t &nbsp; &nbsp; &nbsp; &nbsp;| t</font></div><div><font size="2"   >+ 2 | t | f &nbsp; &nbsp; &nbsp; &nbsp;| t</font></div><div><font size="2"   >+ 3 | f | f &nbsp; &nbsp; &nbsp; &nbsp;| f</font></div><div><font size="2"   >+ 4 | f | f &nbsp; &nbsp; &nbsp; &nbsp;| t</font></div><div><font size="2"   >+ 5 | t | t &nbsp; &nbsp; &nbsp; &nbsp;| t</font></div><div><font size="2"   >+(5 rows)</font></div><div><font size="2"   >+</font></div><p></p></pre></div></div><div><br></div><div><br></div><div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=d95425c8b9d3ea1681bd91b76ce73be95ca5ee21"   >http://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=d95425c8b9d3ea1681bd91b76ce73be95ca5ee21</a></div><div>2.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=9d229f399e87d2ae7132c2e8feef317ce1479728"   >http://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=9d229f399e87d2ae7132c2e8feef317ce1479728</a></div></div><p>3.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/9.3/static/functions-aggregate.html"   >http://www.postgresql.org/docs/9.3/static/functions-aggregate.html</a></p>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="PostgreSQL 9.4 Provide moving-aggregate support for a bunch of numerical or boolean aggregates. - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>