<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Oracle Connect To PostgreSQL use HS DBLINK</h2>
	<h5 id="">2011-10-09 15:52:01&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020119934923142/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">今天一位数据仓库的同事问我一个ORACLE连接到PG的问题，突然想起几年前写过类似的文章，现在发表如下：<wbr><div><p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >参考文档</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span>oracle : Heterogeneous Connectivity Administrator's Guide </span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span></span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >环境一</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   >CentOS 5.2 x64</span></p>  <p><span lang="EN-US"   >oracle 10.2.0.4</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >包</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   >unixODBC-2.2.11-7.1</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >postgres-odbc</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >相关</span> <span lang="EN-US"   >lib : </span></p>  <p><span lang="EN-US"   >/usr/lib64/libodbcpsql.so</span></p>  <p><span lang="EN-US"   >/usr/lib64/libodbcpsqlS.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >[root@digoal etc]# ll /usr/lib64/libodbcpsql.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >lrwxrwxrwx 1 root root 20 09-17 09:43 /usr/lib64/libodbcpsql.so -&gt; libodbcpsql.so.2.0.0</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >[root@digoal etc]# ll /usr/lib64/libodbcpsqlS.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >lrwxrwxrwx 1 root root 21 09-17 09:43 /usr/lib64/libodbcpsqlS.so -&gt; libodbcpsqlS.so.1.0.0</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >确保</span><span lang="EN-US"   > : </span></p>  <p style="text-indent:4.5pt;mso-char-indent-count:.5;"   ><span lang="EN-US"   style="font-size:9.0pt;color:#222222;"   >oracle parameters : </span></p>  <p style="text-indent:13.5pt;mso-char-indent-count:1.5;"   ><span lang="EN-US"   style="font-size:9.0pt;color:#222222;"   >Global_names=false </span><span lang="EN-US"   ></span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >操作步骤</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   >su - root </span></p>  <p><span lang="EN-US"   >updatedb </span></p>  <p><span lang="EN-US"   >locate libodbcpsql.so </span></p>  <p><span lang="EN-US"   >locate libodbcpsqlS.so </span></p>  <p><span lang="EN-US"   >locate odbc.ini </span></p>  <p><span lang="EN-US"   >locate odbcinst.ini </span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >vi odbcinst.ini </span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   style="color:blue;"   >[PostgreSQL]</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Description<span>&nbsp;&nbsp;&nbsp;&nbsp; </span>= ODBC for PostgreSQL</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Driver<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= /usr/lib64/libodbcpsql.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Setup<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= /usr/lib64/libodbcpsqlS.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >FileUsage<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= 1</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >vi odbc.ini </span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >[PostgreSQL]</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Description = Test to Postgres</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Driver = PostgreSQL<span>&nbsp;&nbsp; </span><span style="color:blue;"   >#</span></span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   romancolorblue=""   >对应</span><span lang="EN-US"   style="color:blue;"   >odbcinst.ini</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   colorblue=""   >中括号</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Database = community</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Servername = 192.168.1.11</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >UserName = COUNITY</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Password = counityxxxx</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Port = 1921</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Protocol = 6.4</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >ReadOnly = 0<span>&nbsp; </span><span style="color:blue;"   ><span>&nbsp;</span>#</span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >表示可以写</span><span lang="EN-US"   style="color:blue;"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >如果不加则不能做</span><span lang="EN-US"   style="color: blue;"   >INSERT</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   romancolorblue=""   >操作</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   style="color:blue;"   >ConnSettings = set client_encoding to UTF8 <span>&nbsp;&nbsp;&nbsp;</span>#</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   colorblue=""   >设置客户端字符集</span><span lang="EN-US"   style="color:blue;"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >以免发生编码错误</span><span lang="EN-US"   style="color: blue;"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >su - oracle<span>&nbsp; </span></span></p>  <p style="text-indent:10.5pt;mso-char-indent-count:1.0;"   ><span lang="EN-US"   >isql -v <span style="color:blue;"   >db1<span>&nbsp; </span>#</span></span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   romancolorblue=""   >对应</span><span lang="EN-US"   style="color:blue;"   >odbc.ini</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   romancolorblue=""   >中括号</span><span lang="EN-US"   style="color:blue;"   > (</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   romancolorblue=""   >这个可以测试成功</span><span lang="EN-US"   style="color:blue;"   >)</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >vi $ORACLE_HOME/network/admin/listener.ora </span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >添加</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd; text-indent:5.25pt;mso-char-indent-count:.5;"   ><span lang="EN-US"   >(SID_DESC =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(PROGRAM = <span style="color:blue;"   >hsodbc</span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(ORACLE_HOME = /app/oracle/product/10.2.0/db_1)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(SID_NAME = <span style="color:blue;"   >db1</span>)<span>&nbsp; </span><span style="color:blue;"   >#</span></span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   romancolorblue=""   >对应</span><span lang="EN-US"   style="color:blue;"   >$ORACLE_HOME/hs/admin/init<span style="background: yellow;mso-highlight:yellow;"   >SID</span>.ora</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(ENVS=LD_LIBRARY_PATH =<span>&nbsp; </span>/app/oracle/product/10.2.0/db_1/lib:/usr/lib64)<span>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd; text-indent:5.25pt;mso-char-indent-count:.5;"   ><span lang="EN-US"   ><span>&nbsp;</span>)</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >vi $ORACLE_HOME/network/admin/tnsnames.ora</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   style="color:blue;"   >db1</span><span lang="EN-US"   >=</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;</span>(DESCRIPTION =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(ADDRESS_LIST =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp; </span>(ADDRESS = (PROTOCOL = TCP) (HOST = 192.168.1.12) (PORT = 1125) )</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(CONNECT_DATA =(SID= <span style="color:blue;"   >db1</span>) )<span>&nbsp; </span><span style="color:blue;"   >#</span></span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   romancolorblue=""   >对应监听</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(HS=OK)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd; text-indent:10.5pt;mso-char-indent-count:1.0;"   ><span lang="EN-US"   >)</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >vi $ORACLE_HOME/hs/admin/initdb1.ora</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >HS_FDS_CONNECT_INFO = <span style="color:blue;"   >db1<span>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span>&nbsp;</span><span style="color:blue;"   >#</span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >对应</span><span lang="EN-US"   style="color:blue;"   >odbc.ini</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >中括号</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >HS_FDS_TRACE_LEVEL = off </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >HS_FDS_SHAREABLE_NAME = /usr/lib64/libodbcpsql.so <span>&nbsp;</span><span style="color:blue;"   >#</span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >对应</span><span lang="EN-US"   style="color:blue;"   >odbcinst.ini Driver</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   style="color:blue;"   >HS_FDS_DEFAULT_SCHEMA_NAME = public</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >#</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ># ODBC specific environment variables</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >#</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >set ODBCINI=/etc/odbc.ini </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >#</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ># Environment variables required for the non-Oracle system</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >#</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >#set &lt;envvar&gt;=&lt;value&gt;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >重启</span><span lang="EN-US"   >lsnrctl</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >进入数据库</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   >sqlplus "/ as sysdba"</span></p>  <p><span lang="EN-US"   >create public database link pglink using 'db1';</span></p>  <p><span lang="EN-US"   >select * from "pg_tables"@db1;</span></p>  <p><span lang="EN-US"   >ERROR at line 1:</span></p>  <p><span lang="EN-US"   >ORA-28545: error diagnosed by Net8 when connecting to an agent</span></p>  <p><span lang="EN-US"   >Unable to retrieve text of NETWORK/NCR message 65535</span></p>  <p><span lang="EN-US"   >ORA-02063: preceding 2 lines from ODBC</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   romanbackgroundlimemso-highlightlime=""   >难道是</span><span lang="EN-US"   style="background:lime;mso-highlight:lime;"   >64</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romanbackgroundlimemso-highlightlime=""   >位不被支持</span><span lang="EN-US"   style="background:lime;mso-highlight:lime;"   >??</span><span lang="EN-US"   ></span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   romanbackgroundlimemso-highlightlime=""   >环境二</span><span lang="EN-US"   style="background:lime;mso-highlight:lime;"   > :</span><span lang="EN-US"   > </span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >操作系统</span><span lang="EN-US"   > : centos 5.2 32bit </span></p>  <p><span lang="EN-US"   ><span>&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>oracle 10.2.0.4 for 32bit </span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >包</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   >unixODBC-2.2.11-7.1 </span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >postgres-odbc</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >相关</span><span lang="EN-US"   > lib : </span></p>  <p><span lang="EN-US"   >/usr/lib/libodbcpsql.so</span></p>  <p><span lang="EN-US"   >/usr/lib/libodbcpsqlS.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >[root@digoal etc]# ll /usr/lib/libodbcpsql.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >lrwxrwxrwx 1 root root 20 09-17 09:43 /usr/lib/libodbcpsql.so -&gt; libodbcpsql.so.2.0.0</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >[root@digoal etc]# ll /usr/lib/libodbcpsqlS.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >lrwxrwxrwx 1 root root 21 09-17 09:43 /usr/lib/libodbcpsqlS.so -&gt; libodbcpsqlS.so.1.0.0</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >确保</span><span lang="EN-US"   > : </span></p>  <p style="text-indent:4.5pt;mso-char-indent-count:.5;"   ><span lang="EN-US"   style="font-size:9.0pt;color:#222222;"   >oracle parameters : </span></p>  <p style="text-indent:13.5pt;mso-char-indent-count:1.5;"   ><span lang="EN-US"   style="font-size:9.0pt;color:#222222;"   >Global_names=false </span><span lang="EN-US"   ></span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >操作步骤</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   >su - root </span></p>  <p><span lang="EN-US"   >updatedb </span></p>  <p><span lang="EN-US"   >locate libodbcpsql.so </span></p>  <p><span lang="EN-US"   >locate libodbcpsqlS.so </span></p>  <p><span lang="EN-US"   >locate odbc.ini </span></p>  <p><span lang="EN-US"   >locate odbcinst.ini </span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >vi odbcinst.ini </span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   style="color:blue;"   >[PostgreSQL]</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Description<span>&nbsp;&nbsp;&nbsp;&nbsp; </span>= ODBC for PostgreSQL</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Driver<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= /usr/lib/libodbcpsql.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Setup<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= /usr/lib/libodbcpsqlS.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >FileUsage<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= 1</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >vi odbc.ini </span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   style="color:blue;"   >[db1]</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Description = Test to Postgres</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   style="color:blue;"   >Driver = PostgreSQL<span>&nbsp; </span>#</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   colorblue=""   >对应</span><span lang="EN-US"   style="color:blue;"   >odbcinst.ini</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >中括号</span><span lang="EN-US"   style="color:blue;"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Database = sgap_dsm_0</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Servername = 172.16.10.7</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >UserName = dsm</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Password = dsm</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Port = 1921</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Protocol = 6.4</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >su - oracle<span>&nbsp; </span></span></p>  <p style="text-indent:10.5pt;mso-char-indent-count:1.0;"   ><span lang="EN-US"   >isql -v <span style="color:blue;"   >db1<span>&nbsp; </span>#</span></span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   romancolorblue=""   >对应</span><span lang="EN-US"   style="color:blue;"   >odbc.ini</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   romancolorblue=""   >中括号</span><span lang="EN-US"   style="color:blue;"   > (</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   romancolorblue=""   >这个可以测试成功</span><span lang="EN-US"   style="color:blue;"   >)</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >vi $ORACLE_HOME/network/admin/listener.ora </span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >添加</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd; text-indent:5.25pt;mso-char-indent-count:.5;"   ><span lang="EN-US"   >(SID_DESC =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(PROGRAM = <span style="color:blue;"   >hsodbc</span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(ORACLE_HOME = /app/oracle/product/10.2.0/db_1)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(SID_NAME = <span style="color:blue;"   >db1</span>)<span>&nbsp; </span><span style="color:blue;"   >#</span></span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   romancolorblue=""   >对应</span><span lang="EN-US"   style="color:blue;"   >$ORACLE_HOME/hs/admin/init<span style="background: yellow;mso-highlight:yellow;"   >SID</span>.ora</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(ENVS=LD_LIBRARY_PATH =<span>&nbsp; </span>/app/oracle/product/10.2.0/db_1/lib:/usr/lib)<span>&nbsp; </span><span style="color:blue;"   >#</span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >这里需要两个库目录</span><span lang="EN-US"   style="color:blue;"   >,</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   romancolorblue=""   >一个是</span><span lang="EN-US"   style="color:blue;"   >Odbc</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   colorblue=""   >管理库的目录</span><span lang="EN-US"   style="color:blue;"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >一个是</span><span lang="EN-US"   style="color:blue;"   >Oracle</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >数据库的</span><span lang="EN-US"   style="color:blue;"   >Lib</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd; text-indent:5.25pt;mso-char-indent-count:.5;"   ><span lang="EN-US"   ><span>&nbsp;</span>)</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >vi $ORACLE_HOME/network/admin/tnsnames.ora</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   style="color:blue;"   >db1</span><span lang="EN-US"   >=</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;</span>(DESCRIPTION =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(ADDRESS_LIST =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp; </span>(ADDRESS = (PROTOCOL = TCP) (HOST = 192.168.1.12) (PORT = 1125) )</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(CONNECT_DATA =(SID= <span style="color:blue;"   >db1</span>) )<span>&nbsp; </span><span style="color:blue;"   >#</span></span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   romancolorblue=""   >对应监听</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span><span style="color:blue;"   >(HS=OK)</span></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd; text-indent:10.5pt;mso-char-indent-count:1.0;"   ><span lang="EN-US"   >)</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >vi $ORACLE_HOME/hs/admin/initdb1.ora</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >HS_FDS_CONNECT_INFO = <span style="color:blue;"   >db1 <span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span>&nbsp;</span><span style="color:blue;"   >#</span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >对应</span><span lang="EN-US"   style="color:blue;"   >odbc.ini</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >中括号</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >HS_FDS_TRACE_LEVEL = off </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >HS_FDS_SHAREABLE_NAME = /usr/lib/libodbcpsql.so<span>&nbsp; </span><span style="color:blue;"   >#</span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   romancolorblue=""   >对应</span><span lang="EN-US"   style="color:blue;"   >odbcinst.ini Driver</span><span lang="EN-US"   ></span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >#</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ># ODBC specific environment variables</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >#</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >set ODBCINI=/etc/odbc.ini </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >#</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ># Environment variables required for the non-Oracle system</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >#</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >#set &lt;envvar&gt;=&lt;value&gt;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >重启</span><span lang="EN-US"   >lsnrctl</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >进入数据库</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   >sqlplus "/ as sysdba"</span></p>  <p><span lang="EN-US"   >create public database link pglink using 'db1';</span></p>  <p><span lang="EN-US"   >select * from "pg_tables"@db1;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >成功</span><span lang="EN-US"   ></span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >需求</span><span lang="EN-US"   > : ODBC Connectivity Requirements</span></p>  <p><span lang="EN-US"   >To use an ODBC agent, you must have an ODBC driver installed on the same machine </span></p>  <p><span lang="EN-US"   >as the Oracle database server. On UNIX, you must have an ODBC driver manager </span></p>  <p><span lang="EN-US"   >available on the same machine. The ODBC driver manager and driver must meet the </span></p>  <p><span lang="EN-US"   >following requirements:</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >■</span><span lang="EN-US"   > The ODBC driver (and the non-Oracle system) must support a minimum </span></p>  <p><span lang="EN-US"   >transaction isolation level of read committed.</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >■</span><span lang="EN-US"   > On Windows machines, the 32-bit ODBC driver must have compliance level to </span></p>  <p><span lang="EN-US"   >ODBC standard 2.5.</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >■</span><span lang="EN-US"   > On Windows machines, the ODBC driver and driver manager must conform to </span></p>  <p><span lang="EN-US"   >ODBC application program interface (API) conformance Level 1 or higher. If the </span></p>  <p><span lang="EN-US"   >ODBC driver or driver manager does not support multiple active ODBC cursors,<span>&nbsp;&nbsp; </span></span></p>  <p><span lang="EN-US"   >the complexity of SQL statements that you can execute using Generic Connectivity </span></p>  <p><span lang="EN-US"   >is restricted.</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >■</span><span lang="EN-US"   > On UNIX machines, the ODBC driver must be 32-bit and must have compliance </span></p>  <p><span lang="EN-US"   >level to ODBC Standard 2.5 and have a conformance level 1 or higher. If the ODBC </span></p>  <p><span lang="EN-US"   >driver works with an ODBC driver manager, the ODBC driver manager must be </span></p>  <p><span lang="EN-US"   >compliant with ODBC Standard 2.5 or higher</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >发现一个</span><span lang="EN-US"   >BUG:</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span>32</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >位的</span><span lang="EN-US"   >ORACLE</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >服务器通过</span><span lang="EN-US"   >ODBC</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >连接至</span><span lang="EN-US"   >64</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >位的</span><span lang="EN-US"   >POSTGRES.</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span>64</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >位的</span><span lang="EN-US"   >ORACLE</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >服务器通过</span><span lang="EN-US"   >DBLINK</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >连接至</span><span lang="EN-US"   >32</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >的</span><span lang="EN-US"   >ORACLE.</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >在</span><span lang="EN-US"   >64</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >位服务器上</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >当执行了多条</span><span lang="EN-US"   >INSERT</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >语句</span><span lang="EN-US"   >,</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >插入到</span><span lang="EN-US"   >postgres</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >中的表时</span><span lang="EN-US"   >.</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >再</span><span lang="EN-US"   >commit,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >然后</span><span lang="EN-US"   >select</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >这个表就会报错</span><span lang="EN-US"   ></span></p>  <p><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>SQL&gt; select * from tbl_test_p64@pgprot;</span></p>  <p><span lang="EN-US"   >select * from tbl_test_p64@pgprot</span></p>  <p><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>*</span></p>  <p><span lang="EN-US"   >ERROR at line 1:</span></p>  <p><span lang="EN-US"   >ORA-28502: internal communication error on heterogeneous database link</span></p>  <p><span lang="EN-US"   >ORA-02063: preceding line from P64</span></p>  <p><span lang="EN-US"   >ORA-02063: preceding 2 lines from PGPROT</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >而在</span><span lang="EN-US"   >32</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >位的</span><span lang="EN-US"   >ORADCLE</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >上做同样的操作则不会出现这样的问题</span><span lang="EN-US"   >.</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p><p><span lang="EN-US"   ><br></span></p><p style="line-height: 22px;"   ><span style="line-height: 22px; font-family: 宋体;"   >环境三</span><span lang="EN-US"   style="line-height: 22px;"   >&nbsp;:</span></p><p style="line-height: 22px; text-indent: 21.75pt;"   ><span lang="EN-US"   style="line-height: 22px;"   >DB1 : oracle_x64 (UTF8)</span></p><p style="line-height: 22px; text-indent: 21.75pt;"   ><span lang="EN-US"   style="line-height: 22px;"   >DB2 : oracle_x32 (UTF8)</span></p><p style="line-height: 22px; text-indent: 21.75pt;"   ><span lang="EN-US"   style="line-height: 22px;"   >PG : postgresql_x64 (UTF8)</span></p><p style="line-height: 22px; text-indent: 21.75pt;"   ><span lang="EN-US"   style="line-height: 22px;"   >connect APP : tomcate</span></p><p></p><div><img title="Oracle Connect To PostgreSQL use HS DBLINK - 德哥@Digoal - The Heart,The World."   alt="Oracle Connect To PostgreSQL use HS DBLINK - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img0.ph.126.net/UNHA4tVyTCX9R1WuI1PKfw==/26740122804512260.jpg"   ></div>&nbsp;<p></p><p><span lang="EN-US"   >ORA2_X32 </span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >配置</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>rpm : </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >unixODBC-2.2.11-1.RHEL4.1<span>&nbsp; </span>(</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >或者更高</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >也可以下源码编译</span><span lang="EN-US"   >)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/etc/odbc.ini </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >[p64]</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Description = Test to Postgres</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Driver = PostgreSQL</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Database = bj_dsm_0</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Servername = 172.16.10.7</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >UserName = COMMUNITY</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Password = community2008</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Port = 1921</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Protocol = 6.4</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >ReadOnly = 0</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >ConnSettings = set client_encoding to UTF8</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/etc/odbcinst.ini </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >[ODBC]</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Trace = No</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Trace File = /tmp/sql.log</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Pooling = Yes</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ># Included in the unixODBC package</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >[PostgreSQL]</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Description<span>&nbsp;&nbsp;&nbsp;&nbsp; </span>= ODBC for PostgreSQL</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Driver<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= /usr/lib/libodbcpsql.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >Setup<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= /usr/lib/libodbcpsqlS.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >FileUsage<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>= 1</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>$ORACLE_HOME/hs/admin/initHSSID.ora </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >-- cat /app/oracle/product/10.2.0/db_1/hs/admin/initp64.ora</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >HS_FDS_CONNECT_INFO = p64</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >HS_FDS_TRACE_LEVEL = on</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >HS_FDS_SHAREABLE_NAME = /usr/lib/libodbcpsql.so</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >HS_FDS_DEFAULT_SCHEMA_NAME = public</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >set ODBCINI=/etc/odbc.ini</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>$ORACLE_HOME/network/admin/listener.ora </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >SID_LIST_LISTENER =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp; </span>(SID_LIST =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>(SID_DESC =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(SID_NAME = PLSExtProc)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span><span>&nbsp;&nbsp;&nbsp;</span>(ORACLE_HOME = /app/oracle/product/10.2.0/db_1)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(PROGRAM = extproc)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>(SID_DESC =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(GLOBAL_DBNAME = <span style="color:blue;"   >skymobi</span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(ORACLE_HOME = /app/oracle/product/10.2.0/db_1)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(SID_NAME = skymobi)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>(SID_DESC =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(PROGRAM = hsodbc)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(ORACLE_HOME = /app/oracle/product/10.2.0/db_1)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(SID_NAME = <span style="color:blue;"   >p64</span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(ENVS=LD_LIBRARY_PATH = /app/oracle/product/10.2.0/db_1/lib:/usr/lib)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >LISTENER =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp; </span>(DESCRIPTION_LIST =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>(DESCRIPTION =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521))</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC0))</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>$ORACLE_HOME/network/admin/tnsnames.ora </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >p64 =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp; </span>(DESCRIPTION =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>(ADDRESS_LIST =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(ADDRESS = (PROTOCOL = TCP)(HOST =<span style="color:blue;"   >127.0.0.1</span>)(PORT = 1521))</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>(CONNECT_DATA =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(SERVICE_NAME = <span style="color:blue;"   >p64</span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>(<span style="color:blue;"   >HS=OK</span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>dblink : </span></p>  <p style="margin-left:21.0pt;text-indent:21.0pt;"   ><span lang="EN-US"   >create public database link p64 using 'p64';</span></p>  <p style="margin-left:21.0pt;text-indent:21.0pt;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>views : </span></p>  <p><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>conn test/test</span></p>  <p style="margin-left:21.0pt;text-indent:21.0pt;"   ><span lang="EN-US"   >create view tbl_cmnt_user_info as select * from "tbl_cmnt_user_info"@p64;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >ORA1_X64 </span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >配置</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>$ORACLE_HOME/network/admin/tnsnames.ora </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >p64 =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;</span>(DESCRIPTION =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(ADDRESS_LIST =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp; </span>(ADDRESS = (PROTOCOL = TCP) (HOST = <span style="color:blue;"   >10.1.2</span><span style="color:blue;"   >.22</span>) (PORT = 1521) )</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp; </span>(CONNECT_DATA =(service_name= <span style="color:blue;"   >skymobi</span>) )</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;</span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>DBLINK :<span>&nbsp; </span></span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>create public database link p64 connect to test identified by test using 'p64';</span></p>  <p><span lang="EN-US"   style="color:blue;"   >&nbsp;</span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>views : </span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span lang="EN-US"   >create view tbl_cmnt_user_info as select * from test.tbl_cmnt_user_info@p64;</span></p>  <p><span lang="EN-US"   style="color:blue;"   >&nbsp;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >TOMCATE </span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >配置</span><span lang="EN-US"   > : </span></p>  <p style="margin-left:21.0pt;text-indent:21.0pt;"   ><span lang="EN-US"   >&lt;?xml version="1.0" encoding="<span style="color:blue;"   >utf8</span>"?&gt;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >监控</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   >ps -efw|grep hsodbc</span></p>  <p><span lang="EN-US"   >vi $ORACLE_HOME/hs/log/….</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >环境四</span><span lang="EN-US"   > : </span></p>  <p style="text-indent:21.75pt;"   ><span lang="EN-US"   >DB1 : oracle_x64 (UTF8) </span></p>  <p style="text-indent:21.75pt;"   ><span lang="EN-US"   >DB2 : oracle_x32 (UTF8) <span>&nbsp;</span>(</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >作为</span><span lang="EN-US"   >HS agent</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >服务器</span><span lang="EN-US"   >)</span></p>  <p style="text-indent:21.75pt;"   ><span lang="EN-US"   >PG : postgresql_x64 (UTF8) </span></p>  <p style="text-indent:21.75pt;"   ><span lang="EN-US"   >connect APP : tomcate&nbsp;</span></p><p></p><div><img title="Oracle Connect To PostgreSQL use HS DBLINK - 德哥@Digoal - The Heart,The World."   alt="Oracle Connect To PostgreSQL use HS DBLINK - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img7.ph.126.net/f_g43M11kQfCQpDY2b9TwQ==/999517642316538737.jpg"   ></div>&nbsp;<p></p><p style="text-indent:21.0pt;"   ><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >如果</span><span lang="EN-US"   >HS</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >监听使用的</span><span lang="EN-US"   >ODBC.ini</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >文件没有配置</span><span lang="EN-US"   >client_encoding.</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >及可能造成编码错误</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >因为异构连接通过</span><span lang="EN-US"   >ODBC)</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p style="text-indent:21.0pt;"   ><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >与环境三不同之处</span><span lang="EN-US"   >,DB1_X64</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >不是连接到</span><span lang="EN-US"   >DB2_X32</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >的</span><span lang="EN-US"   >test</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >用户</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >而是直连</span><span lang="EN-US"   >HS AGENT.</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >所以不需要在</span><span lang="EN-US"   >DB2</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >上建立</span><span lang="EN-US"   >DBLINK</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >作为中转</span><span lang="EN-US"   >.</span></p>  <p style="text-indent:21.75pt;"   ><span lang="EN-US"   >DB1 : oracle_x64 (UTF8) </span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >配置</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   >ORA1_X64 </span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >配置</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>$ORACLE_HOME/network/admin/tnsnames.ora </span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >p64 =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp; </span>(DESCRIPTION =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>(ADDRESS_LIST =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(ADDRESS = (PROTOCOL = TCP)(HOST =<span style="color:blue;"   >10.1.2</span><span style="color:blue;"   >.22</span>)(PORT = 1521))</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>(CONNECT_DATA =</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(SERVICE_NAME = <span style="color:blue;"   >p64</span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp;&nbsp;&nbsp; </span>(<span style="color:blue;"   >HS=OK</span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   ><span>&nbsp; </span>)</span></p>  <p style="margin-left:42.0pt;mso-para-margin-left:4.0gd;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>DBLINK :<span>&nbsp; </span></span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>create public database link p64 using 'p64';</span></p>  <p><span lang="EN-US"   style="color:blue;"   >&nbsp;</span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>views : </span></p>  <p><span lang="EN-US"   style="color:blue;"   ><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>conn test/test</span></p>  <p style="margin-left:21.0pt;text-indent:21.0pt;"   ><span lang="EN-US"   >create view tbl_cmnt_user_info as select * from "tbl_cmnt_user_info"@p64;</span></p>  <p><span lang="EN-US"   style="color:blue;"   >&nbsp;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >TOMCATE </span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >配置</span><span lang="EN-US"   > : </span></p>  <p style="margin-left:21.0pt;text-indent:21.0pt;"   ><span lang="EN-US"   >&lt;?xml version="1.0" encoding="<span style="color:blue;"   >utf8</span>"?&gt;</span></p>  <p style="text-indent:21.75pt;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p style="text-indent:21.0pt;"   ><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >注意</span><span lang="EN-US"   > : </span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span>64</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >位</span><span lang="EN-US"   >linux</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >只能做到使用</span><span lang="EN-US"   >isql</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >来连接其他非</span><span lang="EN-US"   >oracle</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >数据库</span><span lang="EN-US"   >,</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >但是不能使用</span><span lang="EN-US"   >dblink</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >在数据库中建立连接</span><span lang="EN-US"   >.(</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >这个有待解决</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >根据</span><span lang="EN-US"   >oracle</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >的相关文档</span><span lang="EN-US"   >,</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >发现只能使用</span><span lang="EN-US"   >32</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >位的</span><span lang="EN-US"   >Odbc.</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >建立</span><span lang="EN-US"   >dblink)</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >在</span><span lang="EN-US"   >32</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >位系统上建好</span><span lang="EN-US"   >DBLINK</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >之后</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >如何使用普通用户来使用该</span><span lang="EN-US"   >DBLINK.(</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >该普通用户必须和</span><span lang="EN-US"   >ODBC</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >与远程数据库建立连接的</span><span lang="EN-US"   >USERNAME</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >一致</span><span lang="EN-US"   >,</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >注意大小写</span><span lang="EN-US"   >)</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >注意</span><span lang="EN-US"   >DBLINK</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >中的</span><span lang="EN-US"   >connect to username,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >这个</span><span lang="EN-US"   >username</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >无论你是否用双引号括起来</span><span lang="EN-US"   >,oracle</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >都认为他是大写的</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >所以当远程数据库是小写用户时</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >会有问题</span><span lang="EN-US"   >.</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >所以建议</span><span lang="EN-US"   >POSTGRES</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >使用大写用户名</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >即使没有</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >那就搞一个大写用户来中转</span><span lang="EN-US"   >.</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >注意</span><span lang="EN-US"   >postgres</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >有</span><span lang="EN-US"   >timestamp</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >的概念</span><span lang="EN-US"   >,</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >这个会导致</span><span lang="EN-US"   >oracle</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >需要在插入时间时使用类似</span><span lang="EN-US"   >'2008-07-19 20:13:44.33333'</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >格式</span><span lang="EN-US"   >.</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span>Postgres</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >和</span><span lang="EN-US"   >oracle</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >的编码集要设置为一样</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >否则容易出问题</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >特别是涉及到</span><span lang="EN-US"   >64</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >位嫁接到</span><span lang="EN-US"   >32</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >位再连接到</span><span lang="EN-US"   >Postgres</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >时</span><span lang="EN-US"   >.</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >当配置</span><span lang="EN-US"   >odbc</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >连接至</span><span lang="EN-US"   >oracle</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >时</span><span lang="EN-US"   >,</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >不能使用</span><span lang="EN-US"   >pgbouncer</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >连接池等工具</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >必须直接连接到</span><span lang="EN-US"   >postgres.</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >因为</span><span lang="EN-US"   >Oracle</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >要做事务模式</span><span lang="EN-US"   >.</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >当使用这种模式连接是</span><span lang="EN-US"   >,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >在</span><span lang="EN-US"   >insert</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >等语句中不能使用很多函数</span><span lang="EN-US"   >.</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >因为在</span><span lang="EN-US"   >Postgres</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >中可能没有这些函数</span><span lang="EN-US"   >.</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >这也是硬性规定</span><span lang="EN-US"   >.</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >每一条涉及</span><span lang="EN-US"   >HS</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >的</span><span lang="EN-US"   >DML</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >语句</span><span lang="EN-US"   >(</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >除了</span><span lang="EN-US"   >select)</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >之后必须有结束事务的语句</span><span lang="EN-US"   >(</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >如</span><span lang="EN-US"   >commit</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >或</span><span lang="EN-US"   >rollback) </span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >否则会出问题</span><span lang="EN-US"   >.</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >关于</span><span lang="EN-US"   >ODBC</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >的配置请参考</span><span lang="EN-US"   ><a rel="nofollow" href="http://www.unixodbc.org/odbcinst.html"   >http://www.unixodbc.org/odbcinst.html</a></span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >当连接</span><span lang="EN-US"   >oracle</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >的用户在</span><span lang="EN-US"   >postgres</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >中不存在时</span><span lang="EN-US"   >,</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >会报错</span><span lang="EN-US"   >.</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >所以需要保证使用</span><span lang="EN-US"   >HS</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >的用户在</span><span lang="EN-US"   >POSTGRES</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >中也存在</span><span lang="EN-US"   >.(</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >注意</span><span lang="EN-US"   >ORACLE</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >只支持大写的</span><span lang="EN-US"   >DBLINK,</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >在</span><span lang="EN-US"   >postgreS</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >中建</span><span lang="EN-US"   >role</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >请使用大写</span><span lang="EN-US"   >)(</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >而且用户名<span style="color:blue;"   >密码</span></span><span lang="EN-US"   style="color:blue;"   >,</span><span style="font-family:宋体;mso-ascii-font-family: ;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >在</span><span lang="EN-US"   >oracle</span><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >中和</span><span lang="EN-US"   >postgres</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >中需相同</span><span lang="EN-US"   >)</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span>(</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >把</span><span lang="EN-US"   >odbc.ini </span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >中的密码删除</span><span lang="EN-US"   >)</span></p>  <p><span lang="EN-US"   ><span>&nbsp; </span>64</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >位的</span><span lang="EN-US"   >oracle</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >不能使用</span><span lang="EN-US"   >Odbc</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >做异构连接</span><span lang="EN-US"   >.</span></p>  <p><span lang="EN-US"   ><span>&nbsp;&nbsp; </span></span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >具体参考</span><span lang="EN-US"   >oracle</span><span style="font-family:宋体;"   times=""   new=""   romanmso-hansi-font-family=""   times=""   roman=""   >文档</span><span lang="EN-US"   ></span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span lang="EN-US"   >&nbsp;</span></p>  <p><span style="font-family:宋体;"   times=""   new=""   roman=""   mso-hansi-font-familytimes=""   roman=""   >附录</span><span lang="EN-US"   >: </span></p>  <p><span lang="EN-US"   >odbc.ini</span><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   >配置</span><span lang="EN-US"   ></span></p><p><span style="font-family: 宋体;"   times=""   new=""   romanmso-hansi-font-familytimes=""   roman=""   ></span></p><div><img title="Oracle Connect To PostgreSQL use HS DBLINK - 德哥@Digoal - The Heart,The World."   alt="Oracle Connect To PostgreSQL use HS DBLINK - 德哥@Digoal - The Heart,The World."   style="margin:0 10px 0 0;"   src="http://img1.ph.126.net/1D-9WDWS_zXv6dPIVWZJ2w==/2498934843254202901.jpg"   ></div>&nbsp;<p></p><p><br></p><p style="text-indent:21.75pt;"   ><span lang="EN-US"   ><br></span></p></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="Oracle Connect To PostgreSQL use HS DBLINK - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
	<h3>评论</h3>
	<div class="" id="" style="padding:0 20px;">
			<div id="">
				<h5 id="">xx_880729 - 2013-11-18 16:07:19</h5>
				<div><div>请问一下呀，Oracle 用dblink连接PostgreSQL出现这种情况为什么呀</div><div>第 1 行出现错误:</div><div>ORA-28545: 连接代理时 Net8 诊断到错误</div><div>Unable to retrieve text of NETWORK/NCR message 65535</div><div>ORA-02063: 紧接着 2 lines (起自 ORA2PG)</div><div><br></div><div>两台机器都是windows x64，oracle和pg都是64位的<img src="http://b.bst.126.net/common/portrait/face/preview/face2.gif"  ></div></div>
			</div>
			<div style="padding-left:40px;">
				<h5 id="">德哥@Digoal 回复 xx_880729 - 2013-11-18 16:07:19</h5>
				<div style="width:600px;">HI, win下我没有试过.<div>我只在linux环境中使用过.</div><div>这个原因应该还是和oracle网关有关系, 查查metalink吧</div></div>
			</div>
	</div>
</div>
</body>
</html>