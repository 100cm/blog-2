<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Lua precompiled code</h2>
	<h5 id="">2014-02-19 14:43:35&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020141192737767/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">使用luac或者string.dump函数可以将Lua脚本编译成二进制格式, 编译后的代码同样可以使用lua运行.<div>预编译代码(二进制格式)加载速度比文本快, 但是文件可能更大, 同时二进制格式可以对代码起到一定的保护作用, 因为文本很容易暴露或被修改.<br><wbr><div><pre class="prettyprint"   ><p></p><div><font size="2"   ># vi test.lua</font></div><div><font size="2"   >local a=1</font></div><div><font size="2"   >function f() a=a+1 return a end</font></div><div><font size="2"   >for i=1,20 do</font></div><div><font size="2"   >&nbsp; print(f())</font></div><div><font size="2"   >end</font></div><p></p></pre></div><div>使用luac把脚本转换成二进制编码</div><pre class="prettyprint"   ><p></p><div><font size="2"   ># luac -o ./test.lc test.lua</font></div><div></div><p></p></pre><div><span style="line-height: 28px;"   >二进制文件test.lc和文本test.lua都可以使用lua执行</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-172-16-3-150 ~]# lua ./test.lc</font></div><div><font size="2"   >2</font></div><div><font size="2"   >3</font></div><div><font size="2"   >4</font></div><div><font size="2"   >5</font></div><div><font size="2"   >6</font></div><div><font size="2"   >7</font></div><div><font size="2"   >8</font></div><div><font size="2"   >9</font></div><div><font size="2"   >10</font></div><div><font size="2"   >11</font></div><div><font size="2"   >12</font></div><div><font size="2"   >13</font></div><div><font size="2"   >14</font></div><div><font size="2"   >15</font></div><div><font size="2"   >16</font></div><div><font size="2"   >17</font></div><div><font size="2"   >18</font></div><div><font size="2"   >19</font></div><div><font size="2"   >20</font></div><div><font size="2"   >21</font></div><div><font size="2"   >[root@db-172-16-3-150 ~]# lua ./test.lua</font></div><div><font size="2"   >2</font></div><div><font size="2"   >3</font></div><div><font size="2"   >4</font></div><div><font size="2"   >5</font></div><div><font size="2"   >6</font></div><div><font size="2"   >7</font></div><div><font size="2"   >8</font></div><div><font size="2"   >9</font></div><div><font size="2"   >10</font></div><div><font size="2"   >11</font></div><div><font size="2"   >12</font></div><div><font size="2"   >13</font></div><div><font size="2"   >14</font></div><div><font size="2"   >15</font></div><div><font size="2"   >16</font></div><div><font size="2"   >17</font></div><div><font size="2"   >18</font></div><div><font size="2"   >19</font></div><div><font size="2"   >20</font></div><div><font size="2"   >21</font></div><p></p></pre></div><div><br></div><div>使用luac -l可以查看lua或lc文件的虚拟机指令.</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >produce &nbsp;a &nbsp;listing &nbsp;of the compiled bytecode for Lua’s virtual machine. &nbsp;Listing bytecodes is useful to&nbsp;<span style="line-height: 28px;"   >learn about Lua’s virtual machine.&nbsp;</span><span style="line-height: 28px;"   >If no files are given, then luac loads luac.out and lists &nbsp;its &nbsp;con</span><span style="line-height: 28px;"   >&nbsp;tents.</span></font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >[root@db-172-16-3-150 ~]# luac -l ./test.lc</font></div><div><font size="2"   >main &lt;test.lua:0,0&gt; (13 instructions at 0x8673c0)</font></div><div><font size="2"   >0+ params, 7 slots, 1 upvalue, 5 locals, 4 constants, 1 function</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; [1] &nbsp; &nbsp; LOADK &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 -1 &nbsp; &nbsp;; 1</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; [2] &nbsp; &nbsp; CLOSURE &nbsp; &nbsp; &nbsp; &nbsp; 1 0 &nbsp; &nbsp; ; 0x867570</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; [2] &nbsp; &nbsp; SETTABUP &nbsp; &nbsp; &nbsp; &nbsp;0 -2 1 &nbsp;; _ENV "f"</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 4 &nbsp; &nbsp; &nbsp; [3] &nbsp; &nbsp; LOADK &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 -1 &nbsp; &nbsp;; 1</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 5 &nbsp; &nbsp; &nbsp; [3] &nbsp; &nbsp; LOADK &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 -3 &nbsp; &nbsp;; 20</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 6 &nbsp; &nbsp; &nbsp; [3] &nbsp; &nbsp; LOADK &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 -1 &nbsp; &nbsp;; 1</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 7 &nbsp; &nbsp; &nbsp; [3] &nbsp; &nbsp; FORPREP &nbsp; &nbsp; &nbsp; &nbsp; 1 4 &nbsp; &nbsp; ; to 12</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 8 &nbsp; &nbsp; &nbsp; [4] &nbsp; &nbsp; GETTABUP &nbsp; &nbsp; &nbsp; &nbsp;5 0 -4 &nbsp;; _ENV "print"</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 9 &nbsp; &nbsp; &nbsp; [4] &nbsp; &nbsp; GETTABUP &nbsp; &nbsp; &nbsp; &nbsp;6 0 -2 &nbsp;; _ENV "f"</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 10 &nbsp; &nbsp; &nbsp;[4] &nbsp; &nbsp; CALL &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6 1 0</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 11 &nbsp; &nbsp; &nbsp;[4] &nbsp; &nbsp; CALL &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5 0 1</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 12 &nbsp; &nbsp; &nbsp;[3] &nbsp; &nbsp; FORLOOP &nbsp; &nbsp; &nbsp; &nbsp; 1 -5 &nbsp; &nbsp;; to 8</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 13 &nbsp; &nbsp; &nbsp;[5] &nbsp; &nbsp; RETURN &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 1</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >function &lt;test.lua:2,2&gt; (6 instructions at 0x867570)</font></div><div><font size="2"   >0 params, 2 slots, 1 upvalue, 0 locals, 1 constant, 0 functions</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; [2] &nbsp; &nbsp; GETUPVAL &nbsp; &nbsp; &nbsp; &nbsp;0 0 &nbsp; &nbsp; ; a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; [2] &nbsp; &nbsp; ADD &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 0 -1 &nbsp;; - 1</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; [2] &nbsp; &nbsp; SETUPVAL &nbsp; &nbsp; &nbsp; &nbsp;0 0 &nbsp; &nbsp; ; a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 4 &nbsp; &nbsp; &nbsp; [2] &nbsp; &nbsp; GETUPVAL &nbsp; &nbsp; &nbsp; &nbsp;0 0 &nbsp; &nbsp; ; a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 5 &nbsp; &nbsp; &nbsp; [2] &nbsp; &nbsp; RETURN &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 2</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 6 &nbsp; &nbsp; &nbsp; [2] &nbsp; &nbsp; RETURN &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 1</font></div></div><p></p></pre></div><div><br></div><div>使用string.dump这个函数可以将函数打包成二进制代码, 与luac的效果一致.</div><div>例如使用loadfile把lua文件加载为一个匿名函数, 然后使用string.dump转换成二进制代码.</div><div>使用io.open 和 file:write 写入文件.</div><div>例如 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&gt; p = loadfile("/root/test.lua") &nbsp;-- 加载文件, 输出一个匿名函数</font></div><div><font size="2"   >&gt; f = io.open("/root/test.lc", "wb") &nbsp;-- 以写模式和二进制模式打开文件</font></div><div><font size="2"   >&gt; f:write(string.dump(p)) &nbsp;-- 使用file:write写文件, string.dump(p) 将函数转换成二进制格式</font></div><div><font size="2"   >&gt; f:close<span style="line-height: 28px;"   >() &nbsp;-- 关闭文件</span></font></div><div><font size="2"   >&gt; os.exit<span style="line-height: 28px;"   >()</span></font></div></div><div><div><font size="2"   >[root@db-172-16-3-150 ~]# lua test.lc</font></div><div><font size="2"   >2</font></div><div><font size="2"   >3</font></div><div><font size="2"   >4</font></div><div><font size="2"   >5</font></div><div><font size="2"   >6</font></div><div><font size="2"   >7</font></div><div><font size="2"   >8</font></div><div><font size="2"   >9</font></div><div><font size="2"   >10</font></div><div><font size="2"   >11</font></div><div><font size="2"   >12</font></div><div><font size="2"   >13</font></div><div><font size="2"   >14</font></div><div><font size="2"   >15</font></div><div><font size="2"   >16</font></div><div><font size="2"   >17</font></div><div><font size="2"   >18</font></div><div><font size="2"   >19</font></div><div><font size="2"   >20</font></div><div><font size="2"   >21</font></div></div><p></p></pre></div><div>这个稍加修改就可以改成一个类似luac的脚本.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-172-16-3-150 ~]# vi luac.lua</font></div><div><font size="2"   >p = loadfile(arg[1])</font></div><div><font size="2"   >f = io.open(arg[2], "wb")</font></div><div><font size="2"   >f:write(string.dump(p))</font></div><div><font size="2"   >f:close()</font></div><p></p></pre></div><div>使用这个脚本打包二进制文件.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-172-16-3-150 ~]# lua ./luac.lua "/root/test.lua" "/root/test.lc"</font></div><div><font size="2"   >[root@db-172-16-3-150 ~]# ll /root/test.lc</font></div><div><font size="2"   >-r-x------ 1 root root 495 Feb 19 14:36 /root/test.lc</font></div><div><font size="2"   >[root@db-172-16-3-150 ~]# lua /root/test.lc</font></div><div><font size="2"   >2</font></div><div><font size="2"   >3</font></div><div><font size="2"   >4</font></div><div><font size="2"   >5</font></div><div><font size="2"   >6</font></div><div><font size="2"   >7</font></div><div><font size="2"   >8</font></div><div><font size="2"   >9</font></div><div><font size="2"   >10</font></div><div><font size="2"   >11</font></div><div><font size="2"   >12</font></div><div><font size="2"   >13</font></div><div><font size="2"   >14</font></div><div><font size="2"   >15</font></div><div><font size="2"   >16</font></div><div><font size="2"   >17</font></div><div><font size="2"   >18</font></div><div><font size="2"   >19</font></div><div><font size="2"   >20</font></div><div><font size="2"   >21</font></div><p></p></pre></div><div><br></div><div>load和loadfile支持加载文本模式或二进制格式的编码, 默认同时允许. 例如 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&gt; f = loadfile("/root/test.lc","t")  -- "t"表示text模式, 显然加载二进制格式的test.lc会失败</font></div><div><font size="2"   >&gt; f()</font></div><div><font size="2"   >stdin:1: attempt to call global 'f' (a nil value)</font></div><div><font size="2"   >stack traceback:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; stdin:1: in main chunk</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; [C]: in ?</font></div><div><font size="2"   >&gt; f = loadfile("/root/test.lc","b")</font></div><div><font size="2"   >&gt; f()</font></div><div><font size="2"   >2</font></div><div><font size="2"   >3</font></div><div><font size="2"   >4</font></div><div><font size="2"   >5</font></div><div><font size="2"   >6</font></div><div><font size="2"   >7</font></div><div><font size="2"   >8</font></div><div><font size="2"   >9</font></div><div><font size="2"   >10</font></div><div><font size="2"   >11</font></div><div><font size="2"   >12</font></div><div><font size="2"   >13</font></div><div><font size="2"   >14</font></div><div><font size="2"   >15</font></div><div><font size="2"   >16</font></div><div><font size="2"   >17</font></div><div><font size="2"   >18</font></div><div><font size="2"   >19</font></div><div><font size="2"   >20</font></div><div><font size="2"   >21</font></div><p></p></pre></div><div><br></div><div>[参考]</div><div>1. man luac</div><div>2.&nbsp;</div><div><h3 style="font-family: Verdana, Geneva, sans-serif; font-weight: normal; padding-left: 0.5em; border-left-style: solid; border-left-color: rgb(208, 208, 255); border-left-width: 1em; line-height: normal; text-align: justify;"   ><a name="pdf-string.dump" rel="nofollow"   >string.dump (function)</a></h3><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >Returns a string containing a binary representation of the given function, so that a later&nbsp;<a style="color: rgb(0, 0, 128); background-color: inherit; text-decoration: none;" rel="nofollow" href="http://www.lua.org/manual/5.2/manual.html#pdf-load"   ><code style="font-size: 12pt;"   >load</code></a>&nbsp;on this string returns a copy of the function (but with new upvalues).</p></div><div>3.&nbsp;</div><div><h3 style="font-family: Verdana, Geneva, sans-serif; font-weight: normal; padding-left: 0.5em; border-left-style: solid; border-left-color: rgb(208, 208, 255); border-left-width: 1em; line-height: normal; text-align: justify;"   ><a style="background-color: rgb(248, 248, 248); padding: 8px; border: 2px solid rgb(160, 160, 160); border-top-left-radius: 8px; border-top-right-radius: 8px; border-bottom-right-radius: 8px; border-bottom-left-radius: 8px;" name="pdf-load" rel="nofollow"   ><code style="font-size: inherit; font-family: inherit;"   >load (ld [, source [, mode [, env]]])</code></a></h3><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >Loads a chunk.</p><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >If&nbsp;<code style="font-size: 12pt;"   >ld</code>&nbsp;is a string, the chunk is this string. If&nbsp;<code style="font-size: 12pt;"   >ld</code>&nbsp;is a function,&nbsp;<code style="font-size: 12pt;"   >load</code>&nbsp;calls it repeatedly to get the chunk pieces. Each call to&nbsp;<code style="font-size: 12pt;"   >ld</code>&nbsp;must return a string that concatenates with previous results. A return of an empty string,&nbsp;<b>nil</b>, or no value signals the end of the chunk.</p><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >If there are no syntactic errors, returns the compiled chunk as a function; otherwise, returns&nbsp;<b>nil</b>&nbsp;plus the error message.</p><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >If the resulting function has upvalues, the first upvalue is set to the value of&nbsp;<code style="font-size: 12pt;"   >env</code>, if that parameter is given, or to the value of the global environment. (When you load a main chunk, the resulting function will always have exactly one upvalue, the&nbsp;<code style="font-size: 12pt;"   >_ENV</code>&nbsp;variable (see&nbsp;<a style="color: rgb(0, 0, 128); background-color: inherit; text-decoration: none;" rel="nofollow" href="http://www.lua.org/manual/5.2/manual.html#2.2"   >§2.2</a>). When you load a binary chunk created from a function (see&nbsp;<a style="color: rgb(0, 0, 128); background-color: inherit; text-decoration: none;" rel="nofollow" href="http://www.lua.org/manual/5.2/manual.html#pdf-string.dump"   ><code style="font-size: 12pt;"   >string.dump</code></a>), the resulting function can have arbitrary upvalues.)</p><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   ><code style="font-size: 12pt;"   >source</code>&nbsp;is used as the source of the chunk for error messages and debug information (see&nbsp;<a style="color: rgb(0, 0, 128); background-color: inherit; text-decoration: none;" rel="nofollow" href="http://www.lua.org/manual/5.2/manual.html#4.9"   >§4.9</a>). When absent, it defaults to&nbsp;<code style="font-size: 12pt;"   >ld</code>, if&nbsp;<code style="font-size: 12pt;"   >ld</code>&nbsp;is a string, or to "<code style="font-size: 12pt;"   >=(load)</code>" otherwise.</p><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >The string&nbsp;<code style="font-size: 12pt;"   >mode</code>&nbsp;controls whether the chunk can be text or binary (that is, a precompiled chunk). It may be the string "<code style="font-size: 12pt;"   >b</code>" (only binary chunks), "<code style="font-size: 12pt;"   >t</code>" (only text chunks), or "<code style="font-size: 12pt;"   >bt</code>" (both binary and text). The default is "<code style="font-size: 12pt;"   >bt</code>".</p></div><div>4.&nbsp;</div><div><h3 style="font-family: Verdana, Geneva, sans-serif; font-weight: normal; padding-left: 0.5em; border-left-style: solid; border-left-color: rgb(208, 208, 255); border-left-width: 1em; line-height: normal; text-align: justify;"   ><a name="pdf-file:write" rel="nofollow"   >file:write (・・・)</a></h3><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >Writes the value of each of its arguments to&nbsp;<code style="font-size: 12pt;"   >file</code>. The arguments must be strings or numbers.</p><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >In case of success, this function returns&nbsp;<code style="font-size: 12pt;"   >file</code>. Otherwise it returns&nbsp;<b>nil</b>&nbsp;plus a string describing the error.</p></div><div>5.&nbsp;</div><div><h3 style="font-family: Verdana, Geneva, sans-serif; font-weight: normal; padding-left: 0.5em; border-left-style: solid; border-left-color: rgb(208, 208, 255); border-left-width: 1em; line-height: normal; text-align: justify;"   ><a name="pdf-file:close" rel="nofollow"   >file:close ()</a></h3><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >Closes&nbsp;<code style="font-size: 12pt;"   >file</code>. Note that files are automatically closed when their handles are garbage collected, but that takes an unpredictable amount of time to happen.</p><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >When closing a file handle created with&nbsp;<a style="color: rgb(0, 0, 128); background-color: inherit; text-decoration: none;" rel="nofollow" href="http://www.lua.org/manual/5.2/manual.html#pdf-io.popen"   ><code style="font-size: 12pt;"   >io.popen</code></a>,&nbsp;<a style="color: rgb(0, 0, 128); background-color: inherit; text-decoration: none;" rel="nofollow" href="http://www.lua.org/manual/5.2/manual.html#pdf-file:close"   ><code style="font-size: 12pt;"   >file:close</code></a>&nbsp;returns the same values returned by&nbsp;<a style="color: rgb(0, 0, 128); background-color: inherit; text-decoration: none;" rel="nofollow" href="http://www.lua.org/manual/5.2/manual.html#pdf-os.execute"   ><code style="font-size: 12pt;"   >os.execute</code></a>.</p></div><div>6.&nbsp;</div><div><h3 style="font-family: Verdana, Geneva, sans-serif; font-weight: normal; padding-left: 0.5em; border-left-style: solid; border-left-color: rgb(208, 208, 255); border-left-width: 1em; line-height: normal; text-align: justify;"   ><a name="pdf-io.open" rel="nofollow"   >io.open (filename [, mode])</a></h3><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >This function opens a file, in the mode specified in the string&nbsp;<code style="font-size: 12pt;"   >mode</code>. It returns a new file handle, or, in case of errors,&nbsp;<b>nil</b>&nbsp;plus an error message.</p><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >The&nbsp;<code style="font-size: 12pt;"   >mode</code>&nbsp;string can be any of the following:</p><ul style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   ><li><b>"<code style="font-size: 12pt;"   >r</code>":&nbsp;</b>read mode (the default);</li><li><b>"<code style="font-size: 12pt;"   >w</code>":&nbsp;</b>write mode;</li><li><b>"<code style="font-size: 12pt;"   >a</code>":&nbsp;</b>append mode;</li><li><b>"<code style="font-size: 12pt;"   >r+</code>":&nbsp;</b>update mode, all previous data is preserved;</li><li><b>"<code style="font-size: 12pt;"   >w+</code>":&nbsp;</b>update mode, all previous data is erased;</li><li><b>"<code style="font-size: 12pt;"   >a+</code>":&nbsp;</b>append update mode, previous data is preserved, writing is only allowed at the end of file.</li></ul><p style="font-family: Helvetica, Arial, sans-serif; font-size: medium; line-height: normal; text-align: justify;"   >The&nbsp;<code style="font-size: 12pt;"   >mode</code>&nbsp;string can also have a '<code style="font-size: 12pt;"   >b</code>' at the end, which is needed in some systems to open the file in binary mode.</p></div><div><br></div><div><br></div><div><br></div></div></div>
	</div>
</div>
</body>
</html>