<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Storage extend online in Linux</h2>
	<h5 id="">2013-01-14 17:06:59&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020130144424699/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>环境 :&nbsp;</div><div>CentOS 5.x X64 Linux系统.</div><div>HBA :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >15:00.0 Fibre Channel: QLogic Corp. ISP2432-based 4Gb Fibre Channel to PCI Express HBA (rev 03)</font></div><div><font size="2"   >15:00.1 Fibre Channel: QLogic Corp. ISP2432-based 4Gb Fibre Channel to PCI Express HBA (rev 03)</font></div><p></p></pre></div><div>存储 :&nbsp;</div><div>HP MSA2312FC</div><div><br></div><div>需求 :&nbsp;</div><div>存储扩容后分配给CentOS 5.x X64 Linux系统.</div><div><br></div><div>操作 :&nbsp;</div><div>1. HP MSA2312FC操作</div><div>创建新卷 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >create volume vdisk vd01 size 758G vd01vol5</font></div><div><font size="2"   >create volume vdisk vd02 size 918G vd02vol1</font></div><div><font size="2"   >create volume vdisk vd02 size 580G vd02vol2</font></div><p></p></pre></div><div>创建卷和主机的映射关系</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >map volume access rw lun 5 host 192168001009_0 vd01vol5</font></div><div><font size="2"   >map volume access rw lun 6 host 192168001009_0 vd02vol1</font></div><div><font size="2"   >map volume access rw lun 7 host 192168001009_0 vd02vol2</font></div><div><font size="2"   >map volume access rw lun 5 host 192168001009_1 vd01vol5</font></div><div><font size="2"   >map volume access rw lun 6 host 192168001009_1 vd02vol1</font></div><div><font size="2"   >map volume access rw lun 7 host 192168001009_1 vd02vol2</font></div><p></p></pre></div><div>查看映射关系</div><div># show host-maps&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >Host View [ID (2101001B32BC4C82) Name (192168001009_1) Profile (Standard) ] Mapping:</font></div><div><font size="2"   >&nbsp; &nbsp;Name &nbsp; &nbsp; &nbsp;Serial Number &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LUN &nbsp; Access &nbsp; &nbsp; &nbsp; Ports &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;--------------------------------------------------------------------------</font></div><div><font size="2"   >&nbsp; &nbsp;vd01vol01 00c0ff105ac50000024f7d5001000000 1 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd02vol1 &nbsp;00c0ff105a6a0000b280f35001000000 6 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd01vol02 00c0ff105ac500000a4f7d5001000000 2 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd02vol2 &nbsp;00c0ff105a6a00004481f35001000000 7 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd01vol03 00c0ff105ac50000264f7d5001000000 3 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd01vol04 00c0ff105ac500002f4f7d5001000000 4 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd01vol5 &nbsp;00c0ff105ac50000a380f35001000000 5 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Host View [ID (2100001B329C4C82) Name (192168001009_0) Profile (Standard) ] Mapping:</font></div><div><font size="2"   >&nbsp; &nbsp;Name &nbsp; &nbsp; &nbsp;Serial Number &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LUN &nbsp; Access &nbsp; &nbsp; &nbsp; Ports &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;--------------------------------------------------------------------------</font></div><div><font size="2"   >&nbsp; &nbsp;vd01vol01 00c0ff105ac50000024f7d5001000000 1 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd02vol1 &nbsp;00c0ff105a6a0000b280f35001000000 6 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd01vol02 00c0ff105ac500000a4f7d5001000000 2 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd02vol2 &nbsp;00c0ff105a6a00004481f35001000000 7 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd01vol03 00c0ff105ac50000264f7d5001000000 3 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd01vol04 00c0ff105ac500002f4f7d5001000000 4 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp;vd01vol5 &nbsp;00c0ff105ac50000a380f35001000000 5 &nbsp; &nbsp; read-write &nbsp; A1,A2,B1,B2&nbsp;</font></div><p></p></pre></div><div><br></div><div>2. 系统层面</div><div>配置完存储后, 通过 fdisk -l 看不到新加的存储.</div><div>通过dmesg信息可以看出, Linux SCSI 层不能自动remap LUN的关系. 具体信息如下 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >sd 6:0:1:1: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:1: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:4: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:3: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:2: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:1:2: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:1:3: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:1:4: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:3: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:1: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:4: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:1:1: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:2: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:1:2: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:1:3: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:1:4: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:3: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:1: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:1:1: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:4: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:0:2: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:1:2: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:1:3: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><div><font size="2"   >sd 6:0:1:4: Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.</font></div><p></p></pre></div><div>解决办法 :&nbsp;</div><div>重新扫描设备, 执行以下命令, 执行完后设备就找到了.</div><div><pre class="prettyprint"   ><p><font size="2"   >find /sys/class/scsi_host/host*/scan | while read line; do echo - - - &gt; $line; done</font></p></pre></div><div><span style="line-height: 22px;"   >dmesg输出 :&nbsp;</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&nbsp; Vendor: IBM-ESXS &nbsp;Model: CBRCA146C3ETS0 N &nbsp;Rev: C370</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 06</font></div><div><font size="2"   >&nbsp; Vendor: IBM-ESXS &nbsp;Model: CBRCA146C3ETS0 N &nbsp;Rev: C370</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 06</font></div><div><font size="2"   >ata1: hard resetting link</font></div><div><font size="2"   >ata1: SATA link down (SStatus 0 SControl 300)</font></div><div><font size="2"   >ata1: EH complete</font></div><div><font size="2"   >ata2: hard resetting link</font></div><div><font size="2"   >ata2: SATA link down (SStatus 0 SControl 300)</font></div><div><font size="2"   >ata2: EH complete</font></div><div><font size="2"   >ata3: hard resetting link</font></div><div><font size="2"   >ata3: SATA link down (SStatus 0 SControl 300)</font></div><div><font size="2"   >ata3: EH complete</font></div><div><font size="2"   >ata4: hard resetting link</font></div><div><font size="2"   >ata4: SATA link down (SStatus 0 SControl 300)</font></div><div><font size="2"   >ata4: EH complete</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdj: 195312480 512-byte hdwr sectors (100000 MB)</font></div><div><font size="2"   >sdj: Write Protect is off</font></div><div><font size="2"   >sdj: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdj: drive cache: write back</font></div><div><font size="2"   >SCSI device sdj: 195312480 512-byte hdwr sectors (100000 MB)</font></div><div><font size="2"   >sdj: Write Protect is off</font></div><div><font size="2"   >sdj: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdj: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdj: unknown partition table</font></div><div><font size="2"   >sd 5:0:0:1: Attached scsi disk sdj</font></div><div><font size="2"   >sd 5:0:0:1: Attached scsi generic sg13 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdk: 351562496 512-byte hdwr sectors (180000 MB)</font></div><div><font size="2"   >sdk: Write Protect is off</font></div><div><font size="2"   >sdk: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdk: drive cache: write back</font></div><div><font size="2"   >SCSI device sdk: 351562496 512-byte hdwr sectors (180000 MB)</font></div><div><font size="2"   >sdk: Write Protect is off</font></div><div><font size="2"   >sdk: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdk: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdk: unknown partition table</font></div><div><font size="2"   >sd 5:0:0:2: Attached scsi disk sdk</font></div><div><font size="2"   >sd 5:0:0:2: Attached scsi generic sg14 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdl: 312500000 512-byte hdwr sectors (160000 MB)</font></div><div><font size="2"   >sdl: Write Protect is off</font></div><div><font size="2"   >sdl: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdl: drive cache: write back</font></div><div><font size="2"   >SCSI device sdl: 312500000 512-byte hdwr sectors (160000 MB)</font></div><div><font size="2"   >sdl: Write Protect is off</font></div><div><font size="2"   >sdl: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdl: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdl: unknown partition table</font></div><div><font size="2"   >sd 5:0:0:3: Attached scsi disk sdl</font></div><div><font size="2"   >sd 5:0:0:3: Attached scsi generic sg15 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdm: 546874976 512-byte hdwr sectors (280000 MB)</font></div><div><font size="2"   >sdm: Write Protect is off</font></div><div><font size="2"   >sdm: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdm: drive cache: write back</font></div><div><font size="2"   >SCSI device sdm: 546874976 512-byte hdwr sectors (280000 MB)</font></div><div><font size="2"   >sdm: Write Protect is off</font></div><div><font size="2"   >sdm: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdm: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdm: unknown partition table</font></div><div><font size="2"   >sd 5:0:0:4: Attached scsi disk sdm</font></div><div><font size="2"   >sd 5:0:0:4: Attached scsi generic sg16 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdn: 1480468736 512-byte hdwr sectors (758000 MB)</font></div><div><font size="2"   >sdn: Write Protect is off</font></div><div><font size="2"   >sdn: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdn: drive cache: write back</font></div><div><font size="2"   >SCSI device sdn: 1480468736 512-byte hdwr sectors (758000 MB)</font></div><div><font size="2"   >sdn: Write Protect is off</font></div><div><font size="2"   >sdn: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdn: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdn: unknown partition table</font></div><div><font size="2"   >sd 5:0:0:5: Attached scsi disk sdn</font></div><div><font size="2"   >sd 5:0:0:5: Attached scsi generic sg17 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdo: 1792968736 512-byte hdwr sectors (918000 MB)</font></div><div><font size="2"   >sdo: Write Protect is off</font></div><div><font size="2"   >sdo: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdo: drive cache: write back</font></div><div><font size="2"   >SCSI device sdo: 1792968736 512-byte hdwr sectors (918000 MB)</font></div><div><font size="2"   >sdo: Write Protect is off</font></div><div><font size="2"   >sdo: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdo: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdo: unknown partition table</font></div><div><font size="2"   >sd 5:0:0:6: Attached scsi disk sdo</font></div><div><font size="2"   >sd 5:0:0:6: Attached scsi generic sg18 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdp: 1132812480 512-byte hdwr sectors (580000 MB)</font></div><div><font size="2"   >sdp: Write Protect is off</font></div><div><font size="2"   >sdp: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdp: drive cache: write back</font></div><div><font size="2"   >SCSI device sdp: 1132812480 512-byte hdwr sectors (580000 MB)</font></div><div><font size="2"   >sdp: Write Protect is off</font></div><div><font size="2"   >sdp: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdp: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdp: unknown partition table</font></div><div><font size="2"   >sd 5:0:0:7: Attached scsi disk sdp</font></div><div><font size="2"   >sd 5:0:0:7: Attached scsi generic sg19 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdq: 195312480 512-byte hdwr sectors (100000 MB)</font></div><div><font size="2"   >sdq: Write Protect is off</font></div><div><font size="2"   >sdq: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdq: drive cache: write back</font></div><div><font size="2"   >SCSI device sdq: 195312480 512-byte hdwr sectors (100000 MB)</font></div><div><font size="2"   >sdq: Write Protect is off</font></div><div><font size="2"   >sdq: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdq: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdq: unknown partition table</font></div><div><font size="2"   >sd 5:0:1:1: Attached scsi disk sdq</font></div><div><font size="2"   >sd 5:0:1:1: Attached scsi generic sg20 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdr: 351562496 512-byte hdwr sectors (180000 MB)</font></div><div><font size="2"   >sdr: Write Protect is off</font></div><div><font size="2"   >sdr: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdr: drive cache: write back</font></div><div><font size="2"   >SCSI device sdr: 351562496 512-byte hdwr sectors (180000 MB)</font></div><div><font size="2"   >sdr: Write Protect is off</font></div><div><font size="2"   >sdr: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdr: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdr: unknown partition table</font></div><div><font size="2"   >sd 5:0:1:2: Attached scsi disk sdr</font></div><div><font size="2"   >sd 5:0:1:2: Attached scsi generic sg21 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sds: 312500000 512-byte hdwr sectors (160000 MB)</font></div><div><font size="2"   >sds: Write Protect is off</font></div><div><font size="2"   >sds: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sds: drive cache: write back</font></div><div><font size="2"   >SCSI device sds: 312500000 512-byte hdwr sectors (160000 MB)</font></div><div><font size="2"   >sds: Write Protect is off</font></div><div><font size="2"   >sds: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sds: drive cache: write back</font></div><div><font size="2"   >&nbsp;sds: unknown partition table</font></div><div><font size="2"   >sd 5:0:1:3: Attached scsi disk sds</font></div><div><font size="2"   >sd 5:0:1:3: Attached scsi generic sg22 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdt: 546874976 512-byte hdwr sectors (280000 MB)</font></div><div><font size="2"   >sdt: Write Protect is off</font></div><div><font size="2"   >sdt: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdt: drive cache: write back</font></div><div><font size="2"   >SCSI device sdt: 546874976 512-byte hdwr sectors (280000 MB)</font></div><div><font size="2"   >sdt: Write Protect is off</font></div><div><font size="2"   >sdt: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdt: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdt: unknown partition table</font></div><div><font size="2"   >sd 5:0:1:4: Attached scsi disk sdt</font></div><div><font size="2"   >sd 5:0:1:4: Attached scsi generic sg23 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdu: 1480468736 512-byte hdwr sectors (758000 MB)</font></div><div><font size="2"   >sdu: Write Protect is off</font></div><div><font size="2"   >sdu: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdu: drive cache: write back</font></div><div><font size="2"   >SCSI device sdu: 1480468736 512-byte hdwr sectors (758000 MB)</font></div><div><font size="2"   >sdu: Write Protect is off</font></div><div><font size="2"   >sdu: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdu: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdu: unknown partition table</font></div><div><font size="2"   >sd 5:0:1:5: Attached scsi disk sdu</font></div><div><font size="2"   >sd 5:0:1:5: Attached scsi generic sg24 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdv: 1792968736 512-byte hdwr sectors (918000 MB)</font></div><div><font size="2"   >sdv: Write Protect is off</font></div><div><font size="2"   >sdv: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdv: drive cache: write back</font></div><div><font size="2"   >SCSI device sdv: 1792968736 512-byte hdwr sectors (918000 MB)</font></div><div><font size="2"   >sdv: Write Protect is off</font></div><div><font size="2"   >sdv: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdv: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdv: unknown partition table</font></div><div><font size="2"   >sd 5:0:1:6: Attached scsi disk sdv</font></div><div><font size="2"   >sd 5:0:1:6: Attached scsi generic sg25 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdw: 1132812480 512-byte hdwr sectors (580000 MB)</font></div><div><font size="2"   >sdw: Write Protect is off</font></div><div><font size="2"   >sdw: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdw: drive cache: write back</font></div><div><font size="2"   >SCSI device sdw: 1132812480 512-byte hdwr sectors (580000 MB)</font></div><div><font size="2"   >sdw: Write Protect is off</font></div><div><font size="2"   >sdw: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdw: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdw: unknown partition table</font></div><div><font size="2"   >sd 5:0:1:7: Attached scsi disk sdw</font></div><div><font size="2"   >sd 5:0:1:7: Attached scsi generic sg26 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdx: 1480468736 512-byte hdwr sectors (758000 MB)</font></div><div><font size="2"   >sdx: Write Protect is off</font></div><div><font size="2"   >sdx: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdx: drive cache: write back</font></div><div><font size="2"   >SCSI device sdx: 1480468736 512-byte hdwr sectors (758000 MB)</font></div><div><font size="2"   >sdx: Write Protect is off</font></div><div><font size="2"   >sdx: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdx: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdx: unknown partition table</font></div><div><font size="2"   >sd 6:0:0:5: Attached scsi disk sdx</font></div><div><font size="2"   >sd 6:0:0:5: Attached scsi generic sg27 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdy: 1792968736 512-byte hdwr sectors (918000 MB)</font></div><div><font size="2"   >sdy: Write Protect is off</font></div><div><font size="2"   >sdy: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdy: drive cache: write back</font></div><div><font size="2"   >SCSI device sdy: 1792968736 512-byte hdwr sectors (918000 MB)</font></div><div><font size="2"   >sdy: Write Protect is off</font></div><div><font size="2"   >sdy: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdy: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdy: unknown partition table</font></div><div><font size="2"   >sd 6:0:0:6: Attached scsi disk sdy</font></div><div><font size="2"   >sd 6:0:0:6: Attached scsi generic sg28 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdz: 1132812480 512-byte hdwr sectors (580000 MB)</font></div><div><font size="2"   >sdz: Write Protect is off</font></div><div><font size="2"   >sdz: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdz: drive cache: write back</font></div><div><font size="2"   >SCSI device sdz: 1132812480 512-byte hdwr sectors (580000 MB)</font></div><div><font size="2"   >sdz: Write Protect is off</font></div><div><font size="2"   >sdz: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdz: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdz: unknown partition table</font></div><div><font size="2"   >sd 6:0:0:7: Attached scsi disk sdz</font></div><div><font size="2"   >sd 6:0:0:7: Attached scsi generic sg29 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdaa: 1480468736 512-byte hdwr sectors (758000 MB)</font></div><div><font size="2"   >sdaa: Write Protect is off</font></div><div><font size="2"   >sdaa: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdaa: drive cache: write back</font></div><div><font size="2"   >SCSI device sdaa: 1480468736 512-byte hdwr sectors (758000 MB)</font></div><div><font size="2"   >sdaa: Write Protect is off</font></div><div><font size="2"   >sdaa: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdaa: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdaa: unknown partition table</font></div><div><font size="2"   >sd 6:0:1:5: Attached scsi disk sdaa</font></div><div><font size="2"   >sd 6:0:1:5: Attached scsi generic sg30 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdab: 1792968736 512-byte hdwr sectors (918000 MB)</font></div><div><font size="2"   >sdab: Write Protect is off</font></div><div><font size="2"   >sdab: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdab: drive cache: write back</font></div><div><font size="2"   >SCSI device sdab: 1792968736 512-byte hdwr sectors (918000 MB)</font></div><div><font size="2"   >sdab: Write Protect is off</font></div><div><font size="2"   >sdab: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdab: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdab: unknown partition table</font></div><div><font size="2"   >sd 6:0:1:6: Attached scsi disk sdab</font></div><div><font size="2"   >sd 6:0:1:6: Attached scsi generic sg31 type 0</font></div><div><font size="2"   >&nbsp; Vendor: HP &nbsp; &nbsp; &nbsp; &nbsp;Model: MSA2312fc &nbsp; &nbsp; &nbsp; &nbsp; Rev: M110</font></div><div><font size="2"   >&nbsp; Type: &nbsp; Direct-Access &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ANSI SCSI revision: 05</font></div><div><font size="2"   >SCSI device sdac: 1132812480 512-byte hdwr sectors (580000 MB)</font></div><div><font size="2"   >sdac: Write Protect is off</font></div><div><font size="2"   >sdac: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdac: drive cache: write back</font></div><div><font size="2"   >SCSI device sdac: 1132812480 512-byte hdwr sectors (580000 MB)</font></div><div><font size="2"   >sdac: Write Protect is off</font></div><div><font size="2"   >sdac: Mode Sense: 93 00 00 08</font></div><div><font size="2"   >SCSI device sdac: drive cache: write back</font></div><div><font size="2"   >&nbsp;sdac: unknown partition table</font></div><div><font size="2"   >sd 6:0:1:7: Attached scsi disk sdac</font></div><div><font size="2"   >sd 6:0:1:7: Attached scsi generic sg32 type 0</font></div><p></p></pre></div><div><span style="line-height: 22px;"   >获取设备UUID :&nbsp;</span></div><div><pre class="prettyprint"   ><p><font size="2"   >for i in `cat /proc/partitions | awk '{print $4}' |grep sd`; do echo "### $i: `scsi_id -g -u -s /block/$i`"; done</font></p></pre></div><div><span style="line-height: 22px;"   >配置/etc/multipath.conf, ( 可选 )</span></div><div>vi /etc/multipath.conf</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >blacklist {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;devnode "^(ram|raw|loop|fd|md|dm-|sr|scd|st)[0-9]*"</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;devnode "^hd[a-z]"</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# IBM or DELL local disk filter, this example, only on disk local. is sda.</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;devnode "^sda$"</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# HP local disk filter</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#devnode "^cciss!c[0-9]d[0-9]*"</font></div><div><font size="2"   >}</font></div><div><font size="2"   >defaults {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;udev_dir &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /dev</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;polling_interval &nbsp; &nbsp; &nbsp; &nbsp; 10</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;selector &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "round-robin 0"</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;path_grouping_policy &nbsp; &nbsp; failover</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;getuid_callout &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "/sbin/scsi_id -g -u -s /block/%n"</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;prio_callout &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /bin/true</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;path_checker &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; readsector0</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rr_min_io &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;100</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rr_weight &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;priorities</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;failback &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; immediate</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;no_path_retry &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;fail</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;user_friendly_names &nbsp; &nbsp; &nbsp;yes</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;flush_on_last_del &nbsp; &nbsp; &nbsp; &nbsp;yes</font></div><div><font size="2"   >}</font></div><div><font size="2"   >multipaths {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;multipath {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wwid &nbsp; &nbsp; 3600c0ff000105ac5024f7d5001000000</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alias &nbsp; &nbsp;d11_msa1_vd01vol01</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;multipath {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wwid &nbsp; &nbsp; 3600c0ff000105ac50a4f7d5001000000</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alias &nbsp; &nbsp;d11_msa1_vd01vol02</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;multipath {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wwid &nbsp; &nbsp; 3600c0ff000105ac5264f7d5001000000</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alias &nbsp; &nbsp;d11_msa1_vd01vol03</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;multipath {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wwid &nbsp; &nbsp; 3600c0ff000105ac52f4f7d5001000000</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alias &nbsp; &nbsp;d11_msa1_vd01vol04</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;multipath {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wwid &nbsp; &nbsp; 3600c0ff000105ac5a380f35001000000</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alias &nbsp; &nbsp;d11_msa1_vd01vol05</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;multipath {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wwid &nbsp; &nbsp; 3600c0ff000105a6ab280f35001000000</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alias &nbsp; &nbsp;d11_msa1_vd01vol06</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;multipath {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wwid &nbsp; &nbsp; 3600c0ff000105a6a4481f35001000000</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;alias &nbsp; &nbsp;d11_msa1_vd01vol07</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div><font size="2"   >}</font></div><p></p></pre></div><div><br></div><div>重载multipath配置</div><div><pre class="prettyprint"   ><p><font size="2"   >service multipathd reload</font></p></pre></div><div><br></div><div>检查多路径是否正常 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-192-168-001-009 ~]# multipath -ll</font></div><div><font size="2"   >d11_msa1_vd01vol07 (3600c0ff000105a6a4481f35001000000) dm-10 HP,MSA2312fc</font></div><div><font size="2"   >[size=540G][features=1 queue_if_no_path][hwhandler=0][rw]</font></div><div><font size="2"   >\_ round-robin 0 [prio=100][active]</font></div><div><font size="2"   >&nbsp;\_ 5:0:1:7 sdw &nbsp;65:96 &nbsp;[active][ready]</font></div><div><font size="2"   >&nbsp;\_ 6:0:1:7 sdac 65:192 [active][ready]</font></div><div><font size="2"   >\_ round-robin 0 [prio=20][enabled]</font></div><div><font size="2"   >&nbsp;\_ 5:0:0:7 sdp &nbsp;8:240 &nbsp;[active][ready]</font></div><div><font size="2"   >&nbsp;\_ 6:0:0:7 sdz &nbsp;65:144 [active][ready]</font></div><div><font size="2"   >d11_msa1_vd01vol06 (3600c0ff000105a6ab280f35001000000) dm-9 HP,MSA2312fc</font></div><div><font size="2"   >[size=855G][features=1 queue_if_no_path][hwhandler=0][rw]</font></div><div><font size="2"   >\_ round-robin 0 [prio=100][active]</font></div><div><font size="2"   >&nbsp;\_ 5:0:1:6 sdv &nbsp;65:80 &nbsp;[active][ready]</font></div><div><font size="2"   >&nbsp;\_ 6:0:1:6 sdab 65:176 [active][ready]</font></div><div><font size="2"   >\_ round-robin 0 [prio=20][enabled]</font></div><div><font size="2"   >&nbsp;\_ 5:0:0:6 sdo &nbsp;8:224 &nbsp;[active][ready]</font></div><div><font size="2"   >&nbsp;\_ 6:0:0:6 sdy &nbsp;65:128 [active][ready]</font></div><div><font size="2"   >d11_msa1_vd01vol05 (3600c0ff000105ac5a380f35001000000) dm-8 HP,MSA2312fc</font></div><div><font size="2"   >[size=706G][features=1 queue_if_no_path][hwhandler=0][rw]</font></div><div><font size="2"   >\_ round-robin 0 [prio=100][active]</font></div><div><font size="2"   >&nbsp;\_ 5:0:0:5 sdn &nbsp;8:208 &nbsp;[active][ready]</font></div><div><font size="2"   >&nbsp;\_ 6:0:0:5 sdx &nbsp;65:112 [active][ready]</font></div><div><font size="2"   >\_ round-robin 0 [prio=20][enabled]</font></div><div><font size="2"   >&nbsp;\_ 5:0:1:5 sdu &nbsp;65:64 &nbsp;[active][ready]</font></div><div><font size="2"   >&nbsp;\_ 6:0:1:5 sdaa 65:160 [active][ready]</font></div><div><font size="2"   >d11_msa1_vd01vol04 (3600c0ff000105ac52f4f7d5001000000) dm-3 HP,MSA2312fc</font></div><div><font size="2"   >[size=261G][features=1 queue_if_no_path][hwhandler=0][rw]</font></div><div><font size="2"   >\_ round-robin 0 [prio=100][active]</font></div><div><font size="2"   >&nbsp;\_ 6:0:0:4 sde &nbsp;8:64 &nbsp; [active][ready]</font></div><div><font size="2"   >&nbsp;\_ 5:0:0:4 sdm &nbsp;8:192 &nbsp;[active][ready]</font></div><div><font size="2"   >\_ round-robin 0 [prio=20][enabled]</font></div><div><font size="2"   >&nbsp;\_ 6:0:1:4 sdi &nbsp;8:128 &nbsp;[active][ready]</font></div><div><font size="2"   >&nbsp;\_ 5:0:1:4 sdt &nbsp;65:48 &nbsp;[active][ready]</font></div><div><font size="2"   >d11_msa1_vd01vol03 (3600c0ff000105ac5264f7d5001000000) dm-2 HP,MSA2312fc</font></div><div><font size="2"   >[size=149G][features=1 queue_if_no_path][hwhandler=0][rw]</font></div><div><font size="2"   >\_ round-robin 0 [prio=100][active]</font></div><div><font size="2"   >&nbsp;\_ 6:0:0:3 sdd &nbsp;8:48 &nbsp; [active][ready]</font></div><div><font size="2"   >&nbsp;\_ 5:0:0:3 sdl &nbsp;8:176 &nbsp;[active][ready]</font></div><div><font size="2"   >\_ round-robin 0 [prio=20][enabled]</font></div><div><font size="2"   >&nbsp;\_ 6:0:1:3 sdh &nbsp;8:112 &nbsp;[active][ready]</font></div><div><font size="2"   >&nbsp;\_ 5:0:1:3 sds &nbsp;65:32 &nbsp;[active][ready]</font></div><div><font size="2"   >d11_msa1_vd01vol02 (3600c0ff000105ac50a4f7d5001000000) dm-1 HP,MSA2312fc</font></div><div><font size="2"   >[size=168G][features=1 queue_if_no_path][hwhandler=0][rw]</font></div><div><font size="2"   >\_ round-robin 0 [prio=100][active]</font></div><div><font size="2"   >&nbsp;\_ 6:0:0:2 sdc &nbsp;8:32 &nbsp; [active][ready]</font></div><div><font size="2"   >&nbsp;\_ 5:0:0:2 sdk &nbsp;8:160 &nbsp;[active][ready]</font></div><div><font size="2"   >\_ round-robin 0 [prio=20][enabled]</font></div><div><font size="2"   >&nbsp;\_ 6:0:1:2 sdg &nbsp;8:96 &nbsp; [active][ready]</font></div><div><font size="2"   >&nbsp;\_ 5:0:1:2 sdr &nbsp;65:16 &nbsp;[active][ready]</font></div><div><font size="2"   >d11_msa1_vd01vol01 (3600c0ff000105ac5024f7d5001000000) dm-0 HP,MSA2312fc</font></div><div><font size="2"   >[size=93G][features=1 queue_if_no_path][hwhandler=0][rw]</font></div><div><font size="2"   >\_ round-robin 0 [prio=100][active]</font></div><div><font size="2"   >&nbsp;\_ 6:0:0:1 sdb &nbsp;8:16 &nbsp; [active][ready]</font></div><div><font size="2"   >&nbsp;\_ 5:0:0:1 sdj &nbsp;8:144 &nbsp;[active][ready]</font></div><div><font size="2"   >\_ round-robin 0 [prio=20][enabled]</font></div><div><font size="2"   >&nbsp;\_ 6:0:1:1 sdf &nbsp;8:80 &nbsp; [active][ready]</font></div><div><font size="2"   >&nbsp;\_ 5:0:1:1 sdq &nbsp;65:0 &nbsp; [active][ready]</font></div><p></p></pre></div><div>到这里存储设备添加就算完成了.</div><div><br></div><div>【其他】</div><div>1. 如果存储块设备是通过iscsi连接的, 可以使用iscsiadm.</div><div><br></div><div>【参考】</div><div>1. man iscsiadm</div><div>2. find /sys/class/scsi_host/host*/scan | while read line; do echo - - - &gt; $line; done</div><div>3.&nbsp;<a style="line-height: 22px;" target="_blank" rel="nofollow" href="http://serverfault.com/questions/262586/the-linux-scsi-layer-does-not-automatically-remap-lun-assignments"   >http://serverfault.com/questions/262586/the-linux-scsi-layer-does-not-automatically-remap-lun-assignments</a></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="Storage extend online in Linux - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>