<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL 9.5 新特性汇总</h2>
	<h5 id="">2015-04-19 4:16:12&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020153194142990/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">PostgreSQL 9.5还未发布，以下是已经commit的特性，也就是说PostgreSQL 9.5 release时肯定会包含的特性。<wbr><div>如需了解最新信息，请参考：</div><div><a target="_blank" rel="nofollow" href="https://commitfest.postgresql.org/"   >https://commitfest.postgresql.org/</a></div><div><a target="_blank" rel="nofollow" href="http://git.postgresql.org/gitweb/?p=postgresql.git;a=summary"   >http://git.postgresql.org/gitweb/?p=postgresql.git;a=summary</a></div><div><a target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/devel/static/release-9-5.html"   >http://www.postgresql.org/docs/devel/static/release-9-5.html</a></div><div><br></div><div>下面是一些 9.5 的新特性讲解和测试：</div><div>PostgreSQL 9.5 new feature - Speed up CRC calculation using slicing-by-8 algorithm</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020156101020613/"   >http://blog.163.com/digoal@126/blog/static/16387704020156101020613/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Allow pushdown of WHERE quals into subqueries with window functions</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201561095327964/"   >http://blog.163.com/digoal@126/blog/static/163877040201561095327964/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Improve PL/pgSQL array performance</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201561085924212/"   >http://blog.163.com/digoal@126/blog/static/163877040201561085924212/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Improve in-memory hash performance</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201569101039801/"   >http://blog.163.com/digoal@126/blog/static/163877040201569101039801/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - pg_bench improve, gaussian (standard normal) &amp; exponential distribution</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551891133433/"   >http://blog.163.com/digoal@126/blog/static/163877040201551891133433/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Add information about buffer pins to pg_buffercache</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402015517111721646/"   >http://blog.163.com/digoal@126/blog/static/1638770402015517111721646/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - pg_xlogdump option --stats to display summary statistics</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551793321971/"   >http://blog.163.com/digoal@126/blog/static/163877040201551793321971/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - pg_dump use --snapshot taken by another session (exp. slot, pg_export_snapshot())</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551621230621/"   >http://blog.163.com/digoal@126/blog/static/163877040201551621230621/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Allow vacuumdb to vacuum in parallel using --jobs</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020155162538936/"   >http://blog.163.com/digoal@126/blog/static/16387704020155162538936/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - width_bucket() return the bucket number</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402015516111818907/"   >http://blog.163.com/digoal@126/blog/static/1638770402015516111818907/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - add distance operator &lt;-&gt; &amp; gist KNN order by for point and polygon and circle</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551611410282/"   >http://blog.163.com/digoal@126/blog/static/163877040201551611410282/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - get subscripts of array values</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551610565855/"   >http://blog.163.com/digoal@126/blog/static/163877040201551610565855/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - array_agg for array type</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551610493689/"   >http://blog.163.com/digoal@126/blog/static/163877040201551610493689/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - JSON,JSONB improve</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402015516103221261/"   >http://blog.163.com/digoal@126/blog/static/1638770402015516103221261/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - foreign talbe optimization for constraint-exclusion checking</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551610832549/"   >http://blog.163.com/digoal@126/blog/static/163877040201551610832549/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - CREATE/ALTER DATABASE ... IS_TEMPLATE, ALLOW_CONNECTIONS</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551695237643/"   >http://blog.163.com/digoal@126/blog/static/163877040201551695237643/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - ALTER TABLE .. SET LOGGED / UNLOGGED</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020155155415716/"   >http://blog.163.com/digoal@126/blog/static/16387704020155155415716/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - vacuum log the number of pages skipped due to pins , pinskipped_pages</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020155155283940/"   >http://blog.163.com/digoal@126/blog/static/16387704020155155283940/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - SELECT option SKIP LOCKED to skip locked rows, another optional of NOWAIT</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551552017215/"   >http://blog.163.com/digoal@126/blog/static/163877040201551552017215/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Allow multi-column UPDATEs with a single subselect</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551551221774/"   >http://blog.163.com/digoal@126/blog/static/163877040201551551221774/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - recovery.conf recovery_target_action (pause,promote,shutdown)</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020155145562360/"   >http://blog.163.com/digoal@126/blog/static/16387704020155145562360/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - pg_settings, pg_file_settings, alter system</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551453134609/"   >http://blog.163.com/digoal@126/blog/static/163877040201551453134609/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Use PG_OOM_ADJUST_FILE and PG_OOM_ADJUST_VALUE to control Linux OOM killer</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201551434949238/"   >http://blog.163.com/digoal@126/blog/static/163877040201551434949238/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - At promotion, archive last segment from old timeline with .partial suffix.&nbsp;</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402015428112955340/"   >http://blog.163.com/digoal@126/blog/static/1638770402015428112955340/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Provides Infrastructure for launching parallel workers</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201542894752785/"   >http://blog.163.com/digoal@126/blog/static/163877040201542894752785/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Support REINDEX progress printed as each index reindexed</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402015426113316865/"   >http://blog.163.com/digoal@126/blog/static/1638770402015426113316865/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Support GROUPING SETS, CUBE and ROLLUP.</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020154269591874/"   >http://blog.163.com/digoal@126/blog/static/16387704020154269591874/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - lets BRIN be used with R-Tree-like indexing strategies For "inclusion" opclasses</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201542684752153/"   >http://blog.163.com/digoal@126/blog/static/163877040201542684752153/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Allow LOCK TABLE .. ROW EXCLUSIVE MODE with INSERT</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201542552954275/"   >http://blog.163.com/digoal@126/blog/static/163877040201542552954275/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - create type transform between pl/lang and PostgreSQL</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201542544520314/"   >http://blog.163.com/digoal@126/blog/static/163877040201542544520314/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - allow standby archives all files it receives from the primary. (archive_mode=always)</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020154254349298/"   >http://blog.163.com/digoal@126/blog/static/16387704020154254349298/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - pg_receivexlog run as synchronous standby</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020154252564681/"   >http://blog.163.com/digoal@126/blog/static/16387704020154252564681/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Writing A Custom Scan Provider</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201542521547730/"   >http://blog.163.com/digoal@126/blog/static/163877040201542521547730/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - table | mview data sample</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201542510138405/"   >http://blog.163.com/digoal@126/blog/static/163877040201542510138405/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - use FSM fast evaluate bloat and other table level statics</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201541553253503/"   >http://blog.163.com/digoal@126/blog/static/163877040201541553253503/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - pg_audit module</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201541595510867/"   >http://blog.163.com/digoal@126/blog/static/163877040201541595510867/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Add support for INSERT ... ON CONFLICT DO NOTHING/UPDATE</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201541094137923/"   >http://blog.163.com/digoal@126/blog/static/163877040201541094137923/</a></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201552343231537/"   >http://blog.163.com/digoal@126/blog/static/163877040201552343231537/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - BRIN (block range index) index</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201531931956500/"   >http://blog.163.com/digoal@126/blog/static/163877040201531931956500/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - pg_rewind fast sync Split Brain Primary &amp; Standby</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020153933135677/"   >http://blog.163.com/digoal@126/blog/static/16387704020153933135677/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - IMPORT FOREIGN SCHEMA for fast bulk foreign table create</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201539115254789/"   >http://blog.163.com/digoal@126/blog/static/163877040201539115254789/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - wal compress for full page (wal_compress)</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020153911404924/"   >http://blog.163.com/digoal@126/blog/static/16387704020153911404924/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - Add cluster_name GUC identify which "postgres" process in one OS for servel pg clusters</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201539113050265/"   >http://blog.163.com/digoal@126/blog/static/163877040201539113050265/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - record transaction commit timestamp</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020153910591926/"   >http://blog.163.com/digoal@126/blog/static/16387704020153910591926/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - log replication commands</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201539105522301/"   >http://blog.163.com/digoal@126/blog/static/163877040201539105522301/</a></div><div><br></div><div>PostgreSQL 9.5 new feature - can define row security policy for table</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020153984016177/"   >http://blog.163.com/digoal@126/blog/static/16387704020153984016177/</a></div><div><br></div><div>PostgreSQL 9.5 separate trigger Checkpoint &amp; recycle xlogs</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402015226114157379/"   >http://blog.163.com/digoal@126/blog/static/1638770402015226114157379/</a></div><div><br></div><div>PostgreSQL 9.5 plpgsql add ASSERT statement for bug detect</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201522693559872/"   >http://blog.163.com/digoal@126/blog/static/163877040201522693559872/</a></div><div><br></div><div>PostgreSQL 9.5 add pg_rewind for Fast align for PostgreSQL unaligned primary &amp; standby</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201522541936986/"   >http://blog.163.com/digoal@126/blog/static/163877040201522541936986/</a></div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="PostgreSQL 9.5 新特性汇总 - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
	<h3>评论</h3>
	<div class="" id="" style="padding:0 20px;">
			<div id="">
				<h5 id="">w978628970 - 2015-07-22 0:34:25</h5>
				<div>德哥，你好，请教您一个问题：<div>我是用角色usr_dc_ods_dev登录到dc_pg_dev库下的usr_dc_ods_dev模式，然后我进行了如下的赋权操作：</div><div><div>dev_dc_pg=&gt; select current_schema;</div><div>&nbsp;current_schema</div><div>----------------</div><div>&nbsp;usr_dc_ods_dev</div><div>(1 row)</div><div><br></div><div><br></div><div>dev_dc_pg=&gt; grant select on table retail_pos_order_main to usr_dc_dm_dev;</div><div>GRANT</div></div><div>然后我在使用usr_dc_dm_dev角色登录同一个数据库的usr_dc_dm_dev模式，访问刚才授权的表时，却报权限不足，求解：</div><div><div>dev_dc_pg=&gt; select current_schema;</div><div>&nbsp;current_schema</div><div>----------------</div><div>&nbsp;usr_dc_dm_dev</div><div>(1 row)</div><div><br></div><div><br></div><div>dev_dc_pg=&gt; select count(*) from usr_dc_ods_dev.retail_pos_order_main;</div><div>错误: &nbsp;对模式 usr_dc_ods_dev 权限不够</div><div>LINE 1: select count(*) from usr_dc_ods_dev.retail_pos_order_main;</div></div></div>
			</div>
			<div style="padding-left:40px;">
				<h5 id="">德哥@Digoal 回复 w978628970 - 2015-07-22 0:34:25</h5>
				<div style="width:600px;">grant usage on schema&nbsp;<span style=""  >usr_dc_ods_dev&nbsp; to&nbsp;</span><span style=""  >usr_dc_dm_dev</span></div>
			</div>
			<div id="">
				<h5 id="">木月 - 2015-06-16 15:24:18</h5>
				<div>德哥，你好，请教您一个问题：<br>select id as a, a &gt; 8 b from t1;&nbsp; 会出错：column "a" does not exist<br>select id as a, id &gt; 8 b from t1;&nbsp; 这个就是正确<br>开发过程中碰到一个类似这样的问题，当然比这个复杂很多，请问这个别名如何来实现呢？谢谢</div>
			</div>
			<div style="padding-left:40px;">
				<h5 id="">德哥@Digoal 回复 木月 - 2015-06-16 15:24:18</h5>
				<div style="width:600px;">如果有歧义的话，最好使用alias.column.<div>还有，在where条件中不能使用别名.</div><div>例如</div><div><div>postgres=# select id as t from t1 where t=2;</div><div>ERROR: &nbsp;column "t" does not exist</div><div>LINE 1: select id as t from t1 where t=2;</div><div>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^</div><div>postgres=# select id &nbsp;from t1 where id=2;</div><div>&nbsp;id&nbsp;</div><div>----</div><div>&nbsp; 2</div><div>(1 row)</div></div></div>
			</div>
			<div style="padding-left:40px;">
				<h5 id="">木月 回复 德哥@Digoal - 2015-06-16 15:24:18</h5>
				<div style="width:600px;"><br>谢谢，最近在做从sybase迁移到PostgreSQL，有一个视图创建如下：<br>CREATE OR REPLACE View LTEMRIAInfo AS<br>SELECT A.D004||'_'||A.D005 AS Cell,&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CASE WHEN B.C008 IS NOT NULL THEN B.C008 ELSE A.C055 END AS ulband, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CASE WHEN B.C006 IS NOT NULL THEN B.C006 ELSE A.C054 END AS ulfreq, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CASE WHEN ulband=20 THEN 100 WHEN ulband=15 THEN 75&nbsp; END AS RBNUM,<br>&nbsp; FROM T001_Table A<br>&nbsp; LEFT JOIN T204 B <br>&nbsp;&nbsp;&nbsp; ON A.D004 = B.D016 AND A.D005 = B.D017;<br>一直报：ulband未定义</div>
			</div>
			<div style="padding-left:40px;">
				<h5 id="">德哥@Digoal 回复 木月 - 2015-06-16 15:24:18</h5>
				<div style="width:600px;">你需要再嵌套一层</div>
			</div>
			<div id="">
				<h5 id="">虎子钟啸 - 2015-06-09 17:56:06</h5>
				<div><span style=""  >朋友您好!</span><img src="http://b.bst.126.net/common/portrait/face/preview/face0.gif"    ><span style=""  >，专程到您这里来学习了！我想地球在宇宙，宇宙有地球，生活是梦想，梦想亦生活，祝您能够美梦成真，如果您有时间，敬请您的回访。</span><img src="http://b.bst.126.net/common/portrait/face/preview/face51.gif"    ></div>
			</div>
	</div>
</div>
</body>
</html>