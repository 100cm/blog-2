<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">FC-FCoE Driver for RHEL 5.6/5.7 (x86/x64) V-8.03.07.09.5.6-k</h2>
	<h5 id="">2011-11-28 9:53:45&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402011102894322373/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><P>下载 : </P>  <P><A rel="nofollow" href="http://filedownloads.qlogic.com"  >http://filedownloads.qlogic.com</A></P>  <P>FC-FCoE Driver for RHEL 5.6/5.7 (x86/x64) V-8.03.07.09.5.6-k</P>  <P>安装 : </P>  <P>4.1 Building the Driver for RHEL 5.x Linux<BR><BR> 1. In the directory that contains the source driver file,<BR>&nbsp;&nbsp;&nbsp; qla2xxx-src-x.xx.xx.xx.xx.xx-k.gz, issue the following commands: <BR> <BR>&nbsp;&nbsp;&nbsp;&nbsp; # tar -xzvf qla2xxx-src-x.xx.xx.xx.xx.xx-k.tar.gz<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp; # cd qla2xxx-src-x.xx.xx.xx.xx.xx-k<BR><BR> 2. Build and install the driver modules from the source code by<BR>&nbsp;&nbsp;&nbsp; executing the build.sh script as follows:<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # ./extras/build.sh install<BR><BR>&nbsp;&nbsp;&nbsp; The build.sh script does the following:<BR><BR>&nbsp;&nbsp;&nbsp; * Builds the driver .ko files.<BR><BR>&nbsp;&nbsp;&nbsp; * Copies the .ko files to the appropriate<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /lib/modules/2.6.../extra/qlgc-qla2xxx directory.<BR><BR>&nbsp;&nbsp;&nbsp; * Adds the appropriate directive in the modprobe.conf (if <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; applicable).<BR><BR> 3. Manually load the driver for Linux by issuing the following<BR>&nbsp;&nbsp;&nbsp; command:<BR>&nbsp;&nbsp;&nbsp; <BR>&nbsp;&nbsp;&nbsp;&nbsp; # modprobe -v qla2xxx<BR><BR>&nbsp;&nbsp;&nbsp; To unload the driver, issue the following command:<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp; # modprobe -r qla2xxx<BR><BR> 4. Automatically load the driver by rebuilding the RAM disk to <BR>&nbsp;&nbsp;&nbsp; include the driver as follows:<BR><BR>&nbsp;&nbsp;&nbsp; a. Edit the /etc/modprobe.conf file and add the following entry<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (if they are not present):<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alias scsi_hostadapterX qla2xxx<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; where, X is based on the order of the SCSI modules being <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; loaded.<BR><BR>&nbsp;&nbsp;&nbsp; b. Create a backup copy of the RAMDISK image by issuing the <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; following commands:<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # cd /boot<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # cp initrd-[kernel version].img initrd-[kernel <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; version].img.bak<BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # mkinitrd -f initrd-[kernel version].img `uname -r`&nbsp; <BR><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NOTE: Depending on the server hardware, the RAMDISK file name<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; may be different.<BR><BR>&nbsp;&nbsp;&nbsp; c. To load the driver, reboot the host.<BR><BR>可选参数 : </P>  <P>&nbsp;</P>  <P>5. Driver System Parameters<BR><BR>The driver gets its parameters when specified with the insmod command.<BR>For example:<BR><BR> # insmod qla2xxx.ko ql2xextended_error_logging=1<BR><BR>If using the modprobe command, you must specify the parameters in the<BR>/etc/modprobe.conf file for RHEL and /etc/modprobe.conf.local for<BR>SLES. For example:<BR><BR> options qla2xxx ql2xextended_error_logging=1<BR><BR>Parameters for the Linux driver include the following:<BR><BR> * ql2xlogintimeout - Defines the login timeout value in seconds <BR>&nbsp;&nbsp; during the initial login. Default: 20 seconds<BR><BR> * qlport_down_retry - Defines how long to wait for a port that <BR>&nbsp;&nbsp; returns a PORT-DOWN status before returning I/O back to the OS.<BR>&nbsp;&nbsp; Default: 30 seconds<BR><BR> * ql2xplogiabsentdevice - Enables PLOGI to devices that are not <BR>&nbsp;&nbsp; present after a Fabric scan. This is needed for several broken<BR>&nbsp;&nbsp; switches. Default is 0 - no PLOGI. 1 - perform PLOGI.<BR><BR> * ql2xloginretrycount - Specifies an alternate value for the NVRAM<BR>&nbsp;&nbsp; login retry count. Default is 8.<BR><BR> * ql2xallocfwdump - Enables allocation of memory for a firmware dump<BR>&nbsp;&nbsp; during initialization. Memory allocation requirements vary <BR>&nbsp;&nbsp; by type. Default is 1 - allocate memory.<BR><BR> * ql2xextended_error_logging - Defines whether the driver prints <BR>&nbsp;&nbsp; verbose logging information. Default is 0 - disable. 1 - enable. <BR><BR> * ql2xfdmienable - Enables FDMI registrations&nbsp; <BR>&nbsp;&nbsp; Default is 0 - no FDMI. 1 - perform FDMI.<BR><BR> * ql2xmaxqdepth - Defines the maximum queue depth reported to SCSI <BR>&nbsp;&nbsp; mid-level per device. The Queue depth specifies the number of <BR>&nbsp;&nbsp; outstanding requests per LUN. Default is 32.<BR><BR> * ql2xqfullrampup - Number of seconds to wait to begin to ramp-up <BR>&nbsp;&nbsp; of the queue depth for a device after a queue-full condition has <BR>&nbsp;&nbsp; been detected. Default is 120 seconds.<BR><BR> * ql2xqfulltracking - Controls whether the driver tracks queue full<BR>&nbsp;&nbsp; status returns and dynamically adjusts a SCSI device's queue<BR>&nbsp;&nbsp; depth.&nbsp;&nbsp;&nbsp; Default is 1 to perform tracking. Set to 0 to disable<BR>&nbsp;&nbsp; tracking and adjustment of queue.<BR><BR> * ql2xfwloadbin - Specifies location from which to load ISP firmware.<BR>&nbsp;&nbsp;&nbsp; 2 - load firmware via the request_firmware() interface.<BR>&nbsp;&nbsp;&nbsp; 1 - load firmware from Flash.<BR>&nbsp;&nbsp;&nbsp; 0 - use default semantics.<BR><BR>To view a comprehensive list of parameters, enter the following<BR>command:<BR><BR> # /sbin/modinfo qla2xxx</P>  <P>输出如下 : </P>  <P>[root@db-192-168-173-226 ~]# /sbin/modinfo qla2xxx<BR>filename:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /lib/modules/2.6.18-238.el5/extra/qlgc-qla2xxx/qla2xxx.ko<BR>version:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8.03.07.09.5.6-k<BR>license:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GPL<BR>description:&nbsp;&nbsp;&nbsp; QLogic Fibre Channel HBA Driver<BR>author:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; QLogic Corporation<BR>srcversion:&nbsp;&nbsp;&nbsp;&nbsp; 35B312F34F607638CF849A0<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00008021sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00008001sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00002532sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00005432sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00005422sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00008432sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00002432sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00002422sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00006322sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00006312sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00002322sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00002312sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00002300sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00002200sv*sd*bc*sc*i*<BR>alias:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pci:v00001077d00002100sv*sd*bc*sc*i*<BR>depends:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; scsi_mod,scsi_transport_fc<BR>vermagic:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.6.18-238.el5 SMP mod_unload gcc-4.1<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xlogintimeout:Login timeout value in seconds. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; qlport_down_retry:Maximum number of command retries to a port that returns a PORT-DOWN status. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xplogiabsentdevice:Option to enable PLOGI to devices that are not present after a Fabric scan.&nbsp; This is needed for several broken switches. Default is 0 - no PLOGI. 1 - perfom PLOGI. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xloginretrycount:Specify an alternate value for the NVRAM login retry count. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xallocfwdump:Option to enable allocation of memory for a firmware dump during HBA initialization.&nbsp; Memory allocation requirements vary by ISP type.&nbsp; Default is 1 - allocate memory. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xextended_error_logging:Option to enable extended error logging, Default is 0 - no logging. 1 - log errors. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xdevdiscgoldfw:Option to enable device discovery with golden firmware Applicable to ISP81XX based CNA only. Default is 0 - no discovery. 1 - discover device. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xfdmienable:Enables FDMI registratons Default is 0 - no FDMI. 1 - perfom FDMI. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xmaxqdepth:Maximum queue depth to report for target devices. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xqfulltracking:Controls whether the driver tracks queue full status returns and dynamically adjusts a scsi device's queue depth.&nbsp; Default is 1, perform tracking.&nbsp; Set to 0 to disable dynamic tracking and adjustment of queue depth. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xqfullrampup:Number of seconds to wait to begin to ramp-up the queue depth for a device after a queue-full condition has been detected.&nbsp; Default is 120 seconds. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xenablemsix:Set to enable MSI or MSI-X interrupt mechanism. Default is 1, enable MSI-X interrupt mechanism. 0 = enable traditional pin-based mechanism. 1 = enable MSI-X interrupt mechanism. 2 = enable MSI interrupt mechanism. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xshiftctondsd:Set to control shifting of command type processing based on total number of DSD. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xfwloadbin:Option to specify location from which to load ISP firmware: 2 -- load firmware via the request_firmware() (hotplug) interface, ISP82XX and above. 1 -- load firmware from flash. 0 -- use default semantics. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xdbwr:Option to specify scheme for request queue posting 0 -- Regular doorbell. 1 -- (Default) CAMRAM doorbell (faster). (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xdontresethba:1: Do not reset on failure, 0(Default): Reset on failure. (Debug) (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xsetdevstate:1: Reset device state to COLD. (Debug) (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xetsenable:Enables firmware ETS burst.Default is 0 - skip ETS enablement. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xtargetreset:Enable target reset.Default is 1 - use hw defaults. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xmaxlun:Defines the maximum LU number to register with the SCSI midlayer. Default is 65535. (uint)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xmdcapmask:Set the Minidump driver capture mask level. Default is 0x1F - Can be set to 0x3, 0x7, 0xF, 0x1F, 0x7F. (int)<BR>parm:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ql2xmdenable:Enable/disable MiniDump. 0 (Default) - MiniDump disabled. 1 - MiniDump enabled. (int)</P>  <P><BR>&nbsp;</P><WBR></div>
	</div>
</div>
</body>
</html>