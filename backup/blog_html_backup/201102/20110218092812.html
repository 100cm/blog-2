<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL's parameters postgresql.conf & pg_settings & show & set & reset & pg_ctl reload</h2>
	<h5 id="">2011-02-18 9:28:12&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201111883712350/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">参数分类:<br>启动参数 - 位于$PGDATA/postgresql.conf<br>重加载参数 - 修改$PGDATA/postgresql.conf 后 pg_ctl reload -D $PGDATA<br>SESSION级参数 - set session 设置的参数<br>事务级参数 - set local 设置的参数<br><br>优先级:<br>事务级参数 &gt; SESSION级参数 &gt; 重加载参数 &gt; 启动级参数<br><br>pg_settings 可以反映当前参数和启动参数以及重加载参数.<br>字段如下<br>digoal=&gt; \d pg_settings<br>&nbsp; View "pg_catalog.pg_settings"<br>&nbsp;&nbsp; Column&nbsp;&nbsp; |&nbsp; Type&nbsp;&nbsp; | Modifiers <br>------------+---------+-----------<br>&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;setting&nbsp;&nbsp;&nbsp; | text&nbsp;&nbsp;&nbsp; |&nbsp; 当前参数(优先级最高的参数,)<br>&nbsp;unit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;category&nbsp;&nbsp; | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;short_desc | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;extra_desc | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;context&nbsp;&nbsp;&nbsp; | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;vartype&nbsp;&nbsp;&nbsp; | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;source&nbsp;&nbsp;&nbsp;&nbsp; | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;min_val&nbsp;&nbsp;&nbsp; | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;max_val&nbsp;&nbsp;&nbsp; | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;enumvals&nbsp;&nbsp; | text[]&nbsp; | <br>&nbsp;boot_val&nbsp;&nbsp; | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;reset_val&nbsp; | text&nbsp;&nbsp;&nbsp; |&nbsp; # 记录启动参数或重载参数.SESSION启动时首先读取reset_val,然后设置特殊参数.<br>&nbsp;sourcefile | text&nbsp;&nbsp;&nbsp; | <br>&nbsp;sourceline | integer | <br><br><br>digoal=&gt; begin;<br>BEGIN<br>digoal=&gt; set session bytea_output='hex';<br>SET<br>digoal=&gt; set local bytea_output='escape';<br>SET<br>digoal=&gt; show bytea_output;<br>&nbsp;bytea_output <br>--------------<br>&nbsp;escape<br>(1 row)<br><br>digoal=&gt; select name,setting,vartype,source,reset_val from pg_settings where name='bytea_output';<br>&nbsp;&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp; | setting | vartype | source&nbsp; | reset_val <br>--------------+---------+---------+---------+-----------<br>&nbsp;bytea_output | escape&nbsp; | enum&nbsp;&nbsp;&nbsp; | session | escape<br>(1 row)<br><br>digoal=&gt; set session bytea_output='escape';<br>SET<br>digoal=&gt; set local bytea_output='hex';<br>SET<br>digoal=&gt; show bytea_output;<br>&nbsp;bytea_output <br>--------------<br>&nbsp;hex<br>(1 row)<br><br>digoal=&gt; select name,setting,vartype,source,reset_val from pg_settings where name='bytea_output';<br>&nbsp;&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp; | setting | vartype | source&nbsp; | reset_val <br>--------------+---------+---------+---------+-----------<br>&nbsp;bytea_output | hex&nbsp;&nbsp;&nbsp;&nbsp; | enum&nbsp;&nbsp;&nbsp; | session | escape<br>(1 row)<br><br>show 和pg_settings.setting的值相同。<br>reset_val 的值等于启动参数或重载参数的值，如下:<br>vi $PGDATA/postgresql.conf<br>修改 bytea_output = 'hex' <br>pg_ctl reload -D $PGDATA<br>digoal=&gt; select name,setting,vartype,source,reset_val from pg_settings where name='bytea_output';<br>&nbsp;&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp; | setting | vartype |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; source&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | reset_val <br>--------------+---------+---------+--------------------+-----------<br>&nbsp;bytea_output | hex&nbsp;&nbsp;&nbsp;&nbsp; | enum&nbsp;&nbsp;&nbsp; | configuration file | hex<br>(1 row)<br><br>reset [parameter | ALL] 重置参数值为SESSION启动时的参数值. (默认情况下是 reset_val 值,除了以下<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; setting&nbsp;&nbsp;&nbsp;&nbsp; | vartype |&nbsp; source&nbsp; | reset_val <br>-------------------------+----------------+---------+----------+-----------<br>&nbsp;tcp_keepalives_count&nbsp;&nbsp;&nbsp; | 9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | integer | default&nbsp; | 0<br>&nbsp;tcp_keepalives_interval | 75&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | integer | default&nbsp; | 0<br>&nbsp;transaction_isolation&nbsp;&nbsp; | read committed | string&nbsp; | override | default<br>这三个的值和SESSION启动时的值不一样.<br>)<br><br>举例:<br>digoal=&gt; select name,setting,vartype,source,reset_val from pg_settings where name='bytea_output';<br>&nbsp;&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp; | setting | vartype |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; source&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | reset_val <br>--------------+---------+---------+--------------------+-----------<br>&nbsp;bytea_output | hex&nbsp;&nbsp;&nbsp;&nbsp; | enum&nbsp;&nbsp;&nbsp; | configuration file | hex<br>(1 row)<br><br>digoal=&gt; begin;<br>BEGIN<br>digoal=&gt; set bytea_output='escape';<br>SET<br>digoal=&gt; show bytea_output;<br>&nbsp;bytea_output <br>--------------<br>&nbsp;escape<br>(1 row)<br><br>digoal=&gt; reset bytea_output;<br>RESET<br>digoal=&gt; show bytea_output;<br>&nbsp;bytea_output <br>--------------<br>&nbsp;hex<br>(1 row)</div>
	</div>
</div>
</body>
</html>