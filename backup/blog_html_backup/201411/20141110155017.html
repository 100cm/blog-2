<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL backup case use pg_basebackup & restore database</h2>
	<h5 id="">2014-11-10 15:50:17&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402014101015122416/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>一个简单的备份案例 :&nbsp;</div><div>数据库服务器</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >172.16.3.221</font></div><div><font size="2"   >CentOS 6.x x64</font></div><div><font size="2"   >PostgreSQL 9.3.5</font></div><p></p></pre></div><div><br></div><div>备份机服务器</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >172.16.3.150</font></div><div><div style="line-height: 28px;"   ><font size="2"   >CentOS 6.x x64</font></div><div style="line-height: 28px;"   ><font size="2"   >PostgreSQL 9.3.5&nbsp;</font></div></div><p></p></pre></div><div><br></div><div>数据库服务器创建归档目录 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-172-16-3-221 src]# mkdir /data01/archive</font></div><div><font size="2"   >[root@db-172-16-3-221 src]# chown postgres:postgres /data01/archive</font></div><p></p></pre></div><div><span style="line-height: 28px;"   >将归档目录export出去, 便于备份, 或者你可以选择使用rsync.</span></div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >[root@db-172-16-3-221 src]# vi /etc/exports</font></div><div><font size="2"   >/data01/archive 172.16.3.150/32(ro,no_root_squash,sync)</font></div></div><div><font size="2"   >[root@db-172-16-3-221 src]# service nfs reload</font></div><p></p></pre></div><div><br></div>配置postgresql.conf, 开启归档, 允许流复制连接, 配置WAL级别.<div><pre class="prettyprint"   ><p></p><div><font size="2"   >wal_level = hot_standby</font></div><div><font size="2"   >archive_mode = on</font></div><div><font size="2"   >archive_command = 'DIR="/data01/archive/`date +%F`"; test ! -d $DIR &amp;&amp; mkdir -p $DIR; test ! -f $DIR/%f &amp;&amp; cp %p $DIR/%f &amp;&amp; chmod 755 $DIR/%f'</font></div><div><font size="2"   >archive_timeout = 300</font></div><div><font size="2"   >max_wal_senders = 32</font></div><p></p></pre></div><div><br></div><div>重启数据库</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >pg_ctl restart -m fast</font></div><div></div><p></p></pre></div><div>创建备份用户, 允许登录, 允许流复制权限</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=# create role rep nosuperuser replication login encrypted password 'abcd_REP9923_+fw223fffffffff';</font></div><div></div><p></p></pre></div><div><div>配置pg_hba.conf, 允许备份机使用流复制连接数据库</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   ><span style="line-height: 28px;"   >postgres@db-172-16-3-221-&gt;</span><span style="line-height: 28px;"   >&nbsp;</span>vi pg_hba.conf</font></div><div><font size="2"   >host replication rep 172.16.3.150/32 md5</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres@db-172-16-3-221-&gt; pg_ctl reload</font></div><p></p></pre></div><div><br></div><div><div style="line-height: 28px;"   >配置备份机, 创建备份数据文件目录, 备份归档目录</div><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >[root@150 data01]# mkdir /data01/backup</font></div><div><font size="2"   >[root@150 data01]# chown postgres:postgres /data01/backup</font></div><div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   ><font size="2"   >[root@150 data01]# mkdir -p /data01/backup/archive</font></span></div><div style="line-height: 28px;"   ><span style="line-height: 28px;"   ><font size="2"   >[root@150 data01]# chown postgres:postgres /data01/backup/archive</font></span></div></div><p></p></pre></div><div style="line-height: 28px;"   ><br></div><div>配置密码文件, 注意权限.</div></div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >[root@150 data01]# su - postgres</font></div><div><font size="2"   >postgres@150-&gt; mkdir .backup</font></div><div><font size="2"   >postgres@150-&gt; chmod 700 .backup</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres@150-&gt; vi .backup/.pgpass</font></div></div><div><div><font size="2"   >172.16.3.221:5432:replication:rep:abcd_REP9923_+fw223fffffffff</font></div></div><div><font size="2"   >postgres@150-&gt; chmod 400 ~/.backup/.pgpass</font></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >postgres@150-&gt; ll /home/postgres/.backup/.pgpass</font></div><div><font size="2"   >-r-------- 1 postgres postgres 63 Nov 10 14:33 /home/postgres/.backup/.pgpass</font></div></div><p></p></pre></div><div><br></div><div>配置归档挂载</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@150 data01]# mkdir -p /data01/backup/archive_rmt</font></div><div><font size="2"   >[root@150 data01]# mount -t nfs -o tcp,ro 172.16.3.221:/data01/archive /data01/backup/archive_rmt</font></div><p></p></pre></div><div><br></div><div>配置备份脚本</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   ><span style="line-height: 21px;"   >postgres@150-&gt; cd ~<br>postgres@150-&gt; vi backup.sh<br>#!/bin/bash<br><br>export LANG=en_US.utf8<br>export PGHOME=/opt/pgsql<br>export LD_LIBRARY_PATH=$PGHOME/lib:/lib64:/usr/lib64:/usr/local/lib64:/lib:/usr/lib:/usr/local/lib:$LD_LIBRARY_PATH<br>export PATH=$PGHOME/bin:$PATH:.<br><br><br>export PGHOST=172.16.3.221<br>export PGPORT=5432<br>export PGUSER=rep<br>export PGDATABASE=postgres<br>export PGPASSFILE=/home/postgres/.backup/.pgpass<br>export DATE=`date +%F`<br>export DIR="/data01/backup/$DATE"<br>export ARC_RMT_DIR="/data01/backup/archive_rmt"<br>export ARC_LOC_DIR="/data01/backup/archive"<br><br>if [ $# -ne 1 ]; then<br>  echo "exp: $0 base|archive"<br>  exit 1<br>fi<br><br>if [ $1 == "archive" ]; then<br>  echo "`date +%F%T`: start backup archive file."<br>  # 使用cp, 删除7天前的归档<br>  cp -n -r -p $ARC_RMT_DIR/* $ARC_LOC_DIR/ &amp;&amp; echo "`date +%F%T`: stop backup archive file success." &amp;&amp; rm -rf $ARC_RMT_DIR/`date -d '-7 day' +%F` &amp;&amp; exit 0<br>  # 或者使用rsync<br>  # rsync -a $ARC_RMT_DIR/* $ARC_LOC_DIR/ &amp;&amp; echo "`date +%F%T`: stop backup archive file success." &amp;&amp; exit 0<br>  echo "`date +%F%T`: stop backup archive file failed." &amp;&amp; exit 1<br>fi<br><br>if [ $1 == "base" ]; then<br>  STD=`psql -c "select 'this_is_standby' where pg_is_in_recovery()"|grep -c "this_is_standby"`<br>  if [ $STD -ne 1 ]; then<br>    test ! -d $DIR &amp;&amp; mkdir -p $DIR &amp;&amp; echo "`date +%F%T`: start base backup." &amp;&amp; pg_basebackup -D $DIR -F t -R -z -d postgresql://$PGUSER:@$PGHOST:$PGPORT/$PGDATABASE &amp;&amp; echo "`date +%F%T`: stop base backup success." &amp;&amp; exit 0<br>  else<br>    echo -e "This is standby, don't need backup in this node."<br>    exit 1<br>  fi<br>  echo "`date +%F%T`: base backup error OR base backup set exists." &amp;&amp; exit 1<br>fi<br><br><br>echo "exp: $0 base|archive"<br>exit 1<br><br>postgres@150-&gt; chmod 500 backup.sh </span></font></div><p></p></pre></div><div>测试 &nbsp;:&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   ><span style="line-height: 21px;"   >[root@150 backup]# /home/postgres/backup.sh archive<br>2014-11-1015:46:50: start backup archive file.<br>2014-11-1015:46:51: stop backup archive file success.</span></font></div><div><font size="2"   ><span style="line-height: 21px;"   ><br>[root@150 backup]# /home/postgres/backup.sh base<br>2014-11-1015:46:56: start base backup.<br>WARNING:  skipping special file "./.s.PGSQL.5432"<br>2014-11-1015:48:33: stop base backup success.</span></font></div><div><font size="2"   ><br></font></div><div><font size="2"   ><span style="line-height: 21px;"   >[root@150 backup]# /home/postgres/backup.sh archive<br>2014-11-1015:49:31: start backup archive file.<br>2014-11-1015:49:31: stop backup archive file success.</span></font></div><div><font size="2"   ><span style="line-height: 21px;"   ><br>[root@150 backup]# /home/postgres/backup.sh base<br>2014-11-1015:49:32: base backup error OR base backup set exists.</span></font></div><p></p></pre></div><div><br></div><div>配置备份频率 :&nbsp;</div><div>例如基础备份1周1次, 归档1天1次.</div><div>crontab -e</div><div>1 1 * * 1&nbsp;/home/postgres/backup.sh base &gt;&gt;/tmp/base_backup.log 2&gt;&amp;1</div><div><span style="line-height: 28px;"   >1 2 * * *&nbsp;/home/postgres/backup.sh archive &gt;&gt;/tmp/archive_backup.log 2&gt;&amp;1</span></div><div><br></div><div>注意删除生产机的历史归档和备份机的历史基础备份.</div><div>例如在数据库服务器配置后台脚本, 自动删除30天前的归档.</div><div>在备份机配置后台脚本, 自动删除30天前的基础备份.</div><div><br></div><div>如果使用cp的话, 注意软链接, 权限的保留问题, 还需要注意手工start backup.</div><div><br></div><div>接下来举例使用备份进行还原.</div><div>创建目录, 即数据库还原到哪个目录, 如果有多个表空间的话, 可以将表空间还原到不同的目录, 在$PGDATA/pg_tblspc使用软链接即可. 同时需要注意容量足够.</div><div>本例将数据, 表空间都还原到一个文件系统下.</div><div>创建目录, 修改权限</div><div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@deploy soft_bak]# cd /data01/</font></div><div><font size="2"   >[root@deploy data01]# mkdir new_pgdata</font></div><div><font size="2"   >[root@deploy data01]# chown postgres:postgres new_pgdata</font></div><p></p></pre></div><div>将备份文件拷贝到目标目录</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@deploy data01]# su - postgres</font></div><div><span style="line-height: 28px;"   ><font size="2"   >postgres@deploy-&gt; cd /data01/backup/2014-12-16/</font></span></div><div><font size="2"   >postgres@deploy-&gt; ll</font></div><div><font size="2"   >total 1.1G</font></div><div><font size="2"   >-rw-rw-r-- 1 postgres postgres 681M Dec 16 16:01 16397.tar.gz</font></div><div><font size="2"   >-rw-rw-r-- 1 postgres postgres 361M Dec 16 16:03 base.tar.gz</font></div><div><font size="2"   >postgres@deploy-&gt; cp * /data01/new_pgdata/</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres@deploy-&gt; cd /data01/new_pgdata/</font></div><div><font size="2"   >postgres@deploy-&gt; ll</font></div><div><font size="2"   >total 1.1G</font></div><div><font size="2"   >-rw-rw-r-- 1 postgres postgres 681M Dec 16 16:01 16397.tar.gz</font></div><div><font size="2"   >-rw-rw-r-- 1 postgres postgres 361M Dec 16 16:03 base.tar.gz</font></div><p></p></pre></div><div><span style="line-height: 28px;"   >解压$PGDATA</span></div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@deploy-&gt; tar -zxvf base.tar.gz&nbsp;</font></div><div></div><p></p></pre><div><span style="line-height: 28px;"   >删除原有的表空间软链接</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@deploy-&gt; cd pg_tblspc/</font></div><div><font size="2"   >postgres@deploy-&gt; ll</font></div><div><font size="2"   >total 0</font></div><div><font size="2"   >lrwxrwxrwx 1 postgres postgres 23 Dec 16 15:47 16397 -&gt; /data01/pgdata/tbs_test</font></div><div><font size="2"   >postgres@deploy-&gt; rm -f 16397</font></div><p></p></pre></div><div>解压表空间</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@deploy-&gt; cd ..</font></div><div><font size="2"   >postgres@deploy-&gt; tar -zxvf 16397.tar.gz</font></div><p></p></pre></div><div>将表空间文件还原到pg_tblspc(或者你可以使用软链接, 如果和本例不一样的话)</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@deploy-&gt; mkdir pg_tblspc/16397 &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >postgres@deploy-&gt; mv PG_9.3_201306121 pg_tblspc/16397/</font></div><p></p></pre></div><div>删除备份文件</div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@deploy-&gt; rm -f base.tar.gz 16397.tar.gz&nbsp;</font></div><div></div><p></p></pre><div><span style="line-height: 28px;"   >编辑还原配置文件, 本例</span><span style="line-height: 28px;"   >恢复到最后一个归档.</span></div><div><span style="line-height: 28px;"   >你也可以配置恢复目标, 例如恢复到某个时间点, 某个XID, 某个target.</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@deploy-&gt; vi recovery.conf&nbsp;</font></div><div><font size="2"   >restore_command = 'cp /data01/backup/archive_loc/*/%f %p'</font></div><p></p></pre></div><div>编辑数据库配置文件, 主要修改监听端口, 日志目录(不要和已有的端口或目录冲突即可)</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@deploy-&gt; vi postgresql.conf</font></div><div><font size="2"   >port = 1922</font></div><div><font size="2"   >log_directory = 'pg_log'</font></div><div><font size="2"   >archive_mode = off</font></div><p></p></pre></div><div><br></div><div>修改数据库目录权限, 启动数据库.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@deploy-&gt; chmod -R 700 /data01/new_pgdata</font></div><div><font size="2"   >postgres@deploy-&gt; pg_ctl start -D /data01/new_pgdata</font></div><p></p></pre></div></div><div>开始自动恢复.</div><div>恢复完成后可以看到进程已启动 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&nbsp; 18023 postgres &nbsp;20 &nbsp; 0 2230768 &nbsp;72484 &nbsp;71600 S &nbsp; 0.0 &nbsp;0.1 &nbsp; 0:00.05 /opt/pgsql9.3.5/bin/postgres -D /data01/new_pgdata &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 18024 postgres &nbsp;20 &nbsp; 0 &nbsp; 59876 &nbsp; 1264 &nbsp; &nbsp;428 S &nbsp; 0.0 &nbsp;0.0 &nbsp; 0:00.03 postgres: logger process &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 18028 postgres &nbsp;20 &nbsp; 0 2232792 2.020g 2.018g S &nbsp; 0.0 &nbsp;2.1 &nbsp; 0:02.40 postgres: checkpointer process &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 18029 postgres &nbsp;20 &nbsp; 0 2231796 &nbsp;50308 &nbsp;49392 S &nbsp; 0.0 &nbsp;0.1 &nbsp; 0:00.87 postgres: writer process &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 18461 postgres &nbsp;20 &nbsp; 0 2231796 &nbsp; 1260 &nbsp; &nbsp;376 S &nbsp; 0.0 &nbsp;0.0 &nbsp; 0:00.01 postgres: wal writer process &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; 18462 postgres &nbsp;20 &nbsp; 0 2232484 &nbsp; 2580 &nbsp; 1172 S &nbsp; 0.0 &nbsp;0.0 &nbsp; 0:00.00 postgres: autovacuum launcher process &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >&nbsp; 18464 postgres &nbsp;20 &nbsp; 0 &nbsp; 61964 &nbsp; 1396 &nbsp; &nbsp;508 S &nbsp; 0.0 &nbsp;0.0 &nbsp; 0:00.00 postgres: stats collector process &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div></pre></div><div>恢复完成,&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@deploy-&gt; psql -h 127.0.0.1 -p 1922 -U postgres postgres</font></div><div><font size="2"   >psql (9.3.5)</font></div><div><font size="2"   >Type "help" for help.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres=# \dt+</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; List of relations</font></div><div><font size="2"   >&nbsp;Schema | Name | Type &nbsp;| &nbsp;Owner &nbsp; | &nbsp;Size &nbsp; | Description&nbsp;</font></div><div><font size="2"   >--------+------+-------+----------+---------+-------------</font></div><div><font size="2"   >&nbsp;public | test | table | postgres | 4075 MB |&nbsp;</font></div><div><font size="2"   >(1 row)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres=# \l+</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;List of databases</font></div><div><font size="2"   >&nbsp; &nbsp;Name &nbsp; &nbsp;| &nbsp;Owner &nbsp; | Encoding | Collate | Ctype | &nbsp; Access privileges &nbsp; | &nbsp;Size &nbsp; | Tablespace | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Description &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >-----------+----------+----------+---------+-------+-----------------------+---------+------------+---------------------------------</font></div><div><font size="2"   >-----------</font></div><div><font size="2"   >&nbsp;postgres &nbsp;| postgres | UTF8 &nbsp; &nbsp; | C &nbsp; &nbsp; &nbsp; | C &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | 6146 MB | pg_default | default administrative connectio</font></div><div><font size="2"   >n database</font></div><div><font size="2"   >&nbsp;template0 | postgres | UTF8 &nbsp; &nbsp; | C &nbsp; &nbsp; &nbsp; | C &nbsp; &nbsp; | =c/postgres &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+| 6209 kB | pg_default | unmodifiable empty database</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; | postgres=CTc/postgres | &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;</font></div><div><font size="2"   >&nbsp;template1 | postgres | UTF8 &nbsp; &nbsp; | C &nbsp; &nbsp; &nbsp; | C &nbsp; &nbsp; | =c/postgres &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+| 6209 kB | pg_default | default template for new databas</font></div><div><font size="2"   >es</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; | postgres=CTc/postgres | &nbsp; &nbsp; &nbsp; &nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|&nbsp;</font></div><div><font size="2"   >(3 rows)</font></div><p></p></pre></div><div><br></div><div><br></div></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="PostgreSQL backup case use pg_basebackup - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>