<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL Audit by Database or Role wide parameter</h2>
	<h5 id="">2013-03-20 8:54:18&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020132208241607/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>本文基于PostgreSQL 9.2讲解.</div><div>审计的一个普遍用途就是记录用户在数据库中都干了些什么?</div><div>如果系统级的参数设置日志全记录下来当然也可以达到审计的目的, 但是这样做的话很多不需要的日志也会输出, 造成硬盘资源浪费甚至影响数据库性能. 所以精细化的审计非常有必要.</div>之前写过一篇关于PostgreSQL<span style="line-height: 22px;"   >借助</span><span style="line-height: 25px; color: rgb(51, 51, 51); font-family: Arial, Helvetica, simsun, u5b8bu4f53;"   >pg_log_userqueries插件实现用户或数据库级</span>审计的文章<font color="#333333"   face="Arial, Helvetica, simsun, u5b8bu4f53"   ><span style="line-height: 25px;"   >.</span></font><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402012019112218804/"   >http://blog.163.com/digoal@126/blog/static/1638770402012019112218804/</a></div><div>但是实际上, 使用数据库本身的配置就可以达到此目的. 主要用到PostgreSQL的以下两项配置.</div><div>1. PostgreSQL 的配置文件中对于日志的配置项What to Log中包含了默认的记录哪些日志的配置.</div><div>&nbsp; &nbsp;这些配置默认情况下是全局生效的, 不管是哪个用户连过来, 或者连到哪个数据库. 都是取的这些配置项.</div><div>2. PostgreSQL 提供了用户级以及数据库级的参数配置.&nbsp;</div><div><br></div><div>【审计举例】</div><div>假设当前的postgresql.conf LOG配置项如下 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >log_destination = 'csvlog'</font></div><div><font size="2"   >logging_collector = on</font></div><div><font size="2"   >log_directory = 'pg_log'</font></div><div><font size="2"   >log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'</font></div><div><font size="2"   >log_file_mode = 0600</font></div><div><font size="2"   >log_truncate_on_rotation = on</font></div><div><font size="2"   >log_rotation_age = 1d</font></div><div><font size="2"   >log_rotation_size = 10MB</font></div><div><font size="2"   >log_connections = on</font></div><div><font size="2"   >log_error_verbosity = verbose</font></div><div><font size="2"   >log_timezone = 'PRC'</font></div><div><font size="2"   >log_statement = 'none'</font></div><div><font size="2"   >log_min_duration_statement = -1</font></div><p></p></pre></div><div><br></div><div>1. 审计用户digoal连到数据库digoal 的所有SQL.</div><div><pre class="prettyprint"   ><p><font size="2"   >digoal=# alter role digoal in database digoal set&nbsp;log_statement='all';</font></p></pre></div><div><div># 查看当前的数据库+role级别的配置 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=&gt; select a.*,b.datname,c.rolname from pg_db_role_setting a,pg_database b,pg_roles c where a.setdatabase=b.oid and a.setrole=c.oid;</font></div><div><font size="2"   >&nbsp;setdatabase | setrole | &nbsp; &nbsp; &nbsp;setconfig &nbsp; &nbsp; &nbsp;| datname | rolname&nbsp;</font></div><div><font size="2"   >-------------+---------+---------------------+---------+---------</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;3425937 | 3425936 | {log_statement=all} | digoal &nbsp;| digoal</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div></div><div># 测试 :&nbsp;</div><div># 打开一个终端观察日志的输出</div><div><pre class="prettyprint"   ><p><font size="2"   >tail -f -n 1 postgresql-2013-03-20_000000.csv</font></p></pre></div><div># 使用digoal用户连接到digoal数据库, 并执行SQL</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=&gt; \c digoal digoal</font></div><div><div><font size="2"   >digoal=&gt; select current_user;</font></div><div><font size="2"   >&nbsp;current_user&nbsp;</font></div><div><font size="2"   >--------------</font></div><div><font size="2"   >&nbsp;digoal</font></div><div><font size="2"   >(1 row)</font></div></div><p></p></pre></div><div># select current_user被记录在日志中了</div><div><pre class="prettyprint"   ><p><font size="2"   >2013-03-20 08:43:25.109 CST,"digoal","digoal",2743,"[local]",5149061c.ab7,7,"idle",2013-03-20 08:43:08 CST,1/169,0,LOG,00000,"statement: select current_user;",,,,,,,,"exec_simple_query, postgres.c:888","psql"</font></p></pre></div><div># digoal用户连接到其他数据库, 或者其他用户连接到digoal数据库的SQL不会被记录.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=&gt; \c digoal postgres</font></div><div><font size="2"   >You are now connected to database "digoal" as user "postgres".</font></div><div><font size="2"   >digoal=# select current_user;</font></div><div><font size="2"   >&nbsp;current_user&nbsp;</font></div><div><font size="2"   >--------------</font></div><div><font size="2"   >&nbsp;postgres</font></div><div><font size="2"   >(1 row)</font></div><div><font size="2"   >digoal=# \c postgres digoal</font></div><div><font size="2"   >You are now connected to database "postgres" as user "digoal".</font></div><div><font size="2"   >postgres=&gt; select current_user;</font></div><div><font size="2"   >&nbsp;current_user&nbsp;</font></div><div><font size="2"   >--------------</font></div><div><font size="2"   >&nbsp;digoal</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div># 以上SQL在日志中无记录.</div><div><br></div><div>2. 审计用户digoal 的所有SQL.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=&gt; \c digoal postgres</font></div><div><font size="2"   >You are now connected to database "digoal" as user "postgres".</font></div><div><font size="2"   >digoal=# alter role digoal set log_statement='all';</font></div><div><font size="2"   >ALTER ROLE</font></div><div><font size="2"   >digoal=# select * from pg_roles where rolname='digoal';</font></div><div><font size="2"   >&nbsp;rolname | rolsuper | rolinherit | rolcreaterole | rolcreatedb | rolcatupdate | rolcanlogin | rolreplication | rolconnlimit | rolpas</font></div><div><font size="2"   >sword | rolvaliduntil | &nbsp; &nbsp; &nbsp;rolconfig &nbsp; &nbsp; &nbsp;| &nbsp; oid &nbsp;&nbsp;</font></div><div><font size="2"   >---------+----------+------------+---------------+-------------+--------------+-------------+----------------+--------------+-------</font></div><div><font size="2"   >------+---------------+---------------------+---------</font></div><div><font size="2"   >&nbsp;digoal &nbsp;| f &nbsp; &nbsp; &nbsp; &nbsp;| t &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| f &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | f &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | f &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| t &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | f &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -1 | ******</font></div><div><font size="2"   >** &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | {log_statement=all} | 3425936</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div># 测试, digoal用户连接到postgres数据库执行SQL</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=# \c postgres digoal</font></div><div><font size="2"   >You are now connected to database "postgres" as user "digoal".</font></div><div><font size="2"   >postgres=&gt; select 'abc';</font></div><div><font size="2"   >&nbsp;?column?&nbsp;</font></div><div><font size="2"   >----------</font></div><div><font size="2"   >&nbsp;abc</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div># 日志输出 :&nbsp;</div><div><pre class="prettyprint"   ><p><font size="2"   >2013-03-20 08:46:11.986 CST,"digoal","postgres",2807,"[local]",514906d1.af7,3,"idle",2013-03-20 08:46:09 CST,3/40,0,LOG,00000,"statement: select 'abc';",,,,,,,,"exec_simple_query, postgres.c:888","psql"</font></p></pre></div><div><br></div><div>3. 审计任何用户连接到数据库digoal 的所有SQL.</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >postgres=# alter database digoal set log_statement='all';</font></div><div><font size="2"   >ALTER DATABASE</font></div></div><div><div><font size="2"   >postgres=# select a.*,b.datname from pg_db_role_setting a,pg_database b where a.setdatabase=b.oid;</font></div><div><font size="2"   >&nbsp;setdatabase | setrole | &nbsp; &nbsp; &nbsp;setconfig &nbsp; &nbsp; &nbsp;| datname&nbsp;</font></div><div><font size="2"   >-------------+---------+---------------------+---------</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;3425937 | &nbsp; &nbsp; &nbsp; 0 | {log_statement=all} | digoal</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;3425937 | 3425936 | {log_statement=all} | digoal</font></div><div><font size="2"   >(2 rows)</font></div></div><div><font size="2"   >setrole=0 表示所有用户.</font></div><p></p></pre></div><div># 测试, postgres用户连接到digoal数据库执行SQL</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# \c digoal postgres</font></div><div><font size="2"   >You are now connected to database "digoal" as user "postgres".</font></div><div><font size="2"   >digoal=# select now();</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; now &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >-------------------------------</font></div><div><font size="2"   >&nbsp;2013-03-20 08:49:27.761984+08</font></div><div><font size="2"   >(1 row)</font></div><p></p></pre></div><div># 日志输出 :&nbsp;</div><div><pre class="prettyprint"   ><p><font size="2"   >2013-03-20 08:49:27.762 CST,"postgres","digoal",2879,"[local]",51490792.b3f,3,"idle",2013-03-20 08:49:22 CST,3/42,0,LOG,00000,"statement: select now();",,,,,,,,"exec_simple_query, postgres.c:888","psql"</font></p></pre></div><div><br></div><div>【清除以上审计配置】</div><div><pre class="prettyprint"   ><p></p><div><span style="line-height: 22px;"   ><font size="2"   >digoal=# alter role digoal set log_statement to default;</font></span></div><div><font size="2"   >ALTER ROLE</font></div><div><div><font size="2"   >digoal=# alter role digoal in database digoal reset log_statement;</font></div><div><font size="2"   >ALTER ROLE</font></div><div><font size="2"   >digoal=# alter database digoal reset log_statement;</font></div><div><font size="2"   >ALTER DATABASE</font></div></div><div><div><font size="2"   >digoal=# select * from pg_db_role_setting;</font></div><div><font size="2"   >&nbsp;setdatabase | setrole | setconfig&nbsp;</font></div><div><font size="2"   >-------------+---------+-----------</font></div><div><font size="2"   >(0 rows)</font></div></div><p></p></pre></div><div><br></div><div>【推荐的日志配置】</div><div><div style="line-height: 22px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 22px;"   ><font size="2"   >log_destination = 'csvlog'</font></div><div style="line-height: 22px;"   ><font size="2"   >logging_collector = on</font></div><div style="line-height: 22px;"   ><font size="2"   >log_directory = '/var/log/pg_log' &nbsp;# 这个目录最好不要和数据文件的目录放在一起, 目录需要给启动postgres的操作系统用户写权限.</font></div><div style="line-height: 22px;"   ><font size="2"   >log_filename = 'postgresql-%Y-%m-%d_%H%M%S.log'</font></div><div style="line-height: 22px;"   ><font size="2"   >log_file_mode = 0600</font></div><div style="line-height: 22px;"   ><font size="2"   >log_truncate_on_rotation = on</font></div><div style="line-height: 22px;"   ><font size="2"   >log_rotation_age = 1d</font></div><div style="line-height: 22px;"   ><font size="2"   >log_rotation_size = 10MB</font></div><div style="line-height: 22px;"   ><font size="2"   >log_error_verbosity = verbose</font></div><p></p></pre></div></div><div><br></div><div>【其他】</div><div>1. 以上审计的粒度可能还是太大, 只到了用户和数据库的层面.&nbsp;</div><div>并且, 仅仅审计到用户调用的SQL, 而不能审计到变化前后的数据, 例如用户执行一条UPDATE语句, 可能变更了整张表的数据, 但是使用log_statement只能记录下这条SQL, 而不是记录被变更前后的数据.</div><div><br></div><div>如果要对表或者表上面的数据进行审计的话, 需要用上触发器.</div><div>例如 :&nbsp;</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201252575529358/"   >http://blog.163.com/digoal@126/blog/static/163877040201252575529358/</a></div><div>如果不想将这些记录写在数据库中, 而是输出到日志的话 :&nbsp;</div><div>1. &nbsp;触发器中使用RAISE WARNING '....' 打印消息.</div><div>2. &nbsp;postgresql.conf 配置 log_min_messages = warning&nbsp;</div><div>这样的话'....'的消息就会打印到日志中.</div><div>具体的例子在另一篇文章中再详细介绍一下.</div><div>3. PostgreSQL 9.3还引入了事件触发器的功能, 也可以作为审计的外围工具之一.</div><div>感兴趣的朋友可以参考</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020132131361949/"   >http://blog.163.com/digoal@126/blog/static/16387704020132131361949/</a></div><div><br></div><div>【注意】</div><div>1. 超级用户可以修改这些配置项, 所以被审计的用户最好是普通用户. 否则用户连上来可以修改这些审计项.</div><div>2. 程序用的数据库账号和个人用的数据库账号分开, 对于程序用的数据库账号可以只审计DDL操作, 而对于个人使用的数据库账号, 建议审计所有的SQL.</div><div><br></div><div>【参考】</div><div>1. PostgreSQL.conf</div><div><div><pre class="prettyprint"   ><p></p><div><font size="2"   ># - What to Log -</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >#debug_print_parse = off</font></div><div><font size="2"   >#debug_print_rewritten = off</font></div><div><font size="2"   >#debug_print_plan = off</font></div><div><font size="2"   >#debug_pretty_print = on</font></div><div><font size="2"   >#log_checkpoints = off</font></div><div><font size="2"   >log_connections = on</font></div><div><font size="2"   >#log_disconnections = off</font></div><div><font size="2"   >#log_duration = off</font></div><div><font size="2"   >log_error_verbosity = verbose &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # terse, default, or verbose messages</font></div><div><font size="2"   >#log_hostname = off</font></div><div><font size="2"   >#log_line_prefix = '' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # special values:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %a = application name</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %u = user name</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %d = database name</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %r = remote host and port</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %h = remote host</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %p = process ID</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %t = timestamp without milliseconds</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %m = timestamp with milliseconds</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %i = command tag</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %e = SQL state</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %c = session ID</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %l = session line number</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %s = session start timestamp</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %v = virtual transaction ID</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %x = transaction ID (0 if none)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %q = stop here in non-session</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; &nbsp; &nbsp; &nbsp;processes</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # &nbsp; %% = '%'</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # e.g. '&lt;%u%%%d&gt; '</font></div><div><font size="2"   >#log_lock_waits = off &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # log lock waits &gt;= deadlock_timeout</font></div><div><font size="2"   >#log_statement = 'none' &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # none, ddl, mod, all</font></div><div><font size="2"   >#log_temp_files = -1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# log temporary files equal or larger</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # than the specified size in kilobytes;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # -1 disables, 0 logs all temp files</font></div><div><font size="2"   >log_timezone = 'PRC'</font></div><p></p></pre></div><div>2.&nbsp;<a style="line-height: 22px;" target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/9.2/static/sql-alterrole.html"   >http://www.postgresql.org/docs/9.2/static/sql-alterrole.html</a></div><div>3.&nbsp;<a style="line-height: 22px;" target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/9.2/static/sql-alterdatabase.html"   >http://www.postgresql.org/docs/9.2/static/sql-alterdatabase.html</a></div>4.&nbsp;<wbr><a style="line-height: 22px;" target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/9.2/static/sql-set.html"   >http://www.postgresql.org/docs/9.2/static/sql-set.html</a></div><div>5.&nbsp;<a style="line-height: 22px;" target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/9.2/static/runtime-config.html"   >http://www.postgresql.org/docs/9.2/static/runtime-config.html</a></div><div>6.&nbsp;<a style="line-height: 22px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201252575529358/"   >http://blog.163.com/digoal@126/blog/static/163877040201252575529358/</a></div><div>7.&nbsp;<a style="line-height: 22px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/1638770402012019112218804/"   >http://blog.163.com/digoal@126/blog/static/1638770402012019112218804/</a></div>8.&nbsp;<a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020132131361949/"   >http://blog.163.com/digoal@126/blog/static/16387704020132131361949/</a></div>
	</div>
</div>
</body>
</html>