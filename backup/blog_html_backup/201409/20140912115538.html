<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">gmond's XML introduction</h2>
	<h5 id="">2014-09-12 11:55:38&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402014812104313876/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><div><div>本文讲一下从gmond监听端口导出的XML的信息, 便<span style="line-height: 28px;"   >于理解 :&nbsp;</span></div><div>监听端口如果你没改的话, 默认是8649</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-172-16-3-221 ganglia-web]# netstat -anp|grep gmond</font></div><div><font size="2"   >tcp &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 0.0.0.0:8649 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; LISTEN &nbsp; &nbsp; &nbsp;4462/gmond &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >udp &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 239.2.11.71:8649 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0:* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4462/gmond &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >udp &nbsp; &nbsp; &nbsp; &nbsp;0 &nbsp; &nbsp; &nbsp;0 172.16.3.221:28390 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;239.2.11.71:8649 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ESTABLISHED 4462/gmond&nbsp;</font></div><p></p></pre></div></div><div>使用telnet导出xml的信息</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-172-16-3-221 ganglia-web]# telnet 127.0.0.1 8649</font></div><div><font size="2"   >Trying 127.0.0.1...</font></div><div><font size="2"   >Connected to 127.0.0.1.</font></div><div><font size="2"   >Escape character is '^]'.</font></div><div><font size="2"   >&lt;?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?&gt;</font></div><div><font size="2"   ># 文档结构</font></div><div><font size="2"   >&lt;!DOCTYPE GANGLIA_XML [</font></div><div><font size="2"   >&nbsp; &nbsp;&lt;!ELEMENT GANGLIA_XML (GRID|CLUSTER|HOST)*&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST GANGLIA_XML VERSION CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST GANGLIA_XML SOURCE CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp;&lt;!ELEMENT GRID (CLUSTER | GRID | HOSTS | METRICS)*&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST GRID NAME CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST GRID AUTHORITY CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST GRID LOCALTIME CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp;&lt;!ELEMENT CLUSTER (HOST | HOSTS | METRICS)*&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST CLUSTER NAME CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST CLUSTER OWNER CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST CLUSTER LATLONG CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST CLUSTER URL CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST CLUSTER LOCALTIME CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp;&lt;!ELEMENT HOST (METRIC)*&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOST NAME CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOST IP CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOST LOCATION CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOST TAGS CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOST REPORTED CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOST TN CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOST TMAX CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOST DMAX CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOST GMOND_STARTED CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp;&lt;!ELEMENT METRIC (EXTRA_DATA*)&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRIC NAME CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRIC VAL CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRIC TYPE (string | int8 | uint8 | int16 | uint16 | int32 | uint32 | float | double | timestamp) #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRIC UNITS CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRIC TN CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRIC TMAX CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRIC DMAX CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRIC SLOPE (zero | positive | negative | both | unspecified) #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRIC SOURCE (gmond) 'gmond'&gt;</font></div><div><font size="2"   >&nbsp; &nbsp;&lt;!ELEMENT EXTRA_DATA (EXTRA_ELEMENT*)&gt;</font></div><div><font size="2"   >&nbsp; &nbsp;&lt;!ELEMENT EXTRA_ELEMENT EMPTY&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST EXTRA_ELEMENT NAME CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST EXTRA_ELEMENT VAL CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp;&lt;!ELEMENT HOSTS EMPTY&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOSTS UP CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOSTS DOWN CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST HOSTS SOURCE (gmond | gmetad) #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp;&lt;!ELEMENT METRICS (EXTRA_DATA*)&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRICS NAME CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRICS SUM CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRICS NUM CDATA #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRICS TYPE (string | int8 | uint8 | int16 | uint16 | int32 | uint32 | float | double | timestamp) #REQUIRED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRICS UNITS CDATA #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRICS SLOPE (zero | positive | negative | both | unspecified) #IMPLIED&gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &lt;!ATTLIST METRICS SOURCE (gmond) 'gmond'&gt;</font></div><div><font size="2"   >]&gt;</font></div><div><font size="2"   >&lt;GANGLIA_XML VERSION="3.6.0" SOURCE="gmond"&gt;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ># 集群信息, 对应gmond.conf里面的cluster章节的配置.</font></div><div><font size="2"   >&lt;CLUSTER NAME="test" LOCALTIME="1410489748" OWNER="digoal" LATLONG="111 122" URL="http://dba.sky-mobi.com"&gt;</font></div><div><font size="2"   ><br></font></div><div><span style="line-height: 28px;"   ><font size="2"   ># 主机信息, 对应gmond.conf里面的host和globals章节的配置.&nbsp;</font></span></div><div><span style="line-height: 28px;"   ><font size="2"   ># 解释一下TN, TMAX, DMAX</font></span></div><div><span style="line-height: 28px;"   ><font size="2"   ># TN是一个变量, 等于最后一次head time距离现在的时间(秒). 参见本文末尾代码的解释. 所以每次telnet得到的TN值是变的.</font></span></div><div><span style="line-height: 28px;"   ><font size="2"   ># TMAX对应配置host_tmax,&nbsp;</font></span></div><div><span style="line-height: 28px;"   ><font size="2"   ># DMAX对应配置host_dmax,&nbsp;</font></span></div><div><span style="line-height: 28px;"   ><font size="2"   ># 含义如下 :&nbsp;</font></span></div><div><span style="line-height: 28px;"   ><font size="2"   ># 取自man gmond.conf</font></span></div><div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;The host_dmax value is an integer with units in seconds. &nbsp;When set to zero (0), gmond will never delete a host</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;from its list even when a remote host has stopped reporting. &nbsp;If host_dmax is set to a positive number then</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;gmond will flush a host after it has not heard from it for host_dmax seconds. &nbsp;By the way, dmax means "delete</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;max".</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;The host_tmax value is an integer with units in seconds. This value represents the maximum amount of time that</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;gmond should wait between updates from a host. As messages may get lost in the network, gmond will consider the</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;host as being down if it has not received any messages from it after 4 times this value. For example, if</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;host_tmax is set to 20, the host will appear as down after 80 seconds with no messages from it. By the way,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;tmax means "timeout max".</font></div><div><font size="2"   ># 当tn大于dmax时, 将触发delete, 在delete前, 会等待一些时间, 这个配置就是<span style="line-height: 28px;"   >cleanup_threshold.</span></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;The cleanup_threshold is the minimum amount of time before gmond will cleanup any hosts or metrics where tn &gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;dmax a.k.a. expired data.</font></div></div><div><font size="2"   ><br></font></div><div><font size="2"   >&lt;HOST NAME="db-172-16-3-221.localdomain" IP="172.16.3.221" TAGS="" REPORTED="1410489745" TN="2" TMAX="20" DMAX="86400" LOCATION="1,2,3" GMOND_STARTED="1410332246"&gt;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   ># 接下来开始的是<span style="line-height: 28px;"   >gmond.conf里面</span><span style="line-height: 28px;"   >对应的collection_group章节的配置. 包含所有的metric.</span></font></div><div><span style="line-height: 28px;"   ><font size="2"   ># metric的属性有: name, value, type, 单位, tn, tmax, dmax, slope.</font></span></div><div><span style="line-height: 28px;"   ><font size="2"   ># 首先看看gmetric的数据结构</font></span></div><div><font size="2"   >lib/gm_protocol.h</font></div><div><div><font size="2"   >struct Ganglia_25metric {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; int key;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; char *name;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; int tmax;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; Ganglia_value_types type;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; char *units;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; char *slope;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; char *fmt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; int msg_size;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; char *desc;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; int *metadata;</font></div><div><font size="2"   >};</font></div></div><div><span style="line-height: 28px;"   ><font size="2"   ># 简单介绍一下tn, tmax, dmax, slope的含义.</font></span></div><div><span style="line-height: 28px;"   ><font size="2"   ># 注意这里的tmax, dmax和HOST章节的host_tmax, host_dmax不一样.</font></span></div><div><font size="2"   ><span style="line-height: 28px;"   ># TN同样</span><span style="line-height: 28px;"   >是一个变量, 等于最后一次head time距离现在的时间(秒). 参见本文末尾代码的解释. 所以每次telnet得到的TN值是变的.</span></font></div><div><font size="2"   ># TMAX, 发生metric对应组内的所有metric到send channel的时间间隔, 对应collection_group中time_threshold配置.</font></div><div><font size="2"   ># DMAX, metric数据结构里没有这个值, 应该是XML结构的问题. &nbsp;可以认为metric里的DMAX是没有一样的</font></div><div><font size="2"   ># slope的解释, 表示采样值存在 不增不减, 只增, 只减, 即增即减的几种风格.</font></div><div><font size="2"   ># 参考man gmetric</font></div><div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;-s, --slope=STRING</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Either zero|positive|negative|both &nbsp;(default=‘both’)</font></div></div><div><div><font size="2"   >Specifies the slope/derivative type of the metric being submitted. The</font></div><div><font size="2"   >possible values are zerofor a zero slope metric, positivefor an</font></div><div><font size="2"   >increment-only metric, negativefor a decrement-only metric, and</font></div><div><font size="2"   >bothfor an arbitrarily changing metric. The default value is both.</font></div><div><font size="2"   >Using the value positivefor the slope of a new metric will cause</font></div><div><font size="2"   >the corresponding RRD file to be generated as a COUNTER, with delta</font></div><div><font size="2"   >values being displayed instead of the actual metric values.</font></div></div><div><font size="2"   ># 其实还有3个重要配置</font></div><div><span style="line-height: 28px;"   ><font size="2"   ># collection_group里面</font></span></div><div><font size="2"   >&nbsp; collect_once = yes &nbsp;# 表示这个组内的metric只采集一次</font></div><div><font size="2"   >&nbsp; collect_every = 20 &nbsp;# 表示这个组内的metric间隔20秒采集一次.</font></div><div><font size="2"   ># metric内的配置</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0" &nbsp; # 表示当前采样值和前一次的采样值出现1.0的偏差的时候, 将<span style="line-height: 28px;"   >组内的所有metric到send channel</span></font></div><div><span style="line-height: 28px;"   ><font size="2"   ># 还包含分组, 描述, 抬头.</font></span></div><div><font size="2"   >&lt;METRIC NAME="mem_shared" VAL="0" TYPE="float" UNITS="KB" TN="2" TMAX="180" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Amount of shared memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Shared Memory"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="cpu_wio" VAL="0.0" TYPE="float" UNITS="%" TN="40" TMAX="90" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="cpu"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Percentage of time that the CPU or CPUs were idle during which the system had an outstanding disk I/O request"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="CPU wio"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="machine_type" VAL="x86_64" TYPE="string" UNITS="" TN="300" TMAX="1200" DMAX="0" SLOPE="zero"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="system"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="System architecture"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Machine Type"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="proc_total" VAL="1106" TYPE="uint32" UNITS=" " TN="282" TMAX="950" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="process"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Total number of processes"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Total Processes"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="cpu_num" VAL="48" TYPE="uint16" UNITS="CPUs" TN="300" TMAX="1200" DMAX="0" SLOPE="zero"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="cpu"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Total number of CPUs"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="CPU Count"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="cpu_speed" VAL="1995" TYPE="uint32" UNITS="MHz" TN="300" TMAX="1200" DMAX="0" SLOPE="zero"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="cpu"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="CPU Speed in terms of MHz"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="CPU Speed"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="pkts_out" VAL="0.47" TYPE="float" UNITS="packets/sec" TN="162" TMAX="300" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="network"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Packets out per second"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Packets Sent"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="swap_free" VAL="1048568" TYPE="float" UNITS="KB" TN="2" TMAX="180" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Amount of available swap memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Free Swap Space"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="cpu_steal" VAL="0.0" TYPE="float" UNITS="%" TN="40" TMAX="90" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="cpu"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="cpu_steal"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="CPU steal"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="load_one" VAL="0.00" TYPE="float" UNITS=" " TN="83" TMAX="70" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="load"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="One minute load average"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="One Minute Load Average"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="mem_total" VAL="99045568" TYPE="float" UNITS="KB" TN="300" TMAX="1200" DMAX="0" SLOPE="zero"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Total amount of memory displayed in KBs"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Memory Total"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="os_release" VAL="2.6.32-431.el6.x86_64" TYPE="string" UNITS="" TN="300" TMAX="1200" DMAX="0" SLOPE="zero"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="system"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Operating system release date"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Operating System Release"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="proc_run" VAL="0" TYPE="uint32" UNITS=" " TN="282" TMAX="950" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="process"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Total number of running processes"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Total Running Processes"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="load_five" VAL="0.00" TYPE="float" UNITS=" " TN="83" TMAX="325" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="load"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Five minute load average"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Five Minute Load Average"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="gexec" VAL="OFF" TYPE="string" UNITS="" TN="298" TMAX="300" DMAX="0" SLOPE="zero"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="core"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="gexec available"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Gexec Status"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="disk_free" VAL="3208.387" TYPE="double" UNITS="GB" TN="174" TMAX="180" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="disk"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Total free disk space"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Disk Space Available"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="mem_cached" VAL="1362116" TYPE="float" UNITS="KB" TN="2" TMAX="180" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Amount of cached memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Cached Memory"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="pkts_in" VAL="3.72" TYPE="float" UNITS="packets/sec" TN="162" TMAX="300" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="network"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Packets in per second"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Packets Received"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="bytes_in" VAL="314.24" TYPE="float" UNITS="bytes/sec" TN="162" TMAX="300" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="network"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Number of bytes in per second"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Bytes Received"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="bytes_out" VAL="45.29" TYPE="float" UNITS="bytes/sec" TN="162" TMAX="300" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="network"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Number of bytes out per second"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Bytes Sent"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="swap_total" VAL="1048568" TYPE="float" UNITS="KB" TN="300" TMAX="1200" DMAX="0" SLOPE="zero"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Total amount of swap space displayed in KBs"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Swap Space Total"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="mem_free" VAL="95977456" TYPE="float" UNITS="KB" TN="2" TMAX="180" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Amount of available memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Free Memory"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="load_fifteen" VAL="0.00" TYPE="float" UNITS=" " TN="83" TMAX="950" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="load"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Fifteen minute load average"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Fifteen Minute Load Average"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="os_name" VAL="Linux" TYPE="string" UNITS="" TN="300" TMAX="1200" DMAX="0" SLOPE="zero"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="system"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Operating system name"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Operating System"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="boottime" VAL="1410314161" TYPE="uint32" UNITS="s" TN="300" TMAX="1200" DMAX="0" SLOPE="zero"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="system"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="The last time that the system was started"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Last Boot Time"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="cpu_idle" VAL="100.0" TYPE="float" UNITS="%" TN="40" TMAX="90" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="cpu"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Percentage of time that the CPU or CPUs were idle and the system did not have an outstanding disk I/O request"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="CPU Idle"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="cpu_user" VAL="0.0" TYPE="float" UNITS="%" TN="40" TMAX="90" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="cpu"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Percentage of CPU utilization that occurred while executing at the user level"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="CPU User"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="cpu_nice" VAL="0.0" TYPE="float" UNITS="%" TN="40" TMAX="90" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="cpu"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Percentage of CPU utilization that occurred while executing at the user level with nice priority"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="CPU Nice"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="cpu_aidle" VAL="0.0" TYPE="float" UNITS="%" TN="40" TMAX="3800" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="cpu"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Percent of time since boot idle CPU"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="CPU aidle"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="mem_buffers" VAL="94408" TYPE="float" UNITS="KB" TN="2" TMAX="180" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Amount of buffered memory"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Memory Buffers"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="cpu_system" VAL="0.0" TYPE="float" UNITS="%" TN="40" TMAX="90" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="cpu"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Percentage of CPU utilization that occurred while executing at the system level"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="CPU System"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="part_max_used" VAL="30.7" TYPE="float" UNITS="%" TN="174" TMAX="180" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="disk"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Maximum percent used for all partitions"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Maximum Disk Space Used"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;METRIC NAME="disk_total" VAL="3862.720" TYPE="double" UNITS="GB" TN="2701" TMAX="1200" DMAX="0" SLOPE="both"&gt;</font></div><div><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="disk"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Total available disk space"/&gt;</font></div><div><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="Total Disk Space"/&gt;</font></div><div><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><div><font size="2"   >&lt;/METRIC&gt;</font></div><div><font size="2"   >&lt;/HOST&gt;</font></div><div><font size="2"   >&lt;/CLUSTER&gt;</font></div><div><font size="2"   >&lt;/GANGLIA_XML&gt;</font></div><div><font size="2"   >Connection closed by foreign host.</font></div><p></p></pre></div></div><div><br></div><div>以上XML dump对应的配置文件 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-172-16-3-221 ganglia-web]# cat /opt/ganglia-core-3.6.0/etc/gmond.conf&nbsp;</font></div><div><font size="2"   >/* This configuration is as close to 2.5.x default behavior as possible</font></div><div><font size="2"   >&nbsp; &nbsp;The values closely match ./gmond/metric.h definitions in 2.5.x */</font></div><div><font size="2"   >globals {</font></div><div><font size="2"   >&nbsp; daemonize = yes</font></div><div><font size="2"   >&nbsp; setuid = yes</font></div><div><font size="2"   >&nbsp; user = nobody</font></div><div><font size="2"   >&nbsp; debug_level = 0</font></div><div><font size="2"   >&nbsp; max_udp_msg_len = 1472</font></div><div><font size="2"   >&nbsp; mute = no</font></div><div><font size="2"   >&nbsp; deaf = no</font></div><div><font size="2"   >&nbsp; allow_extra_data = yes</font></div><div><font size="2"   >&nbsp; host_dmax = 86400 /*secs. Expires (removes from web interface) hosts in 1 day */</font></div><div><font size="2"   >&nbsp; host_tmax = 20 /*secs */</font></div><div><font size="2"   >&nbsp; cleanup_threshold = 300 /*secs */</font></div><div><font size="2"   >&nbsp; gexec = no</font></div><div><font size="2"   >&nbsp; # By default gmond will use reverse DNS resolution when displaying your hostname</font></div><div><font size="2"   >&nbsp; # Uncommeting following value will override that value.</font></div><div><font size="2"   >&nbsp; # override_hostname = "mywebserver.domain.com"</font></div><div><font size="2"   >&nbsp; # If you are not using multicast this value should be set to something other than 0.</font></div><div><font size="2"   >&nbsp; # Otherwise if you restart aggregator gmond you will get empty graphs. 60 seconds is reasonable</font></div><div><font size="2"   >&nbsp; send_metadata_interval = 0 /*secs */</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/*</font></div><div><font size="2"   >&nbsp;* The cluster attributes specified will be used as part of the &lt;CLUSTER&gt;</font></div><div><font size="2"   >&nbsp;* tag that will wrap all hosts collected by this instance.</font></div><div><font size="2"   >&nbsp;*/</font></div><div><font size="2"   >cluster {</font></div><div><font size="2"   >&nbsp; name = "test"</font></div><div><font size="2"   >&nbsp; owner = "digoal"</font></div><div><font size="2"   >&nbsp; latlong = "111 122"</font></div><div><font size="2"   >&nbsp; url = "http://dba.sky-mobi.com"</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* The host section describes attributes of the host, like the location */</font></div><div><font size="2"   >host {</font></div><div><font size="2"   >&nbsp; location = "1,2,3"</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* Feel free to specify as many udp_send_channels as you like. &nbsp;Gmond</font></div><div><font size="2"   >&nbsp; &nbsp;used to only support having a single channel */</font></div><div><font size="2"   >udp_send_channel {</font></div><div><font size="2"   >&nbsp; #bind_hostname = yes # Highly recommended, soon to be default.</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# This option tells gmond to use a source address</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# that resolves to the machine's hostname. &nbsp;Without</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# this, the metrics may appear to come from any</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# interface and the DNS names associated with</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# those IPs will be used to create the RRDs.</font></div><div><font size="2"   >&nbsp; mcast_join = 239.2.11.71</font></div><div><font size="2"   >&nbsp; port = 8649</font></div><div><font size="2"   >&nbsp; ttl = 10</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* You can specify as many udp_recv_channels as you like as well. */</font></div><div><font size="2"   >udp_recv_channel {</font></div><div><font size="2"   >&nbsp; mcast_join = 239.2.11.71</font></div><div><font size="2"   >&nbsp; port = 8649</font></div><div><font size="2"   >&nbsp; bind = 239.2.11.71</font></div><div><font size="2"   >&nbsp; retry_bind = true</font></div><div><font size="2"   >&nbsp; # Size of the UDP buffer. If you are handling lots of metrics you really</font></div><div><font size="2"   >&nbsp; # should bump it up to e.g. 10MB or even higher.</font></div><div><font size="2"   >&nbsp; buffer = 10485760</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* You can specify as many tcp_accept_channels as you like to share</font></div><div><font size="2"   >&nbsp; &nbsp;an xml description of the state of the cluster */</font></div><div><font size="2"   >tcp_accept_channel {</font></div><div><font size="2"   >&nbsp; port = 8649</font></div><div><font size="2"   >&nbsp; # If you want to gzip XML output</font></div><div><font size="2"   >&nbsp; gzip_output = no</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* Channel to receive sFlow datagrams */</font></div><div><font size="2"   >#udp_recv_channel {</font></div><div><font size="2"   ># &nbsp;port = 6343</font></div><div><font size="2"   >#}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* Optional sFlow settings */</font></div><div><font size="2"   >#sflow {</font></div><div><font size="2"   ># udp_port = 6343</font></div><div><font size="2"   ># accept_vm_metrics = yes</font></div><div><font size="2"   ># accept_jvm_metrics = yes</font></div><div><font size="2"   ># multiple_jvm_instances = no</font></div><div><font size="2"   ># accept_http_metrics = yes</font></div><div><font size="2"   ># multiple_http_instances = no</font></div><div><font size="2"   ># accept_memcache_metrics = yes</font></div><div><font size="2"   ># multiple_memcache_instances = no</font></div><div><font size="2"   >#}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* Each metrics module that is referenced by gmond must be specified and</font></div><div><font size="2"   >&nbsp; &nbsp;loaded. If the module has been statically linked with gmond, it does</font></div><div><font size="2"   >&nbsp; &nbsp;not require a load path. However all dynamically loadable modules must</font></div><div><font size="2"   >&nbsp; &nbsp;include a load path. */</font></div><div><font size="2"   >modules {</font></div><div><font size="2"   >&nbsp; module {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "core_metrics"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; module {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_module"</font></div><div><font size="2"   >&nbsp; &nbsp; path = "modcpu.so"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; module {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "disk_module"</font></div><div><font size="2"   >&nbsp; &nbsp; path = "moddisk.so"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; module {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "load_module"</font></div><div><font size="2"   >&nbsp; &nbsp; path = "modload.so"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; module {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "mem_module"</font></div><div><font size="2"   >&nbsp; &nbsp; path = "modmem.so"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; module {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "net_module"</font></div><div><font size="2"   >&nbsp; &nbsp; path = "modnet.so"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; module {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "proc_module"</font></div><div><font size="2"   >&nbsp; &nbsp; path = "modproc.so"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; module {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "sys_module"</font></div><div><font size="2"   >&nbsp; &nbsp; path = "modsys.so"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* The old internal 2.5.x metric array has been replaced by the following</font></div><div><font size="2"   >&nbsp; &nbsp;collection_group directives. &nbsp;What follows is the default behavior for</font></div><div><font size="2"   >&nbsp; &nbsp;collecting and sending metrics that is as close to 2.5.x behavior as</font></div><div><font size="2"   >&nbsp; &nbsp;possible. */</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* This collection group will cause a heartbeat (or beacon) to be sent every</font></div><div><font size="2"   >&nbsp; &nbsp;20 seconds. &nbsp;In the heartbeat is the GMOND_STARTED data which expresses</font></div><div><font size="2"   >&nbsp; &nbsp;the age of the running gmond. */</font></div><div><font size="2"   >collection_group {</font></div><div><font size="2"   >&nbsp; collect_once = yes</font></div><div><font size="2"   >&nbsp; time_threshold = 20</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "heartbeat"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* This collection group will send general info about this host every</font></div><div><font size="2"   >&nbsp; &nbsp;1200 secs.</font></div><div><font size="2"   >&nbsp; &nbsp;This information doesn't change between reboots and is only collected</font></div><div><font size="2"   >&nbsp; &nbsp;once. */</font></div><div><font size="2"   >collection_group {</font></div><div><font size="2"   >&nbsp; collect_once = yes</font></div><div><font size="2"   >&nbsp; time_threshold = 1200</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_num"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "CPU Count"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_speed"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "CPU Speed"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "mem_total"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Memory Total"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; /* Should this be here? Swap can be added/removed between reboots. */</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "swap_total"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Swap Space Total"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "boottime"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Last Boot Time"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "machine_type"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Machine Type"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "os_name"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Operating System"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "os_release"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Operating System Release"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "location"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Location"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* This collection group will send the status of gexecd for this host</font></div><div><font size="2"   >&nbsp; &nbsp;every 300 secs.*/</font></div><div><font size="2"   >/* Unlike 2.5.x the default behavior is to report gexecd OFF. */</font></div><div><font size="2"   >collection_group {</font></div><div><font size="2"   >&nbsp; collect_once = yes</font></div><div><font size="2"   >&nbsp; time_threshold = 300</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "gexec"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Gexec Status"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* This collection group will collect the CPU status info every 20 secs.</font></div><div><font size="2"   >&nbsp; &nbsp;The time threshold is set to 90 seconds. &nbsp;In honesty, this</font></div><div><font size="2"   >&nbsp; &nbsp;time_threshold could be set significantly higher to reduce</font></div><div><font size="2"   >&nbsp; &nbsp;unneccessary &nbsp;network chatter. */</font></div><div><font size="2"   >collection_group {</font></div><div><font size="2"   >&nbsp; collect_every = 20</font></div><div><font size="2"   >&nbsp; time_threshold = 90</font></div><div><font size="2"   >&nbsp; /* CPU status */</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_user"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "CPU User"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_system"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "CPU System"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_idle"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "5.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "CPU Idle"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_nice"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "CPU Nice"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_aidle"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "5.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "CPU aidle"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_wio"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "CPU wio"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_steal"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "CPU steal"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; /* The next two metrics are optional if you want more detail...</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;... since they are accounted for in cpu_system.</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_intr"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "CPU intr"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "cpu_sintr"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "CPU sintr"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; */</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >collection_group {</font></div><div><font size="2"   >&nbsp; collect_every = 20</font></div><div><font size="2"   >&nbsp; time_threshold = 90</font></div><div><font size="2"   >&nbsp; /* Load Averages */</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "load_one"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "One Minute Load Average"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "load_five"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Five Minute Load Average"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "load_fifteen"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Fifteen Minute Load Average"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* This group collects the number of running and total processes */</font></div><div><font size="2"   >collection_group {</font></div><div><font size="2"   >&nbsp; collect_every = 80</font></div><div><font size="2"   >&nbsp; time_threshold = 950</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "proc_run"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Total Running Processes"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "proc_total"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Total Processes"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* This collection group grabs the volatile memory metrics every 40 secs and</font></div><div><font size="2"   >&nbsp; &nbsp;sends them at least every 180 secs. &nbsp;This time_threshold can be increased</font></div><div><font size="2"   >&nbsp; &nbsp;significantly to reduce unneeded network traffic. */</font></div><div><font size="2"   >collection_group {</font></div><div><font size="2"   >&nbsp; collect_every = 40</font></div><div><font size="2"   >&nbsp; time_threshold = 180</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "mem_free"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1024.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Free Memory"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "mem_shared"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1024.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Shared Memory"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "mem_buffers"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1024.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Memory Buffers"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "mem_cached"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1024.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Cached Memory"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "swap_free"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = "1024.0"</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Free Swap Space"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >collection_group {</font></div><div><font size="2"   >&nbsp; collect_every = 40</font></div><div><font size="2"   >&nbsp; time_threshold = 300</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "bytes_out"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = 4096</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Bytes Sent"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "bytes_in"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = 4096</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Bytes Received"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "pkts_in"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = 256</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Packets Received"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "pkts_out"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = 256</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Packets Sent"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >/* Different than 2.5.x default since the old config made no sense */</font></div><div><font size="2"   >collection_group {</font></div><div><font size="2"   >&nbsp; collect_every = 1800</font></div><div><font size="2"   >&nbsp; time_threshold = 3600</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "disk_total"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = 1.0</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Total Disk Space"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >collection_group {</font></div><div><font size="2"   >&nbsp; collect_every = 40</font></div><div><font size="2"   >&nbsp; time_threshold = 180</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "disk_free"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = 1.0</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Disk Space Available"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >&nbsp; metric {</font></div><div><font size="2"   >&nbsp; &nbsp; name = "part_max_used"</font></div><div><font size="2"   >&nbsp; &nbsp; value_threshold = 1.0</font></div><div><font size="2"   >&nbsp; &nbsp; title = "Maximum Disk Space Used"</font></div><div><font size="2"   >&nbsp; }</font></div><div><font size="2"   >}</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >include ("/opt/ganglia-core-3.6.0/etc/conf.d/*.conf")</font></div><p></p></pre></div><div><br></div><div>关于主机 TN的代码如下 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >gmond.c</font></div><div><font size="2"   >print_host_start( apr_socket_t *client, Ganglia_host *hostinfo)</font></div><div><font size="2"   >{</font></div><div><font size="2"   >&nbsp; apr_size_t len;</font></div><div><font size="2"   >&nbsp; char hostxml[1024]; /* for &lt;HOST&gt;&lt;/HOST&gt; */</font></div><div><font size="2"   >&nbsp; apr_time_t now = apr_time_now();</font></div><div><font size="2"   >&nbsp; int tn = (now - hostinfo-&gt;last_heard_from) / APR_USEC_PER_SEC;</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; len = apr_snprintf(hostxml, 1024,&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"&lt;HOST NAME=\"%s\" IP=\"%s\" TAGS=\"%s\" REPORTED=\"%d\" TN=\"%d\" TMAX=\"%d\" DMAX=\"%d\" LOCATION=\"%s\" GMOND_STARTED=\"%d\"&gt;\n",</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hostinfo-&gt;hostname,&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hostinfo-&gt;ip,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tags ? tags : "",</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(int)(hostinfo-&gt;last_heard_from / APR_USEC_PER_SEC),</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tn,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;host_tmax,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;host_dmax,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hostinfo-&gt;location? hostinfo-&gt;location: "unspecified",&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hostinfo-&gt;gmond_started);</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; return socket_send(client, hostxml, &amp;len);</font></div><div><font size="2"   >}</font></div><p></p></pre></div><div><span style="line-height: 28px;"   >这里面引用到的</span><span style="line-height: 28px;"   >APR_USEC_PER_SEC常量 :&nbsp;</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >Apache Portable Runtime</font></div><div><font size="2"   >apr_time.h</font></div><div><div><font size="2"   >00060 /** number of microseconds per second */</font></div><div><font size="2"   >00061 #define APR_USEC_PER_SEC APR_TIME_C(1000000)</font></div></div><p></p></pre></div><div><br></div><div>注意extra_element和extra_data里面包含了组信息, 描述信息, 抬头信息.</div><div><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >&lt;EXTRA_DATA&gt;</font></div><div style="line-height: 28px;"   ><font size="2"   >&lt;EXTRA_ELEMENT NAME="GROUP" VAL="cpu"/&gt;</font></div><div style="line-height: 28px;"   ><font size="2"   >&lt;EXTRA_ELEMENT NAME="DESC" VAL="Percentage of CPU utilization that occurred while executing at the user level"/&gt;</font></div><div style="line-height: 28px;"   ><font size="2"   >&lt;EXTRA_ELEMENT NAME="TITLE" VAL="CPU User"/&gt;</font></div><div style="line-height: 28px;"   ><font size="2"   >&lt;/EXTRA_DATA&gt;</font></div><p></p></pre></div></div><div style="line-height: 28px;"   >使用<span style="line-height: 28px;"   >allow_extra_data attribute可以关闭</span><span style="line-height: 28px;"   >EXTRA_ELEMENT</span><span style="line-height: 28px;"   >&nbsp;和&nbsp;</span><span style="line-height: 28px;"   >EXTRA_DATA</span><span style="line-height: 28px;"   >&nbsp;的输出.</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >man gmond.conf</font></div><div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;The allow_extra_data attribute is a boolean. &nbsp;When false, gmond will not send out the EXTRA_ELEMENT and</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;EXTRA_DATA parts of the XML. &nbsp;This might be useful if you are using your own frontend to the metric data and</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;will like to save some bandwith.</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;The host_dmax value is an integer with units in seconds. &nbsp;When set to zero (0), gmond will never delete a host</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;from its list even when a remote host has stopped reporting. &nbsp;If host_dmax is set to a positive number then</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;gmond will flush a host after it has not heard from it for host_dmax seconds. &nbsp;By the way, dmax means "delete</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;max".</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;The host_tmax value is an integer with units in seconds. This value represents the maximum amount of time that</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;gmond should wait between updates from a host. As messages may get lost in the network, gmond will consider the</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;host as being down if it has not received any messages from it after 4 times this value. For example, if</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;host_tmax is set to 20, the host will appear as down after 80 seconds with no messages from it. By the way,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;tmax means "timeout max".</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;The cleanup_threshold is the minimum amount of time before gmond will cleanup any hosts or metrics where tn &gt;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;dmax a.k.a. expired data.</font></div></div><p></p></pre></div><div><br></div><div>[参考]</div><div>1. gmond.c</div><div>2. man gmond.conf</div><div>3. man gmetric</div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="gmonds XML introduction - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>