<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL ssl ciphers performance compare</h2>
	<h5 id="">2013-05-22 21:52:51&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020134229431304/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>上一篇BLOG介绍了PostgreSQL使用ssl加密客户端和服务端的数据传输.</div><div>查看openssl支持哪些ciphers :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >pg93@db-172-16-3-33-&gt; openssl ciphers</font></div><div><font size="2"   >DHE-RSA-AES256-SHA:DHE-DSS-AES256-SHA:AES256-SHA:KRB5-DES-CBC3-MD5:KRB5-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:EDH-DSS-DES-CBC3-SHA:DES-CBC3-SHA:DES-CBC3-MD5:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA:AES128-SHA:RC2-CBC-MD5:KRB5-RC4-MD5:KRB5-RC4-SHA:RC4-SHA:RC4-MD5:RC4-MD5:KRB5-DES-CBC-MD5:KRB5-DES-CBC-SHA:EDH-RSA-DES-CBC-SHA:EDH-DSS-DES-CBC-SHA:DES-CBC-SHA:DES-CBC-MD5:EXP-KRB5-RC2-CBC-MD5:EXP-KRB5-DES-CBC-MD5:EXP-KRB5-RC2-CBC-SHA:EXP-KRB5-DES-CBC-SHA:EXP-EDH-RSA-DES-CBC-SHA:EXP-EDH-DSS-DES-CBC-SHA:EXP-DES-CBC-SHA:EXP-RC2-CBC-MD5:EXP-RC2-CBC-MD5:EXP-KRB5-RC4-MD5:EXP-KRB5-RC4-SHA:EXP-RC4-MD5:EXP-RC4-MD5</font></div><p></p></pre></div><div><br></div><div>本文主要测试几个cipher的性能.</div><div>首先是openssl的speed测试结果如下 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >pg93@db-172-16-3-33-&gt; openssl speed</font></div><div><font size="2"   >Doing md2 for 3s on 16 size blocks: 479806 md2's in 3.00s</font></div><div><font size="2"   >Doing md2 for 3s on 64 size blocks: 248817 md2's in 3.00s</font></div><div><font size="2"   >Doing md2 for 3s on 256 size blocks: 85124 md2's in 3.00s</font></div><div><font size="2"   >Doing md2 for 3s on 1024 size blocks: 23434 md2's in 3.00s</font></div><div><font size="2"   >Doing md2 for 3s on 8192 size blocks: 3017 md2's in 3.00s</font></div><div><font size="2"   >Doing md4 for 3s on 16 size blocks: 8022778 md4's in 3.00s</font></div><div><font size="2"   >Doing md4 for 3s on 64 size blocks: 6670890 md4's in 3.00s</font></div><div><font size="2"   >Doing md4 for 3s on 256 size blocks: 4438992 md4's in 3.00s</font></div><div><font size="2"   >Doing md4 for 3s on 1024 size blocks: 1872622 md4's in 3.00s</font></div><div><font size="2"   >Doing md4 for 3s on 8192 size blocks: 296091 md4's in 3.00s</font></div><div><font size="2"   >Doing md5 for 3s on 16 size blocks: 6421765 md5's in 3.00s</font></div><div><font size="2"   >Doing md5 for 3s on 64 size blocks: 5081238 md5's in 3.00s</font></div><div><font size="2"   >Doing md5 for 3s on 256 size blocks: 3079671 md5's in 3.00s</font></div><div><font size="2"   >Doing md5 for 3s on 1024 size blocks: 1214852 md5's in 3.00s</font></div><div><font size="2"   >Doing md5 for 3s on 8192 size blocks: 180510 md5's in 3.00s</font></div><div><font size="2"   >Doing hmac(md5) for 3s on 16 size blocks: 7510596 hmac(md5)'s in 3.00s</font></div><div><font size="2"   >Doing hmac(md5) for 3s on 64 size blocks: 5770088 hmac(md5)'s in 3.01s</font></div><div><font size="2"   >Doing hmac(md5) for 3s on 256 size blocks: 3326348 hmac(md5)'s in 3.00s</font></div><div><font size="2"   >Doing hmac(md5) for 3s on 1024 size blocks: 1232492 hmac(md5)'s in 3.00s</font></div><div><font size="2"   >Doing hmac(md5) for 3s on 8192 size blocks: 180013 hmac(md5)'s in 3.00s</font></div><div><font size="2"   >Doing sha1 for 3s on 16 size blocks: 6738377 sha1's in 3.00s</font></div><div><font size="2"   >Doing sha1 for 3s on 64 size blocks: 4877440 sha1's in 3.00s</font></div><div><font size="2"   >Doing sha1 for 3s on 256 size blocks: 2841673 sha1's in 3.00s</font></div><div><font size="2"   >Doing sha1 for 3s on 1024 size blocks: 1037506 sha1's in 3.00s</font></div><div><font size="2"   >Doing sha1 for 3s on 8192 size blocks: 149783 sha1's in 3.00s</font></div><div><font size="2"   >Doing sha256 for 3s on 16 size blocks: 5269102 sha256's in 3.00s</font></div><div><font size="2"   >Doing sha256 for 3s on 64 size blocks: 3170549 sha256's in 3.00s</font></div><div><font size="2"   >Doing sha256 for 3s on 256 size blocks: 1455054 sha256's in 3.00s</font></div><div><font size="2"   >Doing sha256 for 3s on 1024 size blocks: 461517 sha256's in 3.00s</font></div><div><font size="2"   >Doing sha256 for 3s on 8192 size blocks: 62664 sha256's in 3.00s</font></div><div><font size="2"   >Doing sha512 for 3s on 16 size blocks: 3701251 sha512's in 3.00s</font></div><div><font size="2"   >Doing sha512 for 3s on 64 size blocks: 3736901 sha512's in 3.00s</font></div><div><font size="2"   >Doing sha512 for 3s on 256 size blocks: 1721261 sha512's in 3.00s</font></div><div><font size="2"   >Doing sha512 for 3s on 1024 size blocks: 659906 sha512's in 3.00s</font></div><div><font size="2"   >Doing sha512 for 3s on 8192 size blocks: 97821 sha512's in 3.01s</font></div><div><font size="2"   >Doing rmd160 for 3s on 16 size blocks: 4712557 rmd160's in 3.00s</font></div><div><font size="2"   >Doing rmd160 for 3s on 64 size blocks: 3124213 rmd160's in 3.00s</font></div><div><font size="2"   >Doing rmd160 for 3s on 256 size blocks: 1557365 rmd160's in 3.00s</font></div><div><font size="2"   >Doing rmd160 for 3s on 1024 size blocks: 514426 rmd160's in 3.00s</font></div><div><font size="2"   >Doing rmd160 for 3s on 8192 size blocks: 70999 rmd160's in 3.00s</font></div><div><font size="2"   >Doing rc4 for 3s on 16 size blocks: 36912081 rc4's in 3.00s</font></div><div><font size="2"   >Doing rc4 for 3s on 64 size blocks: 10173699 rc4's in 3.00s</font></div><div><font size="2"   >Doing rc4 for 3s on 256 size blocks: 2590258 rc4's in 3.00s</font></div><div><font size="2"   >Doing rc4 for 3s on 1024 size blocks: 649631 rc4's in 3.00s</font></div><div><font size="2"   >Doing rc4 for 3s on 8192 size blocks: 81440 rc4's in 3.00s</font></div><div><font size="2"   >Doing des cbc for 3s on 16 size blocks: 8996392 des cbc's in 3.00s</font></div><div><font size="2"   >Doing des cbc for 3s on 64 size blocks: 2299443 des cbc's in 3.00s</font></div><div><font size="2"   >Doing des cbc for 3s on 256 size blocks: 576966 des cbc's in 3.00s</font></div><div><font size="2"   >Doing des cbc for 3s on 1024 size blocks: 144407 des cbc's in 3.00s</font></div><div><font size="2"   >Doing des cbc for 3s on 8192 size blocks: 18283 des cbc's in 3.00s</font></div><div><font size="2"   >Doing des ede3 for 3s on 16 size blocks: 3522159 des ede3's in 3.00s</font></div><div><font size="2"   >Doing des ede3 for 3s on 64 size blocks: 897137 des ede3's in 3.00s</font></div><div><font size="2"   >Doing des ede3 for 3s on 256 size blocks: 225932 des ede3's in 3.00s</font></div><div><font size="2"   >Doing des ede3 for 3s on 1024 size blocks: 56582 des ede3's in 3.00s</font></div><div><font size="2"   >Doing des ede3 for 3s on 8192 size blocks: 7077 des ede3's in 3.00s</font></div><div><font size="2"   >Doing aes-128 cbc for 3s on 16 size blocks: 15616486 aes-128 cbc's in 3.01s</font></div><div><font size="2"   >Doing aes-128 cbc for 3s on 64 size blocks: 4235413 aes-128 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-128 cbc for 3s on 256 size blocks: 1086541 aes-128 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-128 cbc for 3s on 1024 size blocks: 273358 aes-128 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-128 cbc for 3s on 8192 size blocks: 34218 aes-128 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-192 cbc for 3s on 16 size blocks: 13256583 aes-192 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-192 cbc for 3s on 64 size blocks: 3553825 aes-192 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-192 cbc for 3s on 256 size blocks: 908465 aes-192 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-192 cbc for 3s on 1024 size blocks: 227746 aes-192 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-192 cbc for 3s on 8192 size blocks: 28490 aes-192 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-256 cbc for 3s on 16 size blocks: 11483152 aes-256 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-256 cbc for 3s on 64 size blocks: 3060960 aes-256 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-256 cbc for 3s on 256 size blocks: 778693 aes-256 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-256 cbc for 3s on 1024 size blocks: 195729 aes-256 cbc's in 3.01s</font></div><div><font size="2"   >Doing aes-256 cbc for 3s on 8192 size blocks: 24514 aes-256 cbc's in 3.00s</font></div><div><font size="2"   >Doing aes-128 ige for 3s on 16 size blocks: 15576011 aes-128 ige's in 3.00s</font></div><div><font size="2"   >Doing aes-128 ige for 3s on 64 size blocks: 4119671 aes-128 ige's in 3.01s</font></div><div><font size="2"   >Doing aes-128 ige for 3s on 256 size blocks: 1035491 aes-128 ige's in 3.00s</font></div><div><font size="2"   >Doing aes-128 ige for 3s on 1024 size blocks: 260456 aes-128 ige's in 3.00s</font></div><div><font size="2"   >Doing aes-128 ige for 3s on 8192 size blocks: 32541 aes-128 ige's in 3.01s</font></div><div><font size="2"   >Doing aes-192 ige for 3s on 16 size blocks: 13175348 aes-192 ige's in 3.00s</font></div><div><font size="2"   >Doing aes-192 ige for 3s on 64 size blocks: 3456196 aes-192 ige's in 3.00s</font></div><div><font size="2"   >Doing aes-192 ige for 3s on 256 size blocks: 873093 aes-192 ige's in 3.01s</font></div><div><font size="2"   >Doing aes-192 ige for 3s on 1024 size blocks: 218713 aes-192 ige's in 3.00s</font></div><div><font size="2"   >Doing aes-192 ige for 3s on 8192 size blocks: 27313 aes-192 ige's in 3.00s</font></div><div><font size="2"   >Doing aes-256 ige for 3s on 16 size blocks: 11436763 aes-256 ige's in 3.01s</font></div><div><font size="2"   >Doing aes-256 ige for 3s on 64 size blocks: 2986768 aes-256 ige's in 3.00s</font></div><div><font size="2"   >Doing aes-256 ige for 3s on 256 size blocks: 750692 aes-256 ige's in 3.01s</font></div><div><font size="2"   >Doing aes-256 ige for 3s on 1024 size blocks: 149847 aes-256 ige's in 2.39s</font></div><div><font size="2"   >Doing aes-256 ige for 3s on 8192 size blocks: 17205 aes-256 ige's in 2.16s</font></div><div><font size="2"   >Doing rc2 cbc for 3s on 16 size blocks: 3702966 rc2 cbc's in 2.09s</font></div><div><font size="2"   >Doing rc2 cbc for 3s on 64 size blocks: 952118 rc2 cbc's in 2.06s</font></div><div><font size="2"   >Doing rc2 cbc for 3s on 256 size blocks: 293392 rc2 cbc's in 2.62s</font></div><div><font size="2"   >Doing rc2 cbc for 3s on 1024 size blocks: 56146 rc2 cbc's in 1.91s</font></div><div><font size="2"   >Doing rc2 cbc for 3s on 8192 size blocks: 7284 rc2 cbc's in 2.03s</font></div><div><font size="2"   >Doing blowfish cbc for 3s on 16 size blocks: 11804774 blowfish cbc's in 2.16s</font></div><div><font size="2"   >Doing blowfish cbc for 3s on 64 size blocks: 3157527 blowfish cbc's in 2.22s</font></div><div><font size="2"   >Doing blowfish cbc for 3s on 256 size blocks: 1047711 blowfish cbc's in 2.69s</font></div><div><font size="2"   >Doing blowfish cbc for 3s on 1024 size blocks: 240092 blowfish cbc's in 2.47s</font></div><div><font size="2"   >Doing blowfish cbc for 3s on 8192 size blocks: 24770 blowfish cbc's in 2.06s</font></div><div><font size="2"   >Doing cast cbc for 3s on 16 size blocks: 9629452 cast cbc's in 2.06s</font></div><div><font size="2"   >Doing cast cbc for 3s on 64 size blocks: 2581362 cast cbc's in 2.07s</font></div><div><font size="2"   >Doing cast cbc for 3s on 256 size blocks: 771713 cast cbc's in 2.45s</font></div><div><font size="2"   >Doing cast cbc for 3s on 1024 size blocks: 219380 cast cbc's in 2.80s</font></div><div><font size="2"   >Doing cast cbc for 3s on 8192 size blocks: 29731 cast cbc's in 3.01s</font></div><div><font size="2"   >Doing 512 bit private rsa's for 10s: 85584 512 bit private RSA's in 10.01s</font></div><div><font size="2"   >Doing 512 bit public rsa's for 10s: 922993 512 bit public RSA's in 10.01s</font></div><div><font size="2"   >Doing 1024 bit private rsa's for 10s: 17824 1024 bit private RSA's in 10.01s</font></div><div><font size="2"   >Doing 1024 bit public rsa's for 10s: 325046 1024 bit public RSA's in 10.01s</font></div><div><font size="2"   >Doing 2048 bit private rsa's for 10s: 2894 2048 bit private RSA's in 10.01s</font></div><div><font size="2"   >Doing 2048 bit public rsa's for 10s: 96519 2048 bit public RSA's in 10.01s</font></div><div><font size="2"   >Doing 4096 bit private rsa's for 10s: 413 4096 bit private RSA's in 10.02s</font></div><div><font size="2"   >Doing 4096 bit public rsa's for 10s: 26023 4096 bit public RSA's in 10.01s</font></div><div><font size="2"   >Doing 512 bit sign dsa's for 10s: 91259 512 bit DSA signs in 10.01s</font></div><div><font size="2"   >Doing 512 bit verify dsa's for 10s: 87942 512 bit DSA verify in 10.00s</font></div><div><font size="2"   >Doing 1024 bit sign dsa's for 10s: 19801 1024 bit DSA signs in 10.00s</font></div><div><font size="2"   >Doing 1024 bit verify dsa's for 10s: 16908 1024 bit DSA verify in 10.00s</font></div><div><font size="2"   >Doing 2048 bit sign dsa's for 10s: 10043 2048 bit DSA signs in 10.00s</font></div><div><font size="2"   >Doing 2048 bit verify dsa's for 10s: 8468 2048 bit DSA verify in 10.01s</font></div><div><font size="2"   >OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008</font></div><div><font size="2"   >built on: Mon Mar &nbsp;4 16:16:11 EST 2013</font></div><div><font size="2"   >options:bn(64,64) md2(int) rc4(ptr,int) des(idx,cisc,16,int) aes(partial) blowfish(ptr2)&nbsp;</font></div><div><font size="2"   >compiler: gcc -fPIC -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -DKRB5_MIT -I/usr/kerberos/include -DL_ENDIAN -DTERMIO -Wall -DMD32_REG_T=int -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -Wa,--noexecstack -DOPENSSL_USE_NEW_FUNCTIONS -fno-strict-aliasing -DOPENSSL_BN_ASM_MONT -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM</font></div><div><font size="2"   >available timing options: TIMES TIMEB HZ=100 [sysconf value]</font></div><div><font size="2"   >timing function used: times</font></div><div><font size="2"   >The 'numbers' are in 1000s of bytes per second processed.</font></div><div><font size="2"   >type &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 16 bytes &nbsp; &nbsp; 64 bytes &nbsp; &nbsp;256 bytes &nbsp; 1024 bytes &nbsp; 8192 bytes</font></div><div><font size="2"   >md2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2558.97k &nbsp; &nbsp; 5308.10k &nbsp; &nbsp; 7263.91k &nbsp; &nbsp; 7998.81k &nbsp; &nbsp; 8238.42k</font></div><div><font size="2"   >mdc2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00&nbsp;</font></div><div><font size="2"   >md4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;42788.15k &nbsp; 142312.32k &nbsp; 378793.98k &nbsp; 639188.31k &nbsp; 808525.82k</font></div><div><font size="2"   >md5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;34249.41k &nbsp; 108399.74k &nbsp; 262798.59k &nbsp; 414669.48k &nbsp; 492912.64k</font></div><div><font size="2"   >hmac(md5) &nbsp; &nbsp; &nbsp; &nbsp;40056.51k &nbsp; 122686.26k &nbsp; 283848.36k &nbsp; 420690.60k &nbsp; 491555.50k</font></div><div><font size="2"   >sha1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 35938.01k &nbsp; 104052.05k &nbsp; 242489.43k &nbsp; 354135.38k &nbsp; 409007.45k</font></div><div><font size="2"   >rmd160 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 25133.64k &nbsp; &nbsp;66649.88k &nbsp; 132895.15k &nbsp; 175590.74k &nbsp; 193874.60k</font></div><div><font size="2"   >rc4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 196864.43k &nbsp; 217038.91k &nbsp; 221035.35k &nbsp; 221740.71k &nbsp; 222385.49k</font></div><div><font size="2"   >des cbc &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;47980.76k &nbsp; &nbsp;49054.78k &nbsp; &nbsp;49234.43k &nbsp; &nbsp;49290.92k &nbsp; &nbsp;49924.78k</font></div><div><font size="2"   >des ede3 &nbsp; &nbsp; &nbsp; &nbsp; 18784.85k &nbsp; &nbsp;19138.92k &nbsp; &nbsp;19279.53k &nbsp; &nbsp;19313.32k &nbsp; &nbsp;19324.93k</font></div><div><font size="2"   >idea cbc &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00&nbsp;</font></div><div><font size="2"   >seed cbc &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00&nbsp;</font></div><div><font size="2"   >rc2 cbc &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;28348.07k &nbsp; &nbsp;29580.37k &nbsp; &nbsp;28667.31k &nbsp; &nbsp;30101.31k &nbsp; &nbsp;29394.35k</font></div><div><font size="2"   >rc5-32/12 cbc &nbsp; &nbsp; &nbsp; &nbsp;0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00&nbsp;</font></div><div><font size="2"   >blowfish cbc &nbsp; &nbsp; 87442.77k &nbsp; &nbsp;91027.81k &nbsp; &nbsp;99707.81k &nbsp; &nbsp;99536.12k &nbsp; &nbsp;98502.83k</font></div><div><font size="2"   >cast cbc &nbsp; &nbsp; &nbsp; &nbsp; 74791.86k &nbsp; &nbsp;79810.23k &nbsp; &nbsp;80636.13k &nbsp; &nbsp;80230.40k &nbsp; &nbsp;80915.73k</font></div><div><font size="2"   >aes-128 cbc &nbsp; &nbsp; &nbsp;83011.22k &nbsp; &nbsp;90355.48k &nbsp; &nbsp;92718.17k &nbsp; &nbsp;93306.20k &nbsp; &nbsp;93437.95k</font></div><div><font size="2"   >aes-192 cbc &nbsp; &nbsp; &nbsp;70701.78k &nbsp; &nbsp;75814.93k &nbsp; &nbsp;77522.35k &nbsp; &nbsp;77737.30k &nbsp; &nbsp;77796.69k</font></div><div><font size="2"   >aes-256 cbc &nbsp; &nbsp; &nbsp;61243.48k &nbsp; &nbsp;65300.48k &nbsp; &nbsp;66448.47k &nbsp; &nbsp;66586.88k &nbsp; &nbsp;66939.56k</font></div><div><font size="2"   >camellia-128 cbc &nbsp; &nbsp; &nbsp; &nbsp;0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00&nbsp;</font></div><div><font size="2"   >camellia-192 cbc &nbsp; &nbsp; &nbsp; &nbsp;0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00&nbsp;</font></div><div><font size="2"   >camellia-256 cbc &nbsp; &nbsp; &nbsp; &nbsp;0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00 &nbsp; &nbsp; &nbsp; &nbsp; 0.00&nbsp;</font></div><div><font size="2"   >sha256 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 28101.88k &nbsp; &nbsp;67638.38k &nbsp; 124164.61k &nbsp; 157531.14k &nbsp; 171114.50k</font></div><div><font size="2"   >sha512 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 19740.01k &nbsp; &nbsp;79720.55k &nbsp; 146880.94k &nbsp; 225247.91k &nbsp; 266229.11k</font></div><div><font size="2"   >aes-128 ige &nbsp; &nbsp; &nbsp;83072.06k &nbsp; &nbsp;87594.33k &nbsp; &nbsp;88361.90k &nbsp; &nbsp;88902.31k &nbsp; &nbsp;88563.41k</font></div><div><font size="2"   >aes-192 ige &nbsp; &nbsp; &nbsp;70268.52k &nbsp; &nbsp;73732.18k &nbsp; &nbsp;74256.41k &nbsp; &nbsp;74654.04k &nbsp; &nbsp;74582.70k</font></div><div><font size="2"   >aes-256 ige &nbsp; &nbsp; &nbsp;60793.42k &nbsp; &nbsp;63717.72k &nbsp; &nbsp;63846.23k &nbsp; &nbsp;64202.23k &nbsp; &nbsp;65251.56k</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sign &nbsp; &nbsp;verify &nbsp; &nbsp;sign/s verify/s</font></div><div><font size="2"   >rsa &nbsp;512 bits 0.000117s 0.000011s &nbsp; 8549.9 &nbsp;92207.1</font></div><div><font size="2"   >rsa 1024 bits 0.000562s 0.000031s &nbsp; 1780.6 &nbsp;32472.1</font></div><div><font size="2"   >rsa 2048 bits 0.003459s 0.000104s &nbsp; &nbsp;289.1 &nbsp; 9642.3</font></div><div><font size="2"   >rsa 4096 bits 0.024262s 0.000385s &nbsp; &nbsp; 41.2 &nbsp; 2599.7</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sign &nbsp; &nbsp;verify &nbsp; &nbsp;sign/s verify/s</font></div><div><font size="2"   >dsa &nbsp;512 bits 0.000110s 0.000114s &nbsp; 9116.8 &nbsp; 8794.2</font></div><div><font size="2"   >dsa 1024 bits 0.000505s 0.000591s &nbsp; 1980.1 &nbsp; 1690.8</font></div><div><font size="2"   >dsa 2048 bits 0.000996s 0.001182s &nbsp; 1004.3 &nbsp; &nbsp;846.0</font></div><p></p></pre></div><div><br></div><div>数据库测试环境 :&nbsp;</div><div>PostgreSQL 9.3 beta1</div><div>测试表</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=# create table test(id serial primary key, info text, crt_time timestamp);</font></div><div><font size="2"   >CREATE TABLE</font></div><p></p></pre></div><div>测试数据</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=# insert into test (info,crt_time) select md5(random()::text),clock_timestamp() from generate_series(1,1000000);</font></div><div><font size="2"   >INSERT 0 1000000</font></div><p></p></pre></div><div>测试脚本</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >pg92@db-172-16-3-39-&gt; cat sel.sql&nbsp;</font></div><div><font size="2"   >\setrandom id 1 1000000</font></div><div><font size="2"   >select * from test where id=:id;</font></div><p></p></pre></div><div>1. hostnossl测试结果</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >pg93@db-172-16-3-33-&gt; vi pg_hba.conf</font></div><div><div><font size="2"   >#hostssl all all 0.0.0.0/0 md5</font></div><div><font size="2"   >hostnossl all all 0.0.0.0/0 md5</font></div></div><div><font size="2"   >pg_ctl restart -m fast</font></div><p></p></pre></div><div><br></div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >pg92@db-172-16-3-39-&gt; psql -h 172.16.3.33 -p 1999 -U postgres digoal</font></div><div><font size="2"   >psql (9.2beta1, server 9.3devel)</font></div><div><font size="2"   >WARNING: psql version 9.2, server version 9.3.</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Some psql features might not work.</font></div><div><font size="2"   >Type "help" for help.</font></div><div><font size="2"   >digoal=# \q</font></div></div><div><div><font size="2"   >pg92@db-172-16-3-39-&gt; pgbench -M prepared -n -f ./sel.sql -h 172.16.3.33 -p 1999 -U postgres -T 60 -c 16 -j 4 digoal</font></div><div><font size="2"   >transaction type: Custom query</font></div><div><font size="2"   >scaling factor: 1</font></div><div><font size="2"   >query mode: prepared</font></div><div><font size="2"   >number of clients: 16</font></div><div><font size="2"   >number of threads: 4</font></div><div><font size="2"   >duration: 60 s</font></div><div><font size="2"   >number of transactions actually processed: 3798056</font></div><div><font size="2"   >tps = 63292.379368 (including connections establishing)</font></div><div><font size="2"   >tps = 63337.244048 (excluding connections establishing)</font></div></div><p></p></pre></div><div><br></div><div>2. hostssl 测试,&nbsp;</div><div>cipher=测试结果 :&nbsp;</div><div>修改postgresql.conf ,&nbsp;</div><div><pre class="prettyprint"   ><p><font size="2"   >ssl_ciphers =&nbsp;'RC4-SHA:DEFAULT:!LOW:!EXP:!MD5:@STRENGTH'&nbsp;</font></p></pre></div><div>修改pg_hba.conf</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >hostssl all all 0.0.0.0/0 md5</font></div><div><font size="2"   >#hostnossl all all 0.0.0.0/0 md5</font></div><p></p></pre></div><div>重启数据库.&nbsp;</div><div>测试结果 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >pg92@db-172-16-3-39-&gt; psql -h 172.16.3.33 -p 1999 -U postgres digoal</font></div><div><font size="2"   >psql (9.2beta1, server 9.3devel)</font></div><div><font size="2"   >WARNING: psql version 9.2, server version 9.3.</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Some psql features might not work.</font></div><div><font size="2"   >SSL connection (cipher: RC4-SHA, bits: 128)</font></div><div><font size="2"   >Type "help" for help.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >digoal=# \q</font></div><div><font size="2"   >pg92@db-172-16-3-39-&gt; pgbench -M prepared -n -f ./sel.sql -h 172.16.3.33 -p 1999 -U postgres -T 60 -c 16 -j 4 digoal</font></div><div><font size="2"   >transaction type: Custom query</font></div><div><font size="2"   >scaling factor: 1</font></div><div><font size="2"   >query mode: prepared</font></div><div><font size="2"   >number of clients: 16</font></div><div><font size="2"   >number of threads: 4</font></div><div><font size="2"   >duration: 60 s</font></div><div><font size="2"   >number of transactions actually processed: 3354725</font></div><div><font size="2"   >tps = 55911.266097 (including connections establishing)</font></div><div><font size="2"   >tps = 55940.407826 (excluding connections establishing)</font></div><p></p></pre></div><div><br></div><div><span style="line-height: 22px;"   >cipher=</span>AES128-SHA<span style="line-height: 22px;"   >测试结果 :&nbsp;</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >pg92@db-172-16-3-39-&gt; psql -h 172.16.3.33 -p 1999 -U postgres digoal</font></div><div><font size="2"   >psql (9.2beta1, server 9.3devel)</font></div><div><font size="2"   >WARNING: psql version 9.2, server version 9.3.</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Some psql features might not work.</font></div><div><font size="2"   >SSL connection (cipher: AES128-SHA, bits: 128)</font></div><div><font size="2"   >Type "help" for help.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >digoal=# \q</font></div><div><font size="2"   >pg92@db-172-16-3-39-&gt; pgbench -M prepared -n -f ./sel.sql -h 172.16.3.33 -p 1999 -U postgres -T 60 -c 16 -j 4 digoal</font></div><div><font size="2"   >transaction type: Custom query</font></div><div><font size="2"   >scaling factor: 1</font></div><div><font size="2"   >query mode: prepared</font></div><div><font size="2"   >number of clients: 16</font></div><div><font size="2"   >number of threads: 4</font></div><div><font size="2"   >duration: 60 s</font></div><div><font size="2"   >number of transactions actually processed: 2821590</font></div><div><font size="2"   >tps = 47025.481115 (including connections establishing)</font></div><div><font size="2"   >tps = 47050.672479 (excluding connections establishing)</font></div><p></p></pre></div><div><span style="line-height: 22px;"   ><br></span></div><div><span style="line-height: 22px;"   >cipher=</span>DHE-RSA-AES256-SHA<span style="line-height: 22px;"   >测试结果 :&nbsp;</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >pg92@db-172-16-3-39-&gt; psql -h 172.16.3.33 -p 1999 -U postgres digoal</font></div><div><font size="2"   >psql (9.2beta1, server 9.3devel)</font></div><div><font size="2"   >WARNING: psql version 9.2, server version 9.3.</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Some psql features might not work.</font></div><div><font size="2"   >SSL connection (cipher: DHE-RSA-AES256-SHA, bits: 256)</font></div><div><font size="2"   >Type "help" for help.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >digoal=# \q</font></div><div><font size="2"   >pg92@db-172-16-3-39-&gt; pgbench -M prepared -n -f ./sel.sql -h 172.16.3.33 -p 1999 -U postgres -T 60 -c 16 -j 4 digoal</font></div><div><font size="2"   >transaction type: Custom query</font></div><div><font size="2"   >scaling factor: 1</font></div><div><font size="2"   >query mode: prepared</font></div><div><font size="2"   >number of clients: 16</font></div><div><font size="2"   >number of threads: 4</font></div><div><font size="2"   >duration: 60 s</font></div><div><font size="2"   >number of transactions actually processed: 2784774</font></div><div><font size="2"   >tps = 46411.467433 (including connections establishing)</font></div><div><font size="2"   >tps = 46465.745880 (excluding connections establishing)</font></div><p></p></pre></div><div>从测试数据来看, 使用ssl后性能下降非常明显.</div><div><br></div>【参考】<wbr><div>1.&nbsp;<a style="line-height: 22px;" href="http://blog.163.com/digoal@126/blog/static/163877040201342233131835/"   >http://blog.163.com/digoal@126/blog/static/163877040201342233131835/</a></div></div>
	</div>
	<h3>评论</h3>
	<div class="" id="" style="padding:0 20px;">
			<div id="">
				<h5 id="">瑞雪 - 2013-06-02 10:24:04</h5>
				<div>
<DIV class="cnt" ><SPAN class="fc07 ztag"  ></SPAN><SPAN class="fc05 pre ztag"  >
<P>顺祝好朋友周末 快快乐乐 开开心心<IMG src="http://b.bst.126.net/common/portrait/face/preview/face50.gif"  ></P></SPAN></DIV></div>
			</div>
	</div>
</div>
</body>
</html>