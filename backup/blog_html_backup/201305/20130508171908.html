<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL 9.3 Make the streaming replication protocol messages architecture-independent</h2>
	<h5 id="">2013-05-08 17:19:08&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020134851822137/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><pre class="prettyprint"   ><p></p><div><font size="2"   >Allow tools like pg_receivexlog to run on computers with different architectures (Heikki Linnakangas)</font></div><div><font size="2"   >WAL files can still only be replayed on servers with the same architecture as the primary; but they can now be transmitted to and stored on machines of any architecture, since the streaming replication protocol is now machine-independent.</font></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >Make the streaming replication protocol messages architecture-independent.</font></div><div><font size="2"   >We used to send structs wrapped in CopyData messages, which works as long as</font></div><div><font size="2"   >the client and server agree on things like endianess, timestamp format and</font></div><div><font size="2"   >alignment. That's good enough for running a standby server, which has to run</font></div><div><font size="2"   >on the same platform anyway, but it's useful for tools like pg_receivexlog</font></div><div><font size="2"   >to work across platforms.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >This breaks protocol compatibility of streaming replication, but we never</font></div><div><font size="2"   >promised that to be compatible across versions, anyway.</font></div></div></pre></div><div>PostgreSQL 9.3 对流复制协议的改进之一, 跨平台兼容.</div><div>例如你的数据库跑在x86主机上, 同时你可以在IBM小型机上使用同一版本的数据库软件(<span style="line-height: 22px;"   >例如pg_receivexlog工具.</span><span style="line-height: 22px;"   >)通过流复制协议接收x86主机上的xlog文件.</span></div><div><br></div><div>[参考]</div><div>1.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="http://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=add6c3179a4d4fa3e62dd3e86a00f23303336bac"   >http://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=add6c3179a4d4fa3e62dd3e86a00f23303336bac</a></div><div>2.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="http://www.postgresql.org/docs/devel/static/app-pgreceivexlog.html"   >http://www.postgresql.org/docs/devel/static/app-pgreceivexlog.html</a></div><wbr></div>
	</div>
</div>
</body>
</html>