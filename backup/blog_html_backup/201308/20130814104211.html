<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL 9.4 pending patch : UNNEST with multiple args, and TABLE with multiple funcs</h2>
	<h5 id="">2013-08-14 10:42:11&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201371492336760/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>2015-02-09更新</div><div>PostgreSQL 9.4已经支持unnest(array, array, ....)多参数. 不需要使用<span style="line-height: 28px; font-size: 1em; background-color: rgb(247, 247, 247);"   >WITH ORDINALITY</span></div><div><a target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/9.4/static/functions-array.html"   >http://www.postgresql.org/docs/9.4/static/functions-array.html</a></div><div><table border="1"   style="margin: 2ex 0px 2ex 2ex; -webkit-box-shadow: rgb(223, 223, 223) 3px 3px 5px; box-shadow: rgb(223, 223, 223) 3px 3px 5px; border-spacing: 0px; border-collapse: collapse; border: 2px solid rgb(167, 198, 223); color: rgb(0, 0, 0); font-family: verdana, sans-serif; font-size: 12.1599998474121px; line-height: normal; background-color: rgb(224, 236, 239);"   ><tbody><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt><code style="font-size: 1em;"   >unnest</code>(<tt style="font-size: 1em;"   >anyarray</tt>)</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>setof anyelement</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >expand an array to a set of rows</td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>unnest(ARRAY[1,2])</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><pre style="font-size: 1em; -webkit-box-shadow: rgb(223, 223, 223) 3px 3px 5px; box-shadow: rgb(223, 223, 223) 3px 3px 5px; border: 1px solid rgb(207, 207, 207); padding: 2ex; margin-top: 2ex; margin-bottom: 2ex; margin-left: 2ex; overflow: auto; border-radius: 8px; background-color: rgb(247, 247, 247);"   >1
2
</pre>(2 rows)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt><code style="font-size: 1em;"   >unnest</code>(<tt style="font-size: 1em;"   >anyarray</tt>,&nbsp;<tt style="font-size: 1em;"   >anyarray</tt>&nbsp;[, ...])</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>setof anyelement, anyelement [, ...]</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >expand multiple arrays (possibly of different types) to a set of rows. This is only allowed in the FROM clause; see&nbsp;<a style="color: rgb(0, 78, 102);" rel="nofollow" href="http://www.postgresql.org/docs/9.4/static/queries-table-expressions.html#QUERIES-TABLEFUNCTIONS"   >Section 7.2.1.4</a></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>unnest(ARRAY[1,2],ARRAY['foo','bar','baz'])</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><pre style="font-size: 1em; -webkit-box-shadow: rgb(223, 223, 223) 3px 3px 5px; box-shadow: rgb(223, 223, 223) 3px 3px 5px; border: 1px solid rgb(207, 207, 207); padding: 2ex; margin-top: 2ex; margin-bottom: 2ex; margin-left: 2ex; overflow: auto; border-radius: 8px; background-color: rgb(247, 247, 247);"   >1    foo
2    bar
NULL baz
</pre>(3 rows)</td></tr></table></div><div>使用WITH ORDINALITY会新增一个类似行号的值, 即一一匹配的行号.</div><div><br></div><div>PostgreSQL 的一个补丁, 支持多个数组输入, 一对一的输出行列转换后的结果.</div><div><a rel="nofollow" href="http://www.postgresql.org/message-id/flat/48bb41eca62e428687cc9b8241661427@news-out.riddles.org.uk#48bb41eca62e428687cc9b8241661427@news-out.riddles.org.uk"   >http://www.postgresql.org/message-id/flat/48bb41eca62e428687cc9b8241661427@news-out.riddles.org.uk#48bb41eca62e428687cc9b8241661427@news-out.riddles.org.uk</a></div><div>例如pg_stats的most_common_vals和most_common_freqs是两个数组, 在没有这个补丁时, 并排输出需要使用窗口函数进行关联后输出, 或者使用函数来输出.</div><div>例如<a style="line-height: 22px;" href="http://blog.163.com/digoal@126/blog/static/1638770402013710105353862/"   >http://blog.163.com/digoal@126/blog/static/1638770402013710105353862/</a>文中用到的关联.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=# select * from &nbsp;</font></div><div><font size="2"   >(select row_number() over(partition by r) as rn,ele from (select unnest(most_common_elems::text::int[]) ele,2 as r from pg_stats where tablename='test_2' and attname='appid') t) t1</font></div><div><font size="2"   >join</font></div><div><font size="2"   >(select row_number() over(partition by r) as rn,freq from (select unnest(most_common_elem_freqs) freq,2 as r from pg_stats where tablename='test_2' and attname='appid') t) t2</font></div><div><font size="2"   >on (t1.rn=t2.rn) order by t2.freq desc limit 20;</font></div><div><font size="2"   >&nbsp;rn &nbsp;| ele | rn &nbsp;| &nbsp; &nbsp;freq &nbsp; &nbsp;</font></div><div><font size="2"   >-----+-----+-----+------------</font></div><div><font size="2"   >&nbsp; &nbsp;3 | &nbsp; 2 | &nbsp; 3 | &nbsp; 0.803167</font></div><div><font size="2"   >&nbsp; &nbsp;9 | &nbsp; 8 | &nbsp; 9 | &nbsp; 0.802233</font></div><div><font size="2"   >&nbsp; &nbsp;7 | &nbsp; 6 | &nbsp; 7 | &nbsp; 0.802133</font></div><div><font size="2"   >&nbsp; &nbsp;8 | &nbsp; 7 | &nbsp; 8 | &nbsp; 0.802067</font></div><div><font size="2"   >&nbsp; &nbsp;6 | &nbsp; 5 | &nbsp; 6 | &nbsp; 0.801633</font></div><div><font size="2"   >&nbsp; &nbsp;4 | &nbsp; 3 | &nbsp; 4 | &nbsp; 0.801367</font></div><div><font size="2"   >&nbsp; &nbsp;5 | &nbsp; 4 | &nbsp; 5 | &nbsp; &nbsp; 0.8006</font></div><div><font size="2"   >&nbsp; 10 | &nbsp; 9 | &nbsp;10 | &nbsp; 0.799933</font></div><div><font size="2"   >&nbsp; &nbsp;2 | &nbsp; 1 | &nbsp; 2 | &nbsp; 0.798167</font></div><div><font size="2"   >&nbsp; &nbsp;1 | &nbsp; 0 | &nbsp; 1 | &nbsp; &nbsp; 0.5835</font></div><div><font size="2"   >&nbsp; 11 | &nbsp;10 | &nbsp;11 | &nbsp; &nbsp; 0.5822</font></div><div><font size="2"   >&nbsp; 92 | &nbsp;91 | &nbsp;92 | 0.00263333</font></div><div><font size="2"   >&nbsp;320 | 319 | 320 | 0.00256667</font></div><div><font size="2"   >&nbsp; 15 | &nbsp;14 | &nbsp;15 | 0.00246667</font></div><div><font size="2"   >&nbsp;769 | 768 | 769 | 0.00243333</font></div><div><font size="2"   >&nbsp;961 | 960 | 961 | 0.00243333</font></div><div><font size="2"   >&nbsp; 42 | &nbsp;41 | &nbsp;42 | 0.00236667</font></div><div><font size="2"   >&nbsp;503 | 502 | 503 | 0.00236667</font></div><div><font size="2"   >&nbsp;651 | 650 | 651 | 0.00236667</font></div><div><font size="2"   >&nbsp;664 | 663 | 664 | 0.00236667</font></div><div><font size="2"   >(20 rows)</font></div><p></p></pre></div><div>使用本补丁后, 这个SQL可以改成</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=# select u.* from pg_stats t,unnest(most_common_elems::text::int[],most_common_elem_freqs) WITH ORDINALITY as u(a,b,r) where t.tablename='test_2' and t.attname='appid' and u.a is not null order by u.b desc limit 20;</font></div><div><font size="2"   >&nbsp; a &nbsp;| &nbsp; &nbsp; b &nbsp; &nbsp; &nbsp;| &nbsp;r &nbsp;</font></div><div><font size="2"   >-----+------------+-----</font></div><div><font size="2"   >&nbsp; &nbsp;2 | &nbsp; 0.803167 | &nbsp; 3</font></div><div><font size="2"   >&nbsp; &nbsp;8 | &nbsp; 0.802233 | &nbsp; 9</font></div><div><font size="2"   >&nbsp; &nbsp;6 | &nbsp; 0.802133 | &nbsp; 7</font></div><div><font size="2"   >&nbsp; &nbsp;7 | &nbsp; 0.802067 | &nbsp; 8</font></div><div><font size="2"   >&nbsp; &nbsp;5 | &nbsp; 0.801633 | &nbsp; 6</font></div><div><font size="2"   >&nbsp; &nbsp;3 | &nbsp; 0.801367 | &nbsp; 4</font></div><div><font size="2"   >&nbsp; &nbsp;4 | &nbsp; &nbsp; 0.8006 | &nbsp; 5</font></div><div><font size="2"   >&nbsp; &nbsp;9 | &nbsp; 0.799933 | &nbsp;10</font></div><div><font size="2"   >&nbsp; &nbsp;1 | &nbsp; 0.798167 | &nbsp; 2</font></div><div><font size="2"   >&nbsp; &nbsp;0 | &nbsp; &nbsp; 0.5835 | &nbsp; 1</font></div><div><font size="2"   >&nbsp; 10 | &nbsp; &nbsp; 0.5822 | &nbsp;11</font></div><div><font size="2"   >&nbsp; 91 | 0.00263333 | &nbsp;92</font></div><div><font size="2"   >&nbsp;319 | 0.00256667 | 320</font></div><div><font size="2"   >&nbsp; 14 | 0.00246667 | &nbsp;15</font></div><div><font size="2"   >&nbsp;768 | 0.00243333 | 769</font></div><div><font size="2"   >&nbsp;960 | 0.00243333 | 961</font></div><div><font size="2"   >&nbsp; 41 | 0.00236667 | &nbsp;42</font></div><div><font size="2"   >&nbsp;502 | 0.00236667 | 503</font></div><div><font size="2"   >&nbsp;650 | 0.00236667 | 651</font></div><div><font size="2"   >&nbsp;663 | 0.00236667 | 664</font></div><div><font size="2"   >(20 rows)</font></div><p></p></pre></div><div>使用后大大简化了SQL写法.</div><div><br></div><div>补丁安装 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >[root@db-172-16-3-39 soft_bak]# tar -zxvf postgresql-5e3e8e4.tar.gz</font></div><div><div><font size="2"   >[root@db-172-16-3-39 soft_bak]# cd postgresql-<span style="line-height: 22px;"   >5e3e8e4</span></font></div><div><font size="2"   >[root@db-172-16-3-39 postgresql-<span style="line-height: 22px;"   >5e3e8e4</span>]# wget http://www.postgresql.org/message-id/attachment/29844/table-functions.patch</font></div></div><div><div><font size="2"   >[root@db-172-16-3-39 postgresql-<span style="line-height: 22px;"   >5e3e8e4</span>]# patch -p1 &lt; ./table-functions.patch&nbsp;</font></div><div><font size="2"   >patching file src/backend/access/common/tupdesc.c</font></div><div><font size="2"   >patching file src/backend/commands/explain.c</font></div><div><font size="2"   >patching file src/backend/executor/nodeFunctionscan.c</font></div><div><font size="2"   >patching file src/backend/nodes/copyfuncs.c</font></div><div><font size="2"   >patching file src/backend/nodes/equalfuncs.c</font></div><div><font size="2"   >patching file src/backend/nodes/makefuncs.c</font></div><div><font size="2"   >patching file src/backend/nodes/nodeFuncs.c</font></div><div><font size="2"   >patching file src/backend/nodes/outfuncs.c</font></div><div><font size="2"   >patching file src/backend/nodes/readfuncs.c</font></div><div><font size="2"   >patching file src/backend/optimizer/path/allpaths.c</font></div><div><font size="2"   >patching file src/backend/optimizer/path/costsize.c</font></div><div><font size="2"   >patching file src/backend/optimizer/path/pathkeys.c</font></div><div><font size="2"   >patching file src/backend/optimizer/plan/createplan.c</font></div><div><font size="2"   >patching file src/backend/optimizer/plan/initsplan.c</font></div><div><font size="2"   >patching file src/backend/optimizer/plan/planner.c</font></div><div><font size="2"   >patching file src/backend/optimizer/plan/setrefs.c</font></div><div><font size="2"   >patching file src/backend/optimizer/plan/subselect.c</font></div><div><font size="2"   >patching file src/backend/optimizer/prep/prepjointree.c</font></div><div><font size="2"   >patching file src/backend/optimizer/util/clauses.c</font></div><div><font size="2"   >patching file src/backend/optimizer/util/pathnode.c</font></div><div><font size="2"   >patching file src/backend/parser/gram.y</font></div><div><font size="2"   >patching file src/backend/parser/parse_clause.c</font></div><div><font size="2"   >patching file src/backend/parser/parse_relation.c</font></div><div><font size="2"   >patching file src/backend/rewrite/rewriteHandler.c</font></div><div><font size="2"   >patching file src/backend/utils/adt/ruleutils.c</font></div><div><font size="2"   >patching file src/include/access/tupdesc.h</font></div><div><font size="2"   >patching file src/include/nodes/execnodes.h</font></div><div><font size="2"   >patching file src/include/nodes/parsenodes.h</font></div><div><font size="2"   >patching file src/include/nodes/plannodes.h</font></div><div><font size="2"   >patching file src/include/optimizer/pathnode.h</font></div><div><font size="2"   >patching file src/include/optimizer/paths.h</font></div><div><font size="2"   >patching file src/include/parser/parse_relation.h</font></div></div><div><font size="2"   >[root@db-172-16-3-39 postgresql-5e3e8e4]# ./configure --prefix=/home/pg94/pgsql9.4devel --with-pgport=2999 --with-perl --with-tcl --with-python --with-openssl --with-pam --without-ldap --with-libxml --with-libxslt --enable-thread-safety --with-wal-blocksize=16 &amp;&amp; gmake &amp;&amp; gmake install</font></div><div><font size="2"   >[root@db-172-16-3-39 postgresql-5e3e8e4]# cd contrib/</font></div><div><font size="2"   >[root@db-172-16-3-39 contrib]# gmake &amp;&amp; gmake install</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >[root@db-172-16-3-39 postgresql-<span style="line-height: 22px;"   >5e3e8e4</span>]# su - pg94</font></div><div><font size="2"   >pg94@db-172-16-3-39-&gt; initdb -D $PGDATA -E UTF8 --locale=C -W -U postgres</font></div><div><font size="2"   >pg_ctl start</font></div><p></p></pre></div><div>补丁实现了table的多srf函数支持</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=# select * from table(generate_series(1,10),generate_series(2,5));</font></div><div><font size="2"   >&nbsp;?column? | ?column?&nbsp;</font></div><div><font size="2"   >----------+----------</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 1 | &nbsp; &nbsp; &nbsp; &nbsp;2</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 2 | &nbsp; &nbsp; &nbsp; &nbsp;3</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 3 | &nbsp; &nbsp; &nbsp; &nbsp;4</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 4 | &nbsp; &nbsp; &nbsp; &nbsp;5</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 5 | &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 6 | &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 7 | &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 8 | &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 9 | &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp;10 | &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"   >(10 rows)</font></div><p></p></pre></div><div><br></div><div>补丁的实施原理,&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><span style="line-height: 22px;"   ><font size="2"   >unnest(a,b,c)</font></span></div><div><span style="line-height: 22px;"   ><font size="2"   >SQL解析时转换成</font></span></div><div><span style="line-height: 22px;"   ><font size="2"   >TABLE(unnest(a),unnest(b),unnest(c))</font></span></div><p></p></pre></div><div><span style="line-height: 22px;"   >所以这个补丁实际上并不是改了unnest函数, 而是改了sql parser.</span></div><div>因此unnest(anyarray, anyarray,...) 这个函数是不存在的, 也不能写在select clause中.</div><div>所以不能用以下写法</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >digoal=# select unnest(most_common_elems::text::int[],most_common_elem_freqs) from pg_stats t where t.tablename='test_2' and t.attname='appid' limit 20;</font></div><div><font size="2"   >ERROR: &nbsp;function unnest(integer[], real[]) does not exist</font></div><div><font size="2"   >LINE 1: select unnest(most_common_elems::text::int[],most_common_ele...</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^</font></div><div><font size="2"   >HINT: &nbsp;No function matches the given name and argument types. You might need to add explicit type casts.</font></div><p></p></pre></div><div><br></div><div><span style="line-height: 22px;"   >本补丁的详细介绍</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >The spec syntax for table function calls, &lt;table function derived table&gt;</font></div><div><font size="2"   >in &lt;table reference&gt;, looks like TABLE(func(args...)) AS ...</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >This patch implements that, plus an extension: it allows multiple</font></div><div><font size="2"   >functions, TABLE(func1(...), func2(...), func3(...)) [WITH ORDINALITY]</font></div><div><font size="2"   >and defines this as meaning that the functions are to be evaluated in</font></div><div><font size="2"   >parallel.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >This is implemented by changing RangeFunction, function RTEs, and the</font></div><div><font size="2"   >FunctionScan node to take lists of function calls rather than a single</font></div><div><font size="2"   >function. The calling convention for SRFs is completely unchanged; each</font></div><div><font size="2"   >function returns its own rows (or a tuplestore in materialize mode) just</font></div><div><font size="2"   >as before, and FunctionScan combines the results into a single output</font></div><div><font size="2"   >tuple (keeping track of which functions are exhausted in order to</font></div><div><font size="2"   >correctly fill in nulls on a backwards scan).</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Then, a hack in the parser converts unnest(...) appearing as a</font></div><div><font size="2"   >func_table (and only there) into a list of unnest() calls, one for each</font></div><div><font size="2"   >parameter. &nbsp;So</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp;select ... from unnest(a,b,c)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >is converted to</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp;select ... from TABLE(unnest(a),unnest(b),unnest(c))</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >and if unnest appears as part of an existing list inside TABLE(), it's</font></div><div><font size="2"   >expanded to multiple entries there too.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >This parser hackery is of course somewhat ugly. But given the objective</font></div><div><font size="2"   >of implementing the spec's unnest syntax, it seems to be the least ugly</font></div><div><font size="2"   >of the possible approaches. (The hard part of doing it any other way</font></div><div><font size="2"   >would be generating the description of the result type; composite array</font></div><div><font size="2"   >parameters expand into multiple result columns.)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Overall, it's my intention here to remove as many as feasible of the old</font></div><div><font size="2"   >reasons why one might use an SRF in the select list. This should also</font></div><div><font size="2"   >address the points that Josh brought up in discussion of ORDINALITY</font></div><div><font size="2"   >regarding use of SRF-in-select to unnest multiple arrays.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >(As a side issue, this patch also sets up pathkeys for ordinality along</font></div><div><font size="2"   >the lines of a patch I suggested to Greg a while back in response to</font></div><div><font size="2"   >his.)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Current patch status:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >This is a first working cut: no docs, no tests, not enough comments, the</font></div><div><font size="2"   >deparse logic probably needs more work (it deparses correctly but the</font></div><div><font size="2"   >formatting may be suboptimal). However all the functionality is believed</font></div><div><font size="2"   >to be in place.</font></div></pre></div><div><br></div><div>[小结]</div><div>1. 这个补丁比较适合并列数组的查询需求.</div><div>例如本例中用到的pg_stats中的频繁出现的值和频繁出现的值对应的出现频率这2个字段就是一一对应的数组.&nbsp;</div><div><br></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 22px;" rel="nofollow" href="http://www.postgresql.org/message-id/flat/48bb41eca62e428687cc9b8241661427@news-out.riddles.org.uk#48bb41eca62e428687cc9b8241661427@news-out.riddles.org.uk"   >http://www.postgresql.org/message-id/flat/48bb41eca62e428687cc9b8241661427@news-out.riddles.org.uk#48bb41eca62e428687cc9b8241661427@news-out.riddles.org.uk</a></div><div>2.&nbsp;<a style="line-height: 22px;" href="http://blog.163.com/digoal@126/blog/static/16387704020136301599959/"   >http://blog.163.com/digoal@126/blog/static/16387704020136301599959/</a></div><div>3. SRFs(setof return functions) 返回多行的函数.</div><div>4.&nbsp;<a style="line-height: 22px;" href="http://blog.163.com/digoal@126/blog/static/1638770402013710105353862/"   >http://blog.163.com/digoal@126/blog/static/1638770402013710105353862/</a></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="PostgreSQL 9.4 pending patch : UNNEST with multiple args, and TABLE with multiple funcs - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>