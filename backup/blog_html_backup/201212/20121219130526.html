<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL EXPLAIN analyze buffers</h2>
	<h5 id="">2012-12-19 13:05:26&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402012111843142461/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div><div>昨天一位兄弟聊到怎么取PostgreSQL的buffer hit.</div><div>老版本的就不说了, 有兴趣的朋友可以去查对应的手册, 这里还是聊聊PostgreSQL 9.2.</div><div>PostgreSQL 有shared buffer内存区域, 在shared buffer中命中的block称为hit.</div><div>不在shared buffer中命中的有可能在OS CACHE中命中也有可能是去读取disk的. 但是PostgreSQL无法得知到底是读的os cache还是disk.</div><div>所以PostgreSQL的命中率高低不能完全说明是否内存不够, 还需要结合OS层的统计信息来定. 例如swap的使用率.</div><div>原文是这么说的 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >The pg_statio_ views are primarily useful to determine the effectiveness of the buffer cache.&nbsp;</font></div><div><font size="2"  >When the number of actual disk reads is much smaller than the number of buffer hits, then the cache is satisfying most read requests without invoking a kernel call.&nbsp;</font></div><div><font size="2"  >However, these statistics do not give the entire story: due to the way in which PostgreSQL handles disk I/O, data that is not in the PostgreSQL buffer cache might still reside in the kernel's I/O cache, and might therefore still be fetched without requiring a physical read.&nbsp;</font></div><div><font size="2"  >Users interested in obtaining more detailed information on PostgreSQL I/O behavior are advised to use the PostgreSQL statistics collector in combination with operating system utilities that allow insight into the kernel's handling of I/O.</font></div><p></p></pre></div><div>PostgreSQL收集统计信息相关的参数 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >The parameter track_activities enables monitoring of the current command being executed by any server process.</font></div><div><font size="2"  >The parameter track_counts controls whether statistics are collected about table and index accesses.</font></div><div><font size="2"  >The parameter track_functions enables tracking of usage of user-defined functions.</font></div><div><font size="2"  >The parameter track_io_timing enables monitoring of block read and write times.</font></div><p></p></pre></div><div>默认值如下 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >#track_activities = on</font></div><div><font size="2"  >#track_counts = on</font></div><div><font size="2"  >#track_io_timing = off</font></div><div><font size="2"  >#track_functions = none &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # none, pl, all</font></div><p></p></pre></div><div>常用的查看统计信息的视图如pg_statio_all_tables :&nbsp;</div><div><div><img title="PostgreSQL EXPLAIN analyze buffers - 德哥@Digoal - The Heart,The World."  alt="PostgreSQL EXPLAIN analyze buffers - 德哥@Digoal - The Heart,The World."  style="margin:0 10px 0 0;"  src="http://img4.ph.126.net/0GhY8NQ26BEGRDbSHhLIpg==/6597778951656675654.jpg"  ></div>这里的heap_blks_read 虽然说明是disk blocks read. 实际上是除了shared buffer中的读以外的所有读, 所以包含了os cache里的读.&nbsp;</div><div>heap_blks_hit 是shared buffer中的读</div><div>idx_blks_read和idx_blks_hit 指这个表的所有索引的统计信息的总和.</div><div>因为一个表包含了heap, index, toast, toast_index, vm(table and index 分开), fsm<span style="line-height: 22px;"  >(table and index 分开)&nbsp;</span>这些数据部分, 所以在pg_statio_all_tables中除了vm, fsm之外都有统计信息.</div><div>下面举个例子 :&nbsp;</div><div>注意这些视图在事务中看到的都是snapshot, 所以多次查询都是一致的数据. 除非调用pg_stat_clear_snapshot() 清除.</div><div>事务开启</div><div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=&gt; begin;</font></div><div><font size="2"  >BEGIN</font></div><div><font size="2"  >digoal=&gt; select * from pg_statio_all_tables where relname='ocz_test';</font></div><div><font size="2"  >-[ RECORD 1 ]---+------------</font></div><div><font size="2"  >relid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | 24719</font></div><div><font size="2"  >schemaname &nbsp; &nbsp; &nbsp;| digoal</font></div><div><font size="2"  >relname &nbsp; &nbsp; &nbsp; &nbsp; | ocz_test</font></div><div><font size="2"  >heap_blks_read &nbsp;| 9558621031</font></div><div><font size="2"  >heap_blks_hit &nbsp; | 27591501902</font></div><div><font size="2"  >idx_blks_read &nbsp; | 8064554837</font></div><div><font size="2"  >idx_blks_hit &nbsp; &nbsp;| 64222030859</font></div><div><font size="2"  >toast_blks_read | 0</font></div><div><font size="2"  >toast_blks_hit &nbsp;| 0</font></div><div><font size="2"  >tidx_blks_read &nbsp;| 0</font></div><div><font size="2"  >tidx_blks_hit &nbsp; | 0</font></div><p></p></pre></div><div>下面的查询结果只有一条记录, 因为这个表只有1个索引. 索引统计信息的总和就等于pg_statio_all_tables中的值.</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=&gt; select * from pg_statio_all_indexes where relname='ocz_test';</font></div><div><font size="2"  >-[ RECORD 1 ]-+--------------</font></div><div><font size="2"  >relid &nbsp; &nbsp; &nbsp; &nbsp; | 24719</font></div><div><font size="2"  >indexrelid &nbsp; &nbsp;| 24725</font></div><div><font size="2"  >schemaname &nbsp; &nbsp;| digoal</font></div><div><font size="2"  >relname &nbsp; &nbsp; &nbsp; | ocz_test</font></div><div><font size="2"  >indexrelname &nbsp;| ocz_test_pkey</font></div><div><font size="2"  >idx_blks_read | 8064554837</font></div><div><font size="2"  >idx_blks_hit &nbsp;| 64222030859</font></div><p></p></pre></div><div><span style="line-height: 22px;"  >我这里开了pgbench</span><span style="line-height: 22px;"  >对这个表进行不停的更新. 但是</span>在事务中查询, 这些统计信息值不会发生变化.&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=&gt; select * from pg_statio_all_tables where relname='ocz_test';</font></div><div><font size="2"  >-[ RECORD 1 ]---+------------</font></div><div><font size="2"  >relid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | 24719</font></div><div><font size="2"  >schemaname &nbsp; &nbsp; &nbsp;| digoal</font></div><div><font size="2"  >relname &nbsp; &nbsp; &nbsp; &nbsp; | ocz_test</font></div><div><font size="2"  >heap_blks_read &nbsp;| 9558621031</font></div><div><font size="2"  >heap_blks_hit &nbsp; | 27591501902</font></div><div><font size="2"  >idx_blks_read &nbsp; | 8064554837</font></div><div><font size="2"  >idx_blks_hit &nbsp; &nbsp;| 64222030859</font></div><div><font size="2"  >toast_blks_read | 0</font></div><div><font size="2"  >toast_blks_hit &nbsp;| 0</font></div><div><font size="2"  >tidx_blks_read &nbsp;| 0</font></div><div><font size="2"  >tidx_blks_hit &nbsp; | 0</font></div><div><font size="2"  >digoal=&gt; select * from pg_statio_all_indexes where relname='ocz_test';</font></div><div><font size="2"  >-[ RECORD 1 ]-+--------------</font></div><div><font size="2"  >relid &nbsp; &nbsp; &nbsp; &nbsp; | 24719</font></div><div><font size="2"  >indexrelid &nbsp; &nbsp;| 24725</font></div><div><font size="2"  >schemaname &nbsp; &nbsp;| digoal</font></div><div><font size="2"  >relname &nbsp; &nbsp; &nbsp; | ocz_test</font></div><div><font size="2"  >indexrelname &nbsp;| ocz_test_pkey</font></div><div><font size="2"  >idx_blks_read | 8064554837</font></div><div><font size="2"  >idx_blks_hit &nbsp;| 64222030859</font></div><p></p></pre></div><div>调用<span style="line-height: 22px;"  >pg_stat_clear_snapshot()后可以清除当前值, 进入下一个snapshot.</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=&gt; select pg_stat_clear_snapshot();</font></div><div><font size="2"  >-[ RECORD 1 ]----------+-</font></div><div><font size="2"  >pg_stat_clear_snapshot |&nbsp;</font></div><div><font size="2"  >digoal=&gt; select * from pg_statio_all_indexes where relname='ocz_test';</font></div><div><font size="2"  >-[ RECORD 1 ]-+--------------</font></div><div><font size="2"  >relid &nbsp; &nbsp; &nbsp; &nbsp; | 24719</font></div><div><font size="2"  >indexrelid &nbsp; &nbsp;| 24725</font></div><div><font size="2"  >schemaname &nbsp; &nbsp;| digoal</font></div><div><font size="2"  >relname &nbsp; &nbsp; &nbsp; | ocz_test</font></div><div><font size="2"  >indexrelname &nbsp;| ocz_test_pkey</font></div><div><font size="2"  >idx_blks_read | 8073145886</font></div><div><font size="2"  >idx_blks_hit &nbsp;| 64288889852</font></div><div><font size="2"  >digoal=&gt; select pg_stat_clear_snapshot();</font></div><div><font size="2"  >-[ RECORD 1 ]----------+-</font></div><div><font size="2"  >pg_stat_clear_snapshot |&nbsp;</font></div><div><font size="2"  >digoal=&gt; select * from pg_statio_all_indexes where relname='ocz_test';</font></div><div><font size="2"  >-[ RECORD 1 ]-+--------------</font></div><div><font size="2"  >relid &nbsp; &nbsp; &nbsp; &nbsp; | 24719</font></div><div><font size="2"  >indexrelid &nbsp; &nbsp;| 24725</font></div><div><font size="2"  >schemaname &nbsp; &nbsp;| digoal</font></div><div><font size="2"  >relname &nbsp; &nbsp; &nbsp; | ocz_test</font></div><div><font size="2"  >indexrelname &nbsp;| ocz_test_pkey</font></div><div><font size="2"  >idx_blks_read | 8073198956</font></div><div><font size="2"  >idx_blks_hit &nbsp;| 64289301744</font></div><div><font size="2"  >digoal=&gt; select * from pg_statio_all_tables where relname='ocz_test';</font></div><div><font size="2"  >-[ RECORD 1 ]---+------------</font></div><div><font size="2"  >relid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | 24719</font></div><div><font size="2"  >schemaname &nbsp; &nbsp; &nbsp;| digoal</font></div><div><font size="2"  >relname &nbsp; &nbsp; &nbsp; &nbsp; | ocz_test</font></div><div><font size="2"  >heap_blks_read &nbsp;| 9568053620</font></div><div><font size="2"  >heap_blks_hit &nbsp; | 27620023959</font></div><div><font size="2"  >idx_blks_read &nbsp; | 8073198956</font></div><div><font size="2"  >idx_blks_hit &nbsp; &nbsp;| 64289301744</font></div><div><font size="2"  >toast_blks_read | 0</font></div><div><font size="2"  >toast_blks_hit &nbsp;| 0</font></div><div><font size="2"  >tidx_blks_read &nbsp;| 0</font></div><div><font size="2"  >tidx_blks_hit &nbsp; | 0</font></div><p></p></pre></div></div><div>所有的统计信息表如下, 这里不一一介绍了, 有兴趣的朋友看一下手册 :&nbsp;</div><div><div><img title="PostgreSQL EXPLAIN analyze buffers - 德哥@Digoal - The Heart,The World."  alt="PostgreSQL EXPLAIN analyze buffers - 德哥@Digoal - The Heart,The World."  style="margin:0 10px 0 0;"  src="http://img0.ph.126.net/74vmVbrjzFeQy1WTtlCvfg==/1643813864007491900.jpg"  ></div></div><div><br></div><div>如果要看单条SQL的统计信息那就要用到explain analyze了.</div><div><span style="line-height: 22px;"  >下面以PostgreSQL 9.2为例讲解一下 EXPLAIN的输出.</span></div><div><span style="line-height: 22px;"  >首先是explain命令的语法 :&nbsp;</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=&gt; \h explain</font></div><div><font size="2"  >Command: &nbsp; &nbsp; EXPLAIN</font></div><div><font size="2"  >Description: show the execution plan of a statement</font></div><div><font size="2"  >Syntax:</font></div><div><font size="2"  >EXPLAIN [ ( option [, ...] ) ] statement</font></div><div><font size="2"  >EXPLAIN [ ANALYZE ] [ VERBOSE ] statement</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >where option can be one of:</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; &nbsp; ANALYZE [ boolean ]</font></div><div><font size="2"  >&nbsp; &nbsp; VERBOSE [ boolean ]</font></div><div><font size="2"  >&nbsp; &nbsp; COSTS [ boolean ]</font></div><div><font size="2"  >&nbsp; &nbsp; BUFFERS [ boolean ]</font></div><div><font size="2"  >&nbsp; &nbsp; TIMING [ boolean ]</font></div><div><font size="2"  >&nbsp; &nbsp; FORMAT { TEXT | XML | JSON | YAML }</font></div><p></p></pre></div></div><div>我们要看的buffers信息来自BufferUsage结构的数据, 源码在这个地方 :&nbsp;</div><div>src/backend/commands/explain.c</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; /* Show buffer usage */</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; if (es-&gt;buffers)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; {</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const BufferUsage *usage = &amp;planstate-&gt;instrument-&gt;bufusage;</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (es-&gt;format == EXPLAIN_FORMAT_TEXT)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bool &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;has_shared = (usage-&gt;shared_blks_hit &gt; 0 ||</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usage-&gt;shared_blks_read &gt; 0 ||</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usage-&gt;shared_blks_dirtied &gt; 0 ||</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usage-&gt;shared_blks_written &gt; 0);</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bool &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;has_local = (usage-&gt;local_blks_hit &gt; 0 ||</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;usage-&gt;local_blks_read &gt; 0 ||</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;usage-&gt;local_blks_dirtied &gt; 0 ||</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;usage-&gt;local_blks_written &gt; 0);</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bool &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;has_temp = (usage-&gt;temp_blks_read &gt; 0 ||</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; usage-&gt;temp_blks_written &gt; 0);</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bool &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;has_timing = (!INSTR_TIME_IS_ZERO(usage-&gt;blk_read_time) ||</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;!INSTR_TIME_IS_ZERO(usage-&gt;blk_write_time));</font></div><div><font size="2"  ><span style="line-height: 19px;"  >...</span></font></div><div><font size="2"  ><span style="line-height: 19px;"  >略</span></font></div><p></p></pre></div><div>BufferUsage 的数据结构如下 :&nbsp;</div><div><span style="line-height: 22px;"  >src/include/executor/instrument.h</span></div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >00019 typedef struct BufferUsage</font></div><div><font size="2"  >00020 {</font></div><div><font size="2"  >00021 &nbsp; &nbsp; long &nbsp; &nbsp; &nbsp; &nbsp;shared_blks_hit; &nbsp; &nbsp;/* # of shared buffer hits */</font></div><div><font size="2"  >00022 &nbsp; &nbsp; long &nbsp; &nbsp; &nbsp; &nbsp;shared_blks_read; &nbsp; &nbsp; &nbsp; /* # of shared disk blocks read */</font></div><div><font size="2"  >00023 &nbsp; &nbsp; long &nbsp; &nbsp; &nbsp; &nbsp;shared_blks_dirtied; &nbsp; &nbsp;/* # of shared blocks dirtied */</font></div><div><font size="2"  >00024 &nbsp; &nbsp; long &nbsp; &nbsp; &nbsp; &nbsp;shared_blks_written; &nbsp; &nbsp;/* # of shared disk blocks written */</font></div><div><font size="2"  >00025 &nbsp; &nbsp; long &nbsp; &nbsp; &nbsp; &nbsp;local_blks_hit; /* # of local buffer hits */</font></div><div><font size="2"  >00026 &nbsp; &nbsp; long &nbsp; &nbsp; &nbsp; &nbsp;local_blks_read; &nbsp; &nbsp;/* # of local disk blocks read */</font></div><div><font size="2"  >00027 &nbsp; &nbsp; long &nbsp; &nbsp; &nbsp; &nbsp;local_blks_dirtied; &nbsp; &nbsp; /* # of shared blocks dirtied */</font></div><div><font size="2"  >00028 &nbsp; &nbsp; long &nbsp; &nbsp; &nbsp; &nbsp;local_blks_written; &nbsp; &nbsp; /* # of local disk blocks written */</font></div><div><font size="2"  >00029 &nbsp; &nbsp; long &nbsp; &nbsp; &nbsp; &nbsp;temp_blks_read; /* # of temp blocks read */</font></div><div><font size="2"  >00030 &nbsp; &nbsp; long &nbsp; &nbsp; &nbsp; &nbsp;temp_blks_written; &nbsp; &nbsp; &nbsp;/* # of temp blocks written */</font></div><div><font size="2"  >00031 &nbsp; &nbsp; instr_time &nbsp;blk_read_time; &nbsp;/* time spent reading */</font></div><div><font size="2"  >00032 &nbsp; &nbsp; instr_time &nbsp;blk_write_time; /* time spent writing */</font></div><div><font size="2"  >00033 } BufferUsage;</font></div><p></p></pre></div><div>要让explain打开buffers则必须同时要打开analyze, 但是使用analyze需要注意,&nbsp;</div><div>analyze 不要用在update, delete, insert, 等会对数据库造成修改的SQL语句上, 因为它会执行这条SQL, 对数据库造成修改.</div><div>如果一定要用, 那就在事务中使用, 然后rollback;</div><div>如下 :&nbsp;</div><div>测试表的当前数据 :&nbsp;</div><wbr><div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=&gt; select * from test ;</font></div><div><font size="2"  >&nbsp;id&nbsp;</font></div><div><font size="2"  >----</font></div><div><font size="2"  >&nbsp; 1</font></div><div><font size="2"  >(1 row)</font></div><p></p></pre></div><div>不带analyze的explain :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=&gt; explain update test set id=id+1;</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; QUERY PLAN &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"  >---------------------------------------------------------------</font></div><div><font size="2"  >&nbsp;Update on test &nbsp;(cost=0.00..40.00 rows=2400 width=10)</font></div><div><font size="2"  >&nbsp; &nbsp;-&gt; &nbsp;Seq Scan on test &nbsp;(cost=0.00..40.00 rows=2400 width=10)</font></div><div><font size="2"  >(2 rows)</font></div><p></p></pre></div><div>不对数据库造成修改 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=&gt; select * from test ;</font></div><div><font size="2"  >&nbsp;id&nbsp;</font></div><div><font size="2"  >----</font></div><div><font size="2"  >&nbsp; 1</font></div><div><font size="2"  >(1 row)</font></div><p></p></pre></div><div>带analyze的explain :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=&gt; explain analyze update test set id=id+1;</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;QUERY PLAN &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"  >---------------------------------------------------------------------------------------------------------</font></div><div><font size="2"  >&nbsp;Update on test &nbsp;(cost=0.00..40.00 rows=2400 width=10) (actual time=0.067..0.067 rows=0 loops=1)</font></div><div><font size="2"  >&nbsp; &nbsp;-&gt; &nbsp;Seq Scan on test &nbsp;(cost=0.00..40.00 rows=2400 width=10) (actual time=0.048..0.049 rows=1 loops=1)</font></div><div><font size="2"  >&nbsp;Total runtime: 0.092 ms</font></div><div><font size="2"  >(3 rows)</font></div><p></p></pre></div><div>对数据库造成了修改 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=&gt; select * from test ;</font></div><div><font size="2"  >&nbsp;id&nbsp;</font></div><div><font size="2"  >----</font></div><div><font size="2"  >&nbsp; 2</font></div><div><font size="2"  >(1 row)</font></div><p></p></pre></div></div><div>BUFFERS输出的内容介绍, 原文如下 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  ><span style="line-height: 19px;"  >BUFFERS<br>Include information on buffer usage. <br>Specifically, include : <br>the number of shared blocks hit, read, dirtied, and written, <br>the number of local blocks hit, read, dirtied, and written, <br>the number of temp blocks read and written. <br><br>  1. Shared blocks contain data from regular tables and indexes; <br>  2. local blocks contain data from temporary tables and indexes; <br>  3. while temp blocks contain short-term working data used in sorts, hashes, Materialize plan nodes, and similar cases. <br><br>  1. A hit means that a read was avoided because the block was found already in cache when needed. <br>  2. read : shared disk blocks read<br>  3. The number of blocks dirtied indicates the number of previously unmodified blocks that were changed by this query; <br>  4. while the number of blocks written indicates the number of previously-dirtied blocks evicted from cache by this backend during query processing. <br>The number of blocks shown for an upper-level node includes those used by all its child nodes. <br>In text format, only non-zero values are printed. This parameter may only be used when ANALYZE is also enabled. It defaults to FALSE.</span></font></div><p></p></pre></div><div>先看个例子, 再作介绍, 因为text模式不打印值=0的, 所以后面我们要用到JSON输出 :&nbsp;</div><div>下面是text格式输出 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=# explain (analyze on, verbose on, buffers on, timing on, costs on) update dimension_tab set sales_value=sales_value+1;</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;QUERY PLAN &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</font></div><div><font size="2"  >----------------------------------------------------------------------------------------------------------------------------</font></div><div><font size="2"  >&nbsp;Update on public.dimension_tab &nbsp;(cost=0.00..88.00 rows=1000 width=28) (actual time=58.962..58.962 rows=0 loops=1)</font></div><div><font size="2"  >&nbsp; &nbsp;Buffers: shared hit=1619 read=68 dirtied=5 written=7</font></div><div><font size="2"  >&nbsp; &nbsp;-&gt; &nbsp;Seq Scan on public.dimension_tab &nbsp;(cost=0.00..88.00 rows=1000 width=28) (actual time=0.077..3.940 rows=1000 loops=1)</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Output: fact_1_id, fact_2_id, fact_3_id, fact_4_id, (sales_value + 1::numeric), ctid</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Buffers: shared hit=10 read=63 written=5</font></div><div><font size="2"  >&nbsp;Total runtime: 58.996 ms</font></div><div><font size="2"  >(6 rows)</font></div><p></p></pre></div><div>下面是JSON格式输出 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >digoal=# explain (analyze on, verbose on, buffers on, timing on, costs on, format json) update dimension_tab set sales_value=sales_value+1;</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;QUERY PLAN &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"  >-----------------------------------------------------------------------------------------------------------------</font></div><div><font size="2"  >&nbsp;[ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp;{ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp;"Plan": { &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Node Type": "ModifyTable", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Operation": "Update", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Relation Name": "dimension_tab", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Schema": "public", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Alias": "dimension_tab", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Startup Cost": 0.00, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Total Cost": 88.00, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Plan Rows": 1000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Plan Width": 28, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Actual Startup Time": 168.809, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Actual Total Time": 168.809, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Actual Rows": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Actual Loops": 1, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Shared Hit Blocks": 1618, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Shared Read Blocks": 77, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Shared Dirtied Blocks": 27, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Shared Written Blocks": 23, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Local Hit Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Local Read Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Local Dirtied Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Local Written Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Temp Read Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Temp Written Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"I/O Read Time": 0.000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"I/O Write Time": 0.000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;"Plans": [ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Node Type": "Seq Scan", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Parent Relationship": "Member", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Relation Name": "dimension_tab", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Schema": "public", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Alias": "dimension_tab", &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Startup Cost": 0.00, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Total Cost": 88.00, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Plan Rows": 1000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Plan Width": 28, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Actual Startup Time": 6.602, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Actual Total Time": 72.165, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Actual Rows": 1000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Actual Loops": 1, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Output": ["fact_1_id", "fact_2_id", "fact_3_id", "fact_4_id", "(sales_value + 1::numeric)", "ctid"],+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Shared Hit Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Shared Read Blocks": 73, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Shared Dirtied Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Shared Written Blocks": 20, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Local Hit Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Local Read Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Local Dirtied Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Local Written Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Temp Read Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"Temp Written Blocks": 0, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"I/O Read Time": 0.000, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;"I/O Write Time": 0.000 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp; &nbsp;] &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp;}, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp;"Triggers": [ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp;], &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp; &nbsp;"Total Runtime": 171.540 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +</font></div><div><font size="2"  >&nbsp; &nbsp;} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+</font></div><div><font size="2"  >&nbsp;]</font></div><div><font size="2"  >(1 row)</font></div><p></p></pre></div><div>对比以上text和JSON的输出,&nbsp;</div><div>显然text没有打印值=0的统计信息.</div><div>实际上BUFFERS输出包含了12个部分的信息, 也就是BufferUsage数据结构中存储的信息.</div><div>解释如下 :&nbsp;</div><div><div style="line-height: 22px;"  ><font size="2"  style="line-height: 20px;"  ><span style="line-height: 19px;"  >Shared 部分的值包含了普通表和索引的统计信息.</span></font></div><div style="line-height: 22px;"  ><span style="line-height: 19px; font-size: small;"  >Local 部分的值包含了临时表和索引的统计信息.</span></div><div style="line-height: 22px;"  ><span style="line-height: 19px; font-size: small;"  >Temp 部分的值包含了在sort, hash, materialize或类似阶段用到的工作数据的统计信息.</span></div><div style="line-height: 22px;"  ><span style="line-height: 19px; font-size: small;"  >I/O Read Time 涉及的所有数据块的读时间开销.</span></div><div style="line-height: 22px;"  ><span style="line-height: 19px; font-size: small;"  >I/O Write Time 涉及的所有数据块的写时间开销.</span></div></div><div style="line-height: 22px;"  ><span style="line-height: 19px; font-size: small;"  ><br></span></div><div style="line-height: 22px;"  ><span style="line-height: 19px; font-size: small;"  >Hit Blocks : 在shared buffer中命中的数据块.</span></div><div style="line-height: 22px;"  ><span style="line-height: 19px; font-size: small;"  >Read Blocks : 在disk中读到的数据块(包括os cache的部分).</span></div><div style="line-height: 22px;"  ><span style="line-height: 19px; font-size: small;"  >Dirtied Blocks : 在当前QUERY中被修改了的并且此前</span><span style="font-size: small; line-height: 19px;"  >是未修改过的数据块.</span></div><div style="line-height: 22px;"  ><span style="line-height: 19px; font-size: small;"  >Written Blocks : 在整个QUERY过程中, 被当前QUERY的backend process从shared buffer中驱逐出去的此前是dirtied的数据块.</span></div><div><br></div><div>从JSON的结果来看, 这个SQL有73个数据块读取是从OScache或者disk来的. 并且有20个脏块被刷出了shared buffer.</div><div><span style="font-size: small; line-height: 19px;"  ><br></span></div>【参考】<div><div>src/backend/commands/explain.c</div><div>src/include/executor/instrument.h</div><div><a target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/9.2/static/sql-explain.html"  >http://www.postgresql.org/docs/9.2/static/sql-explain.html</a></div><div><a target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/current/static/monitoring-stats.html"  >http://www.postgresql.org/docs/current/static/monitoring-stats.html</a></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201041111499884/"  >http://blog.163.com/digoal@126/blog/static/163877040201041111499884/</a></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201041111454178/"  >http://blog.163.com/digoal@126/blog/static/163877040201041111454178/</a></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020111152495686/?suggestedreading&amp;wumii"  >http://blog.163.com/digoal@126/blog/static/16387704020111152495686/?suggestedreading&amp;wumii</a></div><div><br></div></div></div>
	</div>
</div>
</body>
</html>