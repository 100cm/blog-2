<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL time based partition table tuning - rotate case</h2>
	<h5 id="">2014-03-23 20:59:00&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201422293824929/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>在PostgreSQL中设计按时间进行分区的分区表时, 一般的做法是先创建一个主表, 然后按时间格式为后缀创建一些子表.</div><div>例如按天分区的场景 :&nbsp;</div><div>主表: tbl</div><div>子表: tbl_20140301, tbl_20140302, ...... 一系列子表, 加一个默认子表tbl_default存储超出子表时间范围的数据.</div><div>这样设计会有一个维护上的问题, 随着时间的推移, 要手工去创建子表, 否则时间溢出的数据都进入tbl_default表了.</div><div>还有一个问题是, 触发器函数随着时间的推移, 要加入时间的判断逻辑.&nbsp;</div><div>例如</div><div><pre class="prettyprint"   style="line-height: 28px; white-space: pre-wrap; color: rgb(51, 51, 51);"   ><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >CREATE OR REPLACE FUNCTION digoal</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >.</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   >p_insert_info_trigger</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >()</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >&nbsp;RETURNS trigger</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >&nbsp;LANGUAGE plpgsql</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >AS $function$</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >BEGIN</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >IF </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >(</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > NEW</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >.</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   >createtime </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >&gt;=</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > DATE </span><span style="line-height: 21px; color: rgb(0, 136, 0);"   >'2012-09-01'</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > AND NEW</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >.</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   >createtime </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >&lt;</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > DATE </span><span style="line-height: 21px; color: rgb(0, 136, 0);"   >'2012-09-02'</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >)</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > THEN</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >INSERT INTO tbl_rop_info_20120901 VALUES </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >(</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   >NEW</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >.*);</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >ELSIF </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >(</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > NEW</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >.</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   >createtime </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >&gt;=</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > DATE </span><span style="line-height: 21px; color: rgb(0, 136, 0);"   >'2012-09-02'</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > AND NEW</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >.</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   >createtime </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >&lt;</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > DATE </span><span style="line-height: 21px; color: rgb(0, 136, 0);"   >'2012-09-03'</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >)</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > THEN</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >INSERT INTO tbl_rop_info_20120902 VALUES </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >(</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   >NEW</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >.*);</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(102, 102, 0);"   >--</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >中间略去几千行类似代码.</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   >&nbsp;</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >ELSIF </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >(</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > NEW</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >.</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   >createtime </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >&gt;=</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > DATE </span><span style="line-height: 21px; color: rgb(0, 136, 0);"   >'2015-06-19'</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > AND NEW</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >.</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   >createtime </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >&lt;</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > DATE </span><span style="line-height: 21px; color: rgb(0, 136, 0);"   >'2015-06-20'</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >)</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > THEN</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >INSERT INTO tbl_rop_info_20150619 VALUES </span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >(</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   >NEW</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >.*);</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >ELSE</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >RAISE EXCEPTION </span><span style="line-height: 21px; color: rgb(0, 136, 0);"   >'Date out of range. Fix the p_insert_info_trigger() function!'</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >;</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 136);"   >END</span><span style="line-height: 21px; color: rgb(0, 0, 0);"   > IF</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >;</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >RETURN NULL</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >;</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 136);"   >END</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >;</span></font></div><div style="line-height: 28px;"   ><font size="2"   style="line-height: 21px;"   ><span style="line-height: 21px; color: rgb(0, 0, 0);"   >$function$</span><span style="line-height: 21px; color: rgb(102, 102, 0);"   >;</span></font></div></pre></div><div>当然, 你可以选择性能低下的通用触发器, 那大可不必为触发器函数的维护发愁, 但是你要发愁的是同用触发器的性能问题, 如下.</div><div><a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020128772037884/"   >http://blog.163.com/digoal@126/blog/static/16387704020128772037884/</a></div><div><br></div><div>那么这种分区表的设计有没有改进的地方呢?</div><div>我从非时间类分区表的设计找到一个在时间分区表上也许可行的方法, 例如一个按ID的取模方式进行分区的分区表设计.</div><div>mod(id,16) = 0到15, 创建16个分区表.</div><div>那么我们使用16个表作为分区表, 这样触发器函数写一次就够了, 分区表也建一次就够了. 后期基本不用维护.</div><div>时间表其实也可以这么设计, 例如, 每天一个表, 或者每月一个表, 或者每周一个表, 不管是哪年的数据, 都插入对应的分区即可, 例如按月分区的话, 每个月存储任何一年的数据. 当然这样做的坏处是, 如果每年的数据都要保留并且查询的话, 单月的数据量显然偏大. 不过好处是触发器和分区表只需要建立一次. 后期我们可以通过表数据迁移把分区表的历年数据迁移到以时间后缀命名的分区表.</div><div>场景举例 :&nbsp;</div><div>主表: tbl</div><div>子表: tbl_01, tbl_02, tbl_03, ... tbl_12.</div><div>触发器判断逻辑:&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >if to_char(NEW.crt_time,'mm') = '01' then</font></div><div><font size="2"   >&nbsp; insert into tbl_01 values (NEW.*);</font></div><div><font size="2"   >elsif .... &nbsp;then</font></div><div><font size="2"   >&nbsp; insert ...</font></div><div><font size="2"   >else</font></div><div><font size="2"   >&nbsp; insert into tbl_12 values (NEW.*);</font></div><div><font size="2"   >end if;</font></div><p></p></pre></div><div>触发器和12个子表都只需要建立一次, 没有后期维护的负担.</div><div>后期我们要做的维护工作就是把历史数据从各个子表挪到以时间后缀结尾的子表, 例如 :&nbsp;</div><div>在tbl_03表只有当年数据时, 就挪到真正的分区表里面.</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >create table tbl_201403 (like tbl including all) inherits(tbl);</font></div><div><font size="2"   >begin;</font></div><div><font size="2"   >insert into tbl_201403 select * from only tbl_03;</font></div><div><font size="2"   >truncate tbl_03;</font></div><div><font size="2"   >end;</font></div><p></p></pre></div><div>以上工作可以作为定时任务部署, 确保12个轮询表不会有跨年数据.</div><div><br></div><div>除了以上按月的场景, 我们还可以使用按日, 按周等周期的方法.</div><div>例如 :&nbsp;</div><div>主表: tbl</div><div>轮询子表: tbl_001, tbl_002, ... tbl_366.</div><div>实际子表: tbl_yyyymmdd</div><div><br></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" href="http://blog.163.com/digoal@126/blog/static/16387704020128772037884/"   >http://blog.163.com/digoal@126/blog/static/16387704020128772037884/</a></div><div>2.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/9.3/static/functions-formatting.html"   >http://www.postgresql.org/docs/9.3/static/functions-formatting.html</a></div><div><p style="font-size: 13.333333969116211px; line-height: 1.5em; margin: 1.2em 0em; font-weight: bold; font-family: verdana, sans-serif;"   >Table 9-21. Template Patterns for Date/Time Formatting</p><table border="1"   style="margin: 2ex 0px 2ex 2ex; -webkit-box-shadow: rgb(223, 223, 223) 3px 3px 5px; box-shadow: rgb(223, 223, 223) 3px 3px 5px; border-spacing: 0px; border-collapse: collapse; background-color: rgb(224, 236, 239); border: 2px solid rgb(167, 198, 223); color: rgb(0, 0, 0); font-family: verdana, sans-serif; font-size: 13.333333969116211px; line-height: normal;"   ><colgroup><col><col><thead><tr><th style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex;"   >Pattern</th><th style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex;"   >Description</th></tr></thead><tbody><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>HH</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >hour of day (01-12)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>HH12</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >hour of day (01-12)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>HH24</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >hour of day (00-23)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>MI</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >minute (00-59)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>SS</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >second (00-59)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>MS</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >millisecond (000-999)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>US</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >microsecond (000000-999999)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>SSSS</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >seconds past midnight (0-86399)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>AM</tt>,&nbsp;<tt>am</tt>,&nbsp;<tt>PM</tt>&nbsp;or&nbsp;<tt>pm</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >meridiem indicator (without periods)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>A.M.</tt>,&nbsp;<tt>a.m.</tt>,&nbsp;<tt>P.M.</tt>&nbsp;or&nbsp;<tt>p.m.</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >meridiem indicator (with periods)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>Y,YYY</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >year (4 and more digits) with comma</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>YYYY</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >year (4 and more digits)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>YYY</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >last 3 digits of year</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>YY</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >last 2 digits of year</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>Y</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >last digit of year</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>IYYY</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >ISO year (4 and more digits)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>IYY</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >last 3 digits of ISO year</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>IY</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >last 2 digits of ISO year</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>I</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >last digit of ISO year</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>BC</tt>,&nbsp;<tt>bc</tt>,&nbsp;<tt>AD</tt>&nbsp;or&nbsp;<tt>ad</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >era indicator (without periods)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>B.C.</tt>,&nbsp;<tt>b.c.</tt>,&nbsp;<tt>A.D.</tt>&nbsp;or&nbsp;<tt>a.d.</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >era indicator (with periods)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>MONTH</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >full upper case month name (blank-padded to 9 chars)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>Month</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >full capitalized month name (blank-padded to 9 chars)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>month</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >full lower case month name (blank-padded to 9 chars)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>MON</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >abbreviated upper case month name (3 chars in English, localized lengths vary)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>Mon</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >abbreviated capitalized month name (3 chars in English, localized lengths vary)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>mon</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >abbreviated lower case month name (3 chars in English, localized lengths vary)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>MM</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >month number (01-12)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>DAY</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >full upper case day name (blank-padded to 9 chars)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>Day</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >full capitalized day name (blank-padded to 9 chars)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>day</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >full lower case day name (blank-padded to 9 chars)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>DY</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >abbreviated upper case day name (3 chars in English, localized lengths vary)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>Dy</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >abbreviated capitalized day name (3 chars in English, localized lengths vary)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>dy</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >abbreviated lower case day name (3 chars in English, localized lengths vary)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>DDD</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >day of year (001-366)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>IDDD</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >ISO day of year (001-371; day 1 of the year is Monday of the first ISO week.)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>DD</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >day of month (01-31)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>D</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >day of the week, Sunday(<tt>1</tt>) to Saturday(<tt>7</tt>)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>ID</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >ISO day of the week, Monday(<tt>1</tt>) to Sunday(<tt>7</tt>)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>W</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >week of month (1-5) (The first week starts on the first day of the month.)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>WW</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >week number of year (1-53) (The first week starts on the first day of the year.)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>IW</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >ISO week number of year (01 - 53; the first Thursday of the new year is in week 1.)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>CC</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >century (2 digits) (The twenty-first century starts on 2001-01-01.)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>J</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >Julian Day (integer days since November 24, 4714 BC at midnight UTC)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>Q</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >quarter (ignored by&nbsp;<code>to_date</code>&nbsp;and&nbsp;<code>to_timestamp</code>)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(239, 239, 239); padding: 0.5ex;"   ><tt>RM</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(239, 239, 239); padding: 0.5ex;"   >month in upper case Roman numerals (I-XII; I=January)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>rm</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >month in lower case Roman numerals (i-xii; i=January)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>TZ</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >upper case time-zone name</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   ><tt>tz</tt></td><td style="border: 1px solid rgb(167, 198, 223); background-color: rgb(255, 255, 255); padding: 0.5ex;"   >lower case time-zone name</td></tr></table></div></div>
	</div>
</div>
</body>
</html>