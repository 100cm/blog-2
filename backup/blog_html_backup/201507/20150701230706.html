<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">R Conditional && || & |</h2>
	<h5 id="">2015-07-01 23:07:06&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020156151813266/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>在R中有4种逻辑符号，&amp;&amp;, ||, &amp;, |</div><div>其中&amp;, |是判断向量中单个元素的，返回的也是多个布尔元素的向量。</div><div>而&amp;&amp;和||是判断整个向量的，返回单个布尔逻辑值。</div><div><br></div><div>例子：</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&gt; x &lt;- 1:5</font></div><div><font size="2"   >&gt; y &lt;- c(2,2,2,2,4)</font></div><div><div><font size="2"   >&gt; x&gt;1</font></div><div><font size="2"   >[1] FALSE &nbsp;TRUE &nbsp;TRUE &nbsp;TRUE &nbsp;TRUE</font></div><div><span style="line-height: 28px;"   ><font size="2"   >&gt; y&gt;2</font></span></div><div><font size="2"   >[1] FALSE FALSE FALSE FALSE &nbsp;TRUE</font></div></div><div><div style="line-height: 28px;"   ><font size="2"   >&gt; x&gt;1 | y&gt;2</font></div><div style="line-height: 28px;"   ><font size="2"   >[1] FALSE &nbsp;TRUE &nbsp;TRUE &nbsp;TRUE &nbsp;TRUE</font></div></div><div><div style="line-height: 28px;"   ><font size="2"   >&gt; x&gt;1 &amp; y&gt;2</font></div><div style="line-height: 28px;"   ><font size="2"   >[1] FALSE FALSE FALSE FALSE &nbsp;TRUE</font></div></div><p></p></pre></div><div><div style="line-height: 28px;"   ><br></div><div style="line-height: 28px;"   >以下用法基本用不上，你甚至可能觉得返回结果有点奇怪，其实只使用第一个逻辑值的结果：</div><div><pre class="prettyprint"   ><p style="line-height: 28px;"   ></p><div style="line-height: 28px;"   ><font size="2"   >&gt; x&gt;1 &amp;&amp; y&gt;2</font></div><div style="line-height: 28px;"   ><font size="2"   >[1] FALSE</font></div><div style="line-height: 28px;"   ><font size="2"   >&gt; x&gt;1 || y&gt;2</font></div><div style="line-height: 28px;"   ><font size="2"   >[1] FALSE</font></div><div style="line-height: 28px;"   ><font size="2"   ><br></font></div><div><font size="2"   >&gt; x&gt;1<br>[1] FALSE  TRUE  TRUE  TRUE  TRUE<br>&gt; x&gt;=1<br>[1] TRUE TRUE TRUE TRUE TRUE<br>&gt; x&gt;1 &amp;&amp; x&gt;=1<br>[1] FALSE<br>&gt; x&gt;1 || x&gt;=1   # 这里只用了第一个逻辑值的结果作为整个表达式的结果<br>[1] TRUE</font></div><p style="line-height: 28px;"   ></p></pre></div><div style="line-height: 28px;"   ><br></div><div style="line-height: 28px;"   >常用的条件判断</div><div>ifelse(condition, a, b) returns a vector of the length of its longest argument, with elements a[i] if condition[i] is true, otherwise b[i].</div><div>如果a,b的长度小于condition的长度，则循环返回。</div><div><br></div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >&gt; x&gt;1</font></div><div><font size="2"   >[1] FALSE &nbsp;TRUE &nbsp;TRUE &nbsp;TRUE &nbsp;TRUE</font></div></div><div><div><font size="2"   >&gt; ifelse(x&gt;1,a,b)</font></div><div><font size="2"   >[1] 10 &nbsp;2 &nbsp;1 &nbsp;2 &nbsp;1</font></div></div><p></p></pre></div><div>这里需要注意,condition[i]和a[i],b[i]是对应的，所以有位置关系。</div><div><br></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&gt; ifelse(x&gt;1 &amp;&amp; x&gt;1,a,b)</font></div><div><font size="2"   >[1] 10</font></div><p></p></pre></div><div>以上返回b[1]</div><div><br></div><div>另一种用法是在if else表达式中。</div><div>数字0表示false, 非0表示true, 这个和ifelse(condition,a,b)用法不一样，请注意，条件中只能是长度为1的布尔逻辑值，否则只使用第一个逻辑值。</div><div><div>&gt; if (0) a else b</div><div>[1] 10 11 12 13 14 15</div><div>&gt; if (1) a else b</div><div>[1] 1 2</div><div>&gt; if (10) a else b</div><div>[1] 1 2</div></div><div>使用第一个逻辑值：</div><div><div>&gt; if (c(10,0)) a else b</div><div>[1] 1 2</div><div>Warning message:</div><div>In if (c(10, 0)) a else b :</div><div>&nbsp; the condition has length &gt; 1 and only the first element will be used</div></div><div><br></div><div><br></div><div style="line-height: 28px;"   ><br></div></div>[参考]<wbr><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://cran.r-project.org/doc/manuals/r-release/R-intro.html#Loops-and-conditional-execution"   >http://cran.r-project.org/doc/manuals/r-release/R-intro.html#Loops-and-conditional-execution</a></div><div>2.&nbsp;&gt; help("&amp;&amp;")</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >Logic &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; package:base &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; R Documentation</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Logical Operators</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Description:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;These operators act on raw, logical and number-like vectors.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Usage:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;! x</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;x &amp; y</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;x &amp;&amp; y</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;x | y</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;x || y</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;xor(x, y)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;isTRUE(x)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >Arguments:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; x, y: raw or logical or ‘number-like’ vectors (i.e., of types</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ‘double’ (class ‘numeric’), ‘integer’ and ‘complex’)), or</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; objects for which methods have been written.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Details:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘!’ indicates logical negation (NOT).</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘&amp;’ and ‘&amp;&amp;’ indicate logical AND and ‘|’ and ‘||’ indicate</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;logical OR. &nbsp;The shorter form performs elementwise comparisons in</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;much the same way as arithmetic operators. &nbsp;The longer form</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;evaluates left to right examining only the first element of each</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;vector. &nbsp;Evaluation proceeds only until the result is determined.</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;The longer form is appropriate for programming control-flow and</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;typically preferred in ‘if’ clauses.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘xor’ indicates elementwise exclusive OR.</font></div></div><div><font size="2"   ><br></font></div><div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘isTRUE(x)’ is an abbreviation of ‘identical(TRUE, x)’, and so is</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;true if and only if ‘x’ is a length-one logical vector whose only</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;element is ‘TRUE’ and which has no attributes (not even names).</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;Numeric and complex vectors will be coerced to logical values,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;with zero being false and all non-zero values being true. &nbsp;Raw</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;vectors are handled without any coercion for ‘!’, ‘&amp;’, ‘|’ and</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘xor’, with these operators being applied bitwise (so ‘!’ is the</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;1s-complement).</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;The operators ‘!’, ‘&amp;’ and ‘|’ are generic functions: methods can</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;be written for them individually or via the ‘Ops’ (or S4 ‘Logic’,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;see below) group generic function. &nbsp;(See ‘Ops’ for how dispatch is</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;computed.)</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘NA’ is a valid logical object. &nbsp;Where a component of ‘x’ or ‘y’</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;is ‘NA’, the result will be ‘NA’ if the outcome is ambiguous. &nbsp;In</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;other words ‘NA &amp; TRUE’ evaluates to ‘NA’, but ‘NA &amp; FALSE’</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;evaluates to ‘FALSE’. &nbsp;See the examples below.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;See Syntax for the precedence of these operators: unlike many</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;other languages (including S) the AND and OR operators do not have</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;the same precedence (the AND operators have higher precedence than</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;the OR operators).</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Value:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;For ‘!’, a logical or raw vector(for raw ‘x’) of the same length</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;as ‘x’: names, dims and dimnames are copied from ‘x’, and all</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;other attributes (including class) if no coercion is done.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;For ‘|’, ‘&amp;’ and ‘xor’ a logical or raw vector. The elements of</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;shorter vectors are recycled as necessary (with a ‘warning’ when</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;they are recycled only _fractionally_). &nbsp;The rules for determining</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;the attributes of the result are rather complicated. &nbsp;Most</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;attributes are taken from the longer argument, the first if they</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;are of the same length. &nbsp;Names will be copied from the first if it</font></div></div><div><div><font size="2"   >&nbsp; &nbsp; &nbsp;is the same length as the answer, otherwise from the second if</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;that is. &nbsp;For time series, these operations are allowed only if</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;the series are compatible, when the class and ‘tsp’ attribute of</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;whichever is a time series (the same, if both are) are used. &nbsp;For</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;arrays (and an array result) the dimensions and dimnames are taken</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;from first argument if it is an array, otherwise the second.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;For ‘||’, ‘&amp;&amp;’ and ‘isTRUE’, a length-one logical vector.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >S4 methods:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘!’, ‘&amp;’ and ‘|’ are S4 generics, the latter two part of the</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘Logic’ group generic (and hence methods need argument names ‘e1,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;e2’).</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Note:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;The elementwise operators are sometimes called as functions as</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;e.g. &nbsp;‘`&amp;`(x, y)’: see the description of how argument-matching is</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;done in ‘Ops’.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >References:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988) _The New S</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;Language_. &nbsp;Wadsworth &amp; Brooks/Cole.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >See Also:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘TRUE’ or ‘logical’.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘any’ and ‘all’ for OR and AND on many scalar arguments.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘Syntax’ for operator precedence.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;‘bitwAnd’ for bitwise versions for integer vectors.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Examples:</font></div></div><div><div><font size="2"   >&nbsp; &nbsp; &nbsp;y &lt;- 1 + (x &lt;- stats::rpois(50, lambda = 1.5) / 4 - 1)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;x[(x &gt; 0) &amp; (x &lt; 1)] &nbsp; &nbsp;# all x values between 0 and 1</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;if (any(x == 0) || any(y == 0)) "zero encountered"</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;## construct truth tables :</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;x &lt;- c(NA, FALSE, TRUE)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;names(x) &lt;- as.character(x)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;outer(x, x, "&amp;") ## AND table</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp;outer(x, x, "|") ## OR &nbsp;table</font></div></div><p></p></pre></div><div><br></div>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="R Conditional  ||  | - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>