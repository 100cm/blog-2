<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Replica Sets Limits</h2>
	<h5 id="">2010-12-24 13:22:02&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402010112410537483/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><br><h3>MongoDB指出 1.6目前不支持认证模式下的replica sets<br></h3>v1.6   <ul><li>Authentication mode not supported. <a rel="nofollow" href="http://jira.mongodb.org/browse/SERVER-1469"  >JIRA</a></li><li>Limits on config changes to sets at first.  Especially when a lot of set members are down.</li><li>Map/reduce writes new collections to the server.&nbsp; Because of this,  for now it may only be used on the primary.&nbsp; This will be enhanced  later.</li></ul> <span style="font-weight: bold;"  >因此在1.6的版本中如果使用了replSet启动数据库，并且开启了auth.日志将输出如下，数据库是起不来的。<br><br>Fri Dec 24 11:40:25 [initandlisten] shutdown: removing fs lock...<br>Fri Dec 24 11:40:25 dbexit: really exiting now<br>Fri Dec 24 11:42:33 MongoDB starting : pid=4613 port=5281 dbpath=/opt/mongodata 64-bit <br>Fri Dec 24 11:42:33 db version v1.6.5, pdfile version 4.5<br>Fri Dec 24 11:42:33 git version: 0eb017e9b2828155a67c5612183337b89e12e291<br>Fri Dec 24 11:42:33 sys info: Linux domU-12-31-39-06-79-A1 2.6.21.7-2.ec2.v1.2.fc8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOO<br>ST_LIB_VERSION=1_41<br>Fri Dec 24 11:42:33 [initandlisten] waiting for connections on port 5281<br>Fri Dec 24 11:42:33 [initandlisten] exception in initAndListen std::exception: unauthorized db:local lock type:1 client:0.0.0.0, ter<br>minating<br>Fri Dec 24 11:42:33 dbexit: <br><br>Fri Dec 24 11:42:33 [initandlisten] shutdown: going to close listening sockets...<br>Fri Dec 24 11:42:33 [initandlisten] shutdown: going to flush oplog...<br>Fri Dec 24 11:42:33 [initandlisten] shutdown: going to close sockets...<br>Fri Dec 24 11:42:33 [initandlisten] shutdown: waiting for fs preallocator...<br>Fri Dec 24 11:42:33 [initandlisten] shutdown: closing all files...<br>Fri Dec 24 11:42:33&nbsp;&nbsp;&nbsp;&nbsp; closeAllFiles() finished<br><br>不过可以使用将要在1.8的版本中废弃的pairwith和auth=true来替代.<br>或者就干脆使用master-slave模式.<br><br><br><br><br></span></div>
	</div>
	<h3>评论</h3>
	<div class="" id="" style="padding:0 20px;">
			<div id="">
				<h5 id="">classicbear - 2011-05-31 15:01:15</h5>
				<div>您好，我想问一下您mongodb 1.6版本在分布式部署的时候，对于replset这个集合，有没有用过autoresync这个选项呢？</div>
			</div>
			<div style="padding-left:40px;">
				<h5 id="">德哥@Digoal 回复 classicbear - 2011-05-31 15:01:15</h5>
				<div style="width:600px;">HI <br>可以在适当的时候使用</div>
			</div>
	</div>
</div>
</body>
</html>