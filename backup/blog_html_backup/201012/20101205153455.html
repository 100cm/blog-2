<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">MongoDB concept Attentions</h2>
	<h5 id="">2010-12-05 15:34:55&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201011531134275/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;">1. Every document has a special key, "_id",&nbsp; that&nbsp; is unique across&nbsp; the document's collection.<br><br>2. Key/value pairs in documents are ordered.<br>{"foo" : 3, "greeting" : "Hello, world!"} <br>{"greeting" : "Hello, world!", "foo" : 3}<br>这两条document不相同.<br><br>3. The keys in a document are strings. Any UTF-8 character is allowed in a key, with a<br>few notable exceptions:<br>3.1 Keys must not contain the character \0 (the null character). This character is used<br>to signify the end of a key.<br>3.2 The . and $ characters have some special properties and should be used only in<br>certain circumstances, as described&nbsp; in&nbsp; later chapters.&nbsp; In general,&nbsp; they should be<br>considered reserved, and drivers will complain if they are used inappropriately.<br>3.3 Keys starting with _ should be considered reserved; although&nbsp; this&nbsp; is not strictly<br>enforced.<br>3.4 MongoDB is type-sensitive and case-sensitive. For example, these documents are<br>distinct:<br>{"foo" : 3}<br>{"foo" : "3"}<br>As are as these:<br>{"foo" : 3}<br>{"Foo" : 3}<br><br>4. A final important thing to note is that documents in MongoDB cannot contain duplicate<br>keys. For example, the following is not a legal document:<br>{"greeting" : "Hello, world!", "greeting" : "Hello, MongoDB!"}<br><br>5. Collections are schema-free. This means that the documents within a single collection<br>can have any number of different “shapes.” <br>For example, both of the following documents could be stored in a single collection:<br>{"greeting" : "Hello, world!"}<br>{"foo" : 5}<br><br>6. Note that the previous documents not only have different types for their values (string<br>versus integer) but also have entirely different keys. Because any document can be put<br>into any collection, the question often arises: “Why do we need separate collections at<br>all?” It’s a good question―with no need&nbsp; for separate schemas&nbsp; for different kinds of<br>documents, why&nbsp; should we&nbsp; use more&nbsp; than&nbsp; one&nbsp; collection?&nbsp; There&nbsp; are&nbsp; several&nbsp; good<br>reasons:<br>6.1 Keeping different kinds of documents in the same collection can be a nightmare<br>for developers and admins. Developers need to make sure that each query is only<br>returning documents of a certain kind or that the application code performing a<br>query can handle documents of different shapes. If we’re querying for blog posts,<br>it’s a hassle to weed out documents containing author data.<br>6.2 It is much faster to get a list of collections than to extract a list of the types in a<br>collection. For example, if we had a type key in the collection that said whether<br>each document was a “skim,” “whole,” or “chunky monkey” document, it would<br>be much slower to find those three values in a single collection than to have three<br>separate collections and query for their names (see&nbsp; “Subcollections”<br>on page 8).<br>6.3 Grouping documents of the same kind together in the same collection allows for<br>data locality. Getting several blog posts from a collection containing only posts will<br>likely require fewer disk seeks than getting the same posts from a collection con-<br>taining posts and author data.<br>6.4 We begin to impose some structure on our documents when we create indexes.<br>(This is especially true in the case of unique indexes.) These indexes are defined<br>per collection. By putting only documents of a single type into the same collection,<br>we can index our collections more efficiently.<br>&nbsp; As you can see, there are sound reasons for creating a schema and for grouping related<br>types of documents together. MongoDB just relaxes this requirement and allows de-<br>velopers more flexibility.<br><br>7. Naming<br>A collection is identified by its name. Collection names can be any UTF-8 string, with<br>a few restrictions:<br>7.1 The empty string ("") is not a valid collection name.<br>7.2 Collection names may not contain the character \0 (the null character) because<br>this delineates the end of a collection name.<br>7.3 You should not create any collections that start with system., a prefix reserved for<br>system collections. For example, the&nbsp; system.users collection contains the database’s<br>users, and the system.namespaces collection contains information about all of the<br>database’s collections.<br>7.4 User-created collections should not contain the reserved character $ in the name.<br>The various drivers available for the database do support using $ in collection<br>names because some system-generated collections contain it. You should not use<br>$ in a name unless you are accessing one of these collections.<br><br>8. Subcollections<br>One convention for organizing collections is to use namespaced subcollections sepa-<br>rated by the . character. For example, an application containing a blog might have a<br>collection named blog.posts and a separate collection named blog.authors. This is for<br>organizational purposes only―there is no relationship between the blog collection (it<br>doesn’t even have to exist) and its “children.”<br>Although subcollections do not have any special properties, they are useful and incor-<br>porated into many MongoDB tools:<br>8.1 GridFS, a protocol for storing large files, uses subcollections to store file metadata<br>separately from content chunks <br>8.2 The MongoDB web console organizes the data in its DBTOP section by<br>subcollection <br>8.3 Most drivers provide some syntactic sugar for accessing a subcollection of a given<br>collection. For example, in the database shell, db.blog will give you the blog col-<br>lection, and db.blog.posts will give you the blog.posts collection.<br>&nbsp; Subcollections are a great way to organize data in MongoDB, and their use is highly<br>recommended.<br>有点类似PostgreSQL中，表继承的概念.<br><br>9. Databases<br>In addition to grouping documents by collection, MongoDB groups collections&nbsp; into<br>databases. A single instance of MongoDB can host several databases, each of which can<br>be thought of as completely independent. A database has its own permissions, and each<br>database is stored in separate files on disk. A good rule of thumb is to store all data for<br>a single application in the same database. Separate databases are useful when storing<br>data for several application or users on the same MongoDB server.<br>Like collections, databases are identified by name. Database names can be any UTF-8<br>string, with the following restrictions:<br>9.1 The empty string ("") is not a valid database name.<br>9.2 A database name cannot contain any of these characters: ' ' (a single space), ., $, /,<br>\, or \0 (the null character).<br>9.3 Database names should be all lowercase.<br>9.4 Database names are limited to a maximum of 64 bytes.<br>One thing to remember about database names is that they will actually end up as files<br>on your filesystem. This explains why many of the previous restrictions exist in the first<br>place.<br>9.5 There are also several reserved database names, which you can access directly but have<br>special semantics. These are as follows:<br>admin<br>This&nbsp; is the “root” database,&nbsp; in terms of authentication. If a user&nbsp; is added to the<br>admin database, the user automatically inherits permissions for all databases.<br>There are also certain server-wide commands that can be run only from the ad-<br>min database, such as listing all of the databases or shutting down the server.<br>local<br>This database will never be replicated and can be used to store any collections that<br>should be local to a single server .<br>config<br>When Mongo is being used in a sharded setup , the config database<br>is used internally to store information about the shards.<br>By prepending a collection’s name with its containing database, you can get a fully<br>qualified collection name called a&nbsp; namespace.&nbsp; For&nbsp; instance,&nbsp; if&nbsp; you&nbsp; are&nbsp; using&nbsp; the<br>blog.posts collection in the cms database, the namespace of that collection would be<br>cms.blog.posts. Namespaces are limited to 121 bytes in length and, in practice, should<br>be less than 100 bytes long.</div>
	</div>
</div>
</body>
</html>