<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL How to parser user input to internal type - for exp. tinterval</h2>
	<h5 id="">2015-05-27 14:06:05&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402015427113441483/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>PostgreSQL支持的类型众多，对于常用的类型例如字符串，数字。我们在输入值时很好解决，但是当数据类型比较复杂时，应该如何书写，数据库才能正常的接收用户的输入呢？</div><div>比如我们可能会遇到输入语法错误的报错，使用<span style="line-height: 28px;"   >\set VERBOSITY verbose可以显示报错代码，根据代码去找问题。</span></div><div><span style="line-height: 28px;"   >例如：</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres=# \set VERBOSITY verbose</font></div><div><div><font size="2"   >postgres=# select interval '1 a';</font></div><div><font size="2"   >ERROR: &nbsp;22007: invalid input syntax for type interval: "1 a"</font></div><div><font size="2"   >LINE 1: select interval '1 a';</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^</font></div><div><font size="2"   >LOCATION: &nbsp;DateTimeParseError, datetime.c:3794</font></div></div><p></p></pre></div><div>这个报错来自<span style="line-height: 28px;"   >datetime.c, 解析用户输入时语法不合规。</span></div><div><span style="line-height: 28px;"   ><br></span></div><div><span style="line-height: 28px;"   >其实PostgreSQL大多数的类型都带了in和out函数，分别表示用户输入转换为内部类型，内部类型转换为用户看到的表述。</span></div><div><span style="line-height: 28px;"   >例如：</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >&nbsp;pg_catalog | interval_out &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| cstring &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | interval</font></div><div><font size="2"   >&nbsp;pg_catalog | interval_in &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | interval &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| cstring, oid, integer&nbsp;</font></div><p></p></pre></div><div><span style="line-height: 28px;"   >interval_in &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="line-height: 28px;"   >&nbsp;</span>对应：</div><div>src/backend/utils/adt/timestamp.c</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >/* interval_in()</font></div><div><font size="2"   >&nbsp;* Convert a string to internal form.</font></div><div><font size="2"   >&nbsp;*</font></div><div><font size="2"   >&nbsp;* External format(s):</font></div><div><font size="2"   >&nbsp;* &nbsp; &nbsp; &nbsp;Uses the generic date/time parsing and decoding routines.</font></div><div><font size="2"   >&nbsp;*/</font></div><div><font size="2"   >Datum</font></div><div><font size="2"   >interval_in(PG_FUNCTION_ARGS)</font></div><div><font size="2"   >{</font></div></div><div><font size="2"   >。。。</font></div><div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; dterr = ParseDateTime(str, workbuf, sizeof(workbuf), field,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ftype, MAXDATEFIELDS, &amp;nf);</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (dterr == 0)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dterr = DecodeInterval(field, ftype, nf, range,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&amp;dtype, tm, &amp;fsec);</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* if those functions think it's a bad format, try ISO8601 style */</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (dterr == DTERR_BAD_FORMAT)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dterr = DecodeISO8601Interval(str,</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;dtype, tm, &amp;fsec);</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (dterr != 0)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; {</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (dterr == DTERR_FIELD_OVERFLOW)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dterr = DTERR_INTERVAL_OVERFLOW;</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DateTimeParseError(dterr, str, "interval");</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div></div><div><font size="2"   >。。。</font></div><p></p></pre></div><div><span style="line-height: 28px;"   >src/backend/utils/adt 这里包含了所有类型的内部函数。</span></div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >acl.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; encode.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jsonb_util.c &nbsp; &nbsp; &nbsp; &nbsp;oid.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ri_triggers.c &nbsp; &nbsp; &nbsp;tsvector.c</font></div><div><font size="2"   >array_expanded.c &nbsp; &nbsp;enum.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;json.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;oracle_compat.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rowtypes.c &nbsp; &nbsp; &nbsp; &nbsp; tsvector_op.c</font></div><div><font size="2"   >arrayfuncs.c &nbsp; &nbsp; &nbsp; &nbsp;expandeddatum.c &nbsp; jsonfuncs.c &nbsp; &nbsp; &nbsp; &nbsp; orderedsetaggs.c &nbsp; &nbsp; &nbsp; &nbsp; ruleutils.c &nbsp; &nbsp; &nbsp; &nbsp;tsvector_parser.c</font></div><div><font size="2"   >array_selfuncs.c &nbsp; &nbsp;float.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; levenshtein.c &nbsp; &nbsp; &nbsp; pg_locale.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;selfuncs.c &nbsp; &nbsp; &nbsp; &nbsp; txid.c</font></div><div><font size="2"   >array_typanalyze.c &nbsp;formatting.c &nbsp; &nbsp; &nbsp;like.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pg_lsn.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tid.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;uuid.c</font></div><div><font size="2"   >array_userfuncs.c &nbsp; format_type.c &nbsp; &nbsp; like_match.c &nbsp; &nbsp; &nbsp; &nbsp;pgstatfuncs.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;timestamp.c &nbsp; &nbsp; &nbsp; &nbsp;varbit.c</font></div><div><font size="2"   >arrayutils.c &nbsp; &nbsp; &nbsp; &nbsp;genfile.c &nbsp; &nbsp; &nbsp; &nbsp; lockfuncs.c &nbsp; &nbsp; &nbsp; &nbsp; pg_upgrade_support.c &nbsp; &nbsp; trigfuncs.c &nbsp; &nbsp; &nbsp; &nbsp;varchar.c</font></div><div><font size="2"   >ascii.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; geo_ops.c &nbsp; &nbsp; &nbsp; &nbsp; mac.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pseudotypes.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tsginidx.c &nbsp; &nbsp; &nbsp; &nbsp; varlena.c</font></div><div><font size="2"   >bool.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;geo_selfuncs.c &nbsp; &nbsp;misc.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;quote.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tsgistidx.c &nbsp; &nbsp; &nbsp; &nbsp;version.c</font></div><div><font size="2"   >cash.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;inet_cidr_ntop.c &nbsp;nabstime.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rangetypes.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tsquery.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;windowfuncs.c</font></div><div><font size="2"   >char.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;inet_net_pton.c &nbsp; name.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rangetypes_gist.c &nbsp; &nbsp; &nbsp; &nbsp;tsquery_cleanup.c &nbsp;xid.c</font></div><div><font size="2"   >date.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;int8.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;network.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rangetypes_selfuncs.c &nbsp; &nbsp;tsquery_gist.c &nbsp; &nbsp; xml.c</font></div><div><font size="2"   >datetime.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;int.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; network_gist.c &nbsp; &nbsp; &nbsp;rangetypes_spgist.c &nbsp; &nbsp; &nbsp;tsquery_op.c</font></div><div><font size="2"   >datum.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsonb.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; network_selfuncs.c &nbsp;rangetypes_typanalyze.c &nbsp;tsquery_rewrite.c</font></div><div><font size="2"   >dbsize.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;jsonb_gin.c &nbsp; &nbsp; &nbsp; numeric.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; regexp.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tsquery_util.c</font></div><div><font size="2"   >domains.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; jsonb_op.c &nbsp; &nbsp; &nbsp; &nbsp;numutils.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;regproc.c &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tsrank.c</font></div><p></p></pre></div><div>又比如今天群里一位兄弟提到的tinterval类型，不知道怎么输入。</div><div>我们可以在这里找到对应的转换函数：</div><div><div style="line-height: 28px;"   >src/backend/utils/adt/nabstime.c</div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><font size="2"   >/*</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tintervalin &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - converts an tinterval string to internal format</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;*/</font></div><div style="line-height: 28px;"   ><font size="2"   >Datum</font></div><div style="line-height: 28px;"   ><font size="2"   >tintervalin(PG_FUNCTION_ARGS)</font></div><div style="line-height: 28px;"   ><font size="2"   >{</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; char &nbsp; &nbsp; &nbsp; *tintervalstr = PG_GETARG_CSTRING(0);</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; TimeInterval tinterval;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; AbsoluteTime i_start,</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i_end,</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; t1,</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; t2;</font></div><div style="line-height: 28px;"   ><font size="2"   ><br style="line-height: 28px;"   ></font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; parsetinterval(tintervalstr, &amp;t1, &amp;t2);</font></div><div style="line-height: 28px;"   ><font size="2"   ><br style="line-height: 28px;"   ></font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; tinterval = (TimeInterval) palloc(sizeof(TimeIntervalData));</font></div><div style="line-height: 28px;"   ><font size="2"   ><br style="line-height: 28px;"   ></font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (t1 == INVALID_ABSTIME || t2 == INVALID_ABSTIME)</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tinterval-&gt;status = T_INTERVAL_INVAL; &nbsp; /* undefined &nbsp;*/</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; else</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tinterval-&gt;status = T_INTERVAL_VALID;</font></div><div style="line-height: 28px;"   ><font size="2"   ><br style="line-height: 28px;"   ></font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; i_start = ABSTIMEMIN(t1, t2);</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; i_end = ABSTIMEMAX(t1, t2);</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; tinterval-&gt;data[0] = i_start;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; tinterval-&gt;data[1] = i_end;</font></div><div style="line-height: 28px;"   ><font size="2"   ><br style="line-height: 28px;"   ></font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; PG_RETURN_TIMEINTERVAL(tinterval);</font></div><div style="line-height: 28px;"   ><font size="2"   >}</font></div><p></p></pre></div></div><div style="line-height: 28px;"   >输入解析如下：</div><div style="line-height: 28px;"   >对应格式 ["时间" "时间"]</div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><font size="2"   >/*</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;parsetinterval -- parse a tinterval string</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;*</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;output parameters:</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;i_start, i_end: tinterval margins</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;*</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Time interval:</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;`[' {` '} `'' &lt;AbsTime&gt; `'' {` '} `'' &lt;AbsTime&gt; `'' {` '} `]'</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;*</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;OR &nbsp; &nbsp; &nbsp;`Undefined Range' &nbsp; &nbsp; &nbsp; (see also INVALID_INTERVAL_STR)</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;*</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;where &lt;AbsTime&gt; satisfies the syntax of absolute time.</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;*</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;* &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;e.g. &nbsp;[ &nbsp;' &nbsp;Jan 18 1902' &nbsp; 'Jan 1 00:00:00 1970']</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;*/</font></div><div style="line-height: 28px;"   ><font size="2"   >static void</font></div><div style="line-height: 28px;"   ><font size="2"   >parsetinterval(char *i_string,</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AbsoluteTime *i_start,</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;AbsoluteTime *i_end)</font></div><div style="line-height: 28px;"   ><font size="2"   >{</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; char &nbsp; &nbsp; &nbsp; *p,</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*p1;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; char &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;c;</font></div><div style="line-height: 28px;"   ><font size="2"   ><br style="line-height: 28px;"   ></font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; p = i_string;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* skip leading blanks up to '[' */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; while ((c = *p) != '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; {</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (IsSpace(c))</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p++;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (c != '[')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* syntax error */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (c == '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* syntax error */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; p++;</font></div></div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* skip leading blanks up to '"' */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; while ((c = *p) != '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; {</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (IsSpace(c))</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p++;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (c != '"')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* syntax error */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (c == '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* syntax error */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; p++;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (strncmp(INVALID_INTERVAL_STR, p, strlen(INVALID_INTERVAL_STR)) == 0)</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* undefined range, handled like a syntax err. */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* search for the end of the first date and change it to a \0 */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; p1 = p;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; while ((c = *p1) != '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; {</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (c == '"')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p1++;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (c == '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* syntax error */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; *p1 = '\0';</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* get the first date */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; *i_start = DatumGetAbsoluteTime(DirectFunctionCall1(abstimein,</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CStringGetDatum(p)));</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* undo change to \0 */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; *p1 = c;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; p = ++p1;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* skip blanks up to '"', beginning of second date */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; while ((c = *p) != '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; {</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (IsSpace(c))</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p++;</font></div></div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (c != '"')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* syntax error */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (c == '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* syntax error */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; p++;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* search for the end of the second date and change it to a \0 */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; p1 = p;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; while ((c = *p1) != '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; {</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (c == '"')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p1++;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (c == '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* syntax error */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; *p1 = '\0';</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* get the second date */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; *i_end = DatumGetAbsoluteTime(DirectFunctionCall1(abstimein,</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CStringGetDatum(p)));</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* undo change to \0 */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; *p1 = c;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; p = ++p1;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* skip blanks up to ']' */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; while ((c = *p) != '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; {</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (IsSpace(c))</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p++;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (c != ']')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* syntax error */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; }</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (c == '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* syntax error */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; p++;</font></div></div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; c = *p;</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; if (c != '\0')</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; goto bogus; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* syntax error */</font></div><div style="line-height: 28px;"   ><font size="2"   ><br style="line-height: 28px;"   ></font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; /* it seems to be a valid tinterval */</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; return;</font></div><div style="line-height: 28px;"   ><font size="2"   ><br style="line-height: 28px;"   ></font></div><div style="line-height: 28px;"   ><font size="2"   >bogus:</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; ereport(ERROR,</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (errcode(ERRCODE_INVALID_DATETIME_FORMAT),</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;errmsg("invalid input syntax for type tinterval: \"%s\"",</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i_string)));</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; *i_start = *i_end = INVALID_ABSTIME; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/* keep compiler quiet */</font></div><div style="line-height: 28px;"   ><font size="2"   >}</font></div></div><p></p></pre></div></div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   >例子：</div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><pre class="prettyprint"   ><p></p><div><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><div style="line-height: 28px;"   ><font size="2"   >postgres=# select tinterval '["2014-01-01" "2014-01-02"]';</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tinterval &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div style="line-height: 28px;"   ><font size="2"   >-----------------------------------------------------</font></div><div style="line-height: 28px;"   ><font size="2"   >&nbsp;["2014-01-01 00:00:00+08" "2014-01-02 00:00:00+08"]</font></div><div style="line-height: 28px;"   ><font size="2"   >(1 row)</font></div></div></div></div><div><div><font size="2"   >postgres=# create table t(c1 tinterval);</font></div><div><font size="2"   >CREATE TABLE</font></div></div><div><div><font size="2"   >postgres=# insert into t values ( '["2014-01-01" "2014-01-02"]' );</font></div><div><font size="2"   >INSERT 0 1</font></div></div><p></p></pre></div></div></div></div><div>你也可以去回归测试中寻找例子：</div><div>src/test/regress/expected/tinterval.out&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >--</font></div><div><font size="2"   >-- TINTERVAL</font></div><div><font size="2"   >--</font></div><div><font size="2"   >CREATE TABLE TINTERVAL_TBL (f1 &nbsp;tinterval);</font></div><div><font size="2"   >-- Should accept any abstime,</font></div><div><font size="2"   >-- so do not bother with extensive testing of values</font></div><div><font size="2"   >INSERT INTO TINTERVAL_TBL (f1)</font></div><div><font size="2"   >&nbsp; &nbsp;VALUES ('["-infinity" "infinity"]');</font></div><div><font size="2"   >INSERT INTO TINTERVAL_TBL (f1)</font></div><div><font size="2"   >&nbsp; &nbsp;VALUES ('["May 10, 1947 23:59:12" "Jan 14, 1973 03:14:21"]');</font></div><div><font size="2"   >INSERT INTO TINTERVAL_TBL (f1)</font></div><div><font size="2"   >&nbsp; &nbsp;VALUES ('["Sep 4, 1983 23:59:12" "Oct 4, 1983 23:59:12"]');</font></div><div><font size="2"   >INSERT INTO TINTERVAL_TBL (f1)</font></div><div><font size="2"   >&nbsp; &nbsp;VALUES ('["epoch" "Mon May &nbsp;1 00:30:30 1995"]');</font></div><div><font size="2"   >INSERT INTO TINTERVAL_TBL (f1)</font></div><div><font size="2"   >&nbsp; &nbsp;VALUES ('["Feb 15 1990 12:15:03" "2001-09-23 11:12:13"]');</font></div><div><font size="2"   >-- badly formatted tintervals</font></div><div><font size="2"   >INSERT INTO TINTERVAL_TBL (f1)</font></div><div><font size="2"   >&nbsp; &nbsp;VALUES ('["bad time specifications" ""]');</font></div><div><font size="2"   >ERROR: &nbsp;invalid input syntax for type abstime: "bad time specifications"</font></div><div><font size="2"   >LINE 2: &nbsp; &nbsp;VALUES ('["bad time specifications" ""]');</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^</font></div><div><font size="2"   >INSERT INTO TINTERVAL_TBL (f1)</font></div><div><font size="2"   >&nbsp; &nbsp;VALUES ('["" "infinity"]');</font></div><div><font size="2"   >ERROR: &nbsp;invalid input syntax for type abstime: ""</font></div><div><font size="2"   >LINE 2: &nbsp; &nbsp;VALUES ('["" "infinity"]');</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^</font></div><div><font size="2"   >-- test tinterval operators</font></div><div><font size="2"   >SELECT '' AS five, * FROM TINTERVAL_TBL;</font></div><div><font size="2"   >&nbsp;five | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</font></div><div><font size="2"   >------+-----------------------------------------------------------------</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; | ["-infinity" "infinity"]</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; | ["Sat May 10 23:59:12 1947 PST" "Sun Jan 14 03:14:21 1973 PST"]</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; | ["Sun Sep 04 23:59:12 1983 PDT" "Tue Oct 04 23:59:12 1983 PDT"]</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; | ["Wed Dec 31 16:00:00 1969 PST" "Mon May 01 00:30:30 1995 PDT"]</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; | ["Thu Feb 15 12:15:03 1990 PST" "Sun Sep 23 11:12:13 2001 PDT"]</font></div><div><font size="2"   >(5 rows)</font></div></div><div><font size="2"   >......</font></div><p></p></pre></div><div><br></div><div>tinterval和tsrange, tstzrange 有点类似。</div><div>gin索引实现了它的一些操作符。</div><div><table border="1"   style="margin: 2ex 0px 2ex 2ex; -webkit-box-shadow: rgb(223, 223, 223) 3px 3px 5px; box-shadow: rgb(223, 223, 223) 3px 3px 5px; border-spacing: 0px; border-collapse: collapse; border: 2px solid rgb(167, 198, 223); color: rgb(0, 0, 0); font-family: verdana, sans-serif; font-size: 12.1599998474121px; line-height: normal; background-color: rgb(224, 236, 239);"   ><tbody><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>_tinterval_ops</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>tinterval[]</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>&amp;&amp;</tt>&nbsp;<tt>&lt;@</tt>&nbsp;<tt>=</tt>&nbsp;<tt>@&gt;</tt></td></tr></table></div><div><br></div><div>tinterval支持的操作符或函数如下：</div><div><pre class="prettyprint"   ><p></p><div><div><font size="2"   >DATA(insert OID = 572 ( &nbsp;"~=" &nbsp; &nbsp; &nbsp;PGNSP PGUID b f f 704 704 &nbsp; &nbsp;16 572 &nbsp; 0 tintervalsame eqsel eqjoinsel ));</font></div><div><font size="2"   >DESCR("same as");</font></div><div><font size="2"   >DATA(insert OID = 573 ( &nbsp;"&lt;&lt;" &nbsp; &nbsp; &nbsp;PGNSP PGUID b f f 704 704 &nbsp; &nbsp;16 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; 0 tintervalct - - ));</font></div><div><font size="2"   >DESCR("contains");</font></div><div><font size="2"   >DATA(insert OID = 574 ( &nbsp;"&amp;&amp;" &nbsp; &nbsp; &nbsp;PGNSP PGUID b f f 704 704 &nbsp; &nbsp;16 574 &nbsp; 0 tintervalov - - ));</font></div><div><font size="2"   >DESCR("overlaps");</font></div><div><font size="2"   >DATA(insert OID = 575 ( &nbsp;"#=" &nbsp; &nbsp; &nbsp;PGNSP PGUID b f f 704 703 &nbsp; &nbsp;16 &nbsp; &nbsp; &nbsp; 0 576 tintervalleneq - - ));</font></div><div><font size="2"   >DESCR("equal by length");</font></div><div><font size="2"   >DATA(insert OID = 576 ( &nbsp;"#&lt;&gt;" &nbsp; &nbsp; PGNSP PGUID b f f 704 703 &nbsp; &nbsp;16 &nbsp; &nbsp; &nbsp; 0 575 tintervallenne - - ));</font></div><div><font size="2"   >DESCR("not equal by length");</font></div><div><font size="2"   >DATA(insert OID = 577 ( &nbsp;"#&lt;" &nbsp; &nbsp; &nbsp;PGNSP PGUID b f f 704 703 &nbsp; &nbsp;16 &nbsp; &nbsp; &nbsp; 0 580 tintervallenlt - - ));</font></div><div><font size="2"   >DESCR("less than by length");</font></div><div><font size="2"   >DATA(insert OID = 578 ( &nbsp;"#&gt;" &nbsp; &nbsp; &nbsp;PGNSP PGUID b f f 704 703 &nbsp; &nbsp;16 &nbsp; &nbsp; &nbsp; 0 579 tintervallengt - - ));</font></div><div><font size="2"   >DESCR("greater than by length");</font></div><div><font size="2"   >DATA(insert OID = 579 ( &nbsp;"#&lt;=" &nbsp; &nbsp; PGNSP PGUID b f f 704 703 &nbsp; &nbsp;16 &nbsp; &nbsp; &nbsp; 0 578 tintervallenle - - ));</font></div><div><font size="2"   >DESCR("less than or equal by length");</font></div><div><font size="2"   >DATA(insert OID = 580 ( &nbsp;"#&gt;=" &nbsp; &nbsp; PGNSP PGUID b f f 704 703 &nbsp; &nbsp;16 &nbsp; &nbsp; &nbsp; 0 577 tintervallenge - - ));</font></div><div><font size="2"   >DESCR("greater than or equal by length");</font></div></div><div><div><font size="2"   >DATA(insert OID = 583 ( &nbsp;"&lt;?&gt;" &nbsp; &nbsp; PGNSP PGUID b f f 702 704 &nbsp; &nbsp;16 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; 0 intinterval - - ));</font></div><div><font size="2"   >DESCR("is contained by");</font></div></div><div><div><font size="2"   >DATA(insert OID = 1284 ( &nbsp;"|" &nbsp; &nbsp; &nbsp;PGNSP PGUID l f f &nbsp; &nbsp; 0 704 702 &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; 0 tintervalstart - - ));</font></div><div><font size="2"   >DESCR("start of interval");</font></div><div><font size="2"   >DATA(insert OID = 606 ( &nbsp;"&lt;#&gt;" &nbsp; &nbsp; PGNSP PGUID b f f 702 702 704 &nbsp; &nbsp; &nbsp; &nbsp; 0 &nbsp; &nbsp; &nbsp; 0 mktinterval - - ));</font></div><div><font size="2"   >DESCR("convert to tinterval");</font></div></div><div><div><font size="2"   >DATA(insert OID = 811 ( &nbsp;"=" &nbsp; &nbsp; &nbsp; PGNSP PGUID b t f 704 704 &nbsp; &nbsp;16 811 812 tintervaleq eqsel eqjoinsel ));</font></div><div><font size="2"   >DESCR("equal");</font></div><div><font size="2"   >DATA(insert OID = 812 ( &nbsp;"&lt;&gt;" &nbsp; &nbsp; &nbsp;PGNSP PGUID b f f 704 704 &nbsp; &nbsp;16 812 811 tintervalne neqsel neqjoinsel ));</font></div><div><font size="2"   >DESCR("not equal");</font></div><div><font size="2"   >DATA(insert OID = 813 ( &nbsp;"&lt;" &nbsp; &nbsp; &nbsp; PGNSP PGUID b f f 704 704 &nbsp; &nbsp;16 814 816 tintervallt scalarltsel scalarltjoinsel ));</font></div><div><font size="2"   >DESCR("less than");</font></div><div><font size="2"   >DATA(insert OID = 814 ( &nbsp;"&gt;" &nbsp; &nbsp; &nbsp; PGNSP PGUID b f f 704 704 &nbsp; &nbsp;16 813 815 tintervalgt scalargtsel scalargtjoinsel ));</font></div><div><font size="2"   >DESCR("greater than");</font></div><div><font size="2"   >DATA(insert OID = 815 ( &nbsp;"&lt;=" &nbsp; &nbsp; &nbsp;PGNSP PGUID b f f 704 704 &nbsp; &nbsp;16 816 814 tintervalle scalarltsel scalarltjoinsel ));</font></div><div><font size="2"   >DESCR("less than or equal");</font></div><div><font size="2"   >DATA(insert OID = 816 ( &nbsp;"&gt;=" &nbsp; &nbsp; &nbsp;PGNSP PGUID b f f 704 704 &nbsp; &nbsp;16 815 813 tintervalge scalargtsel scalargtjoinsel ));</font></div><div><font size="2"   >DESCR("greater than or equal");</font></div></div><p></p></pre></div><div><br></div><div>[参考]</div><div>1.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://www.postgresql.org/docs/9.4/static/xfunc-c.html"   >http://www.postgresql.org/docs/9.4/static/xfunc-c.html</a></div><div>数据库类型和C类型对应关系图</div><div><p style="font-size: 12.1599998474121px; line-height: 1.5em; margin: 1.2em 0em; font-family: verdana, sans-serif;"   >Table 35-1. Equivalent C Types for Built-in SQL Types</p><table border="1"   style="margin: 2ex 0px 2ex 2ex; -webkit-box-shadow: rgb(223, 223, 223) 3px 3px 5px; box-shadow: rgb(223, 223, 223) 3px 3px 5px; border-spacing: 0px; border-collapse: collapse; border: 2px solid rgb(167, 198, 223); color: rgb(0, 0, 0); font-family: verdana, sans-serif; font-size: 12.1599998474121px; line-height: normal; background-color: rgb(224, 236, 239);"   ><colgroup><col><col><col><thead><tr><th style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex;"   >SQL Type</th><th style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex;"   >C Type</th><th style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex;"   >Defined In</th></tr></thead><tbody><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>abstime</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>AbsoluteTime</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>utils/nabstime.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>boolean</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>bool</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt>&nbsp;(maybe compiler built-in)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>box</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>BOX*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>utils/geo_decls.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>bytea</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>bytea*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>"char"</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>char</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   >(compiler built-in)</td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>character</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>BpChar*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>cid</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>CommandId</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>date</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>DateADT</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>utils/date.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>smallint</tt>&nbsp;(<tt>int2</tt>)</td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>int16</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>int2vector</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>int2vector*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>integer</tt>&nbsp;(<tt>int4</tt>)</td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>int32</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>real</tt>&nbsp;(<tt>float4</tt>)</td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>float4*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>double precision</tt>&nbsp;(<tt>float8</tt>)</td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>float8*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>interval</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>Interval*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>datatype/timestamp.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>lseg</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>LSEG*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>utils/geo_decls.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>name</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>Name</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>oid</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>Oid</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>oidvector</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>oidvector*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>path</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>PATH*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>utils/geo_decls.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>point</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>POINT*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>utils/geo_decls.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>regproc</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>regproc</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>reltime</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>RelativeTime</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>utils/nabstime.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>text</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>text*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>tid</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>ItemPointer</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>storage/itemptr.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>time</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>TimeADT</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>utils/date.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>time with time zone</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>TimeTzADT</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>utils/date.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>timestamp</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>Timestamp*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>datatype/timestamp.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>tinterval</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>TimeInterval</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>utils/nabstime.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>varchar</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>VarChar*</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr><tr><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>xid</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>TransactionId</tt></td><td style="border: 1px solid rgb(167, 198, 223); padding: 0.5ex; background-color: rgb(255, 255, 255);"   ><tt>postgres.h</tt></td></tr></table></div><div>2. src/test/regress/expected/tinterval.out</div>3. src/include/utils/nabstime.h<div>&nbsp;
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="PostgreSQL How to parser user input to internal type - for exp. tinterval - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a><br></div></div>
	</div>
</div>
</body>
</html>