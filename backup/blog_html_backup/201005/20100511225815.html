<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">PostgreSQL数据可靠性机制</h2>
	<h5 id="">2010-05-11 22:58:15&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402010411105815686/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><P style="TEXT-INDENT: 2em;"  >Reliability is an important property of any serious database system, and&nbsp;PostgreSQL&nbsp;does everything possible to guarantee reliable operation. One aspect of reliable operation is that all data recorded by a committed transaction should be stored in a nonvolatile area that is safe from power loss, operating system failure, and hardware failure (except failure of the nonvolatile area itself, of course). Successfully writing the data to the computer’s permanent storage (disk drive or equivalent) ordinarily meets this requirement. In fact, even if a computer is fatally damaged, if the disk drives survive they can be moved to another computer with similar hardware and all committed transactions will remain intact.</P>  <P style="TEXT-INDENT: 2em;"  >While forcing data periodically to the disk platters might seem like a simple operation, it is not. Because disk drives are dramatically slower than main memory and CPUs, several layers of caching exist between the computer’s main memory and the disk platters. First, there is the operating system’s buffer cache, which caches frequently requested disk blocks and combines disk writes. Fortunately, all operating systems give applications a way to force writes from the buffer cache to disk, and&nbsp;PostgreSQL&nbsp;uses those features. (See the&nbsp;<A rel="nofollow" href="http://www.postgresql.org/docs/8.4/static/runtime-config-wal.html#GUC-WAL-SYNC-METHOD"  >wal_sync_method</A>&nbsp;parameter to adjust how this is done.)</P>  <P style="TEXT-INDENT: 2em;"  >Next, there might be a cache in the disk drive controller; this is particularly common on&nbsp;<A rel="nofollow" href="http://sg.torque.net/sg/sdparm.html"  >sdparm</A>&nbsp;to turn off&nbsp;<TT>WCE</TT>.) On&nbsp;Solaris&nbsp;the disk write cache is controlled by&nbsp;<A rel="nofollow" href="http://www.sun.com/bigadmin/content/submitted/format_utility.jsp"  ><TT>format -e</TT></A>. (The Solaris&nbsp;<A rel="nofollow" href="http://www.postgresql.org/docs/8.4/static/runtime-config-wal.html#GUC-FULL-PAGE-WRITES"  >full_page_writes</A>&nbsp;parameter.</P></div>
	</div>
</div>
</body>
</html>