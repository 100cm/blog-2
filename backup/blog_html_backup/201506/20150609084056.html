<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">Use InfiniBand RDMA split storage & compute</h2>
	<h5 id="">2015-06-09 8:40:56&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/16387704020155842613136/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>RDMA是一种特殊的协议，主要用于IB网络，高吞吐量，低延迟的远程存储访问。并且不需要耗费CPU时间，不需要在应用内存和内核内存直接拷贝数据。</div><div>一般可被用于大型的网络存储访问。或者有利于将计算资源和存储资源分离，使用RDMA提供低延迟和高吞吐量, 降低CPU开销。</div><div>下面是关于drma的介绍。</div><div><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px;"   >In&nbsp;</span><a title="Computing" style="color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px; background-image: none; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/Computing"   >computing</a><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px;"   >,&nbsp;</span><b style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px;"   >remote direct memory access</b><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px;"   >&nbsp;(</span><b style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px;"   >RDMA</b><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px;"   >) is a&nbsp;</span><a title="Direct memory access" style="text-decoration: none; color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px; background-image: none; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/Direct_memory_access"   >direct memory access</a><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px;"   >&nbsp;from the&nbsp;</span><a title="Main memory" style="text-decoration: none; color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px; background-image: none; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/Main_memory"   >memory</a><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px;"   >&nbsp;of one computer into that of another without involving either one's&nbsp;</span><a title="Operating system" style="text-decoration: none; color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px; background-image: none; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/Operating_system"   >operating system</a><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px;"   >. This permits high-throughput, low-</span><a title="Latency (engineering)" style="text-decoration: none; color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px; background-image: none; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/Latency_(engineering)"   >latency</a><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px;"   >&nbsp;networking, which is especially useful in massively parallel&nbsp;</span><a title="Computer cluster" style="text-decoration: none; color: rgb(11, 0, 128); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px; background-image: none; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;" rel="nofollow" href="http://en.wikipedia.org/wiki/Computer_cluster"   >computer clusters</a><span style="color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px; line-height: 22.3999996185303px;"   >.</span></div><div><p style="margin-top: 0.5em; margin-bottom: 0.5em; line-height: 22.3999996185303px; color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px;"   >RDMA supports&nbsp;<a title="Zero-copy" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Zero-copy"   >zero-copy</a>&nbsp;networking by enabling the&nbsp;<a title="Network adapter" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Network_adapter"   >network adapter</a>&nbsp;to transfer data directly to or from application memory, eliminating the need to copy data between application memory and the data buffers in the operating system. Such transfers require no work to be done by&nbsp;<a title="Central processing unit" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Central_processing_unit"   >CPUs</a>,&nbsp;<a title="CPU cache" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/CPU_cache"   >caches</a>, or&nbsp;<a title="Context switch" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Context_switch"   >context switches</a>, and transfers continue in parallel with other system operations. When an application performs an RDMA Read or Write request, the application data is delivered directly to the network, reducing latency and enabling fast message transfer.</p><p style="margin-top: 0.5em; margin-bottom: 0.5em; line-height: 22.3999996185303px; color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px;"   >However, this strategy presents several problems related to the fact that the target node is not notified of the completion of the request (1-sided communications).</p></div><div><p style="margin-top: 0.5em; margin-bottom: 0.5em; line-height: 22.3999996185303px; color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px;"   >Much like other&nbsp;<a title="High performance computing" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/High_performance_computing"   >high performance computing</a>&nbsp;(HPC) interconnects, RDMA has achieved limited acceptance as of 2013&nbsp;due to the need to install a different networking infrastructure. However, new standards<sup style="line-height: 1; font-size: 12px; white-space: nowrap;"   >[<i><a title="Wikipedia:Citing sources" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Wikipedia:Citing_sources"   ><span title="The text preceding this tag needs specification. (August 2013)"   >specify</span></a></i>]</sup>&nbsp;enable&nbsp;<a title="Ethernet" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Ethernet"   >Ethernet</a>&nbsp;RDMA implementation at the physical layer using&nbsp;<a title="Transmission Control Protocol" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Transmission_Control_Protocol"   >TCP</a>/<a title="Internet Protocol" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Internet_Protocol"   >IP</a>&nbsp;as the transport, thus combining the performance and latency advantages of RDMA with a low-cost, standards-based solution.<sup style="line-height: 1; font-size: 12px; white-space: nowrap;"   >[<i><a title="Wikipedia:Citation needed" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Wikipedia:Citation_needed"   ><span title="This claim needs references to reliable sources. (August 2013)"   >citation needed</span></a></i>]</sup>&nbsp;The RDMA Consortium and the DAT Collaborative<sup id="cite_ref-1"   style="line-height: 1; unicode-bidi: -webkit-isolate; font-size: 12px;"   ><a style="text-decoration: none; color: rgb(11, 0, 128); white-space: nowrap; background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Remote_direct_memory_access#cite_note-1"   >[1]</a></sup>&nbsp;have played key roles in the development of RDMA protocols and&nbsp;<a title="Application programming interface" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Application_programming_interface"   >APIs</a>&nbsp;for consideration by standards groups such as the&nbsp;<a title="Internet Engineering Task Force" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Internet_Engineering_Task_Force"   >Internet Engineering Task Force</a>&nbsp;and the Interconnect Software Consortium.<sup id="cite_ref-2"   style="line-height: 1; unicode-bidi: -webkit-isolate; font-size: 12px;"   ><a style="text-decoration: none; color: rgb(11, 0, 128); white-space: nowrap; background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Remote_direct_memory_access#cite_note-2"   >[2]</a></sup></p><p style="margin-top: 0.5em; margin-bottom: 0.5em; line-height: 22.3999996185303px; color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px;"   >Hardware vendors have started working on higher-capacity RDMA-based network adapters, with rates of 40Gbit/s reported.<sup id="cite_ref-3"   style="line-height: 1; unicode-bidi: -webkit-isolate; font-size: 12px;"   ><a style="text-decoration: none; color: rgb(11, 0, 128); white-space: nowrap; background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Remote_direct_memory_access#cite_note-3"   >[3]</a></sup><sup id="cite_ref-4"   style="line-height: 1; unicode-bidi: -webkit-isolate; font-size: 12px;"   ><a style="text-decoration: none; color: rgb(11, 0, 128); white-space: nowrap; background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Remote_direct_memory_access#cite_note-4"   >[4]</a></sup>&nbsp;Software vendors such as&nbsp;<a title="Red Hat" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Red_Hat"   >Red Hat</a>&nbsp;and&nbsp;<a title="Oracle Corporation" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Oracle_Corporation"   >Oracle Corporation</a>&nbsp;support these APIs in their latest products, and as of 2013&nbsp;engineers have started developing network adapters that implement&nbsp;<a rel="nofollow" href="http://www.prnewswire.com/news-releases/chelsio-and-microsoft-collaborate-to-showcase-iwarp-rdma-over-40g-metro-ethernet-with-windows-server-storage-replica-300078167.html"   >RDMA over Ethernet</a>. Both&nbsp;<a title="Red Hat Enterprise Linux" style="color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Red_Hat_Enterprise_Linux"   >Red Hat Enterprise Linux</a>&nbsp;and&nbsp;<a title="Red Hat Enterprise MRG" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Red_Hat_Enterprise_MRG"   >Red Hat Enterprise MRG</a><sup id="cite_ref-5"   style="line-height: 1; unicode-bidi: -webkit-isolate; font-size: 12px;"   ><a style="text-decoration: none; color: rgb(11, 0, 128); white-space: nowrap; background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Remote_direct_memory_access#cite_note-5"   >[5]</a></sup>&nbsp;have support for RDMA. Microsoft supports RDMA in Windows Server 2012 via&nbsp;<a title="Server Message Block" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Server_Message_Block"   >SMB Direct</a>.</p><p style="margin-top: 0.5em; margin-bottom: 0.5em; line-height: 22.3999996185303px; color: rgb(37, 37, 37); font-family: sans-serif; font-size: 14px;"   >Common RDMA implementations include the&nbsp;<a title="Virtual Interface Architecture" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Virtual_Interface_Architecture"   >Virtual Interface Architecture</a>,&nbsp;<a title="RDMA over Converged Ethernet" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/RDMA_over_Converged_Ethernet"   >RDMA over Converged Ethernet</a>&nbsp;(RoCE),<sup id="cite_ref-6"   style="line-height: 1; unicode-bidi: -webkit-isolate; font-size: 12px;"   ><a style="text-decoration: none; color: rgb(11, 0, 128); white-space: nowrap; background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/Remote_direct_memory_access#cite_note-6"   >[6]</a></sup>&nbsp;<a title="InfiniBand" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/InfiniBand"   >InfiniBand</a>, and&nbsp;<a title="IWARP" style="text-decoration: none; color: rgb(11, 0, 128); background: none;" rel="nofollow" href="http://en.wikipedia.org/wiki/IWARP"   >iWARP</a>.</p></div><div>如果你的系统中有支持RDMA的适配器，你可以尝试使用它，例如从Red Hat 6开始支持NFS over RDMA。</div><div>这是一种对应用透明的远程存储访问方法。</div><div>配置方法也很简单。</div><div><div style="box-sizing: border-box; widows: 4; orphans: 4; color: rgb(51, 51, 51); font-family: 'Open Sans', 'liberation sans', 'Myriad ', 'Bitstream Vera Sans', 'Lucida Grande', 'Luxi Sans', helvetica, verdana, arial, sans-serif; font-size: 15.3999996185303px; line-height: 21px;"   ><div style="box-sizing: border-box;"   ><div style="box-sizing: border-box;"   ><h3 style="box-sizing: border-box; font-family: Overpass, 'Open Sans', Helvetica, sans-serif; line-height: 1.94013rem; color: rgb(167, 0, 0); margin: 1em 0px 0.4em; text-rendering: auto; padding: 0px;"   >9.7.5.&nbsp;NFS over RDMA</h3></div></div></div><a id="idp2103384" style="box-sizing: border-box; widows: 4; orphans: 4; color: rgb(0, 136, 206); display: inline; position: absolute; width: 0px; height: 0px; overflow: hidden; font-family: 'Open Sans', 'liberation sans', 'Myriad ', 'Bitstream Vera Sans', 'Lucida Grande', 'Luxi Sans', helvetica, verdana, arial, sans-serif; font-size: 15.3999996185303px; line-height: 21px; background-color: transparent;" rel="nofollow"   ></a><a id="idp610304" style="box-sizing: border-box; widows: 4; orphans: 4; color: rgb(0, 136, 206); display: inline; position: absolute; width: 0px; height: 0px; overflow: hidden; font-family: 'Open Sans', 'liberation sans', 'Myriad ', 'Bitstream Vera Sans', 'Lucida Grande', 'Luxi Sans', helvetica, verdana, arial, sans-serif; font-size: 15.3999996185303px; line-height: 21px; background-color: transparent;" rel="nofollow"   ></a><div style="box-sizing: border-box; widows: 4; orphans: 4; margin-bottom: 1.8em; margin-top: 1em; padding-bottom: 0px; padding-top: 0px; color: rgb(51, 51, 51); font-family: 'Open Sans', 'liberation sans', 'Myriad ', 'Bitstream Vera Sans', 'Lucida Grande', 'Luxi Sans', helvetica, verdana, arial, sans-serif; font-size: 15.3999996185303px; line-height: 21px;"   >To enable the RDMA transport in the linux kernel NFS server, use the following procedure:</div><div xmlnsd="http://docbook.org/ns/docbook"   class="procedure"   style="box-sizing: border-box; widows: 4; orphans: 4; color: rgb(51, 51, 51); font-family: 'Open Sans', 'liberation sans', 'Myriad ', 'Bitstream Vera Sans', 'Lucida Grande', 'Luxi Sans', helvetica, verdana, arial, sans-serif; font-size: 15.3999996185303px; line-height: 21px;"   ><a id="idp611352" style="box-sizing: border-box; color: rgb(0, 136, 206); background-color: transparent;" rel="nofollow"   >?</a><p style="box-sizing: border-box; margin-top: 1em; margin-bottom: 1rem;"   ><strong style="box-sizing: border-box;"   >Procedure&nbsp;9.2.&nbsp;Enable RDMA from server</strong></p><ol style="box-sizing: border-box; margin-top: 1em; margin-bottom: 1em; margin-left: 0px; padding-left: 40px;"   ><li style="box-sizing: border-box; margin-top: 1em;"   ><div style="box-sizing: border-box; margin-bottom: 1.8em; margin-top: 1em; padding-bottom: 0px; padding-top: 0px;"   >Ensure the RDMA rpm is installed and the RDMA service is enabled with the following command:</div><pre style="box-sizing: border-box; overflow: auto; font-family: 'dejavu sans mono', 'liberation mono', 'bitstream vera mono', 'dejavu mono', monospace; font-size: 0.9em; padding: 15px; margin-bottom: 1.8em; line-height: 1.42857; word-break: normal; word-wrap: break-word; border: 1px solid rgb(26, 26, 26); border-radius: 0px; white-space: pre-wrap; page-break-inside: avoid; box-shadow: none; tab-size: 4; -webkit-box-shadow: none; color: rgb(240, 240, 240) !important; background: rgb(51, 51, 51);"   ><code style="box-sizing: border-box; font-family: 'dejavu sans mono', 'liberation mono', 'bitstream vera mono', 'dejavu mono', monospace; font-size: inherit; padding: 0px; color: inherit; border-radius: 0px; font-weight: bold; word-wrap: break-word; background-color: transparent;"   ># yum install rdma; chkconfig --level 2345 rdma on</code></pre></li><li style="box-sizing: border-box; margin-top: 1em;"   ><div style="box-sizing: border-box; margin-bottom: 1.8em; margin-top: 1em; padding-bottom: 0px; padding-top: 0px;"   >Ensure the package that provides the nfs-rdma service is installed and the service is enabled with the following command:</div><pre style="box-sizing: border-box; overflow: auto; font-family: 'dejavu sans mono', 'liberation mono', 'bitstream vera mono', 'dejavu mono', monospace; font-size: 0.9em; padding: 15px; margin-bottom: 1.8em; line-height: 1.42857; word-break: normal; word-wrap: break-word; border: 1px solid rgb(26, 26, 26); border-radius: 0px; white-space: pre-wrap; page-break-inside: avoid; box-shadow: none; tab-size: 4; -webkit-box-shadow: none; color: rgb(240, 240, 240) !important; background: rgb(51, 51, 51);"   ><code style="box-sizing: border-box; font-family: 'dejavu sans mono', 'liberation mono', 'bitstream vera mono', 'dejavu mono', monospace; font-size: inherit; padding: 0px; color: inherit; border-radius: 0px; font-weight: bold; word-wrap: break-word; background-color: transparent;"   ># yum install rdma; chkconfig --level 345 nfs-rdma on</code></pre></li><li style="box-sizing: border-box; margin-top: 1em;"   ><div style="box-sizing: border-box; margin-bottom: 1.8em; margin-top: 1em; padding-bottom: 0px; padding-top: 0px;"   >Ensure that the RDMA port is set to the preferred port (default for Red Hat Enterprise Linux&nbsp;6 is 2050). To do so, edit the&nbsp;<code style="box-sizing: border-box; font-family: 'dejavu sans mono', 'liberation mono', 'bitstream vera mono', 'dejavu mono', monospace; font-size: 13.8599996566772px; padding: 0px; color: inherit; border-radius: 0px; font-weight: bold; white-space: pre-wrap; word-wrap: break-word; display: inline-block; background-color: transparent;"   >/etc/rdma/rdma.conf</code>&nbsp;file to set NFSoRDMA_LOAD=yes and NFSoRDMA_PORT to the desired port.</div></li><li style="box-sizing: border-box; margin-top: 1em;"   ><div style="box-sizing: border-box; margin-bottom: 1.8em; margin-top: 1em; padding-bottom: 0px; padding-top: 0px;"   >Set up the exported filesystem as normal for NFS mounts.</div></li></ol></div><div style="box-sizing: border-box; widows: 4; orphans: 4; margin-bottom: 1.8em; margin-top: 1em; padding-bottom: 0px; padding-top: 0px; color: rgb(51, 51, 51); font-family: 'Open Sans', 'liberation sans', 'Myriad ', 'Bitstream Vera Sans', 'Lucida Grande', 'Luxi Sans', helvetica, verdana, arial, sans-serif; font-size: 15.3999996185303px; line-height: 21px;"   >On the client side, use the following procedure:</div><div xmlnsd="http://docbook.org/ns/docbook"   class="procedure"   style="box-sizing: border-box; widows: 4; orphans: 4; color: rgb(51, 51, 51); font-family: 'Open Sans', 'liberation sans', 'Myriad ', 'Bitstream Vera Sans', 'Lucida Grande', 'Luxi Sans', helvetica, verdana, arial, sans-serif; font-size: 15.3999996185303px; line-height: 21px;"   ><a id="idp4224016" style="box-sizing: border-box; color: rgb(0, 136, 206); background-color: transparent;" rel="nofollow"   >?</a><p style="box-sizing: border-box; margin-top: 1em; margin-bottom: 1rem;"   ><strong style="box-sizing: border-box;"   >Procedure&nbsp;9.3.&nbsp;Enable RDMA from client</strong></p><ol style="box-sizing: border-box; margin-top: 1em; margin-bottom: 1em; margin-left: 0px; padding-left: 40px;"   ><li style="box-sizing: border-box; margin-top: 1em;"   ><div style="box-sizing: border-box; margin-bottom: 1.8em; margin-top: 1em; padding-bottom: 0px; padding-top: 0px;"   >Ensure the RDMA rpm is installed and the RDMA service is enabled with the following command:</div><pre style="box-sizing: border-box; overflow: auto; font-family: 'dejavu sans mono', 'liberation mono', 'bitstream vera mono', 'dejavu mono', monospace; font-size: 0.9em; padding: 15px; margin-bottom: 1.8em; line-height: 1.42857; word-break: normal; word-wrap: break-word; border: 1px solid rgb(26, 26, 26); border-radius: 0px; white-space: pre-wrap; page-break-inside: avoid; box-shadow: none; tab-size: 4; -webkit-box-shadow: none; color: rgb(240, 240, 240) !important; background: rgb(51, 51, 51);"   ><code style="box-sizing: border-box; font-family: 'dejavu sans mono', 'liberation mono', 'bitstream vera mono', 'dejavu mono', monospace; font-size: inherit; padding: 0px; color: inherit; border-radius: 0px; font-weight: bold; word-wrap: break-word; background-color: transparent;"   ># yum install rdma; chkconfig --level 2345 rdma on</code></pre></li><li style="box-sizing: border-box; margin-top: 1em;"   ><div style="box-sizing: border-box; margin-bottom: 1.8em; margin-top: 1em; padding-bottom: 0px; padding-top: 0px;"   >Mount the NFS exported partition using the RDMA option on the mount call. The port option can optionally be added to the call.</div><pre style="box-sizing: border-box; overflow: auto; font-family: 'dejavu sans mono', 'liberation mono', 'bitstream vera mono', 'dejavu mono', monospace; font-size: 0.9em; padding: 15px; margin-bottom: 1.8em; line-height: 1.42857; word-break: normal; word-wrap: break-word; border: 1px solid rgb(26, 26, 26); border-radius: 0px; white-space: pre-wrap; page-break-inside: avoid; box-shadow: none; tab-size: 4; -webkit-box-shadow: none; color: rgb(240, 240, 240) !important; background: rgb(51, 51, 51);"   ><code style="box-sizing: border-box; font-family: 'dejavu sans mono', 'liberation mono', 'bitstream vera mono', 'dejavu mono', monospace; font-size: inherit; padding: 0px; color: inherit; border-radius: 0px; font-weight: bold; word-wrap: break-word; background-color: transparent;"   ># mount -t nfs -o rdma,port=<em style="box-sizing: border-box;"   >port_number</em></code></pre></li></ol></div></div><div>还有一种方法是使用SDP，也是对应用透明的。</div><div>可参考</div><div><a target="_blank" rel="nofollow" href="http://www.ibm.com/developerworks/cn/data/library/techarticle/dm-1207rdmasocketdirect/"   >http://www.ibm.com/developerworks/cn/data/library/techarticle/dm-1207rdmasocketdirect/</a></div><div><br></div>[参考]<wbr><div>1.&nbsp;<a target="_blank" rel="nofollow" href="https://www.kernel.org/doc/Documentation/filesystems/nfs/nfs-rdma.txt"   >https://www.kernel.org/doc/Documentation/filesystems/nfs/nfs-rdma.txt</a></div><div>2.&nbsp;<a target="_blank" rel="nofollow" href="http://service.chelsio.com/site-bin/readme.cgi?FILE=linux/rdma/nfs-rdma-howto.txt"   >http://service.chelsio.com/site-bin/readme.cgi?FILE=linux/rdma/nfs-rdma-howto.txt</a></div><div>3.&nbsp;<a target="_blank" rel="nofollow" href="http://pgsnaga.blogspot.hk/2012/01/postgresql-conference-2012-on-february.html"   >http://pgsnaga.blogspot.hk/2012/01/postgresql-conference-2012-on-february.html</a></div><div>4.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/part-InfiniBand_and_RDMA_Networking.html"   >https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/part-InfiniBand_and_RDMA_Networking.html</a></div><div>5.&nbsp;<a target="_blank" rel="nofollow" href="http://www.ibm.com/developerworks/cn/data/library/techarticle/dm-1207rdmasocketdirect/"   >http://www.ibm.com/developerworks/cn/data/library/techarticle/dm-1207rdmasocketdirect/</a></div><div>6.&nbsp;<a target="_blank" rel="nofollow" href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Storage_Administration_Guide/nfs-rdma.html"   >https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Storage_Administration_Guide/nfs-rdma.html</a></div><div>7.&nbsp;<a target="_blank" rel="nofollow" href="http://en.wikipedia.org/wiki/Remote_direct_memory_access"   >http://en.wikipedia.org/wiki/Remote_direct_memory_access</a></div><div>8.&nbsp;<a style="line-height: 28px;" target="_blank" rel="nofollow" href="http://docs.oracle.com/cd/E23824_01/html/821-1454/rfsrefer-154.html"   >http://docs.oracle.com/cd/E23824_01/html/821-1454/rfsrefer-154.html</a></div><div><br></div><div><a style="line-height: 28px;" rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="Use InfiniBand RDMA split storage  compute - 德哥@Digoal - PostgreSQL research"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div></div>
	</div>
</div>
</body>
</html>