<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">阿里云免费虚拟主机的iops测试</h2>
	<h5 id="">2013-12-19 17:07:54&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/163877040201311195623633/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>刚申请的阿里云免费虚拟主机, 先测试一下它的IOPS能力.&nbsp;</div><div>下次使用我以前写的PG性能优化里面的案例测试一下虚拟主机的TPS.</div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201221382150858/"   >http://blog.163.com/digoal@126/blog/static/163877040201221382150858/</a></div><div><a target="_blank" href="http://blog.163.com/digoal@126/blog/static/163877040201221333411196/"   >http://blog.163.com/digoal@126/blog/static/163877040201221333411196/</a></div><div>顺便对比一下阿里云提供的mysql的benchmark</div><div><a target="_blank" rel="nofollow" href="http://help.aliyun.com/manual?spm=0.0.0.0.4bt56g&amp;helpId=979"   >http://help.aliyun.com/manual?spm=0.0.0.0.4bt56g&amp;helpId=979</a></div><div>阿里云免费虚拟主机的配置:</div><div>CPU :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >root@AY131219095142824b87Z-&gt; cat /proc/cpuinfo&nbsp;</font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 0</font></div><div><font size="2"   >vendor_id &nbsp; &nbsp; &nbsp; : GenuineIntel</font></div><div><font size="2"   >cpu family &nbsp; &nbsp; &nbsp;: 6</font></div><div><font size="2"   >model &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 45</font></div><div><font size="2"   >model name &nbsp; &nbsp; &nbsp;: &nbsp; &nbsp; &nbsp; &nbsp;Intel(R) Xeon(R) CPU E5-2420 0 @ 1.90GHz</font></div><div><font size="2"   >stepping &nbsp; &nbsp; &nbsp; &nbsp;: 7</font></div><div><font size="2"   >cpu MHz &nbsp; &nbsp; &nbsp; &nbsp; : 1894.907</font></div><div><font size="2"   >cache size &nbsp; &nbsp; &nbsp;: 15360 KB</font></div><div><font size="2"   >physical id &nbsp; &nbsp; : 0</font></div><div><font size="2"   >siblings &nbsp; &nbsp; &nbsp; &nbsp;: 2</font></div><div><font size="2"   >core id &nbsp; &nbsp; &nbsp; &nbsp; : 0</font></div><div><font size="2"   >cpu cores &nbsp; &nbsp; &nbsp; : 2</font></div><div><font size="2"   >apicid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0</font></div><div><font size="2"   >fpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : yes</font></div><div><font size="2"   >fpu_exception &nbsp; : yes</font></div><div><font size="2"   >cpuid level &nbsp; &nbsp; : 13</font></div><div><font size="2"   >wp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: yes</font></div><div><font size="2"   >flags &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc pni ssse3 cx16 sse4_1 sse4_2 popcnt lahf_lm</font></div><div><font size="2"   >bogomips &nbsp; &nbsp; &nbsp; &nbsp;: 3789.81</font></div><div><font size="2"   >clflush size &nbsp; &nbsp;: 64</font></div><div><font size="2"   >cache_alignment : 64</font></div><div><font size="2"   >address sizes &nbsp; : 46 bits physical, 48 bits virtual</font></div><div><font size="2"   >power management:</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >processor &nbsp; &nbsp; &nbsp; : 1</font></div><div><font size="2"   >vendor_id &nbsp; &nbsp; &nbsp; : GenuineIntel</font></div><div><font size="2"   >cpu family &nbsp; &nbsp; &nbsp;: 6</font></div><div><font size="2"   >model &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 45</font></div><div><font size="2"   >model name &nbsp; &nbsp; &nbsp;: &nbsp; &nbsp; &nbsp; &nbsp;Intel(R) Xeon(R) CPU E5-2420 0 @ 1.90GHz</font></div><div><font size="2"   >stepping &nbsp; &nbsp; &nbsp; &nbsp;: 7</font></div><div><font size="2"   >cpu MHz &nbsp; &nbsp; &nbsp; &nbsp; : 1894.907</font></div><div><font size="2"   >cache size &nbsp; &nbsp; &nbsp;: 15360 KB</font></div><div><font size="2"   >physical id &nbsp; &nbsp; : 0</font></div><div><font size="2"   >siblings &nbsp; &nbsp; &nbsp; &nbsp;: 2</font></div><div><font size="2"   >core id &nbsp; &nbsp; &nbsp; &nbsp; : 1</font></div><div><font size="2"   >cpu cores &nbsp; &nbsp; &nbsp; : 2</font></div><div><font size="2"   >apicid &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 2</font></div><div><font size="2"   >fpu &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : yes</font></div><div><font size="2"   >fpu_exception &nbsp; : yes</font></div><div><font size="2"   >cpuid level &nbsp; &nbsp; : 13</font></div><div><font size="2"   >wp &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: yes</font></div><div><font size="2"   >flags &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc pni ssse3 cx16 sse4_1 sse4_2 popcnt lahf_lm</font></div><div><font size="2"   >bogomips &nbsp; &nbsp; &nbsp; &nbsp;: 3790.33</font></div><div><font size="2"   >clflush size &nbsp; &nbsp;: 64</font></div><div><font size="2"   >cache_alignment : 64</font></div><div><font size="2"   >address sizes &nbsp; : 46 bits physical, 48 bits virtual</font></div><div><font size="2"   >power management:</font></div><p></p></pre></div><div>MEM :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >root@AY131219095142824b87Z-&gt; cat /proc/meminfo&nbsp;</font></div><div><font size="2"   >MemTotal: &nbsp; &nbsp; &nbsp;1541188 kB</font></div><div><font size="2"   >MemFree: &nbsp; &nbsp; &nbsp; &nbsp; 86128 kB</font></div><div><font size="2"   >Buffers: &nbsp; &nbsp; &nbsp; &nbsp; 83416 kB</font></div><div><font size="2"   >Cached: &nbsp; &nbsp; &nbsp; &nbsp;1216620 kB</font></div><div><font size="2"   >SwapCached: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB</font></div><div><font size="2"   >Active: &nbsp; &nbsp; &nbsp; &nbsp; 367548 kB</font></div><div><font size="2"   >Inactive: &nbsp; &nbsp; &nbsp; 947120 kB</font></div><div><font size="2"   >HighTotal: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB</font></div><div><font size="2"   >HighFree: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB</font></div><div><font size="2"   >LowTotal: &nbsp; &nbsp; &nbsp;1541188 kB</font></div><div><font size="2"   >LowFree: &nbsp; &nbsp; &nbsp; &nbsp; 86128 kB</font></div><div><font size="2"   >SwapTotal: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB</font></div><div><font size="2"   >SwapFree: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB</font></div><div><font size="2"   >Dirty: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 132 kB</font></div><div><font size="2"   >Writeback: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB</font></div><div><font size="2"   >AnonPages: &nbsp; &nbsp; &nbsp; 14724 kB</font></div><div><font size="2"   >Mapped: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;21800 kB</font></div><div><font size="2"   >Slab: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 121188 kB</font></div><div><font size="2"   >PageTables: &nbsp; &nbsp; &nbsp; 5548 kB</font></div><div><font size="2"   >NFS_Unstable: &nbsp; &nbsp; &nbsp; &nbsp;0 kB</font></div><div><font size="2"   >Bounce: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB</font></div><div><font size="2"   >CommitLimit: &nbsp; &nbsp;770592 kB</font></div><div><font size="2"   >Committed_AS: &nbsp; 815480 kB</font></div><div><font size="2"   >VmallocTotal: 34359738367 kB</font></div><div><font size="2"   >VmallocUsed: &nbsp; &nbsp; &nbsp; 476 kB</font></div><div><font size="2"   >VmallocChunk: 34359737723 kB</font></div><div><font size="2"   >HugePages_Total: &nbsp; &nbsp; 0</font></div><div><font size="2"   >HugePages_Free: &nbsp; &nbsp; &nbsp;0</font></div><div><font size="2"   >HugePages_Rsvd: &nbsp; &nbsp; &nbsp;0</font></div><div><font size="2"   >Hugepagesize: &nbsp; &nbsp; 2048 kB</font></div><p></p></pre></div><div>硬盘 :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >root@AY131219095142824b87Z-&gt; fdisk -l</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Disk /dev/hda: 21.4 GB, 21474836480 bytes</font></div><div><font size="2"   >224 heads, 56 sectors/track, 3343 cylinders</font></div><div><font size="2"   >Units = cylinders of 12544 * 512 = 6422528 bytes</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >&nbsp; &nbsp;Device Boot &nbsp; &nbsp; &nbsp;Start &nbsp; &nbsp; &nbsp; &nbsp; End &nbsp; &nbsp; &nbsp;Blocks &nbsp; Id &nbsp;System</font></div><div><font size="2"   >/dev/hda1 &nbsp; * &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; &nbsp;3343 &nbsp; &nbsp;20967268 &nbsp; 83 &nbsp;Linux</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Disk /dev/xvdb: 21.4 GB, 21474836480 bytes</font></div><div><font size="2"   >224 heads, 56 sectors/track, 3343 cylinders</font></div><div><font size="2"   >Units = cylinders of 12544 * 512 = 6422528 bytes</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Disk /dev/xvdb doesn't contain a valid partition table</font></div><p></p></pre></div><div><br></div><div>/dev/hda的IOPS :　</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@AY131219095142824b87Z-&gt; psql</font></div><div><font size="2"   >psql (9.3.2)</font></div><div><font size="2"   >Type "help" for help.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >postgres=&gt; \q</font></div><div><font size="2"   >postgres@AY131219095142824b87Z-&gt; pg_test_fsync&nbsp;</font></div><div><font size="2"   >5 seconds per test</font></div><div><font size="2"   >O_DIRECT supported on this platform for open_datasync and open_sync.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare file sync methods using one 8kB write:</font></div><div><font size="2"   >(in wal_sync_method preference order, except fdatasync</font></div><div><font size="2"   >is Linux's default)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_datasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fdatasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 454.179 ops/sec &nbsp; &nbsp;2202 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 448.366 ops/sec &nbsp; &nbsp;2230 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync_writethrough &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_sync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 452.859 ops/sec &nbsp; &nbsp;2208 usecs/op</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare file sync methods using two 8kB writes:</font></div><div><font size="2"   >(in wal_sync_method preference order, except fdatasync</font></div><div><font size="2"   >is Linux's default)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_datasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fdatasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 392.615 ops/sec &nbsp; &nbsp;2547 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 395.656 ops/sec &nbsp; &nbsp;2527 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync_writethrough &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_sync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 234.373 ops/sec &nbsp; &nbsp;4267 usecs/op</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare open_sync with different write sizes:</font></div><div><font size="2"   >(This is designed to compare the cost of writing 16kB</font></div><div><font size="2"   >in different write open_sync sizes.)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 * 16kB open_sync write &nbsp; &nbsp; &nbsp; &nbsp; 421.139 ops/sec &nbsp; &nbsp;2375 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2 * &nbsp;8kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp;235.940 ops/sec &nbsp; &nbsp;4238 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4 * &nbsp;4kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp;117.348 ops/sec &nbsp; &nbsp;8522 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8 * &nbsp;2kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; 61.815 ops/sec &nbsp; 16177 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 16 * &nbsp;1kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; 31.403 ops/sec &nbsp; 31844 usecs/op</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Test if fsync on non-write file descriptor is honored:</font></div><div><font size="2"   >(If the times are similar, fsync() can sync data written</font></div><div><font size="2"   >on a different descriptor.)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write, fsync, close &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 424.891 ops/sec &nbsp; &nbsp;2354 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write, close, fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 453.739 ops/sec &nbsp; &nbsp;2204 usecs/op</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Non-Sync'ed 8kB writes:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 227673.843 ops/sec &nbsp; &nbsp; &nbsp; 4 usecs/op</font></div><p></p></pre></div><div><br></div><div>/dev/xvdb的iops :&nbsp;</div><div><pre class="prettyprint"   ><p></p><div><font size="2"   >postgres@AY131219095142824b87Z-&gt; pg_test_fsync&nbsp;</font></div><div><font size="2"   >5 seconds per test</font></div><div><font size="2"   >O_DIRECT supported on this platform for open_datasync and open_sync.</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare file sync methods using one 8kB write:</font></div><div><font size="2"   >(in wal_sync_method preference order, except fdatasync</font></div><div><font size="2"   >is Linux's default)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_datasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fdatasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 482.133 ops/sec &nbsp; &nbsp;2074 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 156.732 ops/sec &nbsp; &nbsp;6380 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync_writethrough &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_sync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 496.674 ops/sec &nbsp; &nbsp;2013 usecs/op</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare file sync methods using two 8kB writes:</font></div><div><font size="2"   >(in wal_sync_method preference order, except fdatasync</font></div><div><font size="2"   >is Linux's default)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_datasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fdatasync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 431.197 ops/sec &nbsp; &nbsp;2319 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 152.172 ops/sec &nbsp; &nbsp;6572 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; fsync_writethrough &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;n/a</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; open_sync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 244.892 ops/sec &nbsp; &nbsp;4083 usecs/op</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Compare open_sync with different write sizes:</font></div><div><font size="2"   >(This is designed to compare the cost of writing 16kB</font></div><div><font size="2"   >in different write open_sync sizes.)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1 * 16kB open_sync write &nbsp; &nbsp; &nbsp; &nbsp; 410.506 ops/sec &nbsp; &nbsp;2436 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2 * &nbsp;8kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp;248.983 ops/sec &nbsp; &nbsp;4016 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4 * &nbsp;4kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp;126.592 ops/sec &nbsp; &nbsp;7899 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8 * &nbsp;2kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; 65.915 ops/sec &nbsp; 15171 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; 16 * &nbsp;1kB open_sync writes &nbsp; &nbsp; &nbsp; &nbsp; 29.481 ops/sec &nbsp; 33920 usecs/op</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Test if fsync on non-write file descriptor is honored:</font></div><div><font size="2"   >(If the times are similar, fsync() can sync data written</font></div><div><font size="2"   >on a different descriptor.)</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write, fsync, close &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 157.563 ops/sec &nbsp; &nbsp;6347 usecs/op</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write, close, fsync &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 159.763 ops/sec &nbsp; &nbsp;6259 usecs/op</font></div><div><font size="2"   ><br></font></div><div><font size="2"   >Non-Sync'ed 8kB writes:</font></div><div><font size="2"   >&nbsp; &nbsp; &nbsp; &nbsp; write &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 226013.773 ops/sec &nbsp; &nbsp; &nbsp; 4 usecs/op</font></div><p></p></pre></div><div><br></div><div><br></div><wbr>
<a rel="nofollow" href="http://info.flagcounter.com/h9V1"   ><img title="阿里云免费虚拟主机的iops测试 - 德哥@Digoal - PostgreSQL"   src="http://s03.flagcounter.com/count/h9V1/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_0/flags_0/"   alt="Flag Counter"   border="0"   ></a></div>
	</div>
</div>
</body>
</html>