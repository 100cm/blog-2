<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=gbk">
<title>PostgreSQL research</title>
<style type="text/css">
.blogcnt{line-height:160%;font-size:14px;text-align:left;word-wrap:break-word;}
.blogcnt *{line-height:160%;}
.blogcnt p{margin:0 0 10px;}
.blogcnt ul,.nbw-blog ol{margin:5px 0 5px 40px;padding:0}
.blogcnt em{font-style:italic;}
.blogcnt blockquote{font-size:1em;margin:auto 0 auto 35px;}
.blogcnt img{border:0;max-width:100%;}
</style>
</head>
<body style="color:#444444;">
<h1 id="blog-Title"><a href="index.html">PostgreSQL research</a></h1>
<div id="" style="padding:0 20px;">
	<h2 id="">struct use case - linked lists</h2>
	<h5 id="">2012-08-09 20:59:48&nbsp;&nbsp;&nbsp;<a href="http://blog.163.com/digoal@126/blog/static/1638770402012798299811/" target="_blank">查看原文&gt;&gt;</a></h5>
	<div class="" id="" style="padding:0 20px;">
		<div class="blogcnt" style="width:800px;"><div>在说linked list数据结构前, 来想象一个场景。</div><div>假设要设计一个旅游线路，依次游览几个岛屿。如图，</div><div><div><img title="struct use case - linked lists - 德哥@Digoal - The Heart,The World."  alt="struct use case - linked lists - 德哥@Digoal - The Heart,The World."  style="margin:0 10px 0 0;"  src="http://img5.ph.126.net/CSsSLRSo9WVI4RyHm2e6EQ==/6597169822215094165.jpg"  ></div>&nbsp;</div><div>第一种设计思路如下 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >typedef struct {</font></div><div><font size="2"  >&nbsp; char * name;</font></div><div><font size="2"  >&nbsp; char * opens;</font></div><div><font size="2"  >&nbsp; char * closes;</font></div><div><font size="2"  >}</font></div><div><font size="2"  >// 使用数组存储岛屿信息, 行程按照数组下标顺序进行.</font></div><div><font size="2"  >island tour[4];</font></div><p></p></pre></div><div>但是这里有两个明显的问题 :&nbsp;</div><div>1. 扩展性问题, 如果临时改变行程增加游览的岛屿怎么办? 比如现在是游览4个岛屿, 要变成5个.</div><div>2. 灵活性问题, 如果游览的顺序改变怎么办? 那就要做数组的位置交换. 如图 :&nbsp;</div><div><img title="struct use case - linked lists - 德哥@Digoal - The Heart,The World."  alt="struct use case - linked lists - 德哥@Digoal - The Heart,The World."  src="http://img7.ph.126.net/7m6nrpyfaJA6Uhcza4LeQA==/6597490879609471457.jpg"  style="line-height: 22px; margin: 0px 10px 0px 0px;"  > </div><div><br></div><div>那么有没有好的数据结构来解决这两个问题呢?</div><div>当然是有的, 就是这里要谈到的linked list. 也是一种递归结构. 就是结构体中存储了指向当前结构体的指针.</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >typedef struct island {</font></div><div><font size="2"  >&nbsp; char *name;</font></div><div><font size="2"  >&nbsp; char *opens;</font></div><div><font size="2"  >&nbsp; char *closes;</font></div><div><font size="2"  >&nbsp; struct island *next;</font></div><div><font size="2"  >} island;</font></div><p></p></pre></div><div>如图 :&nbsp;</div><div><div><img title="struct use case - linked lists - 德哥@Digoal - The Heart,The World."  alt="struct use case - linked lists - 德哥@Digoal - The Heart,The World."  style="margin:0 10px 0 0;"  src="http://img1.ph.126.net/uBF_Y8oFEFvR4AltEvDFbw==/6597375430889353831.jpg"  ></div>&nbsp;</div><div>代码如下 :&nbsp;</div><div><pre class="prettyprint"  ><p></p><div><font size="2"  >[root@db-172-16-3-150 zzz]# cat g.c</font></div><div><font size="2"  >#include &lt;stdio.h&gt;</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >typedef struct island {</font></div><div><font size="2"  >&nbsp; char *name;</font></div><div><font size="2"  >&nbsp; char *opens;</font></div><div><font size="2"  >&nbsp; char *closes;</font></div><div><font size="2"  >&nbsp; struct island *next;</font></div><div><font size="2"  >} island;</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >void display(island *start)</font></div><div><font size="2"  >{</font></div><div><font size="2"  >&nbsp; island *i = start;</font></div><div><font size="2"  >&nbsp; for (; i != NULL; i = i-&gt;next) {</font></div><div><font size="2"  >&nbsp; &nbsp; fprintf(stdout, "Name: %s open: %s - %s\n", i-&gt;name, i-&gt;opens, i-&gt;closes);</font></div><div><font size="2"  >&nbsp; }</font></div><div><font size="2"  >}</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >int main() {</font></div><div><font size="2"  >&nbsp; island amity = {"Amity", "09:00", "17:00", NULL};</font></div><div><font size="2"  >&nbsp; island craggy = {"Craggy", "09:00", "17:00", NULL};</font></div><div><font size="2"  >&nbsp; island isla_nublar = {"Isla Nublar", "09:00", "17:00", NULL};</font></div><div><font size="2"  >&nbsp; island shutter = {"Shutter", "09:00", "17:00", NULL};</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; amity.next = &amp;craggy;</font></div><div><font size="2"  >&nbsp; craggy.next = &amp;isla_nublar;</font></div><div><font size="2"  >&nbsp; isla_nublar.next = &amp;shutter;</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; // 改变行程, 新增一个浏览岛屿, 放在isia nublar岛屿与shutter之间</font></div><div><font size="2"  >&nbsp; island skull = {"Skull", "09:00", "17:00", NULL};</font></div><div><font size="2"  >&nbsp; isla_nublar.next = &amp;skull;</font></div><div><font size="2"  >&nbsp; skull.next = &amp;shutter;</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >&nbsp; // 显示行程</font></div><div><font size="2"  >&nbsp; display(&amp;amity);</font></div><div><font size="2"  >&nbsp; return 0;</font></div><div><font size="2"  >}</font></div><div><font size="2"  ><br></font></div><div><font size="2"  >执行结果 :&nbsp;</font></div><div><font size="2"  >[root@db-172-16-3-150 zzz]# gcc -O3 -Wall -Wextra -Werror -g ./g.c -o g &amp;&amp; ./g</font></div><div><font size="2"  >Name: Amity open: 09:00 - 17:00</font></div><div><font size="2"  >Name: Craggy open: 09:00 - 17:00</font></div><div><font size="2"  >Name: Isla Nublar open: 09:00 - 17:00</font></div><div><font size="2"  >Name: Skull open: 09:00 - 17:00</font></div><div><font size="2"  >Name: Shutter open: 09:00 - 17:00</font></div><p></p></pre></div><div>【其他数据结构】</div><div><div><img title="struct use case - linked lists - 德哥@Digoal - The Heart,The World."  alt="struct use case - linked lists - 德哥@Digoal - The Heart,The World."  style="margin:0 10px 0 0;"  src="http://img5.ph.126.net/NEJiPVrilG1-NVJl_iBsgA==/6597256683633708085.jpg"  ></div>&nbsp;</div></div>
	</div>
</div>
</body>
</html>